{"version":3,"file":"legacy/vendors-node_modules_webcomponents_shadycss_entrypoints_scoping-shim_js-node_modules_webcompo-1611f4-deepdive-9.1.7.min.js","mappings":"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","sources":["webpack://deepdive/./node_modules/@webcomponents/shadycss/entrypoints/scoping-shim.js","webpack://deepdive/./node_modules/@webcomponents/shadycss/src/apply-shim-utils.js","webpack://deepdive/./node_modules/@webcomponents/shadycss/src/common-regex.js","webpack://deepdive/./node_modules/@webcomponents/shadycss/src/common-utils.js","webpack://deepdive/./node_modules/@webcomponents/shadycss/src/css-parse.js","webpack://deepdive/./node_modules/@webcomponents/shadycss/src/custom-style-interface.js","webpack://deepdive/./node_modules/@webcomponents/shadycss/src/document-wait.js","webpack://deepdive/./node_modules/@webcomponents/shadycss/src/document-watcher.js","webpack://deepdive/./node_modules/@webcomponents/shadycss/src/scoping-shim.js","webpack://deepdive/./node_modules/@webcomponents/shadycss/src/style-cache.js","webpack://deepdive/./node_modules/@webcomponents/shadycss/src/style-info.js","webpack://deepdive/./node_modules/@webcomponents/shadycss/src/style-placeholder.js","webpack://deepdive/./node_modules/@webcomponents/shadycss/src/style-properties.js","webpack://deepdive/./node_modules/@webcomponents/shadycss/src/style-settings.js","webpack://deepdive/./node_modules/@webcomponents/shadycss/src/style-transformer.js","webpack://deepdive/./node_modules/@webcomponents/shadycss/src/style-util.js","webpack://deepdive/./node_modules/@webcomponents/shadycss/src/template-map.js","webpack://deepdive/./node_modules/@webcomponents/shadycss/src/unscoped-style-handler.js","webpack://deepdive/src/shady-data.js","webpack://deepdive/ [synthetic:es6/util/arrayiterator] ","webpack://deepdive/ [synthetic:es6/util/makeiterator] ","webpack://deepdive/ [synthetic:es6/util/arrayfromiterable] ","webpack://deepdive/ [synthetic:es6/util/arrayfromiterator] ","webpack://deepdive/ [synthetic:util/global] ","webpack://deepdive/src/utils.js","webpack://deepdive/src/patch-native.js","webpack://deepdive/src/flush.js","webpack://deepdive/src/observe-changes.js","webpack://deepdive/src/innerHTML.js","webpack://deepdive/src/patch-instances.js","webpack://deepdive/src/patch-events.js","webpack://deepdive/src/array-splice.js","webpack://deepdive/src/patches/EventTarget.js","webpack://deepdive/src/style-scoping.js","webpack://deepdive/src/patches/Node.js","webpack://deepdive/src/attach-shadow.js","webpack://deepdive/src/patches/Slotable.js","webpack://deepdive/src/selector-parser.js","webpack://deepdive/src/patches/ParentNode.js","webpack://deepdive/src/patches/ChildNode.js","webpack://deepdive/src/patches/Element.js","webpack://deepdive/src/patches/ElementOrShadowRoot.js","webpack://deepdive/src/patches/HTMLElement.js","webpack://deepdive/src/patches/Slot.js","webpack://deepdive/src/patches/DocumentOrFragment.js","webpack://deepdive/src/patches/DocumentOrShadowRoot.js","webpack://deepdive/src/patches/Document.js","webpack://deepdive/src/patches/Window.js","webpack://deepdive/src/patch-prototypes.js","webpack://deepdive/src/link-nodes.js","webpack://deepdive/src/patches/ShadowRoot.js","webpack://deepdive/src/patch-shadyRoot.js","webpack://deepdive/src/wrapper.js","webpack://deepdive/src/shadydom.js"],"sourcesContent":["/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\n\nimport ScopingShim from '../src/scoping-shim.js';\n// prettier-ignore\nimport {nativeCssVariables, nativeShadow, cssBuild, disableRuntime} from '../src/style-settings.js';\n\n/** @const {ScopingShim} */\nconst scopingShim = new ScopingShim();\n\nlet ApplyShim, CustomStyleInterface;\n\nif (window['ShadyCSS']) {\n  ApplyShim = window['ShadyCSS']['ApplyShim'];\n  CustomStyleInterface = window['ShadyCSS']['CustomStyleInterface'];\n}\n\nwindow.ShadyCSS = {\n  ScopingShim: scopingShim,\n  /**\n   * @param {!HTMLTemplateElement} template\n   * @param {string} elementName\n   * @param {string=} elementExtends\n   */\n  prepareTemplate(template, elementName, elementExtends) {\n    scopingShim.flushCustomStyles();\n    scopingShim.prepareTemplate(template, elementName, elementExtends);\n  },\n\n  /**\n   * @param {!HTMLTemplateElement} template\n   * @param {string} elementName\n   */\n  prepareTemplateDom(template, elementName) {\n    scopingShim.prepareTemplateDom(template, elementName);\n  },\n\n  /**\n   * @param {!HTMLTemplateElement} template\n   * @param {string} elementName\n   * @param {string=} elementExtends\n   */\n  prepareTemplateStyles(template, elementName, elementExtends) {\n    scopingShim.flushCustomStyles();\n    scopingShim.prepareTemplateStyles(template, elementName, elementExtends);\n  },\n  /**\n   * @param {!HTMLElement} element\n   * @param {Object=} properties\n   */\n  styleSubtree(element, properties) {\n    scopingShim.flushCustomStyles();\n    scopingShim.styleSubtree(element, properties);\n  },\n\n  /**\n   * @param {!HTMLElement} element\n   */\n  styleElement(element) {\n    scopingShim.flushCustomStyles();\n    scopingShim.styleElement(element);\n  },\n\n  /**\n   * @param {Object=} properties\n   */\n  styleDocument(properties) {\n    scopingShim.flushCustomStyles();\n    scopingShim.styleDocument(properties);\n  },\n\n  flushCustomStyles() {\n    scopingShim.flushCustomStyles();\n  },\n\n  /**\n   * @param {Element} element\n   * @param {string} property\n   * @return {string}\n   */\n  getComputedStyleValue(element, property) {\n    return scopingShim.getComputedStyleValue(element, property);\n  },\n\n  nativeCss: nativeCssVariables,\n\n  nativeShadow: nativeShadow,\n\n  cssBuild: cssBuild,\n\n  disableRuntime: disableRuntime,\n};\n\nif (ApplyShim) {\n  window.ShadyCSS.ApplyShim = ApplyShim;\n}\n\nif (CustomStyleInterface) {\n  window.ShadyCSS.CustomStyleInterface = CustomStyleInterface;\n}\n","/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\nimport templateMap from './template-map.js';\nimport {StyleNode} from './css-parse.js'; // eslint-disable-line @typescript-eslint/no-unused-vars\n\n/*\n * Utilities for handling invalidating apply-shim mixins for a given template.\n *\n * The invalidation strategy involves keeping track of the \"current\" version of a template's mixins, and updating that count when a mixin is invalidated.\n * The template\n */\n\n/** @const {string} */\nconst CURRENT_VERSION = '_applyShimCurrentVersion';\n\n/** @const {string} */\nconst NEXT_VERSION = '_applyShimNextVersion';\n\n/** @const {string} */\nconst VALIDATING_VERSION = '_applyShimValidatingVersion';\n\n/**\n * @const {Promise<void>}\n */\nconst promise = Promise.resolve();\n\n/**\n * @param {string} elementName\n */\nexport function invalidate(elementName) {\n  let template = templateMap[elementName];\n  if (template) {\n    invalidateTemplate(template);\n  }\n}\n\n/**\n * This function can be called multiple times to mark a template invalid\n * and signal that the style inside must be regenerated.\n *\n * Use `startValidatingTemplate` to begin an asynchronous validation cycle.\n * During that cycle, call `templateIsValidating` to see if the template must\n * be revalidated\n * @param {HTMLTemplateElement} template\n */\nexport function invalidateTemplate(template) {\n  // default the current version to 0\n  template[CURRENT_VERSION] = template[CURRENT_VERSION] || 0;\n  // ensure the \"validating for\" flag exists\n  template[VALIDATING_VERSION] = template[VALIDATING_VERSION] || 0;\n  // increment the next version\n  template[NEXT_VERSION] = (template[NEXT_VERSION] || 0) + 1;\n}\n\n/**\n * @param {string} elementName\n * @return {boolean}\n */\nexport function isValid(elementName) {\n  let template = templateMap[elementName];\n  if (template) {\n    return templateIsValid(template);\n  }\n  return true;\n}\n\n/**\n * @param {HTMLTemplateElement} template\n * @return {boolean}\n */\nexport function templateIsValid(template) {\n  return template[CURRENT_VERSION] === template[NEXT_VERSION];\n}\n\n/**\n * @param {string} elementName\n * @return {boolean}\n */\nexport function isValidating(elementName) {\n  let template = templateMap[elementName];\n  if (template) {\n    return templateIsValidating(template);\n  }\n  return false;\n}\n\n/**\n * Returns true if the template is currently invalid and `startValidating` has been called since the last invalidation.\n * If false, the template must be validated.\n * @param {HTMLTemplateElement} template\n * @return {boolean}\n */\nexport function templateIsValidating(template) {\n  return (\n    !templateIsValid(template) &&\n    template[VALIDATING_VERSION] === template[NEXT_VERSION]\n  );\n}\n\n/**\n * the template is marked as `validating` for one microtask so that all instances\n * found in the tree crawl of `applyStyle` will update themselves,\n * but the template will only be updated once.\n * @param {string} elementName\n */\nexport function startValidating(elementName) {\n  let template = templateMap[elementName];\n  startValidatingTemplate(template);\n}\n\n/**\n * Begin an asynchronous invalidation cycle.\n * This should be called after every validation of a template\n *\n * After one microtask, the template will be marked as valid until the next call to `invalidateTemplate`\n * @param {HTMLTemplateElement} template\n */\nexport function startValidatingTemplate(template) {\n  // remember that the current \"next version\" is the reason for this validation cycle\n  template[VALIDATING_VERSION] = template[NEXT_VERSION];\n  // however, there only needs to be one async task to clear the counters\n  if (!template._validating) {\n    template._validating = true;\n    promise.then(function () {\n      // sync the current version to let future invalidations cause a refresh cycle\n      template[CURRENT_VERSION] = template[NEXT_VERSION];\n      template._validating = false;\n    });\n  }\n}\n\n/**\n * @return {boolean}\n */\nexport function elementsAreInvalid() {\n  for (let elementName in templateMap) {\n    let template = templateMap[elementName];\n    if (!templateIsValid(template)) {\n      return true;\n    }\n  }\n  return false;\n}\n","/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nexport const VAR_ASSIGN = /(?:^|[;\\s{]\\s*)(--[\\w-]*?)\\s*:\\s*(?:((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^)]*?\\)|[^};{])+)|\\{([^}]*)\\}(?:(?=[;\\s}])|$))/gi;\nexport const MIXIN_MATCH = /(?:^|\\W+)@apply\\s*\\(?([^);\\n]*)\\)?/gi;\nexport const VAR_CONSUMED = /(--[\\w-]+)\\s*([:,;)]|$)/gi;\nexport const ANIMATION_MATCH = /(animation\\s*:)|(animation-name\\s*:)/;\nexport const MEDIA_MATCH = /@media\\s(.*)/;\nexport const IS_VAR = /^--/;\nexport const BRACKETED = /\\{[^}]*\\}/g;\nexport const HOST_PREFIX = '(?:^|[^.#[:])';\nexport const HOST_SUFFIX = '($|[.:[\\\\s>+~])';\n","/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\n\nimport {MIXIN_MATCH, VAR_ASSIGN} from './common-regex.js';\n\n/**\n * @param {Element} element\n * @param {Object=} properties\n */\nexport function updateNativeProperties(element, properties) {\n  // remove previous properties\n  for (let p in properties) {\n    // NOTE: for bc with shim, don't apply null values.\n    if (p === null) {\n      element.style.removeProperty(p);\n    } else {\n      element.style.setProperty(p, properties[p]);\n    }\n  }\n}\n\n/**\n * @param {Element} element\n * @param {string} property\n * @return {string}\n */\nexport function getComputedStyleValue(element, property) {\n  /**\n   * @const {string}\n   */\n  const value = window.getComputedStyle(element).getPropertyValue(property);\n  if (!value) {\n    return '';\n  } else {\n    return value.trim();\n  }\n}\n\n/**\n * return true if `cssText` contains a mixin definition or consumption\n * @param {string} cssText\n * @return {boolean}\n */\nexport function detectMixin(cssText) {\n  const has = MIXIN_MATCH.test(cssText) || VAR_ASSIGN.test(cssText);\n  // reset state of the regexes\n  MIXIN_MATCH.lastIndex = 0;\n  VAR_ASSIGN.lastIndex = 0;\n  return has;\n}\n","/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n/*\nExtremely simple css parser. Intended to be not more than what we need\nand definitely not necessarily correct =).\n*/\n\n'use strict';\n\n/** @unrestricted */\nclass StyleNode {\n  constructor() {\n    /** @type {number} */\n    this['start'] = 0;\n    /** @type {number} */\n    this['end'] = 0;\n    /** @type {StyleNode} */\n    this['previous'] = null;\n    /** @type {StyleNode} */\n    this['parent'] = null;\n    /** @type {Array<StyleNode>} */\n    this['rules'] = null;\n    /** @type {string} */\n    this['parsedCssText'] = '';\n    /** @type {string} */\n    this['cssText'] = '';\n    /** @type {boolean} */\n    this['atRule'] = false;\n    /** @type {number} */\n    this['type'] = 0;\n    /** @type {string} */\n    this['keyframesName'] = '';\n    /** @type {string} */\n    this['selector'] = '';\n    /** @type {string} */\n    this['parsedSelector'] = '';\n  }\n}\n\nexport {StyleNode};\n\n// given a string of css, return a simple rule tree\n/**\n * @param {string} text\n * @return {StyleNode}\n */\nexport function parse(text) {\n  text = clean(text);\n  return parseCss(lex(text), text);\n}\n\n// remove stuff we don't care about that may hinder parsing\n/**\n * @param {string} cssText\n * @return {string}\n */\nfunction clean(cssText) {\n  return cssText.replace(RX.comments, '').replace(RX.port, '');\n}\n\n// super simple {...} lexer that returns a node tree\n/**\n * @param {string} text\n * @return {!StyleNode}\n */\nfunction lex(text) {\n  let root = new StyleNode();\n  root['start'] = 0;\n  root['end'] = text.length;\n  let n = root;\n  for (let i = 0, l = text.length; i < l; i++) {\n    if (text[i] === OPEN_BRACE) {\n      if (!n['rules']) {\n        n['rules'] = [];\n      }\n      let p = n;\n      let previous = p['rules'][p['rules'].length - 1] || null;\n      n = new StyleNode();\n      n['start'] = i + 1;\n      n['parent'] = p;\n      n['previous'] = previous;\n      p['rules'].push(n);\n    } else if (text[i] === CLOSE_BRACE) {\n      n['end'] = i + 1;\n      n = n['parent'] || root;\n    }\n  }\n  return root;\n}\n\n// add selectors/cssText to node tree\n/**\n * @param {StyleNode} node\n * @param {string} text\n * @return {!StyleNode}\n */\nfunction parseCss(node, text) {\n  let t = text.substring(node['start'], node['end'] - 1);\n  node['parsedCssText'] = node['cssText'] = t.trim();\n  if (node['parent']) {\n    let ss = node['previous']\n      ? node['previous']['end']\n      : node['parent']['start'];\n    t = text.substring(ss, node['start'] - 1);\n    t = _expandUnicodeEscapes(t);\n    t = t.replace(RX.multipleSpaces, ' ');\n    // TODO(sorvell): ad hoc; make selector include only after last ;\n    // helps with mixin syntax\n    t = t.substring(t.lastIndexOf(';') + 1);\n    let s = (node['parsedSelector'] = node['selector'] = t.trim());\n    node['atRule'] = s.indexOf(AT_START) === 0;\n    // note, support a subset of rule types...\n    if (node['atRule']) {\n      if (s.indexOf(MEDIA_START) === 0) {\n        node['type'] = types.MEDIA_RULE;\n      } else if (s.match(RX.keyframesRule)) {\n        node['type'] = types.KEYFRAMES_RULE;\n        node['keyframesName'] = node['selector'].split(RX.multipleSpaces).pop();\n      }\n    } else {\n      if (s.indexOf(VAR_START) === 0) {\n        node['type'] = types.MIXIN_RULE;\n      } else {\n        node['type'] = types.STYLE_RULE;\n      }\n    }\n  }\n  let r$ = node['rules'];\n  if (r$) {\n    for (let i = 0, l = r$.length, r; i < l && (r = r$[i]); i++) {\n      parseCss(r, text);\n    }\n  }\n  return node;\n}\n\n/**\n * conversion of sort unicode escapes with spaces like `\\33 ` (and longer) into\n * expanded form that doesn't require trailing space `\\000033`\n * @param {string} s\n * @return {string}\n */\nfunction _expandUnicodeEscapes(s) {\n  return s.replace(/\\\\([0-9a-f]{1,6})\\s/gi, function () {\n    let code = arguments[1],\n      repeat = 6 - code.length;\n    while (repeat--) {\n      code = '0' + code;\n    }\n    return '\\\\' + code;\n  });\n}\n\n/**\n * stringify parsed css.\n * @param {StyleNode} node\n * @param {boolean=} preserveProperties\n * @param {string=} text\n * @return {string}\n */\nexport function stringify(node, preserveProperties, text = '') {\n  // calc rule cssText\n  let cssText = '';\n  if (node['cssText'] || node['rules']) {\n    let r$ = node['rules'];\n    if (r$ && !_hasMixinRules(r$)) {\n      for (let i = 0, l = r$.length, r; i < l && (r = r$[i]); i++) {\n        cssText = stringify(r, preserveProperties, cssText);\n      }\n    } else {\n      cssText = preserveProperties\n        ? node['cssText']\n        : removeCustomProps(node['cssText']);\n      cssText = cssText.trim();\n      if (cssText) {\n        cssText = '  ' + cssText + '\\n';\n      }\n    }\n  }\n  // emit rule if there is cssText\n  if (cssText) {\n    if (node['selector']) {\n      text += node['selector'] + ' ' + OPEN_BRACE + '\\n';\n    }\n    text += cssText;\n    if (node['selector']) {\n      text += CLOSE_BRACE + '\\n\\n';\n    }\n  }\n  return text;\n}\n\n/**\n * @param {Array<StyleNode>} rules\n * @return {boolean}\n */\nfunction _hasMixinRules(rules) {\n  let r = rules[0];\n  return (\n    Boolean(r) &&\n    Boolean(r['selector']) &&\n    r['selector'].indexOf(VAR_START) === 0\n  );\n}\n\n/**\n * @param {string} cssText\n * @return {string}\n */\nfunction removeCustomProps(cssText) {\n  cssText = removeCustomPropAssignment(cssText);\n  return removeCustomPropApply(cssText);\n}\n\n/**\n * @param {string} cssText\n * @return {string}\n */\nexport function removeCustomPropAssignment(cssText) {\n  return cssText.replace(RX.customProp, '').replace(RX.mixinProp, '');\n}\n\n/**\n * @param {string} cssText\n * @return {string}\n */\nfunction removeCustomPropApply(cssText) {\n  return cssText.replace(RX.mixinApply, '').replace(RX.varApply, '');\n}\n\n/** @enum {number} */\nexport const types = {\n  STYLE_RULE: 1,\n  KEYFRAMES_RULE: 7,\n  MEDIA_RULE: 4,\n  MIXIN_RULE: 1000,\n};\n\nconst OPEN_BRACE = '{';\nconst CLOSE_BRACE = '}';\n\n// helper regexp's\nconst RX = {\n  comments: /\\/\\*[^*]*\\*+([^/*][^*]*\\*+)*\\//gim,\n  port: /@import[^;]*;/gim,\n  customProp: /(?:^[^;\\-\\s}]+)?--[^;{}]*?:[^{};]*?(?:[;\\n]|$)/gim,\n  mixinProp: /(?:^[^;\\-\\s}]+)?--[^;{}]*?:[^{};]*?{[^}]*?}(?:[;\\n]|$)?/gim,\n  mixinApply: /@apply\\s*\\(?[^);]*\\)?\\s*(?:[;\\n]|$)?/gim,\n  varApply: /[^;:]*?:[^;]*?var\\([^;]*\\)(?:[;\\n]|$)?/gim,\n  keyframesRule: /^@[^\\s]*keyframes/,\n  multipleSpaces: /\\s+/g,\n};\n\nconst VAR_START = '--';\nconst MEDIA_START = '@media';\nconst AT_START = '@';\n","/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\n\nimport documentWait from './document-wait.js';\n\n/**\n * @typedef {HTMLStyleElement | {getStyle: function():HTMLStyleElement}}\n */\nexport let CustomStyleProvider;\n\nconst SEEN_MARKER = '__seenByShadyCSS';\nconst CACHED_STYLE = '__shadyCSSCachedStyle';\n\n/** @type {?function(!HTMLStyleElement)} */\nlet transformFn = null;\n\n/** @type {?function()} */\nlet validateFn = null;\n\n/**\nThis interface is provided to add document-level <style> elements to ShadyCSS for processing.\nThese styles must be processed by ShadyCSS to simulate ShadowRoot upper-bound encapsulation from outside styles\nIn addition, these styles may also need to be processed for @apply rules and CSS Custom Properties\n\nTo add document-level styles to ShadyCSS, one can call `ShadyCSS.addDocumentStyle(styleElement)` or `ShadyCSS.addDocumentStyle({getStyle: () => styleElement})`\n\nIn addition, if the process used to discover document-level styles can be synchronously flushed, one should set `ShadyCSS.documentStyleFlush`.\nThis function will be called when calculating styles.\n\nAn example usage of the document-level styling api can be found in `examples/document-style-lib.js`\n\n@unrestricted\n*/\nexport default class CustomStyleInterface {\n  constructor() {\n    /** @type {!Array<!CustomStyleProvider>} */\n    this['customStyles'] = [];\n    this['enqueued'] = false;\n    // NOTE(dfreedm): use quotes here to prevent closure inlining to `function(){}`;\n    documentWait(() => {\n      if (window['ShadyCSS']['flushCustomStyles']) {\n        window['ShadyCSS']['flushCustomStyles']();\n      }\n    });\n  }\n  /**\n   * Queue a validation for new custom styles to batch style recalculations\n   */\n  enqueueDocumentValidation() {\n    if (this['enqueued'] || !validateFn) {\n      return;\n    }\n    this['enqueued'] = true;\n    documentWait(validateFn);\n  }\n  /**\n   * @param {!HTMLStyleElement} style\n   */\n  addCustomStyle(style) {\n    if (!style[SEEN_MARKER]) {\n      style[SEEN_MARKER] = true;\n      this['customStyles'].push(style);\n      this.enqueueDocumentValidation();\n    }\n  }\n  /**\n   * @param {!CustomStyleProvider} customStyle\n   * @return {HTMLStyleElement}\n   */\n  getStyleForCustomStyle(customStyle) {\n    if (customStyle[CACHED_STYLE]) {\n      return customStyle[CACHED_STYLE];\n    }\n    let style;\n    if (customStyle['getStyle']) {\n      style = customStyle['getStyle']();\n    } else {\n      style = customStyle;\n    }\n    return style;\n  }\n  /**\n   * @return {!Array<!CustomStyleProvider>}\n   */\n  processStyles() {\n    const cs = this['customStyles'];\n    for (let i = 0; i < cs.length; i++) {\n      const customStyle = cs[i];\n      if (customStyle[CACHED_STYLE]) {\n        continue;\n      }\n      const style = this.getStyleForCustomStyle(customStyle);\n      if (style) {\n        // HTMLImports polyfill may have cloned the style into the main document,\n        // which is referenced with __appliedElement.\n        const styleToTransform = /** @type {!HTMLStyleElement} */ (style[\n          '__appliedElement'\n        ] || style);\n        if (transformFn) {\n          transformFn(styleToTransform);\n        }\n        customStyle[CACHED_STYLE] = styleToTransform;\n      }\n    }\n    return cs;\n  }\n}\n\n/* eslint-disable no-self-assign */\nCustomStyleInterface.prototype['addCustomStyle'] =\n  CustomStyleInterface.prototype.addCustomStyle;\nCustomStyleInterface.prototype['getStyleForCustomStyle'] =\n  CustomStyleInterface.prototype.getStyleForCustomStyle;\nCustomStyleInterface.prototype['processStyles'] =\n  CustomStyleInterface.prototype.processStyles;\n/* eslint-enable no-self-assign */\n\nObject.defineProperties(CustomStyleInterface.prototype, {\n  'transformCallback': {\n    /** @return {?function(!HTMLStyleElement)} */\n    get() {\n      return transformFn;\n    },\n    /** @param {?function(!HTMLStyleElement)} fn */\n    set(fn) {\n      transformFn = fn;\n    },\n  },\n  'validateCallback': {\n    /** @return {?function()} */\n    get() {\n      return validateFn;\n    },\n    /**\n     * @param {?function()} fn\n     * @this {CustomStyleInterface}\n     */\n    set(fn) {\n      let needsEnqueue = false;\n      if (!validateFn) {\n        needsEnqueue = true;\n      }\n      validateFn = fn;\n      if (needsEnqueue) {\n        this.enqueueDocumentValidation();\n      }\n    },\n  },\n});\n\n/** @typedef {{\n * customStyles: !Array<!CustomStyleProvider>,\n * addCustomStyle: function(!CustomStyleProvider),\n * getStyleForCustomStyle: function(!CustomStyleProvider): HTMLStyleElement,\n * findStyles: function(),\n * transformCallback: ?function(!HTMLStyleElement),\n * validateCallback: ?function()\n * }}\n */\nexport const CustomStyleInterfaceInterface = {};\n","/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\n\n/** @type {Promise<void>} */\nlet readyPromise = null;\n\n/** @type {?function(?function())} */\nlet whenReady =\n  (window['HTMLImports'] && window['HTMLImports']['whenReady']) || null;\n\n/** @type {function()} */\nlet resolveFn;\n\n/**\n * @param {?function()} callback\n */\nexport default function documentWait(callback) {\n  requestAnimationFrame(function () {\n    if (whenReady) {\n      whenReady(callback);\n    } else {\n      if (!readyPromise) {\n        readyPromise = new Promise((resolve) => {\n          resolveFn = resolve;\n        });\n        if (document.readyState === 'complete') {\n          resolveFn();\n        } else {\n          document.addEventListener('readystatechange', () => {\n            if (document.readyState === 'complete') {\n              resolveFn();\n            }\n          });\n        }\n      }\n      readyPromise.then(function () {\n        callback && callback();\n      });\n    }\n  });\n}\n","/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\n\nimport {nativeShadow} from './style-settings.js';\nimport StyleTransformer from './style-transformer.js';\nimport {getIsExtends, elementHasBuiltCss, wrap} from './style-util.js';\n\nexport let flush = function () {};\n\n/**\n * @param {!Element} element\n * @return {string}\n */\nfunction getClasses(element) {\n  if (element.classList && element.classList.value) {\n    return element.classList.value;\n  } else {\n    // NOTE: className is patched to remove scoping classes in ShadyDOM\n    // use getAttribute('class') instead, which is unpatched\n    return element.getAttribute('class') || '';\n  }\n}\n\nconst scopeRegExp = new RegExp(`${StyleTransformer.SCOPE_NAME}\\\\s*([^\\\\s]*)`);\n\n/**\n * @param {!Element} element\n * @return {string}\n */\nexport function getCurrentScope(element) {\n  const match = getClasses(element).match(scopeRegExp);\n  if (match) {\n    return match[1];\n  } else {\n    return '';\n  }\n}\n\n/**\n * @param {!Node} node\n */\nexport function getOwnerScope(node) {\n  const ownerRoot = wrap(node).getRootNode();\n  if (ownerRoot === node || ownerRoot === node.ownerDocument) {\n    return '';\n  }\n  const host = /** @type {!ShadowRoot} */ (ownerRoot).host;\n  if (!host) {\n    // this may actually be a document fragment\n    return '';\n  }\n  return getIsExtends(host).is;\n}\n\n/**\n * @param {!Element} element\n */\nexport function ensureCorrectScope(element) {\n  const currentScope = getCurrentScope(element);\n  const ownerRoot = wrap(element).getRootNode();\n  if (ownerRoot === element) {\n    return;\n  }\n  if (currentScope && ownerRoot === element.ownerDocument) {\n    // node was scoped, but now is in document\n    StyleTransformer.domRemoveScope(element, currentScope);\n  } else if (ownerRoot instanceof ShadowRoot) {\n    const ownerScope = getOwnerScope(element);\n    if (ownerScope !== currentScope) {\n      // node was scoped, but not by its current owner\n      StyleTransformer.domReplaceScope(element, currentScope, ownerScope);\n    }\n  }\n}\n\n/**\n * @param {!HTMLElement|!HTMLDocument} element\n */\nexport function ensureCorrectSubtreeScoping(element) {\n  // find unscoped subtree nodes\n  const unscopedNodes = window['ShadyDOM']['nativeMethods'][\n    'querySelectorAll'\n  ].call(element, `:not(.${StyleTransformer.SCOPE_NAME})`);\n\n  for (let j = 0; j < unscopedNodes.length; j++) {\n    // it's possible, during large batch inserts, that nodes that aren't\n    // scoped within the current scope were added.\n    // To make sure that any unscoped nodes that were inserted in the current batch are correctly styled,\n    // query all unscoped nodes and force their style-scope to be applied.\n    // This could happen if a sub-element appended an unscoped node in its shadowroot and this function\n    // runs on a parent element of the host of that unscoped node:\n    // parent-element -> element -> unscoped node\n    // Here unscoped node should have the style-scope element, not parent-element.\n    const unscopedNode = unscopedNodes[j];\n    const scopeForPreviouslyUnscopedNode = getOwnerScope(unscopedNode);\n    if (scopeForPreviouslyUnscopedNode) {\n      StyleTransformer.element(unscopedNode, scopeForPreviouslyUnscopedNode);\n    }\n  }\n}\n\n/**\n * @param {HTMLElement} el\n * @return {boolean}\n */\nfunction isElementWithBuiltCss(el) {\n  if (el.localName === 'style' || el.localName === 'template') {\n    return elementHasBuiltCss(el);\n  }\n  return false;\n}\n\n/**\n * @param {Array<MutationRecord|null>|null} mxns\n */\nfunction handler(mxns) {\n  for (let x = 0; x < mxns.length; x++) {\n    let mxn = mxns[x];\n    if (\n      mxn.target === document.documentElement ||\n      mxn.target === document.head\n    ) {\n      continue;\n    }\n    for (let i = 0; i < mxn.addedNodes.length; i++) {\n      let n = mxn.addedNodes[i];\n      if (n.nodeType !== Node.ELEMENT_NODE) {\n        continue;\n      }\n      n = /** @type {HTMLElement} */ (n); // eslint-disable-line no-self-assign\n      let root = n.getRootNode();\n      let currentScope = getCurrentScope(n);\n      // node was scoped, but now is in document\n      // If this element has built css, we must not remove scoping as this node\n      // will be used as a template or style without re - applying scoping as an optimization\n      if (\n        currentScope &&\n        root === n.ownerDocument &&\n        !isElementWithBuiltCss(n)\n      ) {\n        StyleTransformer.domRemoveScope(n, currentScope);\n      } else if (root instanceof ShadowRoot) {\n        const newScope = getOwnerScope(n);\n        // rescope current node and subtree if necessary\n        if (newScope !== currentScope) {\n          StyleTransformer.domReplaceScope(n, currentScope, newScope);\n        }\n        // make sure all the subtree elements are scoped correctly\n        ensureCorrectSubtreeScoping(n);\n      }\n    }\n  }\n}\n\n// if native Shadow DOM is being used, or ShadyDOM handles dynamic scoiping, do not activate the MutationObserver\nif (\n  !nativeShadow &&\n  !(window['ShadyDOM'] && window['ShadyDOM']['handlesDynamicScoping'])\n) {\n  let observer = new MutationObserver(handler);\n  let start = (node) => {\n    observer.observe(node, {childList: true, subtree: true});\n  };\n  let nativeCustomElements =\n    window['customElements'] &&\n    !window['customElements']['polyfillWrapFlushCallback'];\n  // need to start immediately with native custom elements\n  // TODO(dfreedm): with polyfilled HTMLImports and native custom elements\n  // excessive mutations may be observed; this can be optimized via cooperation\n  // with the HTMLImports polyfill.\n  if (nativeCustomElements) {\n    start(document);\n  } else {\n    let delayedStart = () => {\n      start(document.body);\n    };\n    // use polyfill timing if it's available\n    if (window['HTMLImports']) {\n      window['HTMLImports']['whenReady'](delayedStart);\n      // otherwise push beyond native imports being ready\n      // which requires RAF + readystate interactive.\n    } else {\n      requestAnimationFrame(function () {\n        if (document.readyState === 'loading') {\n          let listener = function () {\n            delayedStart();\n            document.removeEventListener('readystatechange', listener);\n          };\n          document.addEventListener('readystatechange', listener);\n        } else {\n          delayedStart();\n        }\n      });\n    }\n  }\n\n  flush = function () {\n    handler(observer.takeRecords());\n  };\n}\n","/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\n\nimport {parse, StyleNode} from './css-parse.js';\n// prettier-ignore\nimport {nativeShadow, nativeCssVariables, disableRuntime} from './style-settings.js';\nimport StyleTransformer from './style-transformer.js';\nimport * as StyleUtil from './style-util.js';\nimport StyleProperties from './style-properties.js';\n// prettier-ignore\nimport {ensureStylePlaceholder, getStylePlaceholder} from './style-placeholder.js';\nimport StyleInfo from './style-info.js';\nimport StyleCache from './style-cache.js';\n// prettier-ignore\nimport {flush as watcherFlush, getOwnerScope, getCurrentScope} from './document-watcher.js';\nimport templateMap from './template-map.js';\nimport * as ApplyShimUtils from './apply-shim-utils.js';\nimport {updateNativeProperties, detectMixin} from './common-utils.js';\n// prettier-ignore\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nimport {CustomStyleInterfaceInterface, CustomStyleProvider} from './custom-style-interface.js';\n\n/** @type {!Object<string, string>} */\nconst adoptedCssTextMap = {};\n\n/**\n * @const {StyleCache}\n */\nconst styleCache = new StyleCache();\n\nexport default class ScopingShim {\n  constructor() {\n    this._scopeCounter = {};\n    this._documentOwner = /** @type {!HTMLElement} */ (document.documentElement);\n    let ast = new StyleNode();\n    ast['rules'] = [];\n    this._documentOwnerStyleInfo = StyleInfo.set(\n      this._documentOwner,\n      new StyleInfo(ast)\n    );\n    this._elementsHaveApplied = false;\n    /** @type {?Object} */\n    this._applyShim = null;\n    /** @type {?CustomStyleInterfaceInterface} */\n    this._customStyleInterface = null;\n  }\n  flush() {\n    watcherFlush();\n  }\n  _generateScopeSelector(name) {\n    let id = (this._scopeCounter[name] = (this._scopeCounter[name] || 0) + 1);\n    return `${name}-${id}`;\n  }\n  getStyleAst(style) {\n    return StyleUtil.rulesForStyle(style);\n  }\n  styleAstToString(ast) {\n    return StyleUtil.toCssText(ast);\n  }\n  _gatherStyles(template) {\n    return StyleUtil.gatherStyleText(template.content);\n  }\n  /**\n   * Prepare the styling and template for the given element type\n   *\n   * @param {!HTMLTemplateElement} template\n   * @param {string} elementName\n   * @param {string=} typeExtension\n   */\n  prepareTemplate(template, elementName, typeExtension) {\n    this.prepareTemplateDom(template, elementName);\n    this.prepareTemplateStyles(template, elementName, typeExtension);\n  }\n  /**\n   * Prepare styling for the given element type\n   * @param {!HTMLTemplateElement} template\n   * @param {string} elementName\n   * @param {string=} typeExtension\n   */\n  prepareTemplateStyles(template, elementName, typeExtension) {\n    if (template._prepared || disableRuntime) {\n      return;\n    }\n    // style placeholders are only used when ShadyDOM is active\n    if (!nativeShadow) {\n      ensureStylePlaceholder(elementName);\n    }\n    template._prepared = true;\n    template.name = elementName;\n    template.extends = typeExtension;\n    templateMap[elementName] = template;\n    let cssBuild = StyleUtil.getCssBuild(template);\n    const optimalBuild = StyleUtil.isOptimalCssBuild(cssBuild);\n    let info = {\n      is: elementName,\n      extends: typeExtension,\n    };\n    let cssText =\n      this._gatherStyles(template) + (adoptedCssTextMap[elementName] || '');\n    // check if the styling has mixin definitions or uses\n    this._ensure();\n    if (!optimalBuild) {\n      let hasMixins = !cssBuild && detectMixin(cssText);\n      let ast = parse(cssText);\n      // only run the applyshim transforms if there is a mixin involved\n      if (hasMixins && nativeCssVariables && this._applyShim) {\n        this._applyShim['transformRules'](ast, elementName);\n      }\n      template['_styleAst'] = ast;\n    }\n    let ownPropertyNames = [];\n    if (!nativeCssVariables) {\n      ownPropertyNames = StyleProperties.decorateStyles(template['_styleAst']);\n    }\n    if (!ownPropertyNames.length || nativeCssVariables) {\n      let root = nativeShadow ? template.content : null;\n      let placeholder = getStylePlaceholder(elementName);\n      let style = this._generateStaticStyle(\n        info,\n        template['_styleAst'],\n        root,\n        placeholder,\n        cssBuild,\n        optimalBuild ? cssText : ''\n      );\n      template._style = style;\n    }\n    template._ownPropertyNames = ownPropertyNames;\n  }\n\n  /**\n   * @param {!Array<string>} cssTextArray\n   * @param {string} elementName\n   */\n  prepareAdoptedCssText(cssTextArray, elementName) {\n    adoptedCssTextMap[elementName] = cssTextArray.join(' ');\n  }\n  /**\n   * Prepare template for the given element type\n   * @param {!HTMLTemplateElement} template\n   * @param {string} elementName\n   */\n  prepareTemplateDom(template, elementName) {\n    if (disableRuntime) {\n      return;\n    }\n    const cssBuild = StyleUtil.getCssBuild(template);\n    if (!nativeShadow && cssBuild !== 'shady' && !template._domPrepared) {\n      template._domPrepared = true;\n      StyleTransformer.domAddScope(template.content, elementName);\n    }\n  }\n  /**\n   * @param {!{is: string, extends: (string|undefined)}} info\n   * @param {!StyleNode} rules\n   * @param {DocumentFragment} shadowroot\n   * @param {Node} placeholder\n   * @param {string} cssBuild\n   * @param {string=} cssText\n   * @return {?HTMLStyleElement}\n   */\n  _generateStaticStyle(\n    info,\n    rules,\n    shadowroot,\n    placeholder,\n    cssBuild,\n    cssText\n  ) {\n    cssText = StyleTransformer.elementStyles(\n      info,\n      rules,\n      null,\n      cssBuild,\n      cssText\n    );\n    if (cssText.length) {\n      return StyleUtil.applyCss(cssText, info.is, shadowroot, placeholder);\n    }\n    return null;\n  }\n  _prepareHost(host) {\n    const {is, typeExtension} = StyleUtil.getIsExtends(host);\n    const placeholder = getStylePlaceholder(is);\n    const template = templateMap[is];\n    if (!template) {\n      return;\n    }\n    const ast = template['_styleAst'];\n    const ownStylePropertyNames = template._ownPropertyNames;\n    const cssBuild = StyleUtil.getCssBuild(template);\n    const styleInfo = new StyleInfo(\n      ast,\n      placeholder,\n      ownStylePropertyNames,\n      is,\n      typeExtension,\n      cssBuild\n    );\n    StyleInfo.set(host, styleInfo);\n    return styleInfo;\n  }\n  /**\n   * Returns a boolean that indicates if styles need to be reprocessed because\n   * the apply shim is now available.\n   * @return {boolean}\n   */\n  _ensureApplyShim() {\n    if (!this._applyShim && window.ShadyCSS && window.ShadyCSS.ApplyShim) {\n      this._applyShim = /** @type {!Object} */ (window.ShadyCSS.ApplyShim);\n      this._applyShim['invalidCallback'] = ApplyShimUtils.invalidate;\n      return true;\n    }\n    return false;\n  }\n  _ensureCustomStyleInterface() {\n    if (this._customStyleInterface) {\n      return;\n    } else if (window.ShadyCSS && window.ShadyCSS.CustomStyleInterface) {\n      this._customStyleInterface = /** @type {!CustomStyleInterfaceInterface} */ (window\n        .ShadyCSS.CustomStyleInterface);\n      /** @type {function(!HTMLStyleElement)} */\n      this._customStyleInterface['transformCallback'] = (style) => {\n        this.transformCustomStyleForDocument(style);\n      };\n      this._customStyleInterface['validateCallback'] = () => {\n        requestAnimationFrame(() => {\n          if (\n            this._customStyleInterface['enqueued'] ||\n            this._elementsHaveApplied\n          ) {\n            this.flushCustomStyles();\n          }\n        });\n      };\n    }\n  }\n  /**\n   * Returns a boolean that indicates if styles need to be reprocessed because\n   * the apply shim is now available.\n   * @return {boolean}\n   */\n  _ensure() {\n    const needsApplyShimUpdate = this._ensureApplyShim();\n    this._ensureCustomStyleInterface();\n    return needsApplyShimUpdate;\n  }\n  /**\n   * Flush and apply custom styles to document\n   */\n  flushCustomStyles() {\n    if (disableRuntime) {\n      return;\n    }\n    const needsApplyShimUpdate = this._ensure();\n    if (!this._customStyleInterface) {\n      return;\n    }\n    let customStyles = this._customStyleInterface['processStyles']();\n    // early return if custom-styles don't need validation\n    if (!needsApplyShimUpdate && !this._customStyleInterface['enqueued']) {\n      return;\n    }\n    // bail if custom styles are built optimally\n    if (StyleUtil.isOptimalCssBuild(this._documentOwnerStyleInfo.cssBuild)) {\n      return;\n    }\n    if (!nativeCssVariables) {\n      this._reorderCustomStylesRules(customStyles);\n      this._updateProperties(this._documentOwner, this._documentOwnerStyleInfo);\n      this._applyCustomStyles(customStyles);\n      if (this._elementsHaveApplied) {\n        // if custom elements have upgraded and there are no native css variables, we must recalculate the whole tree\n        this.styleDocument();\n      }\n    } else if (!this._documentOwnerStyleInfo.cssBuild) {\n      this._revalidateCustomStyleApplyShim(customStyles);\n    }\n    this._customStyleInterface['enqueued'] = false;\n  }\n  /**\n   * Reorder of custom styles for Custom Property shim\n   * @param {!Array<!CustomStyleProvider>} customStyles\n   */\n  _reorderCustomStylesRules(customStyles) {\n    const styles = customStyles\n      .map((c) => this._customStyleInterface['getStyleForCustomStyle'](c))\n      .filter((s) => !!s);\n    // sort styles in document order\n    styles.sort((a, b) => {\n      // use `b.compare(a)` to be more straightforward\n      const position = b.compareDocumentPosition(a);\n      if (position & Node.DOCUMENT_POSITION_FOLLOWING) {\n        // A is after B, A should be higher sorted\n        return 1;\n      } else if (position & Node.DOCUMENT_POSITION_PRECEDING) {\n        // A is before B, A should be lower sorted\n        return -1;\n      } else {\n        return 0;\n      }\n    });\n    // sort ast ordering for document\n    this._documentOwnerStyleInfo.styleRules['rules'] = styles.map((s) =>\n      StyleUtil.rulesForStyle(s)\n    );\n  }\n  /**\n   * Apply styles for the given element\n   *\n   * @param {!HTMLElement} host\n   * @param {Object=} overrideProps\n   */\n  styleElement(host, overrideProps) {\n    if (disableRuntime) {\n      if (overrideProps) {\n        if (!StyleInfo.get(host)) {\n          StyleInfo.set(host, new StyleInfo(null));\n        }\n        const styleInfo = /** @type {!StyleInfo} */ (StyleInfo.get(host));\n        this._mixOverrideStyleProps(styleInfo, overrideProps);\n        this.styleElementNativeVariables(host, styleInfo);\n      }\n      return;\n    }\n    const styleInfo = StyleInfo.get(host) || this._prepareHost(host);\n    // if there is no style info at this point, bail\n    if (!styleInfo) {\n      return;\n    }\n    // Only trip the `elementsHaveApplied` flag if a node other that the root document has `applyStyle` called\n    if (!this._isRootOwner(host)) {\n      this._elementsHaveApplied = true;\n    }\n    if (overrideProps) {\n      this._mixOverrideStyleProps(styleInfo, overrideProps);\n    }\n    if (!nativeCssVariables) {\n      this.styleElementShimVariables(host, styleInfo);\n    } else {\n      this.styleElementNativeVariables(host, styleInfo);\n    }\n  }\n  /**\n   * @param {!StyleInfo} styleInfo\n   * @param {Object} overrideProps\n   */\n  _mixOverrideStyleProps(styleInfo, overrideProps) {\n    styleInfo.overrideStyleProperties = styleInfo.overrideStyleProperties || {};\n    Object.assign(styleInfo.overrideStyleProperties, overrideProps);\n  }\n  /**\n   * @param {!HTMLElement} host\n   * @param {!StyleInfo} styleInfo\n   */\n  styleElementShimVariables(host, styleInfo) {\n    this.flush();\n    this._updateProperties(host, styleInfo);\n    if (\n      styleInfo.ownStylePropertyNames &&\n      styleInfo.ownStylePropertyNames.length\n    ) {\n      this._applyStyleProperties(host, styleInfo);\n    }\n  }\n  /**\n   * @param {!HTMLElement} host\n   * @param {!StyleInfo} styleInfo\n   */\n  styleElementNativeVariables(host, styleInfo) {\n    const {is} = StyleUtil.getIsExtends(host);\n    if (styleInfo.overrideStyleProperties) {\n      updateNativeProperties(host, styleInfo.overrideStyleProperties);\n    }\n    const template = templateMap[is];\n    // bail early if there is no shadowroot for this element\n    if (!template && !this._isRootOwner(host)) {\n      return;\n    }\n    // bail early if the template was built with polymer-css-build\n    if (template && StyleUtil.elementHasBuiltCss(template)) {\n      return;\n    }\n    if (\n      template &&\n      template._style &&\n      !ApplyShimUtils.templateIsValid(template)\n    ) {\n      // update template\n      if (!ApplyShimUtils.templateIsValidating(template)) {\n        this._ensure();\n        this._applyShim &&\n          this._applyShim['transformRules'](template['_styleAst'], is);\n        template._style.textContent = StyleTransformer.elementStyles(\n          host,\n          styleInfo.styleRules\n        );\n        ApplyShimUtils.startValidatingTemplate(template);\n      }\n      // update instance if native shadowdom\n      if (nativeShadow) {\n        let root = host.shadowRoot;\n        if (root) {\n          let style = root.querySelector('style');\n          if (style) {\n            style.textContent = StyleTransformer.elementStyles(\n              host,\n              styleInfo.styleRules\n            );\n          }\n        }\n      }\n      styleInfo.styleRules = template['_styleAst'];\n    }\n  }\n  _styleOwnerForNode(node) {\n    let root = StyleUtil.wrap(node).getRootNode();\n    let host = root.host;\n    if (host) {\n      if (StyleInfo.get(host) || this._prepareHost(host)) {\n        return host;\n      } else {\n        return this._styleOwnerForNode(host);\n      }\n    }\n    return this._documentOwner;\n  }\n  _isRootOwner(node) {\n    return node === this._documentOwner;\n  }\n  _applyStyleProperties(host, styleInfo) {\n    let is = StyleUtil.getIsExtends(host).is;\n    let cacheEntry = styleCache.fetch(\n      is,\n      styleInfo.styleProperties,\n      styleInfo.ownStylePropertyNames\n    );\n    let cachedScopeSelector = cacheEntry && cacheEntry.scopeSelector;\n    let cachedStyle = cacheEntry ? cacheEntry.styleElement : null;\n    let oldScopeSelector = styleInfo.scopeSelector;\n    // only generate new scope if cached style is not found\n    styleInfo.scopeSelector =\n      cachedScopeSelector || this._generateScopeSelector(is);\n    let style = StyleProperties.applyElementStyle(\n      host,\n      styleInfo.styleProperties,\n      styleInfo.scopeSelector,\n      cachedStyle\n    );\n    if (!nativeShadow) {\n      StyleProperties.applyElementScopeSelector(\n        host,\n        styleInfo.scopeSelector,\n        oldScopeSelector\n      );\n    }\n    if (!cacheEntry) {\n      styleCache.store(\n        is,\n        styleInfo.styleProperties,\n        style,\n        styleInfo.scopeSelector\n      );\n    }\n    return style;\n  }\n  _updateProperties(host, styleInfo) {\n    let owner = this._styleOwnerForNode(host);\n    let ownerStyleInfo = StyleInfo.get(owner);\n    let ownerProperties = ownerStyleInfo.styleProperties;\n    // style owner has not updated properties yet\n    // go up the chain and force property update,\n    // except if the owner is the document\n    if (owner !== this._documentOwner && !ownerProperties) {\n      this._updateProperties(owner, ownerStyleInfo);\n      ownerProperties = ownerStyleInfo.styleProperties;\n    }\n    let props = Object.create(ownerProperties || null);\n    let hostAndRootProps = StyleProperties.hostAndRootPropertiesForScope(\n      host,\n      styleInfo.styleRules,\n      styleInfo.cssBuild\n    );\n    let propertyData = StyleProperties.propertyDataFromStyles(\n      ownerStyleInfo.styleRules,\n      host\n    );\n    let propertiesMatchingHost = propertyData.properties;\n    Object.assign(\n      props,\n      hostAndRootProps.hostProps,\n      propertiesMatchingHost,\n      hostAndRootProps.rootProps\n    );\n    this._mixinOverrideStyles(props, styleInfo.overrideStyleProperties);\n    StyleProperties.reify(props);\n    styleInfo.styleProperties = props;\n  }\n  _mixinOverrideStyles(props, overrides) {\n    for (let p in overrides) {\n      let v = overrides[p];\n      // skip override props if they are not truthy or 0\n      // in order to fall back to inherited values\n      if (v || v === 0) {\n        props[p] = v;\n      }\n    }\n  }\n  /**\n   * Update styles of the whole document\n   *\n   * @param {Object=} properties\n   */\n  styleDocument(properties) {\n    this.styleSubtree(this._documentOwner, properties);\n  }\n  /**\n   * Update styles of a subtree\n   *\n   * @param {!HTMLElement} host\n   * @param {Object=} properties\n   */\n  styleSubtree(host, properties) {\n    const wrappedHost = StyleUtil.wrap(host);\n    const root = wrappedHost.shadowRoot;\n    const isRootOwner = this._isRootOwner(host);\n    if (root || isRootOwner) {\n      this.styleElement(host, properties);\n    }\n    const descendantRoot = isRootOwner ? wrappedHost : root;\n    if (descendantRoot) {\n      const descendantHosts = Array.from(\n        descendantRoot.querySelectorAll('*')\n      ).filter((x) => StyleUtil.wrap(x).shadowRoot);\n      for (let i = 0; i < descendantHosts.length; i++) {\n        this.styleSubtree(descendantHosts[i]);\n      }\n    }\n  }\n  /* Custom Style operations */\n  _revalidateCustomStyleApplyShim(customStyles) {\n    for (let i = 0; i < customStyles.length; i++) {\n      let c = customStyles[i];\n      let s = this._customStyleInterface['getStyleForCustomStyle'](c);\n      if (s) {\n        this._revalidateApplyShim(s);\n      }\n    }\n  }\n  _applyCustomStyles(customStyles) {\n    for (let i = 0; i < customStyles.length; i++) {\n      let c = customStyles[i];\n      let s = this._customStyleInterface['getStyleForCustomStyle'](c);\n      if (s) {\n        StyleProperties.applyCustomStyle(\n          s,\n          this._documentOwnerStyleInfo.styleProperties\n        );\n      }\n    }\n  }\n  transformCustomStyleForDocument(style) {\n    const cssBuild = StyleUtil.getCssBuild(style);\n    if (cssBuild !== this._documentOwnerStyleInfo.cssBuild) {\n      this._documentOwnerStyleInfo.cssBuild = cssBuild;\n    }\n    if (StyleUtil.isOptimalCssBuild(cssBuild)) {\n      return;\n    }\n    let ast = StyleUtil.rulesForStyle(style);\n    StyleUtil.forEachRule(ast, (rule) => {\n      if (nativeShadow) {\n        StyleTransformer.normalizeRootSelector(rule);\n      } else {\n        StyleTransformer.documentRule(rule);\n      }\n      if (nativeCssVariables && cssBuild === '') {\n        this._ensure();\n        this._applyShim && this._applyShim['transformRule'](rule);\n      }\n    });\n    if (nativeCssVariables) {\n      style.textContent = StyleUtil.toCssText(ast);\n    } else {\n      this._documentOwnerStyleInfo.styleRules['rules'].push(ast);\n    }\n  }\n  _revalidateApplyShim(style) {\n    if (nativeCssVariables && this._applyShim) {\n      let ast = StyleUtil.rulesForStyle(style);\n      this._ensure();\n      this._applyShim['transformRules'](ast);\n      style.textContent = StyleUtil.toCssText(ast);\n    }\n  }\n  getComputedStyleValue(element, property) {\n    let value;\n    if (!nativeCssVariables) {\n      // element is either a style host, or an ancestor of a style host\n      let styleInfo =\n        StyleInfo.get(element) ||\n        StyleInfo.get(this._styleOwnerForNode(element));\n      value = styleInfo.styleProperties[property];\n    }\n    // fall back to the property value from the computed styling\n    value =\n      value || window.getComputedStyle(element).getPropertyValue(property);\n    // trim whitespace that can come after the `:` in css\n    // example: padding: 2px -> \" 2px\"\n    return value ? value.trim() : '';\n  }\n  // given an element and a classString, replaces\n  // the element's class with the provided classString and adds\n  // any necessary ShadyCSS static and property based scoping selectors\n  setElementClass(element, classString) {\n    let root = StyleUtil.wrap(element).getRootNode();\n    let classes;\n    if (classString) {\n      let definitelyString =\n        typeof classString === 'string' ? classString : String(classString);\n      classes = definitelyString.split(/\\s/);\n    } else {\n      classes = [];\n    }\n    let scopeName = root.host && root.host.localName;\n    // If no scope, try to discover scope name from existing class.\n    // This can occur if, for example, a template stamped element that\n    // has been scoped is manipulated when not in a root.\n    if (!scopeName) {\n      var classAttr = element.getAttribute('class');\n      if (classAttr) {\n        let k$ = classAttr.split(/\\s/);\n        for (let i = 0; i < k$.length; i++) {\n          if (k$[i] === StyleTransformer.SCOPE_NAME) {\n            scopeName = k$[i + 1];\n            break;\n          }\n        }\n      }\n    }\n    if (scopeName) {\n      classes.push(StyleTransformer.SCOPE_NAME, scopeName);\n    }\n    if (!nativeCssVariables) {\n      let styleInfo = StyleInfo.get(element);\n      if (styleInfo && styleInfo.scopeSelector) {\n        classes.push(StyleProperties.XSCOPE_NAME, styleInfo.scopeSelector);\n      }\n    }\n    StyleUtil.setElementClassRaw(element, classes.join(' '));\n  }\n  _styleInfoForNode(node) {\n    return StyleInfo.get(node);\n  }\n  /**\n   * @param {!Element} node\n   * @param {string} scope\n   */\n  scopeNode(node, scope) {\n    StyleTransformer.element(node, scope);\n  }\n  /**\n   * @param {!Element} node\n   * @param {string} scope\n   */\n  unscopeNode(node, scope) {\n    StyleTransformer.element(node, scope, true);\n  }\n  /**\n   * @param {!Node} node\n   * @return {string}\n   */\n  scopeForNode(node) {\n    return getOwnerScope(node);\n  }\n  /**\n   * @param {!Element} node\n   * @return {string}\n   */\n  currentScopeForNode(node) {\n    return getCurrentScope(node);\n  }\n}\n\n/* exports */\n/* eslint-disable no-self-assign */\nScopingShim.prototype['flush'] = ScopingShim.prototype.flush;\nScopingShim.prototype['prepareTemplate'] =\n  ScopingShim.prototype.prepareTemplate;\nScopingShim.prototype['styleElement'] = ScopingShim.prototype.styleElement;\nScopingShim.prototype['styleDocument'] = ScopingShim.prototype.styleDocument;\nScopingShim.prototype['styleSubtree'] = ScopingShim.prototype.styleSubtree;\nScopingShim.prototype['getComputedStyleValue'] =\n  ScopingShim.prototype.getComputedStyleValue;\nScopingShim.prototype['setElementClass'] =\n  ScopingShim.prototype.setElementClass;\nScopingShim.prototype['_styleInfoForNode'] =\n  ScopingShim.prototype._styleInfoForNode;\nScopingShim.prototype['transformCustomStyleForDocument'] =\n  ScopingShim.prototype.transformCustomStyleForDocument;\nScopingShim.prototype['getStyleAst'] = ScopingShim.prototype.getStyleAst;\nScopingShim.prototype['styleAstToString'] =\n  ScopingShim.prototype.styleAstToString;\nScopingShim.prototype['flushCustomStyles'] =\n  ScopingShim.prototype.flushCustomStyles;\nScopingShim.prototype['scopeNode'] = ScopingShim.prototype.scopeNode;\nScopingShim.prototype['unscopeNode'] = ScopingShim.prototype.unscopeNode;\nScopingShim.prototype['scopeForNode'] = ScopingShim.prototype.scopeForNode;\nScopingShim.prototype['currentScopeForNode'] =\n  ScopingShim.prototype.currentScopeForNode;\nScopingShim.prototype['prepareAdoptedCssText'] =\n  ScopingShim.prototype.prepareAdoptedCssText;\n/* eslint-enable no-self-assign */\nObject.defineProperties(ScopingShim.prototype, {\n  'nativeShadow': {\n    get() {\n      return nativeShadow;\n    },\n  },\n  'nativeCss': {\n    get() {\n      return nativeCssVariables;\n    },\n  },\n});\n","/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n'use strict';\n\nexport default class StyleCache {\n  constructor(typeMax = 100) {\n    // map element name -> [{properties, styleElement, scopeSelector}]\n    this.cache = {};\n    /** @type {number} */\n    this.typeMax = typeMax;\n  }\n\n  _validate(cacheEntry, properties, ownPropertyNames) {\n    for (let idx = 0; idx < ownPropertyNames.length; idx++) {\n      let pn = ownPropertyNames[idx];\n      if (cacheEntry.properties[pn] !== properties[pn]) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  store(tagname, properties, styleElement, scopeSelector) {\n    let list = this.cache[tagname] || [];\n    list.push({properties, styleElement, scopeSelector});\n    if (list.length > this.typeMax) {\n      list.shift();\n    }\n    this.cache[tagname] = list;\n  }\n\n  fetch(tagname, properties, ownPropertyNames) {\n    let list = this.cache[tagname];\n    if (!list) {\n      return;\n    }\n    // reverse list for most-recent lookups\n    for (let idx = list.length - 1; idx >= 0; idx--) {\n      let entry = list[idx];\n      if (this._validate(entry, properties, ownPropertyNames)) {\n        return entry;\n      }\n    }\n  }\n}\n","/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\n\nimport {StyleNode} from './css-parse.js'; // eslint-disable-line @typescript-eslint/no-unused-vars\n\n/** @const {string} */\nconst infoKey = '__styleInfo';\n\nexport default class StyleInfo {\n  /**\n   * @param {Element} node\n   * @return {StyleInfo}\n   */\n  static get(node) {\n    if (node) {\n      return node[infoKey];\n    } else {\n      return null;\n    }\n  }\n  /**\n   * @param {!Element} node\n   * @param {StyleInfo} styleInfo\n   * @return {StyleInfo}\n   */\n  static set(node, styleInfo) {\n    node[infoKey] = styleInfo;\n    return styleInfo;\n  }\n  /**\n   * @param {StyleNode} ast\n   * @param {Node=} placeholder\n   * @param {Array<string>=} ownStylePropertyNames\n   * @param {string=} elementName\n   * @param {string=} typeExtension\n   * @param {string=} cssBuild\n   */\n  constructor(\n    ast,\n    placeholder,\n    ownStylePropertyNames,\n    elementName,\n    typeExtension,\n    cssBuild\n  ) {\n    /** @type {StyleNode} */\n    this.styleRules = ast || null;\n    /** @type {Node} */\n    this.placeholder = placeholder || null;\n    /** @type {!Array<string>} */\n    this.ownStylePropertyNames = ownStylePropertyNames || [];\n    /** @type {Object} */\n    this.overrideStyleProperties = null;\n    /** @type {string} */\n    this.elementName = elementName || '';\n    /** @type {string} */\n    this.cssBuild = cssBuild || '';\n    /** @type {string} */\n    this.typeExtension = typeExtension || '';\n    /** @type {Object<string, string>} */\n    this.styleProperties = null;\n    /** @type {?string} */\n    this.scopeSelector = null;\n    /** @type {HTMLStyleElement} */\n    this.customStyle = null;\n  }\n  _getStyleRules() {\n    return this.styleRules;\n  }\n}\n\n/* eslint-disable-next-line no-self-assign */\nStyleInfo.prototype['_getStyleRules'] = StyleInfo.prototype._getStyleRules;\n","/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\n\nimport {applyStylePlaceHolder} from './style-util.js';\nimport {nativeShadow, disableRuntime} from './style-settings.js';\n\n/** @type {!Object<string, !Node>} */\nconst placeholderMap = {};\n\n/**\n * @param {string} elementName\n * @return {Node}\n */\nexport function getStylePlaceholder(elementName) {\n  return placeholderMap[elementName] || null;\n}\n\n/**\n * @param {string} elementName\n */\nexport function ensureStylePlaceholder(elementName) {\n  if (!placeholderMap[elementName]) {\n    placeholderMap[elementName] = applyStylePlaceHolder(elementName);\n  }\n}\n\n/**\n * @const {CustomElementRegistry}\n */\nconst ce = window['customElements'];\nif (ce && !nativeShadow && !disableRuntime) {\n  /**\n   * @const {function(this:CustomElementRegistry, string,function(new:HTMLElement),{extends: string}=)}\n   */\n  const origDefine = ce['define'];\n  /**\n   * @param {string} name\n   * @param {function(new:HTMLElement)} clazz\n   * @param {{extends: string}=} options\n   */\n  const wrappedDefine = (name, clazz, options) => {\n    ensureStylePlaceholder(name);\n    origDefine.call(\n      /** @type {!CustomElementRegistry} */ (ce),\n      name,\n      clazz,\n      options\n    );\n  };\n  ce['define'] = wrappedDefine;\n}\n","/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\n\nimport {removeCustomPropAssignment, StyleNode} from './css-parse.js'; // eslint-disable-line @typescript-eslint/no-unused-vars\nimport {nativeShadow} from './style-settings.js';\nimport StyleTransformer from './style-transformer.js';\nimport * as StyleUtil from './style-util.js';\nimport * as RX from './common-regex.js';\nimport StyleInfo from './style-info.js';\n\n// TODO: dedupe with shady\n/**\n * @param {string} selector\n * @return {boolean}\n * @this {Element}\n */\nconst matchesSelector = function (selector) {\n  const method =\n    this.matches ||\n    this.matchesSelector ||\n    this.mozMatchesSelector ||\n    this.msMatchesSelector ||\n    this.oMatchesSelector ||\n    this.webkitMatchesSelector;\n  return method && method.call(this, selector);\n};\n\nconst rootSelector = /:host\\s*>\\s*/;\n\nfunction checkRoot(hostScope, selector) {\n  return (\n    Boolean(selector.match(rootSelector)) ||\n    (hostScope === 'html' && selector.indexOf('html') > -1)\n  );\n}\n\nconst IS_IE = navigator.userAgent.match('Trident');\n\nconst XSCOPE_NAME = 'x-scope';\n\nclass StyleProperties {\n  /** @return {string} */\n  get XSCOPE_NAME() {\n    return XSCOPE_NAME;\n  }\n  /**\n   * decorates styles with rule info and returns an array of used style property names\n   *\n   * @param {StyleNode} rules\n   * @return {!Array<string>}\n   */\n  decorateStyles(rules) {\n    let self = this,\n      props = {},\n      keyframes = [],\n      ruleIndex = 0;\n    StyleUtil.forEachRule(\n      rules,\n      function (rule) {\n        self.decorateRule(rule);\n        // mark in-order position of ast rule in styles block, used for cache key\n        rule.index = ruleIndex++;\n        self.collectPropertiesInCssText(rule.propertyInfo.cssText, props);\n      },\n      function onKeyframesRule(rule) {\n        keyframes.push(rule);\n      }\n    );\n    // Cache all found keyframes rules for later reference:\n    rules._keyframes = keyframes;\n    // return this list of property names *consumes* in these styles.\n    let names = [];\n    for (let i in props) {\n      names.push(i);\n    }\n    return names;\n  }\n\n  // decorate a single rule with property info\n  decorateRule(rule) {\n    if (rule.propertyInfo) {\n      return rule.propertyInfo;\n    }\n    let info = {},\n      properties = {};\n    let hasProperties = this.collectProperties(rule, properties);\n    if (hasProperties) {\n      info.properties = properties;\n      // TODO(sorvell): workaround parser seeing mixins as additional rules\n      rule['rules'] = null;\n    }\n    info.cssText = this.collectCssText(rule);\n    rule.propertyInfo = info;\n    return info;\n  }\n\n  // collects the custom properties from a rule's cssText\n  collectProperties(rule, properties) {\n    let info = rule.propertyInfo;\n    if (info) {\n      if (info.properties) {\n        Object.assign(properties, info.properties);\n        return true;\n      }\n    } else {\n      let m,\n        rx = RX.VAR_ASSIGN;\n      let cssText = rule['parsedCssText'];\n      let value;\n      let any;\n      while ((m = rx.exec(cssText))) {\n        // note: group 2 is var, 3 is mixin\n        value = (m[2] || m[3]).trim();\n        // value of 'inherit' or 'unset' is equivalent to not setting the property here\n        if (value !== 'inherit' || value !== 'unset') {\n          properties[m[1].trim()] = value;\n        }\n        any = true;\n      }\n      return any;\n    }\n  }\n\n  // returns cssText of properties that consume variables/mixins\n  collectCssText(rule) {\n    return this.collectConsumingCssText(rule['parsedCssText']);\n  }\n\n  // NOTE: we support consumption inside mixin assignment\n  // but not production, so strip out {...}\n  collectConsumingCssText(cssText) {\n    return cssText.replace(RX.BRACKETED, '').replace(RX.VAR_ASSIGN, '');\n  }\n\n  collectPropertiesInCssText(cssText, props) {\n    let m;\n    while ((m = RX.VAR_CONSUMED.exec(cssText))) {\n      let name = m[1];\n      // This regex catches all variable names, and following non-whitespace char\n      // If next char is not ':', then variable is a consumer\n      if (m[2] !== ':') {\n        props[name] = true;\n      }\n    }\n  }\n\n  // turns custom properties into realized values.\n  reify(props) {\n    // big perf optimization here: reify only *own* properties\n    // since this object has __proto__ of the element's scope properties\n    let names = Object.getOwnPropertyNames(props);\n    for (let i = 0, n; i < names.length; i++) {\n      n = names[i];\n      props[n] = this.valueForProperty(props[n], props);\n    }\n  }\n\n  // given a property value, returns the reified value\n  // a property value may be:\n  // (1) a literal value like: red or 5px;\n  // (2) a variable value like: var(--a), var(--a, red), or var(--a, --b) or\n  // var(--a, var(--b));\n  // (3) a literal mixin value like { properties }. Each of these properties\n  // can have values that are: (a) literal, (b) variables, (c) @apply mixins.\n  valueForProperty(property, props) {\n    // case (1) default\n    // case (3) defines a mixin and we have to reify the internals\n    if (property) {\n      if (property.indexOf(';') >= 0) {\n        property = this.valueForProperties(property, props);\n      } else {\n        // case (2) variable\n        let self = this;\n        let fn = function (prefix, value, fallback, suffix) {\n          if (!value) {\n            return prefix + suffix;\n          }\n          let propertyValue = self.valueForProperty(props[value], props);\n          // if value is \"initial\", then the variable should be treated as unset\n          if (!propertyValue || propertyValue === 'initial') {\n            // fallback may be --a or var(--a) or literal\n            propertyValue =\n              self.valueForProperty(props[fallback] || fallback, props) ||\n              fallback;\n          } else if (propertyValue === 'apply-shim-inherit') {\n            // CSS build will replace `inherit` with `apply-shim-inherit`\n            // for use with native css variables.\n            // Since we have full control, we can use `inherit` directly.\n            propertyValue = 'inherit';\n          }\n          return prefix + (propertyValue || '') + suffix;\n        };\n        property = StyleUtil.processVariableAndFallback(property, fn);\n      }\n    }\n    return (property && property.trim()) || '';\n  }\n\n  // note: we do not yet support mixin within mixin\n  valueForProperties(property, props) {\n    let parts = property.split(';');\n    for (let i = 0, p, m; i < parts.length; i++) {\n      if ((p = parts[i])) {\n        RX.MIXIN_MATCH.lastIndex = 0;\n        m = RX.MIXIN_MATCH.exec(p);\n        if (m) {\n          p = this.valueForProperty(props[m[1]], props);\n        } else {\n          let colon = p.indexOf(':');\n          if (colon !== -1) {\n            let pp = p.substring(colon);\n            pp = pp.trim();\n            pp = this.valueForProperty(pp, props) || pp;\n            p = p.substring(0, colon) + pp;\n          }\n        }\n        parts[i] =\n          p && p.lastIndexOf(';') === p.length - 1\n            ? p.slice(0, -1) // strip trailing ;\n            : p || '';\n      }\n    }\n    return parts.join(';');\n  }\n\n  applyProperties(rule, props) {\n    let output = '';\n    // dynamically added sheets may not be decorated so ensure they are.\n    if (!rule.propertyInfo) {\n      this.decorateRule(rule);\n    }\n    if (rule.propertyInfo.cssText) {\n      output = this.valueForProperties(rule.propertyInfo.cssText, props);\n    }\n    rule['cssText'] = output;\n  }\n\n  // Apply keyframe transformations to the cssText of a given rule. The\n  // keyframeTransforms object is a map of keyframe names to transformer\n  // functions which take in cssText and spit out transformed cssText.\n  applyKeyframeTransforms(rule, keyframeTransforms) {\n    let input = rule['cssText'];\n    let output = rule['cssText'];\n    if (rule.hasAnimations == null) {\n      // Cache whether or not the rule has any animations to begin with:\n      rule.hasAnimations = RX.ANIMATION_MATCH.test(input);\n    }\n    // If there are no animations referenced, we can skip transforms:\n    if (rule.hasAnimations) {\n      let transform;\n      // If we haven't transformed this rule before, we iterate over all\n      // transforms:\n      if (rule.keyframeNamesToTransform == null) {\n        rule.keyframeNamesToTransform = [];\n        for (let keyframe in keyframeTransforms) {\n          transform = keyframeTransforms[keyframe];\n          output = transform(input);\n          // If the transform actually changed the CSS text, we cache the\n          // transform name for future use:\n          if (input !== output) {\n            input = output;\n            rule.keyframeNamesToTransform.push(keyframe);\n          }\n        }\n      } else {\n        // If we already have a list of keyframe names that apply to this\n        // rule, we apply only those keyframe name transforms:\n        for (let i = 0; i < rule.keyframeNamesToTransform.length; ++i) {\n          transform = keyframeTransforms[rule.keyframeNamesToTransform[i]];\n          input = transform(input);\n        }\n        output = input;\n      }\n    }\n    rule['cssText'] = output;\n  }\n\n  // Test if the rules in these styles matches the given `element` and if so,\n  // collect any custom properties into `props`.\n  /**\n   * @param {StyleNode} rules\n   * @param {Element} element\n   */\n  propertyDataFromStyles(rules, element) {\n    let props = {};\n    // generates a unique key for these matches\n    let o = [];\n    // note: active rules excludes non-matching @media rules\n    StyleUtil.forEachRule(\n      rules,\n      (rule) => {\n        // TODO(sorvell): we could trim the set of rules at declaration\n        // time to only include ones that have properties\n        if (!rule.propertyInfo) {\n          this.decorateRule(rule);\n        }\n        // match element against transformedSelector: selector may contain\n        // unwanted uniquification and parsedSelector does not directly match\n        // for :host selectors.\n        let selectorToMatch =\n          rule.transformedSelector || rule['parsedSelector'];\n        if (element && rule.propertyInfo.properties && selectorToMatch) {\n          if (matchesSelector.call(element, selectorToMatch)) {\n            this.collectProperties(rule, props);\n            // produce numeric key for these matches for lookup\n            addToBitMask(rule.index, o);\n          }\n        }\n      },\n      null,\n      true\n    );\n    return {properties: props, key: o};\n  }\n\n  /**\n   * @param {Element} scope\n   * @param {StyleNode} rule\n   * @param {string} cssBuild\n   * @param {function(Object)} callback\n   */\n  whenHostOrRootRule(scope, rule, cssBuild, callback) {\n    if (!(/** @type {?} */ (rule.propertyInfo))) {\n      this.decorateRule(rule);\n    }\n    if (!(/** @type {?} */ (rule.propertyInfo).properties)) {\n      return;\n    }\n    let {is, typeExtension} = StyleUtil.getIsExtends(scope);\n    let hostScope = is\n      ? StyleTransformer._calcHostScope(is, typeExtension)\n      : 'html';\n    let parsedSelector = rule['parsedSelector'];\n    let isRoot = checkRoot(hostScope, parsedSelector);\n    let isHost = parsedSelector.indexOf(':host') === 0 && !isRoot;\n    // build info is either in scope (when scope is an element) or in the style\n    // when scope is the default scope; note: this allows default scope to have\n    // mixed mode built and unbuilt styles.\n    if (cssBuild === 'shady') {\n      // :root -> x-foo > *.x-foo for elements and html for custom-style\n      isRoot =\n        parsedSelector === hostScope + ' > *.' + hostScope ||\n        parsedSelector.indexOf('html') !== -1;\n      // :host -> x-foo for elements, but sub-rules have .x-foo in them\n      isHost = !isRoot && parsedSelector.indexOf(hostScope) === 0;\n    }\n    if (!isRoot && !isHost) {\n      return;\n    }\n    let selectorToMatch = hostScope;\n    if (isHost) {\n      // need to transform :host because `:host` does not work with `matches`\n      if (!(/** @type {?} */ (rule.transformedSelector))) {\n        // transform :host into a matchable selector\n        rule.transformedSelector = StyleTransformer._transformRuleCss(\n          rule,\n          StyleTransformer._transformComplexSelector,\n          StyleTransformer._calcElementScope(is),\n          hostScope\n        );\n      }\n      selectorToMatch =\n        /** @type {?} */ (rule.transformedSelector) || hostScope;\n    }\n    if (isRoot && hostScope === 'html') {\n      selectorToMatch =\n        /** @type {?} */ (rule.transformedSelector) ||\n        /** @type {?} */ (rule.parsedSelector);\n    }\n    callback({\n      selector: selectorToMatch,\n      isHost: isHost,\n      isRoot: isRoot,\n    });\n  }\n  /**\n   * @param {Element} scope\n   * @param {StyleNode} rules\n   * @param {string} cssBuild\n   * @return {!Object}\n   */\n  hostAndRootPropertiesForScope(scope, rules, cssBuild) {\n    let hostProps = {},\n      rootProps = {};\n    // note: active rules excludes non-matching @media rules\n    StyleUtil.forEachRule(\n      rules,\n      (rule) => {\n        // if scope is StyleDefaults, use _element for matchesSelector\n        this.whenHostOrRootRule(scope, rule, cssBuild, (info) => {\n          let element = scope._element || scope;\n          if (matchesSelector.call(element, info.selector)) {\n            if (info.isHost) {\n              this.collectProperties(rule, hostProps);\n            } else {\n              this.collectProperties(rule, rootProps);\n            }\n          }\n        });\n      },\n      null,\n      true\n    );\n    return {rootProps: rootProps, hostProps: hostProps};\n  }\n\n  /**\n   * @param {Element} element\n   * @param {Object} properties\n   * @param {string} scopeSelector\n   */\n  transformStyles(element, properties, scopeSelector) {\n    let self = this;\n    let {is, typeExtension} = StyleUtil.getIsExtends(element);\n    let hostSelector = StyleTransformer._calcHostScope(is, typeExtension);\n    let rxHostSelector = element.extends\n      ? '\\\\' + hostSelector.slice(0, -1) + '\\\\]'\n      : hostSelector;\n    let hostRx = new RegExp(RX.HOST_PREFIX + rxHostSelector + RX.HOST_SUFFIX);\n    let {styleRules: rules, cssBuild} = StyleInfo.get(element);\n    let keyframeTransforms = this._elementKeyframeTransforms(\n      element,\n      rules,\n      scopeSelector\n    );\n    return StyleTransformer.elementStyles(\n      element,\n      rules,\n      function (rule) {\n        self.applyProperties(rule, properties);\n        if (\n          !nativeShadow &&\n          !StyleUtil.isKeyframesSelector(rule) &&\n          rule['cssText']\n        ) {\n          // NOTE: keyframe transforms only scope munge animation names, so it\n          // is not necessary to apply them in ShadowDOM.\n          self.applyKeyframeTransforms(rule, keyframeTransforms);\n          self._scopeSelector(rule, hostRx, hostSelector, scopeSelector);\n        }\n      },\n      cssBuild\n    );\n  }\n\n  /**\n   * @param {Element} element\n   * @param {StyleNode} rules\n   * @param {string} scopeSelector\n   * @return {!Object}\n   */\n  _elementKeyframeTransforms(element, rules, scopeSelector) {\n    let keyframesRules = rules._keyframes;\n    let keyframeTransforms = {};\n    if (!nativeShadow && keyframesRules) {\n      // For non-ShadowDOM, we transform all known keyframes rules in\n      // advance for the current scope. This allows us to catch keyframes\n      // rules that appear anywhere in the stylesheet:\n      for (\n        let i = 0, keyframesRule = keyframesRules[i];\n        i < keyframesRules.length;\n        keyframesRule = keyframesRules[++i]\n      ) {\n        this._scopeKeyframes(keyframesRule, scopeSelector);\n        keyframeTransforms[\n          keyframesRule['keyframesName']\n        ] = this._keyframesRuleTransformer(keyframesRule);\n      }\n    }\n    return keyframeTransforms;\n  }\n\n  // Generate a factory for transforming a chunk of CSS text to handle a\n  // particular scoped keyframes rule.\n  /**\n   * @param {StyleNode} keyframesRule\n   * @return {function(string):string}\n   */\n  _keyframesRuleTransformer(keyframesRule) {\n    return function (cssText) {\n      return cssText.replace(\n        /** @type {?} */ (keyframesRule.keyframesNameRx),\n        /** @type {?} */ (keyframesRule.transformedKeyframesName)\n      );\n    };\n  }\n\n  /**\n   * Transforms `@keyframes` names to be unique for the current host.\n   * Example: @keyframes foo-anim -> @keyframes foo-anim-x-foo-0\n   *\n   * @param {StyleNode} rule\n   * @param {string} scopeId\n   */\n  _scopeKeyframes(rule, scopeId) {\n    // Animation names are of the form [\\w-], so ensure that the name regex does not partially apply\n    // to similarly named keyframe names by checking for a word boundary at the beginning and\n    // a non-word boundary or `-` at the end.\n    rule.keyframesNameRx = new RegExp(\n      `\\\\b${rule['keyframesName']}(?!\\\\B|-)`,\n      'g'\n    );\n    rule.transformedKeyframesName = rule['keyframesName'] + '-' + scopeId;\n    rule.transformedSelector =\n      /** @type {?} */ (rule.transformedSelector) || rule['selector'];\n    rule['selector'] = /** @type {?} */ (rule.transformedSelector).replace(\n      rule['keyframesName'],\n      rule.transformedKeyframesName\n    );\n  }\n\n  // Strategy: x scope shim a selector e.g. to scope `.x-foo-42` (via classes):\n  // non-host selector: .a.x-foo -> .x-foo-42 .a.x-foo\n  // host selector: x-foo.wide -> .x-foo-42.wide\n  // note: we use only the scope class (.x-foo-42) and not the hostSelector\n  // (x-foo) to scope :host rules; this helps make property host rules\n  // have low specificity. They are overrideable by class selectors but,\n  // unfortunately, not by type selectors (e.g. overriding via\n  // `.special` is ok, but not by `x-foo`).\n  /**\n   * @param {StyleNode} rule\n   * @param {RegExp} hostRx\n   * @param {string} hostSelector\n   * @param {string} scopeId\n   */\n  _scopeSelector(rule, hostRx, hostSelector, scopeId) {\n    rule.transformedSelector =\n      /** @type {?} */ (rule.transformedSelector) || rule['selector'];\n    let selector = rule.transformedSelector;\n    let scope = '.' + scopeId;\n    let parts = StyleUtil.splitSelectorList(selector);\n    for (let i = 0, l = parts.length, p; i < l && (p = parts[i]); i++) {\n      parts[i] = p.match(hostRx)\n        ? p.replace(hostSelector, scope)\n        : scope + ' ' + p;\n    }\n    rule['selector'] = parts.join(',');\n  }\n\n  /**\n   * @param {Element} element\n   * @param {string} selector\n   * @param {string} old\n   */\n  applyElementScopeSelector(element, selector, old) {\n    let c = element.getAttribute('class') || '';\n    let v = c;\n    if (old) {\n      v = c.replace(\n        new RegExp('\\\\s*' + XSCOPE_NAME + '\\\\s*' + old + '\\\\s*', 'g'),\n        ' '\n      );\n    }\n    v += (v ? ' ' : '') + XSCOPE_NAME + ' ' + selector;\n    if (c !== v) {\n      StyleUtil.setElementClassRaw(element, v);\n    }\n  }\n\n  /**\n   * @param {HTMLElement} element\n   * @param {Object} properties\n   * @param {string} selector\n   * @param {HTMLStyleElement} style\n   * @return {HTMLStyleElement}\n   */\n  applyElementStyle(element, properties, selector, style) {\n    // calculate cssText to apply\n    let cssText = style\n      ? style.textContent || ''\n      : this.transformStyles(element, properties, selector);\n    // if shady and we have a cached style that is not style, decrement\n    let styleInfo = StyleInfo.get(element);\n    let s = styleInfo.customStyle;\n    if (s && !nativeShadow && s !== style) {\n      s['_useCount']--;\n      if (s['_useCount'] <= 0 && s.parentNode) {\n        s.parentNode.removeChild(s);\n      }\n    }\n    // apply styling always under native or if we generated style\n    // or the cached style is not in document(!)\n    if (nativeShadow) {\n      // update existing style only under native\n      if (styleInfo.customStyle) {\n        styleInfo.customStyle.textContent = cssText;\n        style = styleInfo.customStyle;\n        // otherwise, if we have css to apply, do so\n      } else if (cssText) {\n        // apply css after the scope style of the element to help with\n        // style precedence rules.\n        style = StyleUtil.applyCss(\n          cssText,\n          selector,\n          element.shadowRoot,\n          styleInfo.placeholder\n        );\n      }\n    } else {\n      // shady and no cache hit\n      if (!style) {\n        // apply css after the scope style of the element to help with\n        // style precedence rules.\n        if (cssText) {\n          style = StyleUtil.applyCss(\n            cssText,\n            selector,\n            null,\n            styleInfo.placeholder\n          );\n        }\n        // shady and cache hit but not in document\n      } else if (!style.parentNode) {\n        if (IS_IE && cssText.indexOf('@media') > -1) {\n          // @media rules may be stale in IE 10 and 11\n          // refresh the text content of the style to revalidate them.\n          style.textContent = cssText;\n        }\n        StyleUtil.applyStyle(style, null, styleInfo.placeholder);\n      }\n    }\n    // ensure this style is our custom style and increment its use count.\n    if (style) {\n      style['_useCount'] = style['_useCount'] || 0;\n      // increment use count if we changed styles\n      if (styleInfo.customStyle != style) {\n        style['_useCount']++;\n      }\n      styleInfo.customStyle = style;\n    }\n    return style;\n  }\n\n  /**\n   * @param {Element} style\n   * @param {Object} properties\n   */\n  applyCustomStyle(style, properties) {\n    let rules = StyleUtil.rulesForStyle(\n      /** @type {HTMLStyleElement} */ (style)\n    );\n    let self = this;\n    style.textContent = StyleUtil.toCssText(rules, function (\n      /** StyleNode */ rule\n    ) {\n      let css = (rule['cssText'] = rule['parsedCssText']);\n      if (\n        /** @type {?} */ (rule.propertyInfo) &&\n        /** @type {?} */ (rule.propertyInfo).cssText\n      ) {\n        // remove property assignments\n        // so next function isn't confused\n        // NOTE: we have 3 categories of css:\n        // (1) normal properties,\n        // (2) custom property assignments (--foo: red;),\n        // (3) custom property usage: border: var(--foo); @apply(--foo);\n        // In elements, 1 and 3 are separated for efficiency; here they\n        // are not and this makes this case unique.\n        css = removeCustomPropAssignment(/** @type {string} */ (css));\n        // replace with reified properties, scenario is same as mixin\n        rule['cssText'] = self.valueForProperties(css, properties);\n      }\n    });\n  }\n}\n\n/**\n * @param {number} n\n * @param {Array<number>} bits\n */\nfunction addToBitMask(n, bits) {\n  let o = parseInt(n / 32, 10);\n  let v = 1 << n % 32;\n  bits[o] = (bits[o] || 0) | v;\n}\n\nexport default new StyleProperties();\n","/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\n\nexport const nativeShadow = !(\n  window['ShadyDOM'] && window['ShadyDOM']['inUse']\n);\n/** @type {boolean} */\nlet nativeCssVariables_;\n\n/**\n * @param {(ShadyCSSOptions | ShadyCSSInterface)=} settings\n */\nfunction calcCssVariables(settings) {\n  if (settings && settings.shimcssproperties) {\n    nativeCssVariables_ = false;\n  } else {\n    // chrome 49 has semi-working css vars, check if box-shadow works\n    // safari 9.1 has a recalc bug: https://bugs.webkit.org/show_bug.cgi?id=155782\n    // However, shim css custom properties are only supported with ShadyDOM enabled,\n    // so fall back on native if we do not detect ShadyDOM\n    // Edge 15: custom properties used in ::before and ::after will also be used in the parent element\n    // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/12414257/\n    nativeCssVariables_ =\n      nativeShadow ||\n      Boolean(\n        !navigator.userAgent.match(/AppleWebKit\\/601|Edge\\/15/) &&\n          window.CSS &&\n          CSS.supports &&\n          CSS.supports('box-shadow', '0 0 0 var(--foo)')\n      );\n  }\n}\n\n/** @type {string | undefined} */\nexport let cssBuild;\nif (window.ShadyCSS && window.ShadyCSS.cssBuild !== undefined) {\n  cssBuild = window.ShadyCSS.cssBuild;\n}\n\n/** @type {boolean} */\nexport const disableRuntime = Boolean(\n  window.ShadyCSS && window.ShadyCSS.disableRuntime\n);\n\nif (window.ShadyCSS && window.ShadyCSS.nativeCss !== undefined) {\n  nativeCssVariables_ = window.ShadyCSS.nativeCss;\n} else if (window.ShadyCSS) {\n  calcCssVariables(window.ShadyCSS);\n  // reset window variable to let ShadyCSS API take its place\n  window.ShadyCSS = undefined;\n} else {\n  calcCssVariables(window['WebComponents'] && window['WebComponents']['flags']);\n}\n\n// Hack for type error under new type inference which doesn't like that\n// nativeCssVariables is updated in a function and assigns the type\n// `function(): ?` instead of `boolean`.\nexport const nativeCssVariables = /** @type {boolean} */ (nativeCssVariables_);\n","/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\n\nimport {StyleNode} from './css-parse.js'; // eslint-disable-line @typescript-eslint/no-unused-vars\nimport * as StyleUtil from './style-util.js';\nimport {nativeShadow} from './style-settings.js';\n\n/* Transforms ShadowDOM styling into ShadyDOM styling\n\n* scoping:\n\n  * elements in scope get scoping selector class=\"x-foo-scope\"\n  * selectors re-written as follows:\n\n    div button -> div.x-foo-scope button.x-foo-scope\n\n* :host -> scopeName\n\n* :host(...) -> scopeName...\n\n* ::slotted(...) -> scopeName > ...\n\n* ...:dir(ltr|rtl) -> [dir=\"ltr|rtl\"] ..., ...[dir=\"ltr|rtl\"]\n\n* :host(:dir[rtl]) -> scopeName:dir(rtl) -> [dir=\"rtl\"] scopeName, scopeName[dir=\"rtl\"]\n\n*/\nconst SCOPE_NAME = 'style-scope';\n\nclass StyleTransformer {\n  /** @return {string} */\n  get SCOPE_NAME() {\n    return SCOPE_NAME;\n  }\n  /**\n   * Given a node and scope name, add a scoping class to each node\n   * in the tree. This facilitates transforming css into scoped rules.\n   * @param {!Node} node\n   * @param {string} scope\n   * @param {boolean=} shouldRemoveScope\n   * @deprecated\n   */\n  dom(node, scope, shouldRemoveScope) {\n    const fn = (node) => {\n      this.element(node, scope || '', shouldRemoveScope);\n    };\n    this._transformDom(node, fn);\n  }\n\n  /**\n   * Given a node and scope name, add a scoping class to each node in the tree.\n   * @param {!Node} node\n   * @param {string} scope\n   */\n  domAddScope(node, scope) {\n    const fn = (node) => {\n      this.element(node, scope || '');\n    };\n    this._transformDom(node, fn);\n  }\n\n  /**\n   * @param {!Node} startNode\n   * @param {function(!Node)} transformer\n   */\n  _transformDom(startNode, transformer) {\n    if (startNode.nodeType === Node.ELEMENT_NODE) {\n      transformer(startNode);\n    }\n    let c$;\n    if (startNode.localName === 'template') {\n      const template = /** @type {!HTMLTemplateElement} */ (startNode);\n      // In case the template is in svg context, fall back to the node\n      // since it won't be an HTMLTemplateElement with a .content property\n      c$ = (template.content || template._content || template).childNodes;\n    } else {\n      c$ =\n        /** @type {!ParentNode} */ (startNode).children || startNode.childNodes;\n    }\n    if (c$) {\n      for (let i = 0; i < c$.length; i++) {\n        this._transformDom(c$[i], transformer);\n      }\n    }\n  }\n\n  /**\n   * @param {?} element\n   * @param {?} scope\n   * @param {?=} shouldRemoveScope\n   */\n  element(element, scope, shouldRemoveScope) {\n    // note: if using classes, we add both the general 'style-scope' class\n    // as well as the specific scope. This enables easy filtering of all\n    // `style-scope` elements\n    if (scope) {\n      // note: svg on IE does not have classList so fallback to class\n      if (element.classList) {\n        if (shouldRemoveScope) {\n          element.classList.remove(SCOPE_NAME);\n          element.classList.remove(scope);\n        } else {\n          element.classList.add(SCOPE_NAME);\n          element.classList.add(scope);\n        }\n      } else if (element.getAttribute) {\n        let c = element.getAttribute(CLASS);\n        if (shouldRemoveScope) {\n          if (c) {\n            let newValue = c.replace(SCOPE_NAME, '').replace(scope, '');\n            StyleUtil.setElementClassRaw(element, newValue);\n          }\n        } else {\n          let newValue = (c ? c + ' ' : '') + SCOPE_NAME + ' ' + scope;\n          StyleUtil.setElementClassRaw(element, newValue);\n        }\n      }\n    }\n  }\n\n  /**\n   * Given a node, replace the scoping class to each subnode in the tree.\n   * @param {!Node} node\n   * @param {string} oldScope\n   * @param {string} newScope\n   */\n  domReplaceScope(node, oldScope, newScope) {\n    const fn = (node) => {\n      this.element(node, oldScope, true);\n      this.element(node, newScope);\n    };\n    this._transformDom(node, fn);\n  }\n  /**\n   * Given a node, remove the scoping class to each subnode in the tree.\n   * @param {!Node} node\n   * @param {string} oldScope\n   */\n  domRemoveScope(node, oldScope) {\n    const fn = (node) => {\n      this.element(node, oldScope || '', true);\n    };\n    this._transformDom(node, fn);\n  }\n\n  /**\n   * @param {?} element\n   * @param {?} styleRules\n   * @param {?=} callback\n   * @param {string=} cssBuild\n   * @param {string=} cssText\n   * @return {string}\n   */\n  elementStyles(element, styleRules, callback, cssBuild = '', cssText = '') {\n    // no need to shim selectors if settings.useNativeShadow, also\n    // a shady css build will already have transformed selectors\n    // NOTE: This method may be called as part of static or property shimming.\n    // When there is a targeted build it will not be called for static shimming,\n    // but when the property shim is used it is called and should opt out of\n    // static shimming work when a proper build exists.\n    if (cssText === '') {\n      if (nativeShadow || cssBuild === 'shady') {\n        cssText = StyleUtil.toCssText(styleRules, callback);\n      } else {\n        let {is, typeExtension} = StyleUtil.getIsExtends(element);\n        cssText = this.css(styleRules, is, typeExtension, callback) + '\\n\\n';\n      }\n    }\n    return cssText.trim();\n  }\n\n  // Given a string of cssText and a scoping string (scope), returns\n  // a string of scoped css where each selector is transformed to include\n  // a class created from the scope. ShadowDOM selectors are also transformed\n  // (e.g. :host) to use the scoping selector.\n  css(rules, scope, ext, callback) {\n    let hostScope = this._calcHostScope(scope, ext);\n    scope = this._calcElementScope(scope);\n    let self = this;\n    return StyleUtil.toCssText(rules, function (/** StyleNode */ rule) {\n      if (!(/** @type {?} */ (rule.isScoped))) {\n        self.rule(rule, scope, hostScope);\n        rule.isScoped = true;\n      }\n      if (callback) {\n        callback(rule, scope, hostScope);\n      }\n    });\n  }\n\n  _calcElementScope(scope) {\n    if (scope) {\n      return CSS_CLASS_PREFIX + scope;\n    } else {\n      return '';\n    }\n  }\n\n  _calcHostScope(scope, ext) {\n    return ext ? `[is=${scope}]` : scope;\n  }\n\n  rule(rule, scope, hostScope) {\n    this._transformRule(rule, this._transformComplexSelector, scope, hostScope);\n  }\n\n  /**\n   * transforms a css rule to a scoped rule.\n   *\n   * @param {StyleNode} rule\n   * @param {Function} transformer\n   * @param {string=} scope\n   * @param {string=} hostScope\n   */\n  _transformRule(rule, transformer, scope, hostScope) {\n    // NOTE: save transformedSelector for subsequent matching of elements\n    // against selectors (e.g. when calculating style properties)\n    rule[\n      'selector'\n    ] = /** @type {?} */ (rule).transformedSelector = this._transformRuleCss(\n      rule,\n      transformer,\n      scope,\n      hostScope\n    );\n  }\n\n  /**\n   * @param {StyleNode} rule\n   * @param {Function} transformer\n   * @param {string=} scope\n   * @param {string=} hostScope\n   */\n  _transformRuleCss(rule, transformer, scope, hostScope) {\n    let p$ = StyleUtil.splitSelectorList(rule['selector']);\n    // we want to skip transformation of rules that appear in keyframes,\n    // because they are keyframe selectors, not element selectors.\n    if (!StyleUtil.isKeyframesSelector(rule)) {\n      for (let i = 0, l = p$.length, p; i < l && (p = p$[i]); i++) {\n        p$[i] = transformer.call(this, p, scope, hostScope);\n      }\n    }\n    return p$.filter((part) => Boolean(part)).join(COMPLEX_SELECTOR_SEP);\n  }\n\n  /**\n   * @param {string} selector\n   * @return {string}\n   */\n  _twiddleNthPlus(selector) {\n    return selector.replace(NTH, (m, type, inside) => {\n      if (inside.indexOf('+') > -1) {\n        inside = inside.replace(/\\+/g, '___');\n      } else if (inside.indexOf('___') > -1) {\n        inside = inside.replace(/___/g, '+');\n      }\n      return `:${type}(${inside})`;\n    });\n  }\n\n  /**\n   * Preserve `:matches()` selectors by replacing them with MATCHES_REPLACMENT\n   * and returning an array of `:matches()` selectors.\n   * Use `_replacesMatchesPseudo` to replace the `:matches()` parts\n   *\n   * @param {string} selector\n   * @return {{selector: string, matches: !Array<string>}}\n   */\n  _preserveMatchesPseudo(selector) {\n    /** @type {!Array<string>} */\n    const matches = [];\n    let match;\n    while ((match = selector.match(MATCHES))) {\n      const start = match.index;\n      const end = StyleUtil.findMatchingParen(selector, start);\n      if (end === -1) {\n        throw new Error(`${match.input} selector missing ')'`);\n      }\n      const part = selector.slice(start, end + 1);\n      selector = selector.replace(part, MATCHES_REPLACEMENT);\n      matches.push(part);\n    }\n    return {selector, matches};\n  }\n\n  /**\n   * Replace MATCHES_REPLACMENT character with the given set of `:matches()`\n   * selectors.\n   *\n   * @param {string} selector\n   * @param {!Array<string>} matches\n   * @return {string}\n   */\n  _replaceMatchesPseudo(selector, matches) {\n    const parts = selector.split(MATCHES_REPLACEMENT);\n    return matches.reduce(\n      (acc, cur, idx) => acc + cur + parts[idx + 1],\n      parts[0]\n    );\n  }\n\n  /**\n   * @param {string} selector\n   * @param {string} scope\n   * @param {string=} hostScope\n   */\n  _transformComplexSelector(selector, scope, hostScope) {\n    let stop = false;\n    selector = selector.trim();\n    // Remove spaces inside of selectors like `:nth-of-type` because it confuses SIMPLE_SELECTOR_SEP\n    let isNth = NTH.test(selector);\n    if (isNth) {\n      selector = selector.replace(\n        NTH,\n        (m, type, inner) => `:${type}(${inner.replace(/\\s/g, '')})`\n      );\n      selector = this._twiddleNthPlus(selector);\n    }\n    // Preserve selectors like `:-webkit-any` so that SIMPLE_SELECTOR_SEP does\n    // not get confused by spaces inside the pseudo selector\n    const isMatches = MATCHES.test(selector);\n    /** @type {!Array<string>} */\n    let matches;\n    if (isMatches) {\n      ({selector, matches} = this._preserveMatchesPseudo(selector));\n    }\n    selector = selector.replace(SLOTTED_START, `${HOST} $1`);\n    selector = selector.replace(SIMPLE_SELECTOR_SEP, (m, c, s) => {\n      if (!stop) {\n        let info = this._transformCompoundSelector(s, c, scope, hostScope);\n        stop = stop || info.stop;\n        c = info.combinator;\n        s = info.value;\n      }\n      return c + s;\n    });\n    // replace `:matches()` selectors\n    if (isMatches) {\n      selector = this._replaceMatchesPseudo(selector, matches);\n    }\n    if (isNth) {\n      selector = this._twiddleNthPlus(selector);\n    }\n    selector = selector.replace(\n      DIR_PAREN,\n      (m, before, dir, after) =>\n        `[dir=\"${dir}\"] ${before}${after}, ${before}[dir=\"${dir}\"]${after}`\n    );\n    return selector;\n  }\n\n  _transformCompoundSelector(selector, combinator, scope, hostScope) {\n    // replace :host with host scoping class\n    let slottedIndex = selector.indexOf(SLOTTED);\n    if (selector.indexOf(HOST) >= 0) {\n      selector = this._transformHostSelector(selector, hostScope);\n      // replace other selectors with scoping class\n    } else if (slottedIndex !== 0) {\n      selector = scope\n        ? this._transformSimpleSelector(selector, scope)\n        : selector;\n    }\n    // mark ::slotted() scope jump to replace with descendant selector + arg\n    // also ignore left-side combinator\n    let slotted = false;\n    if (slottedIndex >= 0) {\n      combinator = '';\n      slotted = true;\n    }\n    // process scope jumping selectors up to the scope jump and then stop\n    let stop;\n    if (slotted) {\n      stop = true;\n      if (slotted) {\n        // .zonk ::slotted(.foo) -> .zonk.scope > .foo\n        selector = selector.replace(SLOTTED_PAREN, (m, paren) => ` > ${paren}`);\n      }\n    }\n    return {value: selector, combinator, stop};\n  }\n\n  _transformSimpleSelector(selector, scope) {\n    const attributes = selector.split(/(\\[.+?\\])/);\n\n    const output = [];\n    for (let i = 0; i < attributes.length; i++) {\n      // Do not attempt to transform any attribute selector content\n      if (i % 2 === 1) {\n        output.push(attributes[i]);\n      } else {\n        const part = attributes[i];\n\n        if (!(part === '' && i === attributes.length - 1)) {\n          let p$ = part.split(PSEUDO_PREFIX);\n          p$[0] += scope;\n          output.push(p$.join(PSEUDO_PREFIX));\n        }\n      }\n    }\n\n    return output.join('');\n  }\n\n  // :host(...) -> scopeName...\n  _transformHostSelector(selector, hostScope) {\n    let m = selector.match(HOST_PAREN);\n    let paren = (m && m[2].trim()) || '';\n    if (paren) {\n      if (!paren[0].match(SIMPLE_SELECTOR_PREFIX)) {\n        // paren starts with a type selector\n        let typeSelector = paren.split(SIMPLE_SELECTOR_PREFIX)[0];\n        // if the type selector is our hostScope then avoid pre-pending it\n        if (typeSelector === hostScope) {\n          return paren;\n        }\n        // otherwise, this selector should not match in this scope so\n        // output a bogus selector.\n        else {\n          return SELECTOR_NO_MATCH;\n        }\n      } else {\n        // make sure to do a replace here to catch selectors like:\n        // `:host(.foo)::before`\n        return selector.replace(HOST_PAREN, function (m, host, paren) {\n          return hostScope + paren;\n        });\n      }\n    }\n    // if no paren, do a straight :host replacement.\n    // TODO(sorvell): this should not strictly be necessary but\n    // it's needed to maintain support for `:host[foo]` type selectors\n    // which have been improperly used under Shady DOM. This should be\n    // deprecated.\n    else {\n      return selector.replace(HOST, hostScope);\n    }\n  }\n\n  /**\n   * @param {StyleNode} rule\n   */\n  documentRule(rule) {\n    // reset selector in case this is redone.\n    rule['selector'] = rule['parsedSelector'];\n    this.normalizeRootSelector(rule);\n    this._transformRule(rule, this._transformDocumentSelector);\n  }\n\n  /**\n   * @param {StyleNode} rule\n   */\n  normalizeRootSelector(rule) {\n    if (rule['selector'] === ROOT) {\n      rule['selector'] = 'html';\n    }\n  }\n\n  /**\n   * @param {string} selector\n   */\n  _transformDocumentSelector(selector) {\n    if (selector.match(HOST)) {\n      // remove ':host' type selectors in document rules\n      return '';\n    } else if (selector.match(SLOTTED)) {\n      return this._transformComplexSelector(selector, SCOPE_DOC_SELECTOR);\n    } else {\n      return this._transformSimpleSelector(selector.trim(), SCOPE_DOC_SELECTOR);\n    }\n  }\n}\n\nconst NTH = /:(nth[-\\w]+)\\(([^)]+)\\)/;\nconst SCOPE_DOC_SELECTOR = `:not(.${SCOPE_NAME})`;\nconst COMPLEX_SELECTOR_SEP = ',';\nconst SIMPLE_SELECTOR_SEP = /(^|[\\s>+~]+)((?:\\[.+?\\]|[^\\s>+~=[])+)/g;\nconst SIMPLE_SELECTOR_PREFIX = /[[.:#*]/;\nconst HOST = ':host';\nconst ROOT = ':root';\nconst SLOTTED = '::slotted';\nconst SLOTTED_START = new RegExp(`^(${SLOTTED})`);\n// NOTE: this supports 1 nested () pair for things like\n// :host(:not([selected]), more general support requires\n// parsing which seems like overkill\nconst HOST_PAREN = /(:host)(?:\\(((?:\\([^)(]*\\)|[^)(]*)+?)\\))/;\n// similar to HOST_PAREN\nconst SLOTTED_PAREN = /(?:::slotted)(?:\\(((?:\\([^)(]*\\)|[^)(]*)+?)\\))/;\nconst DIR_PAREN = /(.*):dir\\((?:(ltr|rtl))\\)(.*)/;\nconst CSS_CLASS_PREFIX = '.';\nconst PSEUDO_PREFIX = ':';\nconst CLASS = 'class';\nconst SELECTOR_NO_MATCH = 'should_not_match';\nconst MATCHES = /:(?:matches|any|-(?:webkit|moz)-any)/;\nconst MATCHES_REPLACEMENT = '\\u{e000}';\n\nexport default new StyleTransformer();\n","/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\n\nimport {nativeShadow, nativeCssVariables, cssBuild} from './style-settings.js';\nimport {parse, stringify, types, StyleNode} from './css-parse.js'; // eslint-disable-line @typescript-eslint/no-unused-vars\nimport {MEDIA_MATCH} from './common-regex.js';\n// prettier-ignore\nimport {processUnscopedStyle, isUnscopedStyle} from './unscoped-style-handler.js';\n\n/**\n * @param {string|StyleNode} rules\n * @param {function(StyleNode)=} callback\n * @return {string}\n */\nexport function toCssText(rules, callback) {\n  if (!rules) {\n    return '';\n  }\n  if (typeof rules === 'string') {\n    rules = parse(rules);\n  }\n  if (callback) {\n    forEachRule(rules, callback);\n  }\n  return stringify(rules, nativeCssVariables);\n}\n\n/**\n * @param {HTMLStyleElement} style\n * @return {StyleNode}\n */\nexport function rulesForStyle(style) {\n  if (!style['__cssRules'] && style.textContent) {\n    style['__cssRules'] = parse(style.textContent);\n  }\n  return style['__cssRules'] || null;\n}\n\n// Tests if a rule is a keyframes selector, which looks almost exactly\n// like a normal selector but is not (it has nothing to do with scoping\n// for example).\n/**\n * @param {StyleNode} rule\n * @return {boolean}\n */\nexport function isKeyframesSelector(rule) {\n  return (\n    Boolean(rule['parent']) && rule['parent']['type'] === types.KEYFRAMES_RULE\n  );\n}\n\n/**\n * @param {StyleNode} node\n * @param {Function=} styleRuleCallback\n * @param {Function=} keyframesRuleCallback\n * @param {boolean=} onlyActiveRules\n */\nexport function forEachRule(\n  node,\n  styleRuleCallback,\n  keyframesRuleCallback,\n  onlyActiveRules\n) {\n  if (!node) {\n    return;\n  }\n  let skipRules = false;\n  let type = node['type'];\n  if (onlyActiveRules) {\n    if (type === types.MEDIA_RULE) {\n      let matchMedia = node['selector'].match(MEDIA_MATCH);\n      if (matchMedia) {\n        // if rule is a non matching @media rule, skip subrules\n        if (!window.matchMedia(matchMedia[1]).matches) {\n          skipRules = true;\n        }\n      }\n    }\n  }\n  if (type === types.STYLE_RULE) {\n    styleRuleCallback(node);\n  } else if (keyframesRuleCallback && type === types.KEYFRAMES_RULE) {\n    keyframesRuleCallback(node);\n  } else if (type === types.MIXIN_RULE) {\n    skipRules = true;\n  }\n  let r$ = node['rules'];\n  if (r$ && !skipRules) {\n    for (let i = 0, l = r$.length, r; i < l && (r = r$[i]); i++) {\n      forEachRule(r, styleRuleCallback, keyframesRuleCallback, onlyActiveRules);\n    }\n  }\n}\n\n// add a string of cssText to the document.\n/**\n * @param {string} cssText\n * @param {string} moniker\n * @param {Node} target\n * @param {Node} contextNode\n * @return {HTMLStyleElement}\n */\nexport function applyCss(cssText, moniker, target, contextNode) {\n  let style = createScopeStyle(cssText, moniker);\n  applyStyle(style, target, contextNode);\n  return style;\n}\n\n/**\n * @param {string} cssText\n * @param {string} moniker\n * @return {!HTMLStyleElement}\n */\nexport function createScopeStyle(cssText, moniker) {\n  let style = /** @type {HTMLStyleElement} */ (document.createElement('style'));\n  if (moniker) {\n    style.setAttribute('scope', moniker);\n  }\n  style.textContent = cssText;\n  return style;\n}\n\n/**\n * Track the position of the last added style for placing placeholders\n * @type {Node}\n */\nlet lastHeadApplyNode = null;\n\n// insert a comment node as a styling position placeholder.\n/**\n * @param {string} moniker\n * @return {!Comment}\n */\nexport function applyStylePlaceHolder(moniker) {\n  let placeHolder = document.createComment(\n    ' Shady DOM styles for ' + moniker + ' '\n  );\n  let after = lastHeadApplyNode ? lastHeadApplyNode['nextSibling'] : null;\n  let scope = document.head;\n  scope.insertBefore(placeHolder, after || scope.firstChild);\n  lastHeadApplyNode = placeHolder;\n  return placeHolder;\n}\n\n/**\n * @param {HTMLStyleElement} style\n * @param {?Node} target\n * @param {?Node} contextNode\n */\nexport function applyStyle(style, target, contextNode) {\n  target = target || document.head;\n  let after = (contextNode && contextNode.nextSibling) || target.firstChild;\n  target.insertBefore(style, after);\n  if (!lastHeadApplyNode) {\n    lastHeadApplyNode = style;\n  } else {\n    // only update lastHeadApplyNode if the new style is inserted after the old lastHeadApplyNode\n    let position = style.compareDocumentPosition(lastHeadApplyNode);\n    if (position === Node.DOCUMENT_POSITION_PRECEDING) {\n      lastHeadApplyNode = style;\n    }\n  }\n}\n\n/**\n * @param {string} buildType\n * @return {boolean}\n */\nexport function isTargetedBuild(buildType) {\n  return nativeShadow ? buildType === 'shadow' : buildType === 'shady';\n}\n\n/**\n * Walk from text[start] matching parens and\n * returns position of the outer end paren\n * @param {string} text\n * @param {number} start\n * @return {number}\n */\nexport function findMatchingParen(text, start) {\n  let level = 0;\n  for (let i = start, l = text.length; i < l; i++) {\n    if (text[i] === '(') {\n      level++;\n    } else if (text[i] === ')') {\n      if (--level === 0) {\n        return i;\n      }\n    }\n  }\n  return -1;\n}\n\n/**\n * @param {string} str\n * @param {function(string, string, string, string)} callback\n */\nexport function processVariableAndFallback(str, callback) {\n  // find 'var('\n  let start = str.indexOf('var(');\n  if (start === -1) {\n    // no var?, everything is prefix\n    return callback(str, '', '', '');\n  }\n  //${prefix}var(${inner})${suffix}\n  let end = findMatchingParen(str, start + 3);\n  let inner = str.substring(start + 4, end);\n  let prefix = str.substring(0, start);\n  // suffix may have other variables\n  let suffix = processVariableAndFallback(str.substring(end + 1), callback);\n  let comma = inner.indexOf(',');\n  // value and fallback args should be trimmed to match in property lookup\n  if (comma === -1) {\n    // variable, no fallback\n    return callback(prefix, inner.trim(), '', suffix);\n  }\n  // var(${value},${fallback})\n  let value = inner.substring(0, comma).trim();\n  let fallback = inner.substring(comma + 1).trim();\n  return callback(prefix, value, fallback, suffix);\n}\n\n/**\n * @param {Element} element\n * @param {string} value\n */\nexport function setElementClassRaw(element, value) {\n  // use native setAttribute provided by ShadyDOM when setAttribute is patched\n  if (nativeShadow) {\n    element.setAttribute('class', value);\n  } else {\n    window['ShadyDOM']['nativeMethods']['setAttribute'].call(\n      element,\n      'class',\n      value\n    );\n  }\n}\n\n/**\n * @type {function(*):*}\n */\nexport const wrap =\n  (window['ShadyDOM'] && window['ShadyDOM']['wrap']) || ((node) => node);\n\n/**\n * @param {Element | {is: string, extends: string}} element\n * @return {{is: string, typeExtension: string}}\n */\nexport function getIsExtends(element) {\n  let localName = element['localName'];\n  let is = '',\n    typeExtension = '';\n  /*\n  NOTE: technically, this can be wrong for certain svg elements\n  with `-` in the name like `<font-face>`\n  */\n  if (localName) {\n    if (localName.indexOf('-') > -1) {\n      is = localName;\n    } else {\n      typeExtension = localName;\n      is = (element.getAttribute && element.getAttribute('is')) || '';\n    }\n  } else {\n    is = /** @type {?} */ (element).is;\n    typeExtension = /** @type {?} */ (element).extends;\n  }\n  return {is, typeExtension};\n}\n\n/**\n * @param {Element|DocumentFragment} element\n * @return {string}\n */\nexport function gatherStyleText(element) {\n  /** @type {!Array<string>} */\n  const styleTextParts = [];\n  const styles = /** @type {!NodeList<!HTMLStyleElement>} */ (element.querySelectorAll(\n    'style'\n  ));\n  for (let i = 0; i < styles.length; i++) {\n    const style = styles[i];\n    if (isUnscopedStyle(style)) {\n      if (!nativeShadow) {\n        processUnscopedStyle(style);\n        style.parentNode.removeChild(style);\n      }\n    } else {\n      styleTextParts.push(style.textContent);\n      style.parentNode.removeChild(style);\n    }\n  }\n  return styleTextParts.join('').trim();\n}\n\n/**\n * Split a selector separated by commas into an array in a smart way\n * @param {string} selector\n * @return {!Array<string>}\n */\nexport function splitSelectorList(selector) {\n  const parts = [];\n  let part = '';\n  for (let i = 0; i >= 0 && i < selector.length; i++) {\n    // A selector with parentheses will be one complete part\n    if (selector[i] === '(') {\n      // find the matching paren\n      const end = findMatchingParen(selector, i);\n      // push the paren block into the part\n      part += selector.slice(i, end + 1);\n      // move the index to after the paren block\n      i = end;\n    } else if (selector[i] === ',') {\n      parts.push(part);\n      part = '';\n    } else {\n      part += selector[i];\n    }\n  }\n  // catch any pieces after the last comma\n  if (part) {\n    parts.push(part);\n  }\n  return parts;\n}\n\nconst CSS_BUILD_ATTR = 'css-build';\n\n/**\n * Return the polymer-css-build \"build type\" applied to this element\n *\n * @param {!HTMLElement} element\n * @return {string} Can be \"\", \"shady\", or \"shadow\"\n */\nexport function getCssBuild(element) {\n  if (cssBuild !== undefined) {\n    return /** @type {string} */ (cssBuild);\n  }\n  if (element.__cssBuild === undefined) {\n    // try attribute first, as it is the common case\n    const attrValue = element.getAttribute(CSS_BUILD_ATTR);\n    if (attrValue) {\n      element.__cssBuild = attrValue;\n    } else {\n      const buildComment = getBuildComment(element);\n      if (buildComment !== '') {\n        // remove build comment so it is not needlessly copied into every element instance\n        removeBuildComment(element);\n      }\n      element.__cssBuild = buildComment;\n    }\n  }\n  return element.__cssBuild || '';\n}\n\n/**\n * Check if the given element, either a <template> or <style>, has been processed\n * by polymer-css-build.\n *\n * If so, then we can make a number of optimizations:\n * - polymer-css-build will decompose mixins into individual CSS Custom Properties,\n * so the ApplyShim can be skipped entirely.\n * - Under native ShadowDOM, the style text can just be copied into each instance\n * without modification\n * - If the build is \"shady\" and ShadyDOM is in use, the styling does not need\n * scoping beyond the shimming of CSS Custom Properties\n *\n * @param {!HTMLElement} element\n * @return {boolean}\n */\nexport function elementHasBuiltCss(element) {\n  return getCssBuild(element) !== '';\n}\n\n/**\n * For templates made with tagged template literals, polymer-css-build will\n * insert a comment of the form `<!--css-build:shadow-->`\n *\n * @param {!HTMLElement} element\n * @return {string}\n */\nexport function getBuildComment(element) {\n  const buildComment =\n    element.localName === 'template'\n      ? /** @type {!HTMLTemplateElement} */ (element).content.firstChild\n      : element.firstChild;\n  if (buildComment instanceof Comment) {\n    const commentParts = buildComment.textContent.trim().split(':');\n    if (commentParts[0] === CSS_BUILD_ATTR) {\n      return commentParts[1];\n    }\n  }\n  return '';\n}\n\n/**\n * Check if the css build status is optimal, and do no unneeded work.\n *\n * @param {string=} cssBuild CSS build status\n * @return {boolean} css build is optimal or not\n */\nexport function isOptimalCssBuild(cssBuild = '') {\n  // CSS custom property shim always requires work\n  if (cssBuild === '' || !nativeCssVariables) {\n    return false;\n  }\n  return nativeShadow ? cssBuild === 'shadow' : cssBuild === 'shady';\n}\n\n/**\n * @param {!HTMLElement} element\n */\nfunction removeBuildComment(element) {\n  const buildComment =\n    element.localName === 'template'\n      ? /** @type {!HTMLTemplateElement} */ (element).content.firstChild\n      : element.firstChild;\n  buildComment.parentNode.removeChild(buildComment);\n}\n","/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\n\n/**\n * @const {!Object<string, !HTMLTemplateElement>}\n */\nconst templateMap = {};\nexport default templateMap;\n","/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\n\n/** @type {!Set<string>} */\nconst styleTextSet = new Set();\n\nexport const scopingAttribute = 'shady-unscoped';\n\n/**\n * Add a specifically-marked style to the document directly, and only one copy of that style.\n *\n * @param {!HTMLStyleElement} style\n * @return {undefined}\n */\nexport function processUnscopedStyle(style) {\n  const text = style.textContent;\n  if (!styleTextSet.has(text)) {\n    styleTextSet.add(text);\n    const newStyle = document.createElement('style');\n    newStyle.setAttribute('shady-unscoped', '');\n    newStyle.textContent = text;\n    document.head.appendChild(newStyle);\n  }\n}\n\n/**\n * Check if a style is supposed to be unscoped\n * @param {!HTMLStyleElement} style\n * @return {boolean} true if the style has the unscoping attribute\n */\nexport function isUnscopedStyle(style) {\n  return style.hasAttribute(scopingAttribute);\n}\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nexport class ShadyData {\n  /** @override */\n  toJSON() {\n    return {};\n  }\n}\n\nexport function ensureShadyDataForNode(node) {\n  if (!node.__shady) {\n    node.__shady = new ShadyData();\n  }\n  return node.__shady;\n}\n\nexport function shadyDataForNode(node) {\n  return node && node.__shady;\n}\n",null,null,null,null,null,"/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\nimport {shadyDataForNode} from './shady-data.js';\n\n/** @type {!Object} */\nexport const settings = window['ShadyDOM'] || {};\n\nsettings.hasNativeShadowDOM = Boolean(\n  Element.prototype.attachShadow && Node.prototype.getRootNode\n);\n\n// The user might need to pass the custom elements polyfill a flag by setting an\n// object to `customElements`, so check for `customElements.define` also.\nexport const hasCustomElements = () =>\n  Boolean(window.customElements && window.customElements.define);\n// The custom elements polyfill is typically loaded after Shady DOM, so this\n// check isn't reliable during initial evaluation. However, because the\n// polyfills are loaded immediately after one another, it works at runtime.\nexport const hasPolyfilledCustomElements = () =>\n  Boolean(\n    window.customElements && window.customElements['polyfillWrapFlushCallback']\n  );\n\nconst desc = Object.getOwnPropertyDescriptor(Node.prototype, 'firstChild');\n\nsettings.hasDescriptors = Boolean(desc && desc.configurable && desc.get);\nsettings.inUse = settings['force'] || !settings.hasNativeShadowDOM;\nsettings.noPatch = /** @type {string|boolean} */ (settings['noPatch'] || false);\n// eslint-disable-next-line no-self-assign\nsettings.preferPerformance = settings['preferPerformance'];\nsettings.patchOnDemand = settings.noPatch === 'on-demand';\nsettings.querySelectorImplementation = (() => {\n  const acceptedValues = ['native', 'selectorEngine'];\n  const userValue = settings['querySelectorImplementation'];\n  if (acceptedValues.indexOf(userValue) > -1) {\n    return userValue;\n  }\n  return undefined;\n})();\n\nconst IS_IE = navigator.userAgent.match('Trident');\nsettings.IS_IE = IS_IE;\n\n// Helper for prefixed properties.\nexport const getPropertyName = (obj, name) => {\n  const prefixed = `ms${name[0].toUpperCase() + name.slice(1)}`;\n  return obj[prefixed] ? prefixed : name;\n};\n\nexport const canUpgrade = () => !settings.IS_IE;\n\nexport const isTrackingLogicalChildNodes = (node) => {\n  const nodeData = shadyDataForNode(node);\n  return nodeData && nodeData.firstChild !== undefined;\n};\n\nexport const isShadyRoot = (obj) => obj instanceof ShadowRoot;\n\nexport const hasShadowRootWithSlot = (node) => {\n  const nodeData = shadyDataForNode(node);\n  let root = nodeData && nodeData.root;\n  return root && root._hasInsertionPoint();\n};\n\nlet p = Element.prototype;\nlet matches =\n  p.matches ||\n  p.matchesSelector ||\n  p.mozMatchesSelector ||\n  p.msMatchesSelector ||\n  p.oMatchesSelector ||\n  p.webkitMatchesSelector;\n\nexport const matchesSelector = (element, selector) => {\n  return matches.call(element, selector);\n};\n\nexport const mixin = (target, source) => {\n  for (var i in source) {\n    target[i] = source[i];\n  }\n  return target;\n};\n\n// NOTE, prefer MutationObserver over Promise for microtask timing\n// for consistency x-platform.\nlet twiddle = document.createTextNode('');\nlet content = 0;\nlet queue = [];\nnew MutationObserver(() => {\n  while (queue.length) {\n    // catch errors in user code...\n    try {\n      queue.shift()();\n    } catch (e) {\n      // enqueue another record and throw\n      twiddle.textContent = content++;\n      throw e;\n    }\n  }\n}).observe(twiddle, {characterData: true});\n\n// use MutationObserver to get microtask async timing.\nexport const microtask = (callback) => {\n  queue.push(callback);\n  twiddle.textContent = content++;\n};\n\n/** @type {function(!Document, !Node): boolean} */\nexport const documentContains = (() => {\n  if (document.contains) {\n    return (doc, node) => doc[NATIVE_PREFIX + 'contains'](node);\n  } else {\n    return (doc, node) =>\n      doc === node ||\n      (doc.documentElement &&\n        doc.documentElement[NATIVE_PREFIX + 'contains'](node));\n  }\n})();\n\nexport const contains = (container, node) => {\n  while (node) {\n    if (node == container) {\n      return true;\n    }\n    node = node[SHADY_PREFIX + 'parentNode'];\n  }\n  return false;\n};\n\nconst getNodeHTMLCollectionName = (node) =>\n  node.getAttribute('id') || node.getAttribute('name');\n\nconst isValidHTMLCollectionName = (name) => name !== 'length' && isNaN(name);\n\nexport const createPolyfilledHTMLCollection = (nodes) => {\n  // Note: loop in reverse so that the first named item matches the named property\n  for (let l = nodes.length - 1; l >= 0; l--) {\n    const node = nodes[l];\n    const name = getNodeHTMLCollectionName(node);\n\n    if (name && isValidHTMLCollectionName(name)) {\n      nodes[name] = node;\n    }\n  }\n  nodes.item = function (index) {\n    return nodes[index];\n  };\n  nodes.namedItem = function (name) {\n    if (isValidHTMLCollectionName(name) && nodes[name]) {\n      return nodes[name];\n    }\n\n    for (const node of nodes) {\n      const nodeName = getNodeHTMLCollectionName(node);\n\n      if (nodeName == name) {\n        return node;\n      }\n    }\n\n    return null;\n  };\n  return nodes;\n};\n\nexport const NATIVE_PREFIX = '__shady_native_';\nexport const SHADY_PREFIX = '__shady_';\n\nexport const nativeChildNodesArray = (parent) => {\n  const result = [];\n  for (\n    let n = parent[NATIVE_PREFIX + 'firstChild'];\n    n;\n    n = n[NATIVE_PREFIX + 'nextSibling']\n  ) {\n    result.push(n);\n  }\n  return result;\n};\n\nexport const childNodesArray = (parent) => {\n  const result = [];\n  for (\n    let n = parent[SHADY_PREFIX + 'firstChild'];\n    n;\n    n = n[SHADY_PREFIX + 'nextSibling']\n  ) {\n    result.push(n);\n  }\n  return result;\n};\n\nconst patchProperty = (proto, name, descriptor) => {\n  descriptor.configurable = true;\n  // NOTE: we prefer writing directly because some browsers\n  // have descriptors that are writable but not configurable (e.g.\n  // `appendChild` on older browsers)\n  if (descriptor.value) {\n    proto[name] = descriptor.value;\n  } else {\n    try {\n      Object.defineProperty(proto, name, descriptor);\n    } catch (e) {\n      // this error is harmless so we just trap it.\n    }\n  }\n};\n\n/**\n * Patch a group of accessors on an object. By default this overrides\n * @param {!Object} proto\n * @param {!Object} descriptors\n * @param {string=} prefix\n * @param {Array=} disallowedPatches\n */\nexport const patchProperties = (\n  proto,\n  descriptors,\n  prefix = '',\n  disallowedPatches\n) => {\n  for (let name in descriptors) {\n    if (disallowedPatches && disallowedPatches.indexOf(name) >= 0) {\n      continue;\n    }\n    patchProperty(proto, prefix + name, descriptors[name]);\n  }\n};\n\nexport const patchExistingProperties = (proto, descriptors) => {\n  for (let name in descriptors) {\n    if (name in proto) {\n      patchProperty(proto, name, descriptors[name]);\n    }\n  }\n};\n\n// note, this is not a perfect polyfill since it doesn't include symbols\n/** @return {!Object<!ObjectPropertyDescriptor>} */\nexport const getOwnPropertyDescriptors = (obj) => {\n  const descriptors = {};\n  Object.getOwnPropertyNames(obj).forEach((name) => {\n    descriptors[name] = Object.getOwnPropertyDescriptor(obj, name);\n  });\n  return descriptors;\n};\n\nexport const assign = (target, source) => {\n  const names = Object.getOwnPropertyNames(source);\n  for (let i = 0, p; i < names.length; i++) {\n    p = names[i];\n    target[p] = source[p];\n  }\n};\n\nexport const arrayFrom = (object) => {\n  return [].slice.call(/** @type {IArrayLike} */ (object));\n};\n\n/**\n * Converts a single value to a node for `convertNodesIntoANode`.\n *\n * @param {*} arg\n * @return {!Node}\n */\nconst convertIntoANode = (arg) => {\n  // `\"\" + arg` is used to implicitly coerce the value to a string (coercing a\n  // symbol *should* fail here) before passing to `createTextNode`, which has\n  // argument type `(number|string)`.\n  return !(arg instanceof Node) ? document.createTextNode('' + arg) : arg;\n};\n\n/**\n * Implements 'convert nodes into a node'. The spec text indicates that strings\n * become text nodes, but doesn't describe what should happen if a non-Node,\n * non-string value is found in the arguments list. In practice, browsers coerce\n * these values to strings and convert those to text nodes.\n * https://dom.spec.whatwg.org/#converting-nodes-into-a-node\n *\n * @param {...*} args\n * @return {!Node}\n */\nexport const convertNodesIntoANode = (...args) => {\n  if (args.length === 1) {\n    return convertIntoANode(args[0]);\n  }\n\n  const fragment = document.createDocumentFragment();\n  for (const arg of args) {\n    fragment.appendChild(convertIntoANode(arg));\n  }\n  return fragment;\n};\n\n/**\n * Equivalent to `Array.prototype.flat`. Closure does not compile out this\n * function, so we need an implementation for browsers that don't natively\n * support it.\n *\n * @template T\n * @param {!Array<!T | !Array<!T>>} array\n * @param {number} depth\n * @return {!Array<!T>}\n */\nexport const flat = (array, depth = 1) => {\n  for (; depth > 0; depth--) {\n    array = array.reduce((acc, item) => {\n      if (Array.isArray(item)) {\n        acc.push(...item);\n      } else {\n        acc.push(item);\n      }\n      return acc;\n    }, []);\n  }\n\n  return array;\n};\n\n/**\n * Deduplicates items in an array.\n *\n * This function could normally be implemented as merely `Array.from(new\n * Set(...))`. However, in IE 11, `Set` does not support being constructed with\n * an iterable. Further, some polyfills for `Array.from` effectively default to\n * `Array.prototype.slice.call(...)` when they are unable to find\n * `[Symbol.iterator]`; this is incompatible with `Set` which has no `length` or\n * indexable properties.\n *\n * @template T\n * @param {!Array<!T>} array\n * @return {!Array<!T>}\n */\nexport const deduplicate = (array) => {\n  const results = [];\n  const set = new Set();\n  for (const item of array) {\n    if (!set.has(item)) {\n      results.push(item);\n      set.add(item);\n    }\n  }\n  return results;\n};\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\nimport * as utils from './utils.js';\nimport {patchProperties} from './utils.js';\nimport {getInnerHTML} from './innerHTML.js';\n\nconst hasDescriptors = utils.settings.hasDescriptors;\nexport const NATIVE_PREFIX = utils.NATIVE_PREFIX;\n\n// Object on which raw native methods are stored.\n// e.g. `nativeMethods.querySelector.call(node, selector)`\n// same as `node.querySelector(selector)`\nexport const nativeMethods = {\n  /** @this {Element} */\n  querySelector(selector) {\n    return this[NATIVE_PREFIX + 'querySelector'](selector);\n  },\n  /** @this {Element} */\n  querySelectorAll(selector) {\n    return this[NATIVE_PREFIX + 'querySelectorAll'](selector);\n  },\n};\n// Object on which raw native accessors are available via `accessorName(node)`.\n// e.g. `nativeTree.firstChild(node)`\n// same as `node.firstChild`\nexport const nativeTree = {};\n\nconst installNativeAccessor = (name) => {\n  nativeTree[name] = (node) => node[NATIVE_PREFIX + name];\n};\n\nconst installNativeMethod = (name, fn) => {\n  if (!nativeMethods[name]) {\n    nativeMethods[name] = fn;\n  }\n};\n\nconst defineNativeAccessors = (proto, descriptors) => {\n  patchProperties(proto, descriptors, NATIVE_PREFIX);\n  // make native accessors available to users\n  for (let prop in descriptors) {\n    installNativeAccessor(prop);\n  }\n};\n\nconst copyProperties = (proto, list = []) => {\n  for (let i = 0; i < list.length; i++) {\n    const name = list[i];\n    const descriptor = Object.getOwnPropertyDescriptor(proto, name);\n    if (descriptor) {\n      Object.defineProperty(proto, NATIVE_PREFIX + name, descriptor);\n      // make native methods/accessors available to users\n      if (descriptor.value) {\n        installNativeMethod(name, descriptor.value);\n      } else {\n        installNativeAccessor(name);\n      }\n    }\n  }\n};\n\n/** @type {!TreeWalker} */\nconst nodeWalker = document.createTreeWalker(\n  document,\n  NodeFilter.SHOW_ALL,\n  null,\n  false\n);\n\n/** @type {!TreeWalker} */\nconst elementWalker = document.createTreeWalker(\n  document,\n  NodeFilter.SHOW_ELEMENT,\n  null,\n  false\n);\n\n/** @type {!Document} */\nconst inertDoc = document.implementation.createHTMLDocument('inert');\n\nconst clearNode = (node) => {\n  let firstChild;\n  while ((firstChild = node[NATIVE_PREFIX + 'firstChild'])) {\n    node[NATIVE_PREFIX + 'removeChild'](firstChild);\n  }\n};\n\nconst ParentNodeAccessors = [\n  'firstElementChild',\n  'lastElementChild',\n  'children',\n  'childElementCount',\n];\n\nconst ParentNodeMethods = [\n  'querySelector',\n  'querySelectorAll',\n  'append',\n  'prepend',\n  'replaceChildren',\n];\n\nexport const addNativePrefixedProperties = () => {\n  // EventTarget\n  const eventProps = [\n    'dispatchEvent',\n    'addEventListener',\n    'removeEventListener',\n  ];\n  if (window.EventTarget) {\n    copyProperties(window.EventTarget.prototype, eventProps);\n\n    // In Firefox 31, `EventTarget` exists, but `EventTarget.prototype` is not\n    // in the prototype chain of `window` and, strangely,\n    // `window instanceof EventTarget` still returns true.\n    if (window[NATIVE_PREFIX + 'addEventListener'] === undefined) {\n      copyProperties(Window.prototype, eventProps);\n    }\n  } else {\n    copyProperties(Node.prototype, eventProps);\n    copyProperties(Window.prototype, eventProps);\n    copyProperties(XMLHttpRequest.prototype, eventProps);\n  }\n\n  // Node\n  if (hasDescriptors) {\n    copyProperties(Node.prototype, [\n      'parentNode',\n      'firstChild',\n      'lastChild',\n      'previousSibling',\n      'nextSibling',\n      'childNodes',\n      'parentElement',\n      'textContent',\n    ]);\n  } else {\n    defineNativeAccessors(Node.prototype, {\n      parentNode: {\n        /** @this {Node} */\n        get() {\n          nodeWalker.currentNode = this;\n          return nodeWalker.parentNode();\n        },\n      },\n      firstChild: {\n        /** @this {Node} */\n        get() {\n          nodeWalker.currentNode = this;\n          return nodeWalker.firstChild();\n        },\n      },\n      lastChild: {\n        /** @this {Node} */\n        get() {\n          nodeWalker.currentNode = this;\n          return nodeWalker.lastChild();\n        },\n      },\n      previousSibling: {\n        /** @this {Node} */\n        get() {\n          nodeWalker.currentNode = this;\n          return nodeWalker.previousSibling();\n        },\n      },\n      nextSibling: {\n        /** @this {Node} */\n        get() {\n          nodeWalker.currentNode = this;\n          return nodeWalker.nextSibling();\n        },\n      },\n      // TODO(sorvell): make this a NodeList or whatever\n      childNodes: {\n        /** @this {Node} */\n        get() {\n          const nodes = [];\n          nodeWalker.currentNode = this;\n          let n = nodeWalker.firstChild();\n          while (n) {\n            nodes.push(n);\n            n = nodeWalker.nextSibling();\n          }\n          return nodes;\n        },\n      },\n      parentElement: {\n        /** @this {Node} */\n        get() {\n          elementWalker.currentNode = this;\n          return elementWalker.parentNode();\n        },\n      },\n      textContent: {\n        /** @this {Node} */\n        get() {\n          switch (this.nodeType) {\n            case Node.ELEMENT_NODE:\n            case Node.DOCUMENT_FRAGMENT_NODE:\n              // TODO(sorvell): This cannot be a single TreeWalker that's reused\n              // at least for Safari 9, but it's unclear why.\n              // eslint-disable-next-line no-case-declarations\n              const textWalker = document.createTreeWalker(\n                this,\n                NodeFilter.SHOW_TEXT,\n                null,\n                false\n              );\n              // eslint-disable-next-line no-case-declarations\n              let content = '',\n                n;\n              while ((n = textWalker.nextNode())) {\n                // TODO(sorvell): can't use textContent since we patch it on Node.prototype!\n                // However, should probably patch it only on element.\n                content += n.nodeValue;\n              }\n              return content;\n            default:\n              return this.nodeValue;\n          }\n        },\n        // Needed on browsers that do not proper accessors (e.g. old versions of Chrome)\n        /** @this {Node} */\n        set(value) {\n          if (typeof value === 'undefined' || value === null) {\n            value = '';\n          }\n          switch (this.nodeType) {\n            case Node.ELEMENT_NODE:\n            case Node.DOCUMENT_FRAGMENT_NODE:\n              clearNode(this);\n              // Document fragments must have no childnodes if setting a blank string\n              if (value.length > 0 || this.nodeType === Node.ELEMENT_NODE) {\n                // Note: old Chrome versions require 2nd argument here\n                this[NATIVE_PREFIX + 'insertBefore'](\n                  document.createTextNode(value),\n                  undefined\n                );\n              }\n              break;\n            default:\n              // TODO(sorvell): can't do this if patch nodeValue.\n              this.nodeValue = value;\n              break;\n          }\n        },\n      },\n    });\n  }\n\n  copyProperties(Node.prototype, [\n    'appendChild',\n    'insertBefore',\n    'removeChild',\n    'replaceChild',\n    'cloneNode',\n    'contains',\n  ]);\n\n  // NOTE, on some browsers IE 11 / Edge 15 some properties are incorrectly on HTMLElement\n  copyProperties(HTMLElement.prototype, ['parentElement', 'contains']);\n\n  const ParentNodeWalkerDescriptors = {\n    firstElementChild: {\n      /** @this {ParentNode} */\n      get() {\n        elementWalker.currentNode = this;\n        return elementWalker.firstChild();\n      },\n    },\n    lastElementChild: {\n      /** @this {ParentNode} */\n      get() {\n        elementWalker.currentNode = this;\n        return elementWalker.lastChild();\n      },\n    },\n    children: {\n      /** @this {ParentNode} */\n      get() {\n        let nodes = [];\n        elementWalker.currentNode = this;\n        let n = elementWalker.firstChild();\n        while (n) {\n          nodes.push(n);\n          n = elementWalker.nextSibling();\n        }\n        return utils.createPolyfilledHTMLCollection(nodes);\n      },\n    },\n    childElementCount: {\n      /** @this {ParentNode} */\n      get() {\n        if (this.children) {\n          return this.children.length;\n        }\n        return 0;\n      },\n    },\n  };\n\n  // Element\n  if (hasDescriptors) {\n    copyProperties(Element.prototype, ParentNodeAccessors);\n\n    copyProperties(Element.prototype, [\n      'previousElementSibling',\n      'nextElementSibling',\n      'innerHTML',\n      'className',\n    ]);\n\n    // NOTE, on some browsers IE 11 / Edge 15 some properties are incorrectly on HTMLElement\n    copyProperties(HTMLElement.prototype, [\n      'children',\n      'innerHTML',\n      'className',\n    ]);\n  } else {\n    defineNativeAccessors(Element.prototype, ParentNodeWalkerDescriptors);\n    defineNativeAccessors(Element.prototype, {\n      previousElementSibling: {\n        /** @this {Element} */\n        get() {\n          elementWalker.currentNode = this;\n          return elementWalker.previousSibling();\n        },\n      },\n      nextElementSibling: {\n        /** @this {Element} */\n        get() {\n          elementWalker.currentNode = this;\n          return elementWalker.nextSibling();\n        },\n      },\n      innerHTML: {\n        /** @this {Element} */\n        get() {\n          return getInnerHTML(this, utils.nativeChildNodesArray);\n        },\n        // Needed on browsers that do not proper accessors (e.g. old versions of Chrome)\n        /** @this {Element} */\n        set(value) {\n          const content =\n            this.localName === 'template'\n              ? /** @type {HTMLTemplateElement} */ (this).content\n              : this;\n          clearNode(content);\n          const containerName = this.localName || 'div';\n          let htmlContainer;\n          if (\n            !this.namespaceURI ||\n            this.namespaceURI === inertDoc.namespaceURI\n          ) {\n            htmlContainer = inertDoc.createElement(containerName);\n          } else {\n            htmlContainer = inertDoc.createElementNS(\n              this.namespaceURI,\n              containerName\n            );\n          }\n          htmlContainer.innerHTML = value;\n          const newContent =\n            this.localName === 'template'\n              ? /** @type {HTMLTemplateElement} */ (htmlContainer).content\n              : htmlContainer;\n          let firstChild;\n          while ((firstChild = newContent[NATIVE_PREFIX + 'firstChild'])) {\n            // Note: old Chrome versions require 2nd argument here\n            content[NATIVE_PREFIX + 'insertBefore'](firstChild, undefined);\n          }\n        },\n      },\n      className: {\n        /** @this {Element} */\n        get() {\n          return this.getAttribute('class') || '';\n        },\n        /** @this {Element} */\n        set(value) {\n          this.setAttribute('class', value);\n        },\n      },\n    });\n  }\n\n  copyProperties(Element.prototype, [\n    'setAttribute',\n    'getAttribute',\n    'hasAttribute',\n    'removeAttribute',\n    'toggleAttribute',\n    // on older Safari, these are on Element.\n    'focus',\n    'blur',\n  ]);\n  copyProperties(Element.prototype, ParentNodeMethods);\n\n  // HTMLElement\n  copyProperties(HTMLElement.prototype, ['focus', 'blur']);\n\n  // HTMLTemplateElement\n  if (window.HTMLTemplateElement) {\n    copyProperties(window.HTMLTemplateElement.prototype, ['innerHTML']);\n  }\n\n  // DocumentFragment\n  if (hasDescriptors) {\n    // NOTE, IE 11 does not have on DocumentFragment\n    // firstElementChild\n    // lastElementChild\n    copyProperties(DocumentFragment.prototype, ParentNodeAccessors);\n  } else {\n    defineNativeAccessors(\n      DocumentFragment.prototype,\n      ParentNodeWalkerDescriptors\n    );\n  }\n\n  copyProperties(DocumentFragment.prototype, ParentNodeMethods);\n\n  // Document\n  if (hasDescriptors) {\n    copyProperties(Document.prototype, ParentNodeAccessors);\n    copyProperties(Document.prototype, ['activeElement']);\n  } else {\n    defineNativeAccessors(Document.prototype, ParentNodeWalkerDescriptors);\n  }\n\n  copyProperties(Document.prototype, [\n    'importNode',\n    'getElementById',\n    'elementFromPoint',\n    utils.getPropertyName(Document.prototype, 'elementsFromPoint'),\n  ]);\n  copyProperties(Document.prototype, ParentNodeMethods);\n};\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nimport * as utils from './utils.js';\n\n// render enqueuer/flusher\nlet flushList = [];\nlet scheduled;\nexport function enqueue(callback) {\n  if (!scheduled) {\n    scheduled = true;\n    utils.microtask(flush);\n  }\n  flushList.push(callback);\n}\n\nexport function flush() {\n  scheduled = false;\n  let didFlush = Boolean(flushList.length);\n  while (flushList.length) {\n    flushList.shift()();\n  }\n  return didFlush;\n}\n\nflush['list'] = flushList;\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nimport * as utils from './utils.js';\nimport {ensureShadyDataForNode} from './shady-data.js';\n\nclass AsyncObserver {\n  constructor() {\n    this._scheduled = false;\n    this.addedNodes = [];\n    this.removedNodes = [];\n    this.callbacks = new Set();\n  }\n\n  schedule() {\n    if (!this._scheduled) {\n      this._scheduled = true;\n      utils.microtask(() => {\n        this.flush();\n      });\n    }\n  }\n\n  flush() {\n    if (this._scheduled) {\n      this._scheduled = false;\n      let mutations = this.takeRecords();\n      if (mutations.length) {\n        this.callbacks.forEach(function (cb) {\n          cb(mutations);\n        });\n      }\n    }\n  }\n\n  takeRecords() {\n    if (this.addedNodes.length || this.removedNodes.length) {\n      let mutations = [\n        {\n          addedNodes: this.addedNodes,\n          removedNodes: this.removedNodes,\n        },\n      ];\n      this.addedNodes = [];\n      this.removedNodes = [];\n      return mutations;\n    }\n    return [];\n  }\n}\n\n// TODO(sorvell): consider instead polyfilling MutationObserver\n// directly so that users do not have to fork their code.\n// Supporting the entire api may be challenging: e.g. filtering out\n// removed nodes in the wrong scope and seeing non-distributing\n// subtree child mutations.\nexport let observeChildren = function (node, callback) {\n  const sd = ensureShadyDataForNode(node);\n  if (!sd.observer) {\n    sd.observer = new AsyncObserver();\n  }\n  sd.observer.callbacks.add(callback);\n  let observer = sd.observer;\n  return {\n    _callback: callback,\n    _observer: observer,\n    _node: node,\n    takeRecords() {\n      return observer.takeRecords();\n    },\n  };\n};\n\nexport let unobserveChildren = function (handle) {\n  let observer = handle && handle._observer;\n  if (observer) {\n    observer.callbacks.delete(handle._callback);\n    if (!observer.callbacks.size) {\n      ensureShadyDataForNode(handle._node).observer = null;\n    }\n  }\n};\n\nexport function filterMutations(mutations, target) {\n  /** @const {Node} */\n  const targetRootNode = target.getRootNode();\n  return mutations\n    .map(function (mutation) {\n      /** @const {boolean} */\n      const mutationInScope = targetRootNode === mutation.target.getRootNode();\n      if (mutationInScope && mutation.addedNodes) {\n        let nodes = utils.arrayFrom(mutation.addedNodes).filter(function (n) {\n          return targetRootNode === n.getRootNode();\n        });\n        if (nodes.length) {\n          mutation = Object.create(mutation);\n          Object.defineProperty(mutation, 'addedNodes', {\n            value: nodes,\n            configurable: true,\n          });\n          return mutation;\n        }\n      } else if (mutationInScope) {\n        return mutation;\n      }\n    })\n    .filter(function (m) {\n      return m;\n    });\n}\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n// Cribbed from ShadowDOM polyfill\n// https://github.com/webcomponents/webcomponentsjs/blob/master/src/ShadowDOM/wrappers/HTMLElement.js#L28\n/////////////////////////////////////////////////////////////////////////////\n// innerHTML and outerHTML\n\n// http://www.whatwg.org/specs/web-apps/current-work/multipage/the-end.html#escapingString\nlet escapeAttrRegExp = /[&\\u00A0\"]/g;\nlet escapeDataRegExp = /[&\\u00A0<>]/g;\n\nfunction escapeReplace(c) {\n  switch (c) {\n    case '&':\n      return '&amp;';\n    case '<':\n      return '&lt;';\n    case '>':\n      return '&gt;';\n    case '\"':\n      return '&quot;';\n    case '\\u00A0':\n      return '&nbsp;';\n  }\n}\n\nfunction escapeAttr(s) {\n  return s.replace(escapeAttrRegExp, escapeReplace);\n}\n\nfunction escapeData(s) {\n  return s.replace(escapeDataRegExp, escapeReplace);\n}\n\nfunction makeSet(arr) {\n  let set = {};\n  for (let i = 0; i < arr.length; i++) {\n    set[arr[i]] = true;\n  }\n  return set;\n}\n\n// http://www.whatwg.org/specs/web-apps/current-work/#void-elements\nlet voidElements = makeSet([\n  'area',\n  'base',\n  'br',\n  'col',\n  'command',\n  'embed',\n  'hr',\n  'img',\n  'input',\n  'keygen',\n  'link',\n  'meta',\n  'param',\n  'source',\n  'track',\n  'wbr',\n]);\n\nlet plaintextParents = makeSet([\n  'style',\n  'script',\n  'xmp',\n  'iframe',\n  'noembed',\n  'noframes',\n  'plaintext',\n  'noscript',\n]);\n\n/**\n * @param {Node} node\n * @param {Node} parentNode\n * @param {Function=} callback\n */\nexport function getOuterHTML(node, parentNode, callback) {\n  switch (node.nodeType) {\n    case Node.ELEMENT_NODE: {\n      let tagName = node.localName;\n      let s = '<' + tagName;\n      let attrs = node.attributes;\n      for (let i = 0, attr; (attr = attrs[i]); i++) {\n        s += ' ' + attr.name + '=\"' + escapeAttr(attr.value) + '\"';\n      }\n      s += '>';\n      if (voidElements[tagName]) {\n        return s;\n      }\n      return s + getInnerHTML(node, callback) + '</' + tagName + '>';\n    }\n    case Node.TEXT_NODE: {\n      let data = /** @type {Text} */ (node).data;\n      if (parentNode && plaintextParents[parentNode.localName]) {\n        return data;\n      }\n      return escapeData(data);\n    }\n    case Node.COMMENT_NODE: {\n      return '<!--' + /** @type {Comment} */ (node).data + '-->';\n    }\n    default: {\n      window.console.error(node);\n      throw new Error('not implemented');\n    }\n  }\n}\n\n/**\n * @param {Node} node\n * @param {Function=} callback\n */\nexport function getInnerHTML(node, callback) {\n  if (node.localName === 'template') {\n    node = /** @type {HTMLTemplateElement} */ (node).content;\n  }\n  let s = '';\n  let c$ = callback ? callback(node) : node.childNodes;\n  for (let i = 0, l = c$.length, child; i < l && (child = c$[i]); i++) {\n    s += getOuterHTML(child, node, callback);\n  }\n  return s;\n}\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nimport * as utils from './utils.js';\nimport {ensureShadyDataForNode} from './shady-data.js';\n\nexport const InsideDescriptors = utils.getOwnPropertyDescriptors({\n  /** @this {Node} */\n  get childNodes() {\n    return this[utils.SHADY_PREFIX + 'childNodes'];\n  },\n\n  /** @this {Node} */\n  get firstChild() {\n    return this[utils.SHADY_PREFIX + 'firstChild'];\n  },\n\n  /** @this {Node} */\n  get lastChild() {\n    return this[utils.SHADY_PREFIX + 'lastChild'];\n  },\n\n  /** @this {Node} */\n  get childElementCount() {\n    return this[utils.SHADY_PREFIX + 'childElementCount'];\n  },\n\n  /** @this {Node} */\n  get children() {\n    return this[utils.SHADY_PREFIX + 'children'];\n  },\n\n  /** @this {Node} */\n  get firstElementChild() {\n    return this[utils.SHADY_PREFIX + 'firstElementChild'];\n  },\n\n  /** @this {Node} */\n  get lastElementChild() {\n    return this[utils.SHADY_PREFIX + 'lastElementChild'];\n  },\n\n  /** @this {Node} */\n  get shadowRoot() {\n    return this[utils.SHADY_PREFIX + 'shadowRoot'];\n  },\n});\n\nexport const TextContentInnerHTMLDescriptors = utils.getOwnPropertyDescriptors({\n  /** @this {Node} */\n  get textContent() {\n    return this[utils.SHADY_PREFIX + 'textContent'];\n  },\n\n  /** @this {Node} */\n  set textContent(value) {\n    this[utils.SHADY_PREFIX + 'textContent'] = value;\n  },\n\n  /** @this {Node} */\n  get innerHTML() {\n    return this[utils.SHADY_PREFIX + 'innerHTML'];\n  },\n\n  /** @this {Node} */\n  set innerHTML(value) {\n    this[utils.SHADY_PREFIX + 'innerHTML'] = value;\n  },\n});\n\nexport const OutsideDescriptors = utils.getOwnPropertyDescriptors({\n  /** @this {Node} */\n  get parentElement() {\n    return this[utils.SHADY_PREFIX + 'parentElement'];\n  },\n\n  /** @this {Node} */\n  get parentNode() {\n    return this[utils.SHADY_PREFIX + 'parentNode'];\n  },\n\n  /** @this {Node} */\n  get nextSibling() {\n    return this[utils.SHADY_PREFIX + 'nextSibling'];\n  },\n\n  /** @this {Node} */\n  get previousSibling() {\n    return this[utils.SHADY_PREFIX + 'previousSibling'];\n  },\n\n  /** @this {Node} */\n  get nextElementSibling() {\n    return this[utils.SHADY_PREFIX + 'nextElementSibling'];\n  },\n\n  /** @this {Node} */\n  get previousElementSibling() {\n    return this[utils.SHADY_PREFIX + 'previousElementSibling'];\n  },\n\n  /** @this {Node} */\n  get className() {\n    return this[utils.SHADY_PREFIX + 'className'];\n  },\n\n  /** @this {Node} */\n  set className(value) {\n    this[utils.SHADY_PREFIX + 'className'] = value;\n  },\n});\n\nconst makeNonEnumerable = (descriptors) => {\n  for (let prop in descriptors) {\n    const descriptor = descriptors[prop];\n    // NOTE, the only known reason the descriptor wouldn't exist here is\n    // if someone has patched `Object.getOwnPropertyNames`, but we've seen this\n    // so this is just to be extra safe.\n    if (descriptor) {\n      descriptor.enumerable = false;\n    }\n  }\n};\n\nmakeNonEnumerable(InsideDescriptors);\nmakeNonEnumerable(TextContentInnerHTMLDescriptors);\nmakeNonEnumerable(OutsideDescriptors);\n\nconst noInstancePatching =\n  utils.settings.hasDescriptors || utils.settings.noPatch === true;\n\n// ensure an element has patched \"outside\" accessors; no-op when not needed\nexport let patchOutsideElementAccessors = noInstancePatching\n  ? function () {}\n  : function (element) {\n      const sd = ensureShadyDataForNode(element);\n      if (!sd.__outsideAccessors) {\n        sd.__outsideAccessors = true;\n        utils.patchExistingProperties(element, OutsideDescriptors);\n      }\n    };\n\n// ensure an element has patched \"inside\" accessors; no-op when not needed\nexport let patchInsideElementAccessors = noInstancePatching\n  ? function () {}\n  : function (element) {\n      const sd = ensureShadyDataForNode(element);\n      if (!sd.__insideAccessors) {\n        sd.__insideAccessors = true;\n        utils.patchExistingProperties(element, InsideDescriptors);\n        // NOTE: There are compatibility issues with patches for `textContent`\n        // and `innerHTML` between CE and SD. Since SD patches are applied\n        // via `ShadyDOM.patch` and CE patches are applied as the tree is walked,\n        // SD patches overwrite CE patches.\n        // * When SD is in patching mode, SD calls through to native\n        // methods not patched by CE (since SD is at the bottom) and CE does not\n        // upgrade, connect, or disconnect elements. Therefore do *not patch*\n        // these accessors in this case.\n        // * When SD is in `noPatch` mode, the SD patches call through to\n        // \"native\" methods that are patched by CE (since CE is at the bottom).\n        // Therefore continue to patch in this case.\n        // If the custom elements polyfill is not loaded, then these accessors\n        // should be patched so they work correctly.\n        if (!utils.hasPolyfilledCustomElements() || utils.settings.noPatch) {\n          utils.patchExistingProperties(\n            element,\n            TextContentInnerHTMLDescriptors\n          );\n        }\n      }\n    };\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nimport * as utils from './utils.js';\nimport {flush} from './flush.js';\nimport {shadyDataForNode, ensureShadyDataForNode} from './shady-data.js';\n\n/*\nMake this name unique so it is unlikely to conflict with properties on objects passed to `addEventListener`\nhttps://github.com/webcomponents/shadydom/issues/173\n*/\nconst /** string */ eventWrappersName = `__eventWrappers${Date.now()}`;\n\n/** @type {?function(!Event): boolean} */\nconst composedGetter = (() => {\n  const composedProp = Object.getOwnPropertyDescriptor(\n    Event.prototype,\n    'composed'\n  );\n  return composedProp ? (ev) => composedProp.get.call(ev) : null;\n})();\n\nconst supportsEventOptions = (() => {\n  let supported = false;\n  let eventOptions = {\n    get capture() {\n      supported = true;\n      return false;\n    },\n  };\n  const listener = () => {};\n  // NOTE: These will be unpatched at this point.\n  window.addEventListener('test', listener, eventOptions);\n  window.removeEventListener('test', listener, eventOptions);\n  return supported;\n})();\n\nconst parseEventOptions = (optionsOrCapture) => {\n  let capture, once, shadyTarget;\n  if (\n    optionsOrCapture !== null &&\n    (typeof optionsOrCapture === 'object' ||\n      typeof optionsOrCapture === 'function')\n  ) {\n    capture = Boolean(optionsOrCapture.capture);\n    once = Boolean(optionsOrCapture.once);\n    shadyTarget = optionsOrCapture.__shadyTarget;\n  } else {\n    capture = Boolean(optionsOrCapture);\n    once = false;\n  }\n  return {\n    shadyTarget,\n    capture,\n    once,\n    nativeEventOptions: supportsEventOptions ? optionsOrCapture : capture,\n  };\n};\n\n// https://github.com/w3c/webcomponents/issues/513#issuecomment-224183937\nconst alwaysComposed = {\n  'blur': true,\n  'focus': true,\n  'focusin': true,\n  'focusout': true,\n  'click': true,\n  'dblclick': true,\n  'mousedown': true,\n  'mouseenter': true,\n  'mouseleave': true,\n  'mousemove': true,\n  'mouseout': true,\n  'mouseover': true,\n  'mouseup': true,\n  'wheel': true,\n  'beforeinput': true,\n  'input': true,\n  'keydown': true,\n  'keyup': true,\n  'compositionstart': true,\n  'compositionupdate': true,\n  'compositionend': true,\n  'touchstart': true,\n  'touchend': true,\n  'touchmove': true,\n  'touchcancel': true,\n  'pointerover': true,\n  'pointerenter': true,\n  'pointerdown': true,\n  'pointermove': true,\n  'pointerup': true,\n  'pointercancel': true,\n  'pointerout': true,\n  'pointerleave': true,\n  'gotpointercapture': true,\n  'lostpointercapture': true,\n  'dragstart': true,\n  'drag': true,\n  'dragenter': true,\n  'dragleave': true,\n  'dragover': true,\n  'drop': true,\n  'dragend': true,\n  'DOMActivate': true,\n  'DOMFocusIn': true,\n  'DOMFocusOut': true,\n  'keypress': true,\n};\n\nconst unpatchedEvents = {\n  'DOMAttrModified': true,\n  'DOMAttributeNameChanged': true,\n  'DOMCharacterDataModified': true,\n  'DOMElementNameChanged': true,\n  'DOMNodeInserted': true,\n  'DOMNodeInsertedIntoDocument': true,\n  'DOMNodeRemoved': true,\n  'DOMNodeRemovedFromDocument': true,\n  'DOMSubtreeModified': true,\n};\n\n/**\n * Some EventTarget subclasses are not Node subclasses, and you cannot call\n * `getRootNode()` on them.\n *\n * @param {!(Node|EventTarget)} eventTarget\n * @return {!(Node|EventTarget)}\n */\nfunction getRootNodeWithFallback(eventTarget) {\n  if (eventTarget instanceof Node) {\n    return eventTarget[utils.SHADY_PREFIX + 'getRootNode']();\n  } else {\n    return eventTarget;\n  }\n}\n\nfunction pathComposer(startNode, composed) {\n  let composedPath = [];\n  let current = startNode;\n  let startRoot = getRootNodeWithFallback(startNode);\n  while (current) {\n    composedPath.push(current);\n    if (current[utils.SHADY_PREFIX + 'assignedSlot']) {\n      current = current[utils.SHADY_PREFIX + 'assignedSlot'];\n    } else if (\n      current.nodeType === Node.DOCUMENT_FRAGMENT_NODE &&\n      current.host &&\n      (composed || current !== startRoot)\n    ) {\n      current = current.host;\n    } else {\n      current = current[utils.SHADY_PREFIX + 'parentNode'];\n    }\n  }\n  // event composedPath includes window when startNode's ownerRoot is document\n  if (composedPath[composedPath.length - 1] === document) {\n    composedPath.push(window);\n  }\n  return composedPath;\n}\n\nexport const composedPath = (event) => {\n  if (!event.__composedPath) {\n    event.__composedPath = pathComposer(event.target, true);\n  }\n  return event.__composedPath;\n};\n\nfunction retarget(refNode, path) {\n  if (!utils.isShadyRoot) {\n    return refNode;\n  }\n  // If ANCESTOR's root is not a shadow root or ANCESTOR's root is BASE's\n  // shadow-including inclusive ancestor, return ANCESTOR.\n  let refNodePath = pathComposer(refNode, true);\n  let p$ = path;\n  for (let i = 0, ancestor, lastRoot, root, rootIdx; i < p$.length; i++) {\n    ancestor = p$[i];\n    root = getRootNodeWithFallback(ancestor);\n    if (root !== lastRoot) {\n      rootIdx = refNodePath.indexOf(root);\n      lastRoot = root;\n    }\n    if (!utils.isShadyRoot(root) || rootIdx > -1) {\n      return ancestor;\n    }\n  }\n}\n\nlet EventPatches = {\n  /**\n   * @this {Event}\n   */\n  get composed() {\n    if (this.__composed === undefined) {\n      // if there's an original `composed` getter on the Event prototype, use that\n      if (composedGetter) {\n        // TODO(web-padawan): see https://github.com/webcomponents/shadydom/issues/275\n        this.__composed =\n          this.type === 'focusin' ||\n          this.type === 'focusout' ||\n          composedGetter(this);\n        // If the event is trusted, or `isTrusted` is not supported, check the list of always composed events\n      } else if (this.isTrusted !== false) {\n        this.__composed = alwaysComposed[this.type];\n      }\n    }\n    return /** @type {!Event} */ (this).__composed || false;\n  },\n\n  /**\n   * @this {Event}\n   */\n  composedPath() {\n    if (!this.__composedPath) {\n      this.__composedPath = pathComposer(this['__target'], this.composed);\n    }\n    return /** @type {!Event} */ (this).__composedPath;\n  },\n\n  /**\n   * @this {Event}\n   */\n  get target() {\n    return retarget(\n      this.currentTarget || this['__previousCurrentTarget'],\n      this.composedPath()\n    );\n  },\n\n  // http://w3c.github.io/webcomponents/spec/shadow/#event-relatedtarget-retargeting\n  /**\n   * @this {Event}\n   */\n  get relatedTarget() {\n    if (!this.__relatedTarget) {\n      return null;\n    }\n    if (!this.__relatedTargetComposedPath) {\n      this.__relatedTargetComposedPath = pathComposer(\n        this.__relatedTarget,\n        true\n      );\n    }\n    // find the deepest node in relatedTarget composed path that is in the same root with the currentTarget\n    return retarget(\n      this.currentTarget || this['__previousCurrentTarget'],\n      /** @type {!Event} */ (this).__relatedTargetComposedPath\n    );\n  },\n  /**\n   * @this {Event}\n   */\n  stopPropagation() {\n    Event.prototype.stopPropagation.call(this);\n    this.__propagationStopped = true;\n  },\n  /**\n   * @this {Event}\n   */\n  stopImmediatePropagation() {\n    Event.prototype.stopImmediatePropagation.call(this);\n    this.__immediatePropagationStopped = true;\n    this.__propagationStopped = true;\n  },\n};\n\n// Some browsers have missing or broken descriptors. If this is the case\n// eventPhase can't be polyfilled. For example, Chrome 41 does not\n// have prototypical descriptors on DOM objects and Safari 9 has broken ones\n// that cannot be used.\nconst eventPhaseDescriptor =\n  utils.settings.hasDescriptors &&\n  Object.getOwnPropertyDescriptor(Event.prototype, 'eventPhase');\nif (eventPhaseDescriptor) {\n  Object.defineProperty(\n    EventPatches,\n    'eventPhase',\n    /** @type {!ObjectPropertyDescriptor<!Event>} */ ({\n      /**\n       * @this {Event}\n       */\n      get() {\n        return this.currentTarget === this.target\n          ? Event.AT_TARGET\n          : this[utils.NATIVE_PREFIX + 'eventPhase'];\n      },\n      enumerable: true,\n      configurable: true,\n    })\n  );\n\n  Object.defineProperty(\n    EventPatches,\n    utils.NATIVE_PREFIX + 'eventPhase',\n    eventPhaseDescriptor\n  );\n}\n\nfunction mixinComposedFlag(Base) {\n  // NOTE: avoiding use of `class` here so that transpiled output does not\n  // try to do `Base.call` with a dom construtor.\n  let klazz = function (type, options) {\n    let event = new Base(type, options);\n    event.__composed = options && Boolean(options['composed']);\n    return event;\n  };\n  // put constructor properties on subclass\n  klazz.__proto__ = Base;\n  klazz.prototype = Base.prototype;\n  return klazz;\n}\n\nlet nonBubblingEventsToRetarget = {\n  'focus': true,\n  'blur': true,\n};\n\n/**\n * Check if the event has been retargeted by comparing original `target`, and calculated `target`\n * @param {Event} event\n * @return {boolean} True if the original target and calculated target are the same\n */\nfunction hasRetargeted(event) {\n  return (\n    event['__target'] !== event.target ||\n    event.__relatedTarget !== event.relatedTarget\n  );\n}\n\n/**\n *\n * @param {Event} event\n * @param {Node} node\n * @param {string} phase\n */\nfunction fireHandlers(event, node, phase) {\n  let hs =\n    node.__handlers &&\n    node.__handlers[event.type] &&\n    node.__handlers[event.type][phase];\n  if (hs) {\n    for (let i = 0, fn; (fn = hs[i]); i++) {\n      if (hasRetargeted(event) && event.target === event.relatedTarget) {\n        return;\n      }\n      fn.call(node, event);\n      if (event.__immediatePropagationStopped) {\n        return;\n      }\n    }\n  }\n}\n\n// In Chrome 41, `currentTarget` is an own property of every `Event` and its\n// descriptor is a _data_ descriptor and not an accessor descriptor (so there is\n// no getter that could be saved and wrapped) but the browser effectively treats\n// this property as if it had a getter and returns different values on getting\n// as necessary. Further, setting a new descriptor for `currentTarget`, as\n// `shadyDispatchEvent` does below, permanently breaks this special descriptor\n// behavior. In this case, `shadyDispatchEvent` creates a new object with the\n// original event as its prototype (via `Object.create`) and modifies that\n// object's `currentTarget` instead, to avoid breaking the descriptor on the\n// original event.\n//\n// In Chrome 104 and Safari 9, some getters on events do not allow `this` to be\n// anything other than exactly the original event object. This means that the\n// above process of using a proxy-like (not a `Proxy`) object for the event\n// fails because any user that attempts to use properties of the original event\n// will be using the proxy as `this`.\n//\n// Fortunately, these two issues seem to be mutually exclusive amongst the\n// browsers that we test on, so we can specifically check if `currentTarget`\n// exists on a new `Event` and switch based off of that.\n// `utils.settings.hasDescriptors` is not sufficient for deciding this behavior\n// because, in Safari 9, `currentTarget` is not an own property of events, but\n// `.hasDescriptors` is still false.\nconst shadyDispatchEventNeedsProxyEvent = new Event('e').hasOwnProperty(\n  'currentTarget'\n);\n\nfunction shadyDispatchEvent(originalEvent) {\n  const e = shadyDispatchEventNeedsProxyEvent\n    ? Object.create(originalEvent)\n    : originalEvent;\n  const path = e.composedPath();\n  const retargetedPath = path.map((node) => retarget(node, path));\n  const bubbles = e.bubbles;\n\n  let currentTarget;\n  // override `currentTarget` to let patched `target` calculate correctly\n  const prevCurrentTargetDesc = Object.getOwnPropertyDescriptor(\n    e,\n    'currentTarget'\n  );\n  Object.defineProperty(e, 'currentTarget', {\n    configurable: true,\n    enumerable: true,\n    get: function () {\n      return currentTarget;\n    },\n  });\n\n  let eventPhase = Event.CAPTURING_PHASE;\n  const prevEventPhaseDesc = Object.getOwnPropertyDescriptor(e, 'eventPhase');\n  Object.defineProperty(e, 'eventPhase', {\n    configurable: true,\n    enumerable: true,\n    get: function () {\n      return eventPhase;\n    },\n  });\n\n  try {\n    for (let i = path.length - 1; i >= 0; i--) {\n      currentTarget = path[i];\n      eventPhase =\n        currentTarget === retargetedPath[i]\n          ? Event.AT_TARGET\n          : Event.CAPTURING_PHASE;\n      // capture phase fires all capture handlers\n      fireHandlers(e, currentTarget, 'capture');\n      if (e.__propagationStopped) {\n        return;\n      }\n    }\n\n    for (let i = 0; i < path.length; i++) {\n      currentTarget = path[i];\n      const atTarget = currentTarget === retargetedPath[i];\n      if (atTarget || bubbles) {\n        eventPhase = atTarget ? Event.AT_TARGET : Event.BUBBLING_PHASE;\n        fireHandlers(e, currentTarget, 'bubble');\n        if (e.__propagationStopped) {\n          return;\n        }\n      }\n    }\n  } finally {\n    if (!shadyDispatchEventNeedsProxyEvent) {\n      // Restore previous currentTarget & eventPhase descriptors when\n      // dispatching is complete\n      if (prevCurrentTargetDesc) {\n        Object.defineProperty(e, 'currentTarget', prevCurrentTargetDesc);\n      } else {\n        delete e['currentTarget'];\n      }\n      if (prevEventPhaseDesc) {\n        Object.defineProperty(e, 'eventPhase', prevEventPhaseDesc);\n      } else {\n        delete e['eventPhase'];\n      }\n    }\n  }\n}\n\nfunction listenerSettingsEqual(savedListener, node, type, capture) {\n  let {node: savedNode, type: savedType, capture: savedCapture} = savedListener;\n  return node === savedNode && type === savedType && capture === savedCapture;\n}\n\nexport function findListener(wrappers, node, type, capture) {\n  for (let i = 0; i < wrappers.length; i++) {\n    if (listenerSettingsEqual(wrappers[i], node, type, capture)) {\n      return i;\n    }\n  }\n  return -1;\n}\n\n/**\n * Firefox can throw on accessing eventWrappers inside of `removeEventListener` during a selenium run\n * Try/Catch accessing eventWrappers to work around\n * https://bugzilla.mozilla.org/show_bug.cgi?id=1353074\n */\nfunction getEventWrappers(eventLike) {\n  let wrappers = null;\n  try {\n    wrappers = eventLike[eventWrappersName];\n  } catch (e) {} // eslint-disable-line no-empty\n  return wrappers;\n}\n\nfunction targetNeedsPathCheck(node) {\n  return utils.isShadyRoot(node) || node.localName === 'slot';\n}\n\n/** @this {Node} */\nexport function dispatchEvent(event) {\n  flush();\n  // If the target is disconnected from the real document, it might still be\n  // connected in the user-facing tree. To allow its path to potentially\n  // include both connected and disconnected parts, dispatch it manually.\n  if (\n    !utils.settings.preferPerformance &&\n    this instanceof Node &&\n    !utils.documentContains(document, this)\n  ) {\n    if (!event['__target']) {\n      patchEvent(event, this);\n    }\n    return shadyDispatchEvent(event);\n  } else {\n    return this[utils.NATIVE_PREFIX + 'dispatchEvent'](event);\n  }\n}\n\n/**\n * @this {EventTarget}\n */\nexport function addEventListener(type, fnOrObj, optionsOrCapture) {\n  const {capture, once, shadyTarget, nativeEventOptions} = parseEventOptions(\n    optionsOrCapture\n  );\n  if (!fnOrObj) {\n    return;\n  }\n\n  const handlerType = typeof fnOrObj;\n\n  // bail if `fnOrObj` is not a function, not an object\n  if (handlerType !== 'function' && handlerType !== 'object') {\n    return;\n  }\n\n  // bail if `fnOrObj` is an object without a `handleEvent` method\n  if (\n    handlerType === 'object' &&\n    (!fnOrObj.handleEvent || typeof fnOrObj.handleEvent !== 'function')\n  ) {\n    return;\n  }\n\n  if (unpatchedEvents[type]) {\n    return this[utils.NATIVE_PREFIX + 'addEventListener'](\n      type,\n      fnOrObj,\n      nativeEventOptions\n    );\n  }\n\n  // hack to let ShadyRoots have event listeners\n  // event listener will be on host, but `currentTarget`\n  // will be set to shadyroot for event listener\n  let target = shadyTarget || this;\n\n  let wrappers = fnOrObj[eventWrappersName];\n  if (wrappers) {\n    // The callback `fn` might be used for multiple nodes/events. Since we generate\n    // a wrapper function, we need to keep track of it when we remove the listener.\n    // It's more efficient to store the node/type/options information as Array in\n    // `fn` itself rather than the node (we assume that the same callback is used\n    // for few nodes at most, whereas a node will likely have many event listeners).\n    // NOTE(valdrin) invoking external functions is costly, inline has better perf.\n    // Stop if the wrapper function has already been created.\n    if (findListener(wrappers, target, type, capture) > -1) {\n      return;\n    }\n  } else {\n    fnOrObj[eventWrappersName] = [];\n  }\n\n  /**\n   * @this {EventTarget}\n   * @param {Event} e\n   */\n  const wrapperFn = (e) => {\n    // Support `once` option.\n    if (once) {\n      this[utils.SHADY_PREFIX + 'removeEventListener'](\n        type,\n        fnOrObj,\n        optionsOrCapture\n      );\n    }\n    if (!e['__target']) {\n      patchEvent(e);\n    }\n    let lastCurrentTargetDesc;\n    let lastEventPhaseDesc;\n    if (target !== this) {\n      // replace `currentTarget` to make `target` and `relatedTarget` correct for inside the shadowroot\n      lastCurrentTargetDesc = Object.getOwnPropertyDescriptor(\n        e,\n        'currentTarget'\n      );\n      Object.defineProperty(e, 'currentTarget', {\n        get() {\n          return target;\n        },\n        configurable: true,\n      });\n      lastEventPhaseDesc = Object.getOwnPropertyDescriptor(e, 'eventPhase');\n      Object.defineProperty(e, 'eventPhase', {\n        configurable: true,\n        enumerable: true,\n        get() {\n          // Shady DOM doesn't support dispatching to a shadow root as the\n          // target, so we don't need to handle Event.AT_TARGET.\n          return capture ? Event.CAPTURING_PHASE : Event.BUBBLING_PHASE;\n        },\n      });\n    }\n    e['__previousCurrentTarget'] = e['currentTarget'];\n    // Always check if a shadowRoot or slot is in the current event path.\n    // If it is not, the event was generated on either the host of the shadowRoot\n    // or a children of the host.\n    if (\n      targetNeedsPathCheck(target) &&\n      e.composedPath().indexOf(target) == -1\n    ) {\n      return;\n    }\n    // There are two critera that should stop events from firing on this node\n    // 1. the event is not composed and the current node is not in the same root as the target\n    // 2. when bubbling, if after retargeting, relatedTarget and target point to the same node\n    if (e.composed || e.composedPath().indexOf(target) > -1) {\n      if (hasRetargeted(e) && e.target === e.relatedTarget) {\n        if (e.eventPhase === Event.BUBBLING_PHASE) {\n          e.stopImmediatePropagation();\n        }\n        return;\n      }\n      // prevent non-bubbling events from triggering bubbling handlers on shadowroot, but only if not in capture phase\n      if (\n        e.eventPhase !== Event.CAPTURING_PHASE &&\n        !e.bubbles &&\n        e.target !== target &&\n        !(target instanceof Window)\n      ) {\n        return;\n      }\n      let ret =\n        handlerType === 'function'\n          ? fnOrObj.call(target, e)\n          : fnOrObj.handleEvent && fnOrObj.handleEvent(e);\n      if (target !== this) {\n        // Replace the original descriptors for `currentTarget` and `eventPhase`.\n        if (lastCurrentTargetDesc) {\n          Object.defineProperty(e, 'currentTarget', lastCurrentTargetDesc);\n          lastCurrentTargetDesc = null;\n        } else {\n          delete e['currentTarget'];\n        }\n        if (lastEventPhaseDesc) {\n          Object.defineProperty(e, 'eventPhase', lastEventPhaseDesc);\n          lastEventPhaseDesc = null;\n        } else {\n          delete e['eventPhase'];\n        }\n      }\n      return ret;\n    }\n  };\n\n  // Store the wrapper information.\n  fnOrObj[eventWrappersName].push({\n    // note: use target here which is either a shadowRoot\n    // (when the host element is proxy'ing the event) or this element\n    node: target,\n    type,\n    capture,\n    wrapperFn,\n  });\n\n  this.__handlers = this.__handlers || {};\n  this.__handlers[type] = this.__handlers[type] || {\n    'capture': [],\n    'bubble': [],\n  };\n  this.__handlers[type][capture ? 'capture' : 'bubble'].push(wrapperFn);\n\n  if (!nonBubblingEventsToRetarget[type]) {\n    this[utils.NATIVE_PREFIX + 'addEventListener'](\n      type,\n      wrapperFn,\n      nativeEventOptions\n    );\n  }\n}\n\n/**\n * @this {EventTarget}\n */\nexport function removeEventListener(type, fnOrObj, optionsOrCapture) {\n  if (!fnOrObj) {\n    return;\n  }\n  const {capture, shadyTarget, nativeEventOptions} = parseEventOptions(\n    optionsOrCapture\n  );\n  if (unpatchedEvents[type]) {\n    return this[utils.NATIVE_PREFIX + 'removeEventListener'](\n      type,\n      fnOrObj,\n      nativeEventOptions\n    );\n  }\n  let target = shadyTarget || this;\n  // Search the wrapped function.\n  let wrapperFn = undefined;\n  let wrappers = getEventWrappers(fnOrObj);\n  if (wrappers) {\n    let idx = findListener(wrappers, target, type, capture);\n    if (idx > -1) {\n      wrapperFn = wrappers.splice(idx, 1)[0].wrapperFn;\n      // Cleanup.\n      if (!wrappers.length) {\n        fnOrObj[eventWrappersName] = undefined;\n      }\n    }\n  }\n  this[utils.NATIVE_PREFIX + 'removeEventListener'](\n    type,\n    wrapperFn || fnOrObj,\n    nativeEventOptions\n  );\n  if (wrapperFn && this.__handlers && this.__handlers[type]) {\n    const arr = this.__handlers[type][capture ? 'capture' : 'bubble'];\n    const idx = arr.indexOf(wrapperFn);\n    if (idx > -1) {\n      arr.splice(idx, 1);\n    }\n  }\n}\n\nfunction activateFocusEventOverrides() {\n  for (let ev in nonBubblingEventsToRetarget) {\n    window[utils.NATIVE_PREFIX + 'addEventListener'](\n      ev,\n      function (e) {\n        if (!e['__target']) {\n          patchEvent(e);\n          shadyDispatchEvent(e);\n        }\n      },\n      true\n    );\n  }\n}\n\nconst EventPatchesDescriptors = utils.getOwnPropertyDescriptors(EventPatches);\n\nconst SHADY_PROTO = '__shady_patchedProto';\nconst SHADY_SOURCE_PROTO = '__shady_sourceProto';\n\nfunction patchEvent(event, target = event.target) {\n  event['__target'] = target;\n  event.__relatedTarget = event.relatedTarget;\n  // attempt to patch prototype (via cache)\n  if (utils.settings.hasDescriptors) {\n    const proto = Object.getPrototypeOf(event);\n    // eslint-disable-next-line no-prototype-builtins\n    if (!proto.hasOwnProperty(SHADY_PROTO)) {\n      const patchedProto = Object.create(proto);\n      patchedProto[SHADY_SOURCE_PROTO] = proto;\n      utils.patchProperties(patchedProto, EventPatchesDescriptors);\n      proto[SHADY_PROTO] = patchedProto;\n    }\n    event.__proto__ = proto[SHADY_PROTO];\n    // and fallback to patching instance\n  } else {\n    utils.patchProperties(event, EventPatchesDescriptors);\n  }\n}\n\nlet PatchedEvent = mixinComposedFlag(Event);\nlet PatchedCustomEvent = mixinComposedFlag(CustomEvent);\nlet PatchedMouseEvent = mixinComposedFlag(MouseEvent);\n\nexport function patchEvents() {\n  activateFocusEventOverrides();\n  window.Event = PatchedEvent;\n  window.CustomEvent = PatchedCustomEvent;\n  window.MouseEvent = PatchedMouseEvent;\n}\n\nexport function patchClick() {\n  // Fix up `Element.prototype.click()` if `isTrusted` is supported, but `composed` isn't\n  if (\n    !composedGetter &&\n    Object.getOwnPropertyDescriptor(Event.prototype, 'isTrusted')\n  ) {\n    /** @this {Element} */\n    const composedClickFn = function () {\n      const ev = new MouseEvent('click', {\n        bubbles: true,\n        cancelable: true,\n        composed: true,\n      });\n      this[utils.SHADY_PREFIX + 'dispatchEvent'](ev);\n    };\n    if (Element.prototype.click) {\n      Element.prototype.click = composedClickFn;\n    } else if (HTMLElement.prototype.click) {\n      HTMLElement.prototype.click = composedClickFn;\n    }\n  }\n}\n\nexport const eventPropertyNamesForElement = Object.getOwnPropertyNames(\n  Element.prototype\n).filter((name) => name.substring(0, 2) === 'on');\n\nexport const eventPropertyNamesForHTMLElement = Object.getOwnPropertyNames(\n  HTMLElement.prototype\n).filter((name) => name.substring(0, 2) === 'on');\n\n/**\n * @param {string} property\n * @return {!ObjectPropertyDescriptor<Element>}\n */\nexport const wrappedDescriptorForEventProperty = (property) => {\n  return {\n    /** @this {Element} */\n    set: function (fn) {\n      const shadyData = ensureShadyDataForNode(this);\n      const eventName = property.substring(2);\n      if (!shadyData.__onCallbackListeners) {\n        shadyData.__onCallbackListeners = {};\n      }\n      shadyData.__onCallbackListeners[property] &&\n        this.removeEventListener(\n          eventName,\n          shadyData.__onCallbackListeners[property]\n        );\n      this[utils.SHADY_PREFIX + 'addEventListener'](eventName, fn);\n      shadyData.__onCallbackListeners[property] = fn;\n    },\n    /** @this {Element} */\n    get() {\n      const shadyData = shadyDataForNode(this);\n      return (\n        shadyData &&\n        shadyData.__onCallbackListeners &&\n        shadyData.__onCallbackListeners[property]\n      );\n    },\n    configurable: true,\n  };\n};\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nfunction newSplice(index, removed, addedCount) {\n  return {\n    index: index,\n    removed: removed,\n    addedCount: addedCount,\n  };\n}\n\nconst EDIT_LEAVE = 0;\nconst EDIT_UPDATE = 1;\nconst EDIT_ADD = 2;\nconst EDIT_DELETE = 3;\n\n// Note: This function is *based* on the computation of the Levenshtein\n// \"edit\" distance. The one change is that \"updates\" are treated as two\n// edits - not one. With Array splices, an update is really a delete\n// followed by an add. By retaining this, we optimize for \"keeping\" the\n// maximum array items in the original array. For example:\n//\n//   'xxxx123' -> '123yyyy'\n//\n// With 1-edit updates, the shortest path would be just to update all seven\n// characters. With 2-edit updates, we delete 4, leave 3, and add 4. This\n// leaves the substring '123' intact.\nfunction calcEditDistances(\n  current,\n  currentStart,\n  currentEnd,\n  old,\n  oldStart,\n  oldEnd\n) {\n  // \"Deletion\" columns\n  let rowCount = oldEnd - oldStart + 1;\n  let columnCount = currentEnd - currentStart + 1;\n  let distances = new Array(rowCount);\n\n  // \"Addition\" rows. Initialize null column.\n  for (let i = 0; i < rowCount; i++) {\n    distances[i] = new Array(columnCount);\n    distances[i][0] = i;\n  }\n\n  // Initialize null row\n  for (let j = 0; j < columnCount; j++) {\n    distances[0][j] = j;\n  }\n\n  for (let i = 1; i < rowCount; i++) {\n    for (let j = 1; j < columnCount; j++) {\n      if (equals(current[currentStart + j - 1], old[oldStart + i - 1])) {\n        distances[i][j] = distances[i - 1][j - 1];\n      } else {\n        let north = distances[i - 1][j] + 1;\n        let west = distances[i][j - 1] + 1;\n        distances[i][j] = north < west ? north : west;\n      }\n    }\n  }\n\n  return distances;\n}\n\n// This starts at the final weight, and walks \"backward\" by finding\n// the minimum previous weight recursively until the origin of the weight\n// matrix.\nfunction spliceOperationsFromEditDistances(distances) {\n  let i = distances.length - 1;\n  let j = distances[0].length - 1;\n  let current = distances[i][j];\n  let edits = [];\n  while (i > 0 || j > 0) {\n    if (i == 0) {\n      edits.push(EDIT_ADD);\n      j--;\n      continue;\n    }\n    if (j == 0) {\n      edits.push(EDIT_DELETE);\n      i--;\n      continue;\n    }\n    let northWest = distances[i - 1][j - 1];\n    let west = distances[i - 1][j];\n    let north = distances[i][j - 1];\n\n    let min;\n    if (west < north) {\n      min = west < northWest ? west : northWest;\n    } else {\n      min = north < northWest ? north : northWest;\n    }\n\n    if (min == northWest) {\n      if (northWest == current) {\n        edits.push(EDIT_LEAVE);\n      } else {\n        edits.push(EDIT_UPDATE);\n        current = northWest;\n      }\n      i--;\n      j--;\n    } else if (min == west) {\n      edits.push(EDIT_DELETE);\n      i--;\n      current = west;\n    } else {\n      edits.push(EDIT_ADD);\n      j--;\n      current = north;\n    }\n  }\n\n  edits.reverse();\n  return edits;\n}\n\n/**\n * Splice Projection functions:\n *\n * A splice map is a representation of how a previous array of items\n * was transformed into a new array of items. Conceptually it is a list of\n * tuples of\n *\n *   <index, removed, addedCount>\n *\n * which are kept in ascending index order of. The tuple represents that at\n * the |index|, |removed| sequence of items were removed, and counting forward\n * from |index|, |addedCount| items were added.\n */\n\n/**\n * Lacking individual splice mutation information, the minimal set of\n * splices can be synthesized given the previous state and final state of an\n * array. The basic approach is to calculate the edit distance matrix and\n * choose the shortest path through it.\n *\n * Complexity: O(l * p)\n *   l: The length of the current array\n *   p: The length of the old array\n */\nfunction calcSplices(current, currentStart, currentEnd, old, oldStart, oldEnd) {\n  let prefixCount = 0;\n  let suffixCount = 0;\n  let splice;\n\n  let minLength = Math.min(currentEnd - currentStart, oldEnd - oldStart);\n  if (currentStart == 0 && oldStart == 0) {\n    prefixCount = sharedPrefix(current, old, minLength);\n  }\n\n  if (currentEnd == current.length && oldEnd == old.length) {\n    suffixCount = sharedSuffix(current, old, minLength - prefixCount);\n  }\n\n  currentStart += prefixCount;\n  oldStart += prefixCount;\n  currentEnd -= suffixCount;\n  oldEnd -= suffixCount;\n\n  if (currentEnd - currentStart == 0 && oldEnd - oldStart == 0) {\n    return [];\n  }\n\n  if (currentStart == currentEnd) {\n    splice = newSplice(currentStart, [], 0);\n    while (oldStart < oldEnd) {\n      splice.removed.push(old[oldStart++]);\n    }\n\n    return [splice];\n  } else if (oldStart == oldEnd) {\n    return [newSplice(currentStart, [], currentEnd - currentStart)];\n  }\n\n  let ops = spliceOperationsFromEditDistances(\n    calcEditDistances(current, currentStart, currentEnd, old, oldStart, oldEnd)\n  );\n\n  splice = undefined;\n  let splices = [];\n  let index = currentStart;\n  let oldIndex = oldStart;\n  for (let i = 0; i < ops.length; i++) {\n    switch (ops[i]) {\n      case EDIT_LEAVE:\n        if (splice) {\n          splices.push(splice);\n          splice = undefined;\n        }\n\n        index++;\n        oldIndex++;\n        break;\n      case EDIT_UPDATE:\n        if (!splice) {\n          splice = newSplice(index, [], 0);\n        }\n\n        splice.addedCount++;\n        index++;\n\n        splice.removed.push(old[oldIndex]);\n        oldIndex++;\n        break;\n      case EDIT_ADD:\n        if (!splice) {\n          splice = newSplice(index, [], 0);\n        }\n\n        splice.addedCount++;\n        index++;\n        break;\n      case EDIT_DELETE:\n        if (!splice) {\n          splice = newSplice(index, [], 0);\n        }\n\n        splice.removed.push(old[oldIndex]);\n        oldIndex++;\n        break;\n    }\n  }\n\n  if (splice) {\n    splices.push(splice);\n  }\n  return splices;\n}\n\nfunction sharedPrefix(current, old, searchLength) {\n  for (let i = 0; i < searchLength; i++) {\n    if (!equals(current[i], old[i])) {\n      return i;\n    }\n  }\n  return searchLength;\n}\n\nfunction sharedSuffix(current, old, searchLength) {\n  let index1 = current.length;\n  let index2 = old.length;\n  let count = 0;\n  while (count < searchLength && equals(current[--index1], old[--index2])) {\n    count++;\n  }\n\n  return count;\n}\n\nfunction equals(currentValue, previousValue) {\n  return currentValue === previousValue;\n}\n\nexport function calculateSplices(current, previous) {\n  return calcSplices(current, 0, current.length, previous, 0, previous.length);\n}\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nimport * as utils from '../utils.js';\n// prettier-ignore\nimport {addEventListener, removeEventListener, dispatchEvent} from '../patch-events.js';\n\nexport const EventTargetPatches = utils.getOwnPropertyDescriptors({\n  dispatchEvent,\n\n  addEventListener,\n\n  removeEventListener,\n});\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nimport * as utils from './utils.js';\n\nlet scopingShim = null;\n\nexport function getScopingShim() {\n  if (!scopingShim) {\n    scopingShim = window['ShadyCSS'] && window['ShadyCSS']['ScopingShim'];\n  }\n  return scopingShim || null;\n}\n\n/**\n * @param {!Node} node\n * @param {string} attr\n * @param {string} value\n */\nexport function scopeClassAttribute(node, attr, value) {\n  const scopingShim = getScopingShim();\n  if (scopingShim && attr === 'class') {\n    scopingShim['setElementClass'](node, value);\n    return true;\n  }\n  return false;\n}\n\n/**\n * @param {!Node} node\n * @param {string} newScopeName\n */\nexport function addShadyScoping(node, newScopeName) {\n  const scopingShim = getScopingShim();\n  if (!scopingShim) {\n    return;\n  }\n  scopingShim['scopeNode'](node, newScopeName);\n}\n\n/**\n * @param {!Node} node\n * @param {string} currentScopeName\n */\nexport function removeShadyScoping(node, currentScopeName) {\n  const scopingShim = getScopingShim();\n  if (!scopingShim) {\n    return;\n  }\n  scopingShim['unscopeNode'](node, currentScopeName);\n}\n\n/**\n * @param {!Node} node\n * @param {string} newScopeName\n * @param {string} oldScopeName\n */\nexport function replaceShadyScoping(node, newScopeName, oldScopeName) {\n  const scopingShim = getScopingShim();\n  if (!scopingShim) {\n    return;\n  }\n  if (oldScopeName) {\n    removeShadyScoping(node, oldScopeName);\n  }\n  addShadyScoping(node, newScopeName);\n}\n\n/**\n * @param {!Node} node\n * @param {string} newScopeName\n * @return {boolean}\n */\nexport function currentScopeIsCorrect(node, newScopeName) {\n  const scopingShim = getScopingShim();\n  if (!scopingShim) {\n    return true;\n  }\n  if (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n    // NOTE: as an optimization, only check that all the top-level children\n    // have the correct scope.\n    let correctScope = true;\n    for (\n      let n = node[utils.SHADY_PREFIX + 'firstChild'];\n      n;\n      n = n[utils.SHADY_PREFIX + 'nextSibling']\n    ) {\n      correctScope = correctScope && currentScopeIsCorrect(n, newScopeName);\n    }\n    return correctScope;\n  }\n  if (node.nodeType !== Node.ELEMENT_NODE) {\n    return true;\n  }\n  const currentScope = scopingShim['currentScopeForNode'](node);\n  return currentScope === newScopeName;\n}\n\n/**\n * @param {!Node} node\n * @return {string}\n */\nexport function currentScopeForNode(node) {\n  if (node.nodeType !== Node.ELEMENT_NODE) {\n    return '';\n  }\n  const scopingShim = getScopingShim();\n  if (!scopingShim) {\n    return '';\n  }\n  return scopingShim['currentScopeForNode'](node);\n}\n\n/**\n * Walk over a node's tree and apply visitorFn to each element node\n *\n * @param {Node} node\n * @param {function(!Node):void} visitorFn\n */\nexport function treeVisitor(node, visitorFn) {\n  if (!node) {\n    return;\n  }\n  // this check is necessary if `node` is a Document Fragment\n  if (node.nodeType === Node.ELEMENT_NODE) {\n    visitorFn(node);\n  }\n  for (\n    let n = node[utils.SHADY_PREFIX + 'firstChild'];\n    n;\n    n = n[utils.SHADY_PREFIX + 'nextSibling']\n  ) {\n    if (n.nodeType === Node.ELEMENT_NODE) {\n      treeVisitor(n, visitorFn);\n    }\n  }\n}\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nimport * as utils from '../utils.js';\n// prettier-ignore\nimport {getScopingShim, removeShadyScoping, replaceShadyScoping, treeVisitor, currentScopeForNode, currentScopeIsCorrect} from '../style-scoping.js';\nimport {shadyDataForNode, ensureShadyDataForNode} from '../shady-data.js';\nimport {recordInsertBefore, recordRemoveChild} from '../link-nodes.js';\nimport {ownerShadyRootForNode} from '../attach-shadow.js';\n\nconst doc = window.document;\n\nconst preferPerformance = utils.settings.preferPerformance;\n\nconst nativeIsConnectedAccessors = /** @type {ObjectPropertyDescriptor} */ (Object.getOwnPropertyDescriptor(\n  Node.prototype,\n  'isConnected'\n));\n\nconst nativeIsConnected =\n  nativeIsConnectedAccessors && nativeIsConnectedAccessors.get;\n\nexport function clearNode(node) {\n  let firstChild;\n  while ((firstChild = node[utils.SHADY_PREFIX + 'firstChild'])) {\n    node[utils.SHADY_PREFIX + 'removeChild'](firstChild);\n  }\n}\n\nfunction removeOwnerShadyRoot(node) {\n  // optimization: only reset the tree if node is actually in a root\n  if (hasCachedOwnerRoot(node)) {\n    for (\n      let n = node[utils.SHADY_PREFIX + 'firstChild'];\n      n;\n      n = n[utils.SHADY_PREFIX + 'nextSibling']\n    ) {\n      removeOwnerShadyRoot(n);\n    }\n  }\n  const nodeData = shadyDataForNode(node);\n  if (nodeData) {\n    nodeData.ownerShadyRoot = undefined;\n  }\n}\n\nfunction hasCachedOwnerRoot(node) {\n  const nodeData = shadyDataForNode(node);\n  return Boolean(nodeData && nodeData.ownerShadyRoot !== undefined);\n}\n\n/**\n * Finds the first flattened node that is composed in the node's parent.\n * If the given node is a slot, then the first flattened node is returned\n * if it exists, otherwise advance to the node's nextSibling.\n * @param {Node} node within which to find first composed node\n * @returns {Node} first composed node\n */\nfunction firstComposedNode(node) {\n  let composed = node;\n  if (node && node.localName === 'slot') {\n    const nodeData = shadyDataForNode(node);\n    const flattened = nodeData && nodeData.flattenedNodes;\n    // Note, if `flattened` is falsey, it means that the containing shadowRoot\n    // has not rendered and therefore the `<slot>` is still in the composed\n    // DOM. If that's the case the `<slot>` is the first composed node.\n    if (flattened) {\n      composed = flattened.length\n        ? flattened[0]\n        : firstComposedNode(node[utils.SHADY_PREFIX + 'nextSibling']);\n    }\n  }\n  return composed;\n}\n\n/**\n * @param {Node} node\n * @param {Node=} addedNode\n * @param {Node=} removedNode\n */\nfunction scheduleObserver(node, addedNode, removedNode) {\n  const nodeData = shadyDataForNode(node);\n  const observer = nodeData && nodeData.observer;\n  if (observer) {\n    if (addedNode) {\n      if (addedNode.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n        for (let i = 0, l = addedNode.childNodes.length; i < l; i++) {\n          observer.addedNodes.push(addedNode.childNodes[i]);\n        }\n      } else {\n        observer.addedNodes.push(addedNode);\n      }\n    }\n    if (removedNode) {\n      observer.removedNodes.push(removedNode);\n    }\n    observer.schedule();\n  }\n}\n\nexport const NodePatches = utils.getOwnPropertyDescriptors({\n  /** @this {Node} */\n  get parentNode() {\n    const nodeData = shadyDataForNode(this);\n    const l = nodeData && nodeData.parentNode;\n    return l !== undefined ? l : this[utils.NATIVE_PREFIX + 'parentNode'];\n  },\n\n  /** @this {Node} */\n  get firstChild() {\n    const nodeData = shadyDataForNode(this);\n    const l = nodeData && nodeData.firstChild;\n    return l !== undefined ? l : this[utils.NATIVE_PREFIX + 'firstChild'];\n  },\n\n  /** @this {Node} */\n  get lastChild() {\n    const nodeData = shadyDataForNode(this);\n    const l = nodeData && nodeData.lastChild;\n    return l !== undefined ? l : this[utils.NATIVE_PREFIX + 'lastChild'];\n  },\n\n  /** @this {Node} */\n  get nextSibling() {\n    const nodeData = shadyDataForNode(this);\n    const l = nodeData && nodeData.nextSibling;\n    return l !== undefined ? l : this[utils.NATIVE_PREFIX + 'nextSibling'];\n  },\n\n  /** @this {Node} */\n  get previousSibling() {\n    const nodeData = shadyDataForNode(this);\n    const l = nodeData && nodeData.previousSibling;\n    return l !== undefined ? l : this[utils.NATIVE_PREFIX + 'previousSibling'];\n  },\n\n  /** @this {Node} */\n  get childNodes() {\n    let childNodes;\n    if (utils.isTrackingLogicalChildNodes(this)) {\n      const nodeData = shadyDataForNode(this);\n      if (!nodeData.childNodes) {\n        nodeData.childNodes = [];\n        for (\n          let n = this[utils.SHADY_PREFIX + 'firstChild'];\n          n;\n          n = n[utils.SHADY_PREFIX + 'nextSibling']\n        ) {\n          nodeData.childNodes.push(n);\n        }\n      }\n      childNodes = nodeData.childNodes;\n    } else {\n      childNodes = this[utils.NATIVE_PREFIX + 'childNodes'];\n    }\n    childNodes.item = function (index) {\n      return childNodes[index];\n    };\n    return childNodes;\n  },\n\n  /** @this {Node} */\n  get parentElement() {\n    const nodeData = shadyDataForNode(this);\n    let l = nodeData && nodeData.parentNode;\n    if (l && l.nodeType !== Node.ELEMENT_NODE) {\n      l = null;\n    }\n    return l !== undefined ? l : this[utils.NATIVE_PREFIX + 'parentElement'];\n  },\n\n  /** @this {Node} */\n  get isConnected() {\n    if (nativeIsConnected && nativeIsConnected.call(this)) {\n      return true;\n    }\n    if (this.nodeType == Node.DOCUMENT_FRAGMENT_NODE) {\n      return false;\n    }\n    // Fast path for distributed nodes.\n    const ownerDocument = this.ownerDocument;\n    if (ownerDocument === null || utils.documentContains(ownerDocument, this)) {\n      return true;\n    }\n    // Slow path for non-distributed nodes.\n    let node = this;\n    while (node && !(node instanceof Document)) {\n      node =\n        node[utils.SHADY_PREFIX + 'parentNode'] ||\n        (utils.isShadyRoot(node)\n          ? /** @type {ShadowRoot} */ (node).host\n          : undefined);\n    }\n    return !!(node && node instanceof Document);\n  },\n\n  /** @this {Node} */\n  get textContent() {\n    if (utils.isTrackingLogicalChildNodes(this)) {\n      let tc = [];\n      for (\n        let n = this[utils.SHADY_PREFIX + 'firstChild'];\n        n;\n        n = n[utils.SHADY_PREFIX + 'nextSibling']\n      ) {\n        if (n.nodeType !== Node.COMMENT_NODE) {\n          tc.push(n[utils.SHADY_PREFIX + 'textContent']);\n        }\n      }\n      return tc.join('');\n    } else {\n      return this[utils.NATIVE_PREFIX + 'textContent'];\n    }\n  },\n\n  /**\n   * @this {Node}\n   * @param {string} value\n   */\n  set textContent(value) {\n    if (typeof value === 'undefined' || value === null) {\n      value = '';\n    }\n    switch (this.nodeType) {\n      case Node.ELEMENT_NODE:\n      case Node.DOCUMENT_FRAGMENT_NODE:\n        if (\n          !utils.isTrackingLogicalChildNodes(this) &&\n          utils.settings.hasDescriptors\n        ) {\n          // may be removing a nested slot but fast path if we know we are not.\n          const firstChild = this[utils.SHADY_PREFIX + 'firstChild'];\n          if (\n            firstChild != this[utils.SHADY_PREFIX + 'lastChild'] ||\n            (firstChild && firstChild.nodeType != Node.TEXT_NODE)\n          ) {\n            clearNode(this);\n          }\n          this[utils.NATIVE_PREFIX + 'textContent'] = value;\n        } else {\n          clearNode(this);\n          // Document fragments must have no childNodes if setting a blank string\n          if (value.length > 0 || this.nodeType === Node.ELEMENT_NODE) {\n            this[utils.SHADY_PREFIX + 'insertBefore'](\n              document.createTextNode(value)\n            );\n          }\n        }\n        break;\n      default:\n        // Note, be wary of patching `nodeValue`.\n        this.nodeValue = value;\n        break;\n    }\n  },\n\n  // Patched `insertBefore`. Note that all mutations that add nodes are routed\n  // here. When a <slot> is added or a node is added to a host with a shadowRoot\n  // with a slot, a standard dom `insert` call is aborted and `_asyncRender`\n  // is called on the relevant shadowRoot. In all other cases, a standard dom\n  // `insert` can be made, but the location and ref_node may need to be changed.\n  /**\n   * @this {Node}\n   * @param {Node} node\n   * @param {Node=} ref_node\n   */\n  insertBefore(node, ref_node) {\n    // optimization: assume native insertBefore is ok if the nodes are not in the document.\n    if (this.ownerDocument !== doc && node.ownerDocument !== doc) {\n      this[utils.NATIVE_PREFIX + 'insertBefore'](node, ref_node);\n      return node;\n    }\n    if (node === this) {\n      throw Error(\n        `Failed to execute 'appendChild' on 'Node': The new child element contains the parent.`\n      );\n    }\n    if (ref_node) {\n      const refData = shadyDataForNode(ref_node);\n      const p = refData && refData.parentNode;\n      if (\n        (p !== undefined && p !== this) ||\n        (p === undefined &&\n          ref_node[utils.NATIVE_PREFIX + 'parentNode'] !== this)\n      ) {\n        throw Error(\n          `Failed to execute 'insertBefore' on 'Node': The node ` +\n            `before which the new node is to be inserted is not a child of this node.`\n        );\n      }\n    }\n    if (ref_node === node) {\n      return node;\n    }\n    scheduleObserver(this, node);\n    /** @type {!Array<!HTMLSlotElement>} */\n    const slotsAdded = [];\n    const ownerRoot = ownerShadyRootForNode(this);\n    /** @type {string} */\n    const newScopeName = ownerRoot\n      ? ownerRoot.host.localName\n      : currentScopeForNode(this);\n    /** @type {string} */\n    let oldScopeName;\n    // remove from existing location\n    const parentNode = node[utils.SHADY_PREFIX + 'parentNode'];\n    if (parentNode) {\n      oldScopeName = currentScopeForNode(node);\n      const skipUnscoping =\n        // Don't remove scoping if we're inserting into another shadowRoot;\n        // this would be unnecessary since it will be re-scoped below\n        Boolean(ownerRoot) ||\n        // Don't remove scoping if we're being moved between non-shadowRoot\n        // locations (the likely case is when moving pre-scoped nodes in a template)\n        !ownerShadyRootForNode(node) ||\n        // Under preferPerformance, don't remove scoping when moving back into\n        // a document fragment that was previously scoped; the assumption is\n        // that the user should only move correctly-scoped DOM back into it\n        (preferPerformance && this['__noInsertionPoint'] !== undefined);\n      parentNode[utils.SHADY_PREFIX + 'removeChild'](node, skipUnscoping);\n    }\n    // add to new parent\n    let allowNativeInsert = true;\n    const needsScoping =\n      (!preferPerformance ||\n        // Under preferPerformance, only re-scope if we're not coming from a\n        // pre-scoped doc fragment or back into a pre-scoped doc fragment\n        (node['__noInsertionPoint'] === undefined &&\n          this['__noInsertionPoint'] === undefined)) &&\n      !currentScopeIsCorrect(node, newScopeName);\n    const needsSlotFinding =\n      ownerRoot &&\n      !node['__noInsertionPoint'] &&\n      (!preferPerformance || node.nodeType === Node.DOCUMENT_FRAGMENT_NODE);\n    if (needsSlotFinding || needsScoping) {\n      // NOTE: avoid node.removeChild as this *can* trigger another patched\n      // method (e.g. custom elements) and we want only the shady method to run.\n      // The following table describes what style scoping actions should happen as a result of this insertion.\n      // document -> shadowRoot: replace\n      // shadowRoot -> shadowRoot: replace\n      // shadowRoot -> shadowRoot of same type: do nothing\n      // shadowRoot -> document: allow unscoping\n      // document -> document: do nothing\n      // The \"same type of shadowRoot\" and \"document to document cases rely on `currentScopeIsCorrect` returning true\n      if (needsScoping) {\n        // in a document or disconnected tree, replace scoping if necessary\n        oldScopeName = oldScopeName || currentScopeForNode(node);\n      }\n      treeVisitor(node, (node) => {\n        if (needsSlotFinding && node.localName === 'slot') {\n          slotsAdded.push(/** @type {!HTMLSlotElement} */ (node));\n        }\n        if (needsScoping) {\n          replaceShadyScoping(node, newScopeName, oldScopeName);\n        }\n      });\n    }\n    // if a slot is added, must render containing root.\n    if (slotsAdded.length) {\n      ownerRoot._addSlots(slotsAdded);\n      ownerRoot._asyncRender();\n    }\n    if (utils.isTrackingLogicalChildNodes(this)) {\n      recordInsertBefore(node, this, ref_node);\n      const parentData = shadyDataForNode(this);\n      // if the node being inserted into has a shadowRoot, do not perform\n      // a native insertion\n      if (parentData.root) {\n        allowNativeInsert = false;\n        // when inserting into a host with a shadowRoot with slot, use\n        // `shadowRoot._asyncRender()` via `attach-shadow` module\n        // when inserting into a host with shadowRoot with NO slot, do nothing\n        // as the node should not be added to composed DOM anywhere.\n        if (utils.hasShadowRootWithSlot(this)) {\n          parentData.root._asyncRender();\n        }\n      }\n      // when inserting into a slot inside a shadowRoot, render the\n      // containing shadowRoot to update fallback content.\n      else if (ownerRoot && this.localName === 'slot') {\n        allowNativeInsert = false;\n        ownerRoot._asyncRender();\n      }\n    }\n    if (allowNativeInsert) {\n      // if adding to a shadyRoot, add to host instead\n      let container = utils.isShadyRoot(this)\n        ? /** @type {ShadowRoot} */ (this).host\n        : this;\n      // if ref_node, get the ref_node that's actually in composed dom.\n      if (ref_node) {\n        ref_node = firstComposedNode(ref_node);\n        container[utils.NATIVE_PREFIX + 'insertBefore'](node, ref_node);\n      } else {\n        container[utils.NATIVE_PREFIX + 'appendChild'](node);\n      }\n    }\n    // Since ownerDocument is not patched, it can be incorrect after this call\n    // if the node is physically appended via distribution. This can result\n    // in the custom elements polyfill not upgrading the node if it's in an inert doc.\n    // We correct this by calling `adoptNode`.\n    else if (node.ownerDocument !== this.ownerDocument) {\n      this.ownerDocument.adoptNode(node);\n    }\n    return node;\n  },\n\n  /**\n   * @this {Node}\n   * @param {Node} node\n   */\n  appendChild(node) {\n    // if this is a shadowRoot and the shadowRoot is passed as `node`\n    // then an optimized append has already been performed, so do nothing.\n    if (!(this == node && utils.isShadyRoot(node))) {\n      return this[utils.SHADY_PREFIX + 'insertBefore'](node);\n    }\n  },\n\n  /**\n   * Patched `removeChild`. Note that all dom \"removals\" are routed here.\n   * Removes the given `node` from the element's `children`.\n   * This method also performs dom composition.\n   * @this {Node}\n   * @param {Node} node\n   * @param {boolean=} skipUnscoping\n   */\n  removeChild(node, skipUnscoping = false) {\n    if (this.ownerDocument !== doc) {\n      return this[utils.NATIVE_PREFIX + 'removeChild'](node);\n    }\n    if (node[utils.SHADY_PREFIX + 'parentNode'] !== this) {\n      throw Error(\n        'The node to be removed is not a child of this node: ' + node\n      );\n    }\n    scheduleObserver(this, null, node);\n    let preventNativeRemove;\n    let ownerRoot = ownerShadyRootForNode(node);\n    const removingInsertionPoint =\n      ownerRoot && ownerRoot._removeContainedSlots(node);\n    const parentData = shadyDataForNode(this);\n    if (utils.isTrackingLogicalChildNodes(this)) {\n      recordRemoveChild(node, this);\n      if (utils.hasShadowRootWithSlot(this)) {\n        parentData.root._asyncRender();\n        preventNativeRemove = true;\n      }\n    }\n    // unscope a node leaving a ShadowRoot if ShadyCSS is present, and this node\n    // is not going to be rescoped in `insertBefore`\n    if (\n      getScopingShim() &&\n      !skipUnscoping &&\n      ownerRoot &&\n      node.nodeType !== Node.TEXT_NODE\n    ) {\n      const oldScopeName = currentScopeForNode(node);\n      treeVisitor(node, (node) => {\n        removeShadyScoping(node, oldScopeName);\n      });\n    }\n    removeOwnerShadyRoot(node);\n    // if removing slot, must render containing root\n    if (ownerRoot) {\n      let changeSlotContent = this.localName === 'slot';\n      if (changeSlotContent) {\n        preventNativeRemove = true;\n      }\n      if (removingInsertionPoint || changeSlotContent) {\n        ownerRoot._asyncRender();\n      }\n    }\n    if (!preventNativeRemove) {\n      // if removing from a shadyRoot, remove from host instead\n      let container = utils.isShadyRoot(this)\n        ? /** @type {ShadowRoot} */ (this).host\n        : this;\n      // not guaranteed to physically be in container; e.g.\n      // (1) if parent has a shadyRoot, element may or may not at distributed\n      // location (could be undistributed)\n      // (2) if parent is a slot, element may not ben in composed dom\n      if (\n        !(parentData.root || node.localName === 'slot') ||\n        container === node[utils.NATIVE_PREFIX + 'parentNode']\n      ) {\n        container[utils.NATIVE_PREFIX + 'removeChild'](node);\n      }\n    }\n    return node;\n  },\n\n  /**\n   * @this {Node}\n   * @param {Node} node\n   * @param {Node=} ref_node\n   */\n  replaceChild(node, ref_node) {\n    this[utils.SHADY_PREFIX + 'insertBefore'](node, ref_node);\n    this[utils.SHADY_PREFIX + 'removeChild'](ref_node);\n    return node;\n  },\n\n  /**\n   * @this {Node}\n   * @param {boolean=} deep\n   */\n  cloneNode(deep) {\n    if (this.localName == 'template') {\n      return this[utils.NATIVE_PREFIX + 'cloneNode'](deep);\n    } else {\n      const n = this[utils.NATIVE_PREFIX + 'cloneNode'](false);\n      // Attribute nodes historically had childNodes, but they have later\n      // been removed from the spec.\n      // Make sure we do not do a deep clone on them for old browsers (IE11)\n      if (deep && n.nodeType !== Node.ATTRIBUTE_NODE) {\n        for (\n          let c = this[utils.SHADY_PREFIX + 'firstChild'], nc;\n          c;\n          c = c[utils.SHADY_PREFIX + 'nextSibling']\n        ) {\n          nc = c[utils.SHADY_PREFIX + 'cloneNode'](true);\n          n[utils.SHADY_PREFIX + 'appendChild'](nc);\n        }\n      }\n      return n;\n    }\n  },\n\n  /**\n   * @this {Node}\n   * @param {Object=} options\n   */\n  // TODO(sorvell): implement `options` e.g. `{ composed: boolean }`\n  getRootNode(options) {\n    if (!this || !this.nodeType) {\n      return;\n    }\n    const nodeData = ensureShadyDataForNode(this);\n    let root = nodeData.ownerShadyRoot;\n    if (root === undefined) {\n      if (utils.isShadyRoot(this)) {\n        root = this;\n        nodeData.ownerShadyRoot = root;\n      } else {\n        let parent = this[utils.SHADY_PREFIX + 'parentNode'];\n        root = parent\n          ? parent[utils.SHADY_PREFIX + 'getRootNode'](options)\n          : this;\n        // memo-ize result for performance but only memo-ize\n        // result if node is in the document. This avoids a problem where a root\n        // can be cached while an element is inside a fragment.\n        // If this happens and we cache the result, the value can become stale\n        // because for perf we avoid processing the subtree of added fragments.\n        if (document.documentElement[utils.NATIVE_PREFIX + 'contains'](this)) {\n          nodeData.ownerShadyRoot = root;\n        }\n      }\n    }\n    return root;\n  },\n\n  /** @this {Node} */\n  contains(node) {\n    return utils.contains(this, node);\n  },\n});\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nimport {calculateSplices} from './array-splice.js';\nimport * as utils from './utils.js';\nimport {enqueue} from './flush.js';\nimport {ensureShadyDataForNode, shadyDataForNode} from './shady-data.js';\nimport {recordChildNodes} from './link-nodes.js';\nimport {patchShadyRoot} from './patch-shadyRoot.js';\n\n// Do not export this object. It must be passed as the first argument to the\n// ShadyRoot constructor in `attachShadow` to prevent the constructor from\n// throwing. This prevents the user from being able to manually construct a\n// ShadyRoot (i.e. `new ShadowRoot()`).\nconst ShadyRootConstructionToken = {};\n\nconst CATCHALL_NAME = '__catchall';\n\nconst MODE_CLOSED = 'closed';\n\nlet isRendering =\n  utils.settings['deferConnectionCallbacks'] &&\n  document.readyState === 'loading';\nlet rootRendered;\n\nfunction ancestorList(node) {\n  let ancestors = [];\n  do {\n    ancestors.unshift(node);\n  } while ((node = node[utils.SHADY_PREFIX + 'parentNode']));\n  return ancestors;\n}\n\n/**\n * @extends {ShadowRoot}\n */\nclass ShadyRoot {\n  constructor(token, host, options) {\n    if (token !== ShadyRootConstructionToken) {\n      throw new TypeError('Illegal constructor');\n    }\n    /** @type {boolean} */\n    this._renderPending;\n    /** @type {boolean} */\n    this._hasRendered;\n    /** @type {?Array<HTMLSlotElement>} */\n    this._slotList = null;\n    /** @type {?Object<string, Array<HTMLSlotElement>>} */\n    this._slotMap;\n    /** @type {?Array<HTMLSlotElement>} */\n    this._pendingSlots;\n    this._init(host, options);\n  }\n\n  _init(host, options) {\n    // root <=> host\n    this.host = host;\n    /** @type {!string|undefined} */\n    this.mode = options && options.mode;\n    recordChildNodes(this.host);\n    const hostData = ensureShadyDataForNode(this.host);\n    /** @type {!ShadyRoot} */\n    hostData.root = this;\n    hostData.publicRoot = this.mode !== MODE_CLOSED ? this : null;\n    // setup root\n    const rootData = ensureShadyDataForNode(this);\n    rootData.firstChild = rootData.lastChild = rootData.parentNode = rootData.nextSibling = rootData.previousSibling = null;\n    // NOTE: optimization flag, only require an asynchronous render\n    // to record parsed children if flag is not set.\n    if (utils.settings['preferPerformance']) {\n      let n;\n      while ((n = this.host[utils.NATIVE_PREFIX + 'firstChild'])) {\n        this.host[utils.NATIVE_PREFIX + 'removeChild'](n);\n      }\n    } else {\n      this._asyncRender();\n    }\n  }\n\n  _asyncRender() {\n    if (!this._renderPending) {\n      this._renderPending = true;\n      enqueue(() => this._render());\n    }\n  }\n\n  // returns the oldest renderPending ancestor root.\n  _getPendingDistributionRoot() {\n    let renderRoot;\n    let root = this;\n    while (root) {\n      if (root._renderPending) {\n        renderRoot = root;\n      }\n      root = root._getDistributionParent();\n    }\n    return renderRoot;\n  }\n\n  // Returns the shadyRoot `this.host` if `this.host`\n  // has children that require distribution.\n  _getDistributionParent() {\n    let root = this.host[utils.SHADY_PREFIX + 'getRootNode']();\n    if (!utils.isShadyRoot(root)) {\n      return;\n    }\n    const nodeData = shadyDataForNode(this.host);\n    if (nodeData && nodeData.__childSlotCount > 0) {\n      return root;\n    }\n  }\n\n  // Renders the top most render pending shadowRoot in the distribution tree.\n  // This is safe because when a distribution parent renders, all children render.\n  _render() {\n    // If this root is not pending, it needs no rendering work. Any pending\n    // parent that needs to render wll cause this root to render.\n    const root = this._renderPending && this._getPendingDistributionRoot();\n    if (root) {\n      root._renderSelf();\n    }\n  }\n\n  _flushInitial() {\n    if (!this._hasRendered && this._renderPending) {\n      this._render();\n    }\n  }\n\n  /** @override */\n  _renderSelf() {\n    // track rendering state.\n    const wasRendering = isRendering;\n    isRendering = true;\n    this._renderPending = false;\n    if (this._slotList) {\n      this._distribute();\n      this._compose();\n    }\n    // NOTE: optimization flag, only process parsed children\n    // if optimization flag is not set.\n    // on initial render remove any undistributed children.\n    if (!utils.settings['preferPerformance'] && !this._hasRendered) {\n      for (\n        let n = this.host[utils.SHADY_PREFIX + 'firstChild'];\n        n;\n        n = n[utils.SHADY_PREFIX + 'nextSibling']\n      ) {\n        const data = shadyDataForNode(n);\n        if (\n          n[utils.NATIVE_PREFIX + 'parentNode'] === this.host &&\n          (n.localName === 'slot' || !data.assignedSlot)\n        ) {\n          this.host[utils.NATIVE_PREFIX + 'removeChild'](n);\n        }\n      }\n    }\n    this._hasRendered = true;\n    isRendering = wasRendering;\n    if (rootRendered) {\n      rootRendered();\n    }\n  }\n\n  _distribute() {\n    this._validateSlots();\n    // capture # of previously assigned nodes to help determine if dirty.\n    for (let i = 0, slot; i < this._slotList.length; i++) {\n      slot = this._slotList[i];\n      this._clearSlotAssignedNodes(slot);\n    }\n    // distribute host children.\n    for (\n      let n = this.host[utils.SHADY_PREFIX + 'firstChild'];\n      n;\n      n = n[utils.SHADY_PREFIX + 'nextSibling']\n    ) {\n      this._distributeNodeToSlot(n);\n    }\n    // fallback content, slotchange, and dirty roots\n    for (let i = 0; i < this._slotList.length; i++) {\n      const slot = this._slotList[i];\n      const slotData = shadyDataForNode(slot);\n      // distribute fallback content\n      if (!slotData.assignedNodes.length) {\n        for (\n          let n = slot[utils.SHADY_PREFIX + 'firstChild'];\n          n;\n          n = n[utils.SHADY_PREFIX + 'nextSibling']\n        ) {\n          this._distributeNodeToSlot(n, slot);\n        }\n      }\n      const slotParentData = shadyDataForNode(\n        slot[utils.SHADY_PREFIX + 'parentNode']\n      );\n      const slotParentRoot = slotParentData && slotParentData.root;\n      if (\n        slotParentRoot &&\n        (slotParentRoot._hasInsertionPoint() || slotParentRoot._renderPending)\n      ) {\n        slotParentRoot._renderSelf();\n      }\n      this._addAssignedToFlattenedNodes(\n        slotData.flattenedNodes,\n        slotData.assignedNodes\n      );\n      let prevAssignedNodes = slotData._previouslyAssignedNodes;\n      if (prevAssignedNodes) {\n        for (let i = 0; i < prevAssignedNodes.length; i++) {\n          shadyDataForNode(prevAssignedNodes[i])._prevAssignedSlot = null;\n        }\n        slotData._previouslyAssignedNodes = null;\n        // dirty if previously less assigned nodes than previously assigned.\n        if (prevAssignedNodes.length > slotData.assignedNodes.length) {\n          slotData.dirty = true;\n        }\n      }\n      /* Note: A slot is marked dirty whenever a node is newly assigned to it\n      or a node is assigned to a different slot (done in `_distributeNodeToSlot`)\n      or if the number of nodes assigned to the slot has decreased (done above);\n      */\n      if (slotData.dirty) {\n        slotData.dirty = false;\n        this._fireSlotChange(slot);\n      }\n    }\n  }\n\n  /**\n   * Distributes given `node` to the appropriate slot based on its `slot`\n   * attribute. If `forcedSlot` is given, then the node is distributed to the\n   * `forcedSlot`.\n   * Note: slot to which the node is assigned will be marked dirty for firing\n   * `slotchange`.\n   * @param {Node} node\n   * @param {Node=} forcedSlot\n   *\n   */\n  _distributeNodeToSlot(node, forcedSlot) {\n    const nodeData = ensureShadyDataForNode(node);\n    let oldSlot = nodeData._prevAssignedSlot;\n    nodeData._prevAssignedSlot = null;\n    let slot = forcedSlot;\n    if (!slot) {\n      let name = node[utils.SHADY_PREFIX + 'slot'] || CATCHALL_NAME;\n      const list = this._slotMap[name];\n      slot = list && list[0];\n    }\n    if (slot) {\n      const slotData = ensureShadyDataForNode(slot);\n      slotData.assignedNodes.push(node);\n      nodeData.assignedSlot = slot;\n    } else {\n      nodeData.assignedSlot = undefined;\n    }\n    if (oldSlot !== nodeData.assignedSlot) {\n      if (nodeData.assignedSlot) {\n        ensureShadyDataForNode(nodeData.assignedSlot).dirty = true;\n      }\n    }\n  }\n\n  /**\n   * Clears the assignedNodes tracking data for a given `slot`. Note, the current\n   * assigned node data is tracked (via _previouslyAssignedNodes and\n   * _prevAssignedSlot) to see if `slotchange` should fire. This data may be out\n   *  of date at this time because the assigned nodes may have already been\n   * distributed to another root. This is ok since this data is only used to\n   * track changes.\n   * @param {HTMLSlotElement} slot\n   */\n  _clearSlotAssignedNodes(slot) {\n    const slotData = shadyDataForNode(slot);\n    let n$ = slotData.assignedNodes;\n    slotData.assignedNodes = [];\n    slotData.flattenedNodes = [];\n    slotData._previouslyAssignedNodes = n$;\n    if (n$) {\n      for (let i = 0; i < n$.length; i++) {\n        let n = shadyDataForNode(n$[i]);\n        n._prevAssignedSlot = n.assignedSlot;\n        // only clear if it was previously set to this slot;\n        // this helps ensure that if the node has otherwise been distributed\n        // ignore it.\n        if (n.assignedSlot === slot) {\n          n.assignedSlot = null;\n        }\n      }\n    }\n  }\n\n  _addAssignedToFlattenedNodes(flattened, assigned) {\n    for (let i = 0, n; i < assigned.length && (n = assigned[i]); i++) {\n      if (n.localName == 'slot') {\n        const nestedAssigned = shadyDataForNode(n).assignedNodes;\n        if (nestedAssigned && nestedAssigned.length) {\n          this._addAssignedToFlattenedNodes(flattened, nestedAssigned);\n        }\n      } else {\n        flattened.push(assigned[i]);\n      }\n    }\n  }\n\n  _fireSlotChange(slot) {\n    // NOTE: cannot bubble correctly here so not setting bubbles: true\n    // Safari tech preview does not bubble but chrome does\n    // Spec says it bubbles (https://dom.spec.whatwg.org/#mutation-observers)\n    slot[utils.NATIVE_PREFIX + 'dispatchEvent'](new Event('slotchange'));\n    const slotData = shadyDataForNode(slot);\n    if (slotData.assignedSlot) {\n      this._fireSlotChange(slotData.assignedSlot);\n    }\n  }\n\n  // Reify dom such that it is at its correct rendering position\n  // based on logical distribution.\n  // NOTE: here we only compose parents of <slot> elements and not the\n  // shadowRoot into the host. The latter is performend via a fast path\n  // in the `logical-mutation`.insertBefore.\n  _compose() {\n    const slots = this._slotList;\n    let composeList = [];\n    for (let i = 0; i < slots.length; i++) {\n      const parent = slots[i][utils.SHADY_PREFIX + 'parentNode'];\n      /* compose node only if:\n        (1) parent does not have a shadowRoot since shadowRoot has already\n        composed into the host\n        (2) we're not already composing it\n        [consider (n^2) but rare better than Set]\n      */\n      const parentData = shadyDataForNode(parent);\n      if (!(parentData && parentData.root) && composeList.indexOf(parent) < 0) {\n        composeList.push(parent);\n      }\n    }\n    for (let i = 0; i < composeList.length; i++) {\n      const node = composeList[i];\n      const targetNode = node === this ? this.host : node;\n      this._updateChildNodes(targetNode, this._composeNode(node));\n    }\n  }\n\n  // Returns the list of nodes which should be rendered inside `node`.\n  _composeNode(node) {\n    let children = [];\n    for (\n      let n = node[utils.SHADY_PREFIX + 'firstChild'];\n      n;\n      n = n[utils.SHADY_PREFIX + 'nextSibling']\n    ) {\n      // Note: if we see a slot here, the nodes are guaranteed to need to be\n      // composed here. This is because if there is redistribution, it has\n      // already been handled by this point.\n      if (this._isInsertionPoint(n)) {\n        let flattenedNodes = shadyDataForNode(n).flattenedNodes;\n        for (let j = 0; j < flattenedNodes.length; j++) {\n          let distributedNode = flattenedNodes[j];\n          children.push(distributedNode);\n        }\n      } else {\n        children.push(n);\n      }\n    }\n    return children;\n  }\n\n  _isInsertionPoint(node) {\n    return node.localName == 'slot';\n  }\n\n  // Ensures that the rendered node list inside `container` is `children`.\n  _updateChildNodes(container, children) {\n    let composed = utils.nativeChildNodesArray(container);\n    let splices = calculateSplices(children, composed);\n    // process removals\n    for (let i = 0, d = 0, s; i < splices.length && (s = splices[i]); i++) {\n      for (let j = 0, n; j < s.removed.length && (n = s.removed[j]); j++) {\n        // check if the node is still where we expect it is before trying\n        // to remove it; this can happen if we move a node and\n        // then schedule its previous host for distribution resulting in\n        // the node being removed here.\n        if (n[utils.NATIVE_PREFIX + 'parentNode'] === container) {\n          container[utils.NATIVE_PREFIX + 'removeChild'](n);\n        }\n        // TODO(sorvell): avoid the need for splicing here.\n        composed.splice(s.index + d, 1);\n      }\n      d -= s.addedCount;\n    }\n    // process adds\n    for (let i = 0, s, next; i < splices.length && (s = splices[i]); i++) {\n      // eslint-disable-line no-redeclare\n      next = composed[s.index];\n      for (let j = s.index, n; j < s.index + s.addedCount; j++) {\n        n = children[j];\n        container[utils.NATIVE_PREFIX + 'insertBefore'](n, next);\n        composed.splice(j, 0, n);\n      }\n    }\n  }\n\n  _ensureSlotData() {\n    this._pendingSlots = this._pendingSlots || [];\n    this._slotList = this._slotList || [];\n    this._slotMap = this._slotMap || {};\n  }\n\n  _addSlots(slots) {\n    this._ensureSlotData();\n    this._pendingSlots.push(...slots);\n  }\n\n  _validateSlots() {\n    if (this._pendingSlots && this._pendingSlots.length) {\n      this._mapSlots(this._pendingSlots);\n      this._pendingSlots = [];\n    }\n  }\n\n  /**\n   * Adds the given slots. Slots are maintained in an dom-ordered list.\n   * In addition a map of name to slot is updated.\n   */\n  _mapSlots(slots) {\n    let slotNamesToSort;\n    for (let i = 0; i < slots.length; i++) {\n      const slot = slots[i];\n      // ensure insertionPoints's and their parents have logical dom info.\n      // save logical tree info\n      // a. for shadyRoot\n      // b. for insertion points (fallback)\n      // c. for parents of insertion points\n      recordChildNodes(slot);\n      const slotParent = slot[utils.SHADY_PREFIX + 'parentNode'];\n      recordChildNodes(slotParent);\n      const slotParentData = shadyDataForNode(slotParent);\n      slotParentData.__childSlotCount =\n        (slotParentData.__childSlotCount || 0) + 1;\n      let name = this._nameForSlot(slot);\n      if (this._slotMap[name]) {\n        slotNamesToSort = slotNamesToSort || {};\n        slotNamesToSort[name] = true;\n        this._slotMap[name].push(slot);\n      } else {\n        this._slotMap[name] = [slot];\n      }\n      this._slotList.push(slot);\n    }\n    if (slotNamesToSort) {\n      for (let n in slotNamesToSort) {\n        this._slotMap[n] = this._sortSlots(this._slotMap[n]);\n      }\n    }\n  }\n\n  _nameForSlot(slot) {\n    const name = slot['name'] || slot.getAttribute('name') || CATCHALL_NAME;\n    slot.__slotName = name;\n    return name;\n  }\n\n  /**\n   * Slots are kept in an ordered list. Slots with the same name\n   * are sorted here by tree order.\n   */\n  _sortSlots(slots) {\n    // NOTE: Cannot use `compareDocumentPosition` because it's not polyfilled,\n    // but the code here could be used to polyfill the preceeding/following info\n    // in `compareDocumentPosition`.\n    return slots.sort((a, b) => {\n      let listA = ancestorList(a);\n      let listB = ancestorList(b);\n      for (var i = 0; i < listA.length; i++) {\n        let nA = listA[i];\n        let nB = listB[i];\n        if (nA !== nB) {\n          let c$ = utils.childNodesArray(nA[utils.SHADY_PREFIX + 'parentNode']);\n          return c$.indexOf(nA) - c$.indexOf(nB);\n        }\n      }\n    });\n  }\n\n  /**\n   * Removes from tracked slot data any slots contained within `container` and\n   * then updates the tracked data (_slotList and _slotMap).\n   * Any removed slots also have their `assignedNodes` removed from comopsed dom.\n   */\n  _removeContainedSlots(container) {\n    if (!this._slotList) {\n      return;\n    }\n    this._validateSlots();\n    let didRemove;\n    const map = this._slotMap;\n    for (let n in map) {\n      const slots = map[n];\n      for (let i = 0; i < slots.length; i++) {\n        const slot = slots[i];\n        if (utils.contains(container, slot)) {\n          slots.splice(i, 1);\n          const x = this._slotList.indexOf(slot);\n          if (x >= 0) {\n            this._slotList.splice(x, 1);\n            const slotParentData = shadyDataForNode(\n              slot[utils.SHADY_PREFIX + 'parentNode']\n            );\n            if (slotParentData && slotParentData.__childSlotCount) {\n              slotParentData.__childSlotCount--;\n            }\n          }\n          i--;\n          this._removeFlattenedNodes(slot);\n          didRemove = true;\n        }\n      }\n    }\n    return didRemove;\n  }\n\n  _updateSlotName(slot) {\n    if (!this._slotList) {\n      return;\n    }\n    // make sure slotMap is initialized with this slot\n    this._validateSlots();\n    const oldName = slot.__slotName;\n    const name = this._nameForSlot(slot);\n    if (name === oldName) {\n      return;\n    }\n    // remove from existing tracking\n    let slots = this._slotMap[oldName];\n    const i = slots.indexOf(slot);\n    if (i >= 0) {\n      slots.splice(i, 1);\n    }\n    // add to new location and sort if nedessary\n    let list = this._slotMap[name] || (this._slotMap[name] = []);\n    list.push(slot);\n    if (list.length > 1) {\n      this._slotMap[name] = this._sortSlots(list);\n    }\n  }\n\n  _removeFlattenedNodes(slot) {\n    const data = shadyDataForNode(slot);\n    let n$ = data.flattenedNodes;\n    if (n$) {\n      for (let i = 0; i < n$.length; i++) {\n        let node = n$[i];\n        let parent = node[utils.NATIVE_PREFIX + 'parentNode'];\n        if (parent) {\n          parent[utils.NATIVE_PREFIX + 'removeChild'](node);\n        }\n      }\n    }\n    data.flattenedNodes = [];\n    data.assignedNodes = [];\n  }\n\n  _hasInsertionPoint() {\n    this._validateSlots();\n    return Boolean(this._slotList && this._slotList.length);\n  }\n}\n\npatchShadyRoot(ShadyRoot.prototype);\nexport {ShadyRoot};\n\n/**\n  Implements a pared down version of ShadowDOM's scoping, which is easy to\n  polyfill across browsers.\n*/\nexport const attachShadow = (host, options) => {\n  if (!host) {\n    throw new Error('Must provide a host.');\n  }\n  if (!options) {\n    throw new Error('Not enough arguments.');\n  }\n  let root;\n  // Optimization for booting up a shadowRoot from a fragment rather than\n  // creating one.\n  if (options['shadyUpgradeFragment'] && utils.canUpgrade()) {\n    root = options['shadyUpgradeFragment'];\n    root.__proto__ = ShadowRoot.prototype;\n    root._init(host, options);\n    recordChildNodes(root, root);\n    // Note: qsa is native when used with noPatch.\n    /** @type {?NodeList<Element>} */\n    const slotsAdded = root['__noInsertionPoint']\n      ? null\n      : root.querySelectorAll('slot');\n    // Reset scoping information so normal scoing rules apply after this.\n    root['__noInsertionPoint'] = undefined;\n    // if a slot is added, must render containing root.\n    if (slotsAdded && slotsAdded.length) {\n      root._addSlots(slotsAdded);\n      root._asyncRender();\n    }\n    /** @type {ShadowRoot} */ (root).host[utils.NATIVE_PREFIX + 'appendChild'](\n      root\n    );\n  } else {\n    root = new ShadyRoot(ShadyRootConstructionToken, host, options);\n  }\n  return root;\n};\n\n// Mitigate connect/disconnect spam by wrapping custom element classes. This\n// should happen if custom elements are available in any capacity, polyfilled or\n// not.\nif (\n  utils.hasCustomElements() &&\n  utils.settings.inUse &&\n  !utils.settings['preferPerformance']\n) {\n  // process connect/disconnect after roots have rendered to avoid\n  // issues with reaction stack.\n  let connectMap = new Map();\n  rootRendered = function () {\n    // allow elements to connect\n    // save map state (without needing polyfills on IE11)\n    const r = [];\n    connectMap.forEach((v, k) => {\n      r.push([k, v]);\n    });\n    connectMap.clear();\n    for (let i = 0; i < r.length; i++) {\n      const e = r[i][0],\n        value = r[i][1];\n      if (value) {\n        e['__shadydom_connectedCallback']();\n      } else {\n        e['__shadydom_disconnectedCallback']();\n      }\n    }\n  };\n\n  // Document is in loading state and flag is set (deferConnectionCallbacks)\n  // so process connection stack when `readystatechange` fires.\n  if (isRendering) {\n    document.addEventListener(\n      'readystatechange',\n      () => {\n        isRendering = false;\n        rootRendered();\n      },\n      {once: true}\n    );\n  }\n\n  /*\n   * (1) elements can only be connected/disconnected if they are in the expected\n   * state.\n   * (2) never run connect/disconnect during rendering to avoid reaction stack issues.\n   */\n  const ManageConnect = (base, connected, disconnected) => {\n    let counter = 0;\n    const connectFlag = `__isConnected${counter++}`;\n    if (connected || disconnected) {\n      /** @this {!HTMLElement} */\n      base.prototype.connectedCallback = base.prototype[\n        '__shadydom_connectedCallback'\n      ] = function () {\n        // if rendering defer connected\n        // otherwise connect only if we haven't already\n        if (isRendering) {\n          connectMap.set(this, true);\n        } else if (!this[connectFlag]) {\n          this[connectFlag] = true;\n          if (connected) {\n            connected.call(this);\n          }\n        }\n      };\n\n      /** @this {!HTMLElement} */\n      base.prototype.disconnectedCallback = base.prototype[\n        '__shadydom_disconnectedCallback'\n      ] = function () {\n        // if rendering, cancel a pending connection and queue disconnect,\n        // otherwise disconnect only if a connection has been allowed\n        if (isRendering) {\n          // This is necessary only because calling removeChild\n          // on a node that requires distribution leaves it in the DOM tree\n          // until distribution.\n          // NOTE: remember this is checking the patched isConnected to determine\n          // if the node is in the logical tree.\n          if (!this.isConnected) {\n            connectMap.set(this, false);\n          }\n        } else if (this[connectFlag]) {\n          this[connectFlag] = false;\n          if (disconnected) {\n            disconnected.call(this);\n          }\n        }\n      };\n    }\n\n    return base;\n  };\n\n  const originalDefine = window['customElements']['define'];\n  const define = function (name, constructor) {\n    const connected = constructor.prototype.connectedCallback;\n    const disconnected = constructor.prototype.disconnectedCallback;\n    originalDefine.call(\n      window['customElements'],\n      name,\n      ManageConnect(constructor, connected, disconnected)\n    );\n    // unpatch connected/disconnected on class; custom elements tears this off\n    // so the patch is maintained, but if the user calls these methods for\n    // e.g. testing, they will be as expected.\n    constructor.prototype.connectedCallback = connected;\n    constructor.prototype.disconnectedCallback = disconnected;\n  };\n  // Note, it would be better to only patch the CustomElementRegistry.prototype,\n  // but ShadyCSS patches define directly.\n  window.customElements.define = define;\n  // Still patch the registry directly since Safari 10 loses the patch\n  // unless this is done.\n  Object.defineProperty(window['CustomElementRegistry'].prototype, 'define', {\n    value: define,\n    configurable: true,\n  });\n}\n\n/** @return {!ShadyRoot|undefined} */\nexport const ownerShadyRootForNode = (node) => {\n  let root = node[utils.SHADY_PREFIX + 'getRootNode']();\n  if (utils.isShadyRoot(root)) {\n    return root;\n  }\n};\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nimport * as utils from '../utils.js';\nimport {shadyDataForNode} from '../shady-data.js';\n\nexport const SlotablePatches = utils.getOwnPropertyDescriptors({\n  /** @this {Node} */\n  get assignedSlot() {\n    // Force any parent's shadowRoot to flush so that distribution occurs\n    // and this node has an assignedSlot.\n    const parent = this[utils.SHADY_PREFIX + 'parentNode'];\n    const ownerRoot = parent && parent[utils.SHADY_PREFIX + 'shadowRoot'];\n    if (ownerRoot) {\n      ownerRoot._render();\n    }\n    const nodeData = shadyDataForNode(this);\n    return (nodeData && nodeData.assignedSlot) || null;\n  },\n});\n","/**\n * @license\n * Copyright (c) 2022 The Polymer Project Authors\n * SPDX-License-Identifier: BSD-3-Clause\n */\n\n/**\n * A map describing parentheses-like grouping characters and their behavior. The\n * keys are the group's start character and the value's `end` property contains\n * the end character. The `matchNestedParens` property indicates whether or not\n * other grouping characters nested in the group retain their grouping behavior\n * within that group - i.e. if nested grouping characters need to be matched.\n *\n * @type {!Map<string, {end: string, matchNestedParens: boolean}>}\n */\nconst PARENS = new Map();\n// IE 11 doesn't support `Map`'s constructor parameter.\n[\n  ['(', {end: ')', matchNestedParens: true}],\n  ['[', {end: ']', matchNestedParens: true}],\n  ['\"', {end: '\"', matchNestedParens: false}],\n  [\"'\", {end: \"'\", matchNestedParens: false}],\n].forEach(([k, v]) => {\n  PARENS.set(k, v);\n});\n\n/**\n * Finds the first character of `queryChars` within `str` from index `start`\n * onwards that is _not_ nested within any parentheses, brackets, or\n * single/double-quoted strings or part of an escape sequence.\n *\n * If the end of the string is reached without finding a character in\n * `queryChars`, the length of the string is returned.\n *\n * @param {string} str\n * @param {number} start\n * @param {!Array<string>} queryChars\n * @param {boolean} matchNestedParens\n * @return {number}\n */\nconst findNext = (str, start, queryChars, matchNestedParens = true) => {\n  for (let i = start; i < str.length; i++) {\n    if (str[i] === '\\\\' && i < str.length - 1 && str[i + 1] !== '\\n') {\n      // Skip escape sequences.\n      i++;\n    } else if (queryChars.indexOf(str[i]) !== -1) {\n      // One of `queryChars` was found.\n      return i;\n    } else if (matchNestedParens && PARENS.has(str[i])) {\n      // Handle any grouping characters by skipping over the group.\n      const parenInfo = PARENS.get(str[i]);\n      i = findNext(str, i + 1, [parenInfo.end], parenInfo.matchNestedParens);\n      continue;\n    }\n\n    // Do nothing, let `i++` happen.\n  }\n\n  // Reached the end of the string without finding a final char.\n  return str.length;\n};\n\n/**\n * Arrays of compound selectors and combinators that form a complex selector\n * when interleaved.\n *\n * @typedef {{\n *   compoundSelectors: !Array<string>,\n *   combinators: !Array<string>,\n * }}\n */\nexport let ComplexSelectorParts;\n\n/**\n * Splits a selector list into individual complex selectors and creates a\n * `ComplexSelectorParts` for each.\n *\n * @param {string} str\n * @return {!Array<!ComplexSelectorParts>}\n */\nexport const parseSelectorList = (str) => {\n  /**\n   * @type {!Array<!ComplexSelectorParts>}\n   */\n  const results = [];\n\n  /**\n   * Compound selectors and combinators parsed from the current complex\n   * selector.\n   *\n   * @type {!Array<string>}\n   */\n  const chunks = [];\n\n  /**\n   * Creates a new `ComplexSelectorParts` from the current `chunks`, pushes it\n   * into `results` and resets `chunks`.\n   */\n  const endComplexSelector = () => {\n    if (chunks.length > 0) {\n      while (chunks[chunks.length - 1] === ' ') {\n        chunks.pop();\n      }\n      results.push({\n        compoundSelectors: chunks.filter((x, i) => i % 2 === 0),\n        combinators: chunks.filter((x, i) => i % 2 === 1),\n      });\n      chunks.length = 0;\n    }\n  };\n\n  for (let i = 0; i < str.length; ) {\n    const prevChunk = chunks[chunks.length - 1];\n    // `nextIndex` is the next complex selector boundary, combinator, or\n    // whitespace that isn't inside other grouping characters.\n    const nextIndex = findNext(str, i, [',', ' ', '>', '+', '~']);\n    // If `nextIndex` is `i`, then the chunk we're considering is only the next\n    // single character.\n    const nextChunk = nextIndex === i ? str[i] : str.substring(i, nextIndex);\n\n    if (nextChunk === ',') {\n      endComplexSelector();\n    } else if (\n      [undefined, ' ', '>', '+', '~'].indexOf(prevChunk) !== -1 &&\n      nextChunk === ' '\n    ) {\n      // Ignore leading whitespace and whitespace directly after combinators.\n    } else if (prevChunk === ' ' && ['>', '+', '~'].indexOf(nextChunk) !== -1) {\n      // If the last chunk was whitespace and this chunk is a non-whitespace\n      // combinator, replace the whitespace with this combinator.\n      chunks[chunks.length - 1] = nextChunk;\n    } else {\n      chunks.push(nextChunk);\n    }\n\n    i = nextIndex + (nextIndex === i ? 1 : 0);\n  }\n\n  endComplexSelector();\n\n  return results;\n};\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nimport * as utils from '../utils.js';\nimport {shadyDataForNode} from '../shady-data.js';\nimport {ComplexSelectorParts, parseSelectorList} from '../selector-parser.js'; // eslint-disable-line @typescript-eslint/no-unused-vars\n\n/**\n * @param {Node} node\n * @param {Function} matcher\n * @param {Function=} halter\n */\nexport function query(node, matcher, halter) {\n  let list = [];\n  queryChildNodes(node, matcher, halter, list);\n  return list;\n}\n\nfunction queryChildNodes(parent, matcher, halter, list) {\n  for (\n    let n = parent[utils.SHADY_PREFIX + 'firstChild'];\n    n;\n    n = n[utils.SHADY_PREFIX + 'nextSibling']\n  ) {\n    if (\n      n.nodeType === Node.ELEMENT_NODE &&\n      queryElement(n, matcher, halter, list)\n    ) {\n      return true;\n    }\n  }\n}\n\nfunction queryElement(node, matcher, halter, list) {\n  let result = matcher(node);\n  if (result) {\n    list.push(node);\n  }\n  if (halter && halter(result)) {\n    return result;\n  }\n  queryChildNodes(node, matcher, halter, list);\n}\n\n// Needed on Element, DocumentFragment, Document\nexport const ParentNodePatches = utils.getOwnPropertyDescriptors({\n  /** @this {Element} */\n  get firstElementChild() {\n    const nodeData = shadyDataForNode(this);\n    if (nodeData && nodeData.firstChild !== undefined) {\n      let n = this[utils.SHADY_PREFIX + 'firstChild'];\n      while (n && n.nodeType !== Node.ELEMENT_NODE) {\n        n = n[utils.SHADY_PREFIX + 'nextSibling'];\n      }\n      return n;\n    } else {\n      return this[utils.NATIVE_PREFIX + 'firstElementChild'];\n    }\n  },\n\n  /** @this {Element} */\n  get lastElementChild() {\n    const nodeData = shadyDataForNode(this);\n    if (nodeData && nodeData.lastChild !== undefined) {\n      let n = this[utils.SHADY_PREFIX + 'lastChild'];\n      while (n && n.nodeType !== Node.ELEMENT_NODE) {\n        n = n[utils.SHADY_PREFIX + 'previousSibling'];\n      }\n      return n;\n    } else {\n      return this[utils.NATIVE_PREFIX + 'lastElementChild'];\n    }\n  },\n\n  /** @this {Element} */\n  get children() {\n    if (!utils.isTrackingLogicalChildNodes(this)) {\n      return this[utils.NATIVE_PREFIX + 'children'];\n    }\n    return utils.createPolyfilledHTMLCollection(\n      Array.prototype.filter.call(utils.childNodesArray(this), (n) => {\n        return n.nodeType === Node.ELEMENT_NODE;\n      })\n    );\n  },\n\n  /** @this {Element} */\n  get childElementCount() {\n    let children = this[utils.SHADY_PREFIX + 'children'];\n    if (children) {\n      return children.length;\n    }\n    return 0;\n  },\n\n  /** @this {Element} */\n  append(...args) {\n    this[utils.SHADY_PREFIX + 'insertBefore'](\n      utils.convertNodesIntoANode(...args),\n      null\n    );\n  },\n\n  /** @this {Element} */\n  prepend(...args) {\n    this[utils.SHADY_PREFIX + 'insertBefore'](\n      utils.convertNodesIntoANode(...args),\n      this[utils.SHADY_PREFIX + 'firstChild']\n    );\n  },\n\n  /** @this {Element} */\n  ['replaceChildren'](...args) {\n    let child;\n    while ((child = this[utils.SHADY_PREFIX + 'firstChild']) !== null) {\n      this[utils.SHADY_PREFIX + 'removeChild'](child);\n    }\n    this[utils.SHADY_PREFIX + 'insertBefore'](\n      utils.convertNodesIntoANode(...args),\n      null\n    );\n  },\n});\n\n/**\n * Performs the equivalent of `querySelectorAll` within Shady DOM's logical\n * model of the tree for a selector list.\n *\n * See <./logicalQuerySelectorAll.md> for implementation details.\n *\n * @param {!ParentNode} contextNode\n * @param {string} selectorList\n * @return {!Array<!Element>}\n */\nconst logicalQuerySelectorAll = (contextNode, selectorList) => {\n  /**\n   * @type {!Array<!ComplexSelectorParts>}\n   */\n  const complexSelectors = parseSelectorList(selectorList);\n\n  if (complexSelectors.length < 1) {\n    return [];\n  }\n\n  /**\n   * Determines if a single compound selector matches an element. If the\n   * selector contains `:scope` (as a substring), then the selector only is only\n   * considered matching if `element` is `contextNode`.\n   *\n   * @param {!Element} element\n   * @param {string} compoundSelector\n   * @return {boolean}\n   */\n  const matchesCompoundSelector = (element, compoundSelector) => {\n    return (\n      (element === contextNode || compoundSelector.indexOf(':scope') === -1) &&\n      utils.matchesSelector(element, compoundSelector)\n    );\n  };\n\n  /**\n   * An object used to track the current position of a potential selector match.\n   *\n   * - `target` is the element that would be considered matching if the cursor\n   * eventually results in a complete match.\n   *\n   * - `complexSelectorParts` is the parsed representation of the complex\n   * selector that this cursor is attempting to match.\n   *\n   * - `index` is the index into `.complexSelectorParts.compoundSelectors` of\n   * the last successfully matched compound selector.\n   *\n   * - `matchedElement` is the element that successfully matched the compound\n   * selector in `.complexSelectorParts.compoundSelectors` at `index`.\n   *\n   * @typedef {{\n   *   target: !Element,\n   *   complexSelectorParts: !ComplexSelectorParts,\n   *   matchedElement: !Element,\n   *   index: number,\n   * }}\n   */\n  let SelectorMatchingCursor; // eslint-disable-line @typescript-eslint/no-unused-vars\n\n  /**\n   * The list of `SelectorMatchingCursor`s, initialized with cursors pointing at\n   * all descendants of `contextNode` that match the last compound selector in\n   * any complex selector in `selectorList`.\n   *\n   * @type {!Array<!SelectorMatchingCursor>}\n   */\n  let cursors = utils.flat(\n    query(contextNode, (_element) => true).map((element) => {\n      return utils.flat(\n        complexSelectors.map((complexSelectorParts) => {\n          const {compoundSelectors} = complexSelectorParts;\n          // Selectors are matched by iterating their compound selectors in\n          // reverse order for efficiency. In particular, when finding\n          // candidates for the descendant combinator, iterating forwards would\n          // imply needing to walk all descendants of the last matched element\n          // for possible candidates, but iterating backwards only requires\n          // walking up the ancestor chain.\n          const index = compoundSelectors.length - 1;\n          if (matchesCompoundSelector(element, compoundSelectors[index])) {\n            return {\n              target: element,\n              complexSelectorParts,\n              matchedElement: element,\n              index,\n            };\n          } else {\n            return [];\n          }\n        })\n      );\n    })\n  );\n\n  // At each step, any remaining cursors that have not finished matching (i.e.\n  // with `cursor.index > 0`) should be replaced with new cursors for any valid\n  // candidates that match the next compound selector.\n  while (cursors.some((cursor) => cursor.index > 0)) {\n    cursors = utils.flat(\n      cursors.map((cursor) => {\n        // Cursors with `index` of 0 have already matched and should not be\n        // replaced or removed.\n        if (cursor.index <= 0) {\n          return cursor;\n        }\n\n        const {\n          target,\n          matchedElement,\n          complexSelectorParts,\n          index: lastIndex,\n        } = cursor;\n        const index = lastIndex - 1;\n        const combinator = complexSelectorParts.combinators[index];\n        const compoundSelector = complexSelectorParts.compoundSelectors[index];\n\n        if (combinator === ' ') {\n          const results = [];\n\n          // For `a b`, where existing cursors have `matchedElement`s matching\n          // `b`, the candidates to test against `a` are all ancestors of each\n          // cursor's `matchedElement`.\n          for (\n            let ancestor = matchedElement[utils.SHADY_PREFIX + 'parentElement'];\n            ancestor;\n            ancestor = ancestor[utils.SHADY_PREFIX + 'parentElement']\n          ) {\n            if (matchesCompoundSelector(ancestor, compoundSelector)) {\n              results.push({\n                target,\n                complexSelectorParts,\n                matchedElement: ancestor,\n                index,\n              });\n            }\n          }\n\n          return results;\n        } else if (combinator === '>') {\n          const parent = matchedElement[utils.SHADY_PREFIX + 'parentElement'];\n\n          // For `a > b`, where existing cursors have `matchedElement`s matching\n          // `b`, the candidates to test against `a` are the parents of each\n          // cursor's `matchedElement`.\n          if (matchesCompoundSelector(parent, compoundSelector)) {\n            return {\n              target,\n              complexSelectorParts,\n              matchedElement: parent,\n              index,\n            };\n          }\n\n          return [];\n        } else if (combinator === '+') {\n          const sibling =\n            matchedElement[utils.SHADY_PREFIX + 'previousElementSibling'];\n\n          // For `a + b`, where existing cursors have `matchedElement`s matching\n          // `b`, the candidates to test against `a` are the immediately\n          // preceding siblings of each cursor's `matchedElement`.\n          if (sibling && matchesCompoundSelector(sibling, compoundSelector)) {\n            return {\n              target,\n              complexSelectorParts,\n              matchedElement: sibling,\n              index,\n            };\n          }\n\n          return [];\n        } else if (combinator === '~') {\n          const results = [];\n\n          // For `a ~ b`, where existing cursors have `matchedElement`s matching\n          // `b`, the candidates to test against `a` are all preceding siblings\n          // of each cursor's `matchedElement`.\n          for (\n            let sibling =\n              matchedElement[utils.SHADY_PREFIX + 'previousElementSibling'];\n            sibling;\n            sibling = sibling[utils.SHADY_PREFIX + 'previousElementSibling']\n          ) {\n            if (matchesCompoundSelector(sibling, compoundSelector)) {\n              results.push({\n                target,\n                complexSelectorParts,\n                matchedElement: sibling,\n                index,\n              });\n            }\n          }\n\n          return results;\n        } else {\n          // As of writing, there are no other combinators:\n          // <https://drafts.csswg.org/selectors/#combinators>\n          throw new Error(`Unrecognized combinator: '${combinator}'.`);\n        }\n      })\n    );\n  }\n\n  // Map remaining cursors to their `target` and deduplicate.\n  return utils.deduplicate(cursors.map(({target}) => target));\n};\n\nconst querySelectorImplementation =\n  utils.settings['querySelectorImplementation'];\n\nexport const QueryPatches = utils.getOwnPropertyDescriptors({\n  /**\n   * @this {!ParentNode}\n   * @param {string} selector\n   */\n  querySelector(selector) {\n    if (querySelectorImplementation === 'native') {\n      // Polyfilled `ShadowRoot`s don't have a native `querySelectorAll`.\n      const target =\n        this instanceof ShadowRoot\n          ? /** @type {!ShadowRoot} */ (this).host\n          : this;\n      const candidates = Array.prototype.slice.call(\n        target[utils.NATIVE_PREFIX + 'querySelectorAll'](selector)\n      );\n      const root = this[utils.SHADY_PREFIX + 'getRootNode']();\n      // This could use `find`, but Closure doesn't polyfill it.\n      for (const candidate of candidates) {\n        if (candidate[utils.SHADY_PREFIX + 'getRootNode']() == root) {\n          return candidate;\n        }\n      }\n      return null;\n    } else if (querySelectorImplementation === 'selectorEngine') {\n      return logicalQuerySelectorAll(this, selector)[0] || null;\n    } else if (querySelectorImplementation === undefined) {\n      // match selector and halt on first result.\n      let result = query(\n        this,\n        function (n) {\n          return utils.matchesSelector(n, selector);\n        },\n        function (n) {\n          return Boolean(n);\n        }\n      )[0];\n      return result || null;\n    } else {\n      throw new Error(\n        'Unrecognized value of ShadyDOM.querySelectorImplementation: ' +\n          `'${querySelectorImplementation}'`\n      );\n    }\n  },\n\n  /**\n   * @this {!ParentNode}\n   * @param {string} selector\n   * @param {boolean} useNative\n   */\n  querySelectorAll(selector, useNative) {\n    if (useNative || querySelectorImplementation === 'native') {\n      // Polyfilled `ShadowRoot`s don't have a native `querySelectorAll`.\n      const target =\n        this instanceof ShadowRoot\n          ? /** @type {!ShadowRoot} */ (this).host\n          : this;\n      const candidates = Array.prototype.slice.call(\n        target[utils.NATIVE_PREFIX + 'querySelectorAll'](selector)\n      );\n      const root = this[utils.SHADY_PREFIX + 'getRootNode']();\n      return utils.createPolyfilledHTMLCollection(\n        candidates.filter(\n          (e) => e[utils.SHADY_PREFIX + 'getRootNode']() == root\n        )\n      );\n    } else if (querySelectorImplementation === 'selectorEngine') {\n      return utils.createPolyfilledHTMLCollection(\n        logicalQuerySelectorAll(this, selector)\n      );\n    } else if (querySelectorImplementation === undefined) {\n      return utils.createPolyfilledHTMLCollection(\n        query(this, function (n) {\n          return utils.matchesSelector(n, selector);\n        })\n      );\n    } else {\n      throw new Error(\n        'Unrecognized value of ShadyDOM.querySelectorImplementation: ' +\n          `'${querySelectorImplementation}'`\n      );\n    }\n  },\n});\n\n// In preferPerformance mode, create a custom `ParentNodeDocumentOrFragment`\n// that optionally does not mixin querySelector/All; this is a performance\n// optimization. In noPatch, we need to keep the query patches here in order to\n// ensure the query API is available on the wrapper\nexport const ParentNodeDocumentOrFragmentPatches =\n  utils.settings.preferPerformance && !utils.settings.noPatch\n    ? utils.assign({}, ParentNodePatches)\n    : ParentNodePatches;\n\nutils.assign(ParentNodePatches, QueryPatches);\n","/**\n@license\nCopyright (c) 2020 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nimport * as utils from '../utils.js';\n\nexport const ChildNodePatches = utils.getOwnPropertyDescriptors({\n  /** @this {Element} */\n  after(...args) {\n    const parentNode = this[utils.SHADY_PREFIX + 'parentNode'];\n    if (parentNode === null) {\n      return;\n    }\n    const nextSibling = this[utils.SHADY_PREFIX + 'nextSibling'];\n    parentNode[utils.SHADY_PREFIX + 'insertBefore'](\n      utils.convertNodesIntoANode(...args),\n      nextSibling\n    );\n  },\n\n  /** @this {Element} */\n  before(...args) {\n    const parentNode = this[utils.SHADY_PREFIX + 'parentNode'];\n    if (parentNode === null) {\n      return;\n    }\n    parentNode[utils.SHADY_PREFIX + 'insertBefore'](\n      utils.convertNodesIntoANode(...args),\n      this\n    );\n  },\n\n  /** @this {Element} */\n  remove() {\n    const parentNode = this[utils.SHADY_PREFIX + 'parentNode'];\n    if (parentNode === null) {\n      return;\n    }\n    parentNode[utils.SHADY_PREFIX + 'removeChild'](this);\n  },\n\n  /** @this {Element} */\n  replaceWith(...args) {\n    const parentNode = this[utils.SHADY_PREFIX + 'parentNode'];\n    if (parentNode === null) {\n      return;\n    }\n    const nextSibling = this[utils.SHADY_PREFIX + 'nextSibling'];\n    parentNode[utils.SHADY_PREFIX + 'removeChild'](this);\n    parentNode[utils.SHADY_PREFIX + 'insertBefore'](\n      utils.convertNodesIntoANode(...args),\n      nextSibling\n    );\n  },\n});\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nimport * as utils from '../utils.js';\nimport {scopeClassAttribute} from '../style-scoping.js';\nimport {shadyDataForNode} from '../shady-data.js';\nimport {attachShadow, ownerShadyRootForNode} from '../attach-shadow.js';\n// prettier-ignore\nimport {eventPropertyNamesForElement, wrappedDescriptorForEventProperty} from '../patch-events.js';\n\nconst doc = window.document;\n\n/**\n * Should be called whenever an attribute changes. If the `slot` attribute\n * changes, provokes rendering if necessary. If a `<slot>` element's `name`\n * attribute changes, updates the root's slot map and renders.\n * @param {Node} node\n * @param {string} name\n */\nfunction distributeAttributeChange(node, name) {\n  if (name === 'slot') {\n    const parent = node[utils.SHADY_PREFIX + 'parentNode'];\n    if (utils.hasShadowRootWithSlot(parent)) {\n      shadyDataForNode(parent).root._asyncRender();\n    }\n  } else if (node.localName === 'slot' && name === 'name') {\n    let root = ownerShadyRootForNode(node);\n    if (root) {\n      root._updateSlotName(node);\n      root._asyncRender();\n    }\n  }\n}\n\nexport const ElementPatches = utils.getOwnPropertyDescriptors({\n  /** @this {Element} */\n  get previousElementSibling() {\n    const nodeData = shadyDataForNode(this);\n    if (nodeData && nodeData.previousSibling !== undefined) {\n      let n = this[utils.SHADY_PREFIX + 'previousSibling'];\n      while (n && n.nodeType !== Node.ELEMENT_NODE) {\n        n = n[utils.SHADY_PREFIX + 'previousSibling'];\n      }\n      return n;\n    } else {\n      return this[utils.NATIVE_PREFIX + 'previousElementSibling'];\n    }\n  },\n\n  /** @this {Element} */\n  get nextElementSibling() {\n    const nodeData = shadyDataForNode(this);\n    if (nodeData && nodeData.nextSibling !== undefined) {\n      let n = this[utils.SHADY_PREFIX + 'nextSibling'];\n      while (n && n.nodeType !== Node.ELEMENT_NODE) {\n        n = n[utils.SHADY_PREFIX + 'nextSibling'];\n      }\n      return n;\n    } else {\n      return this[utils.NATIVE_PREFIX + 'nextElementSibling'];\n    }\n  },\n\n  /** @this {Element} */\n  get slot() {\n    return this.getAttribute('slot');\n  },\n\n  /** @this {Element} */\n  set slot(value) {\n    this[utils.SHADY_PREFIX + 'setAttribute']('slot', value);\n  },\n\n  /** @this {Element} */\n  get className() {\n    return this.getAttribute('class') || '';\n  },\n\n  /**\n   * @this {Element}\n   * @param {string} value\n   */\n  set className(value) {\n    this[utils.SHADY_PREFIX + 'setAttribute']('class', value);\n  },\n\n  /**\n   * @this {Element}\n   * @param {string} attr\n   * @param {string} value\n   */\n  setAttribute(attr, value) {\n    if (this.ownerDocument !== doc) {\n      this[utils.NATIVE_PREFIX + 'setAttribute'](attr, value);\n    } else if (!scopeClassAttribute(this, attr, value)) {\n      this[utils.NATIVE_PREFIX + 'setAttribute'](attr, value);\n      distributeAttributeChange(this, attr);\n    }\n  },\n\n  /**\n   * @this {Element}\n   * @param {string} attr\n   */\n  removeAttribute(attr) {\n    if (this.ownerDocument !== doc) {\n      this[utils.NATIVE_PREFIX + 'removeAttribute'](attr);\n    } else if (!scopeClassAttribute(this, attr, '')) {\n      this[utils.NATIVE_PREFIX + 'removeAttribute'](attr);\n      distributeAttributeChange(this, attr);\n    } else if (this.getAttribute(attr) === '') {\n      // When attr='class', scopeClassAttribute() will handle the change as a\n      // side-effect and return `true`, allowing us to get to this branch,\n      // which cleans up the 'class' attribute if it's empty and we were\n      // supposed to have removed it.\n      this[utils.NATIVE_PREFIX + 'removeAttribute'](attr);\n    }\n  },\n\n  /**\n   * @this {Element}\n   * @param {string} attr\n   * @param {boolean | undefined} force\n   */\n  toggleAttribute(attr, force) {\n    if (this.ownerDocument !== doc) {\n      return this[utils.NATIVE_PREFIX + 'toggleAttribute'](attr, force);\n    } else if (!scopeClassAttribute(this, attr, '')) {\n      const result = this[utils.NATIVE_PREFIX + 'toggleAttribute'](attr, force);\n      distributeAttributeChange(this, attr);\n      return result;\n    } else if (this.getAttribute(attr) === '' && !force) {\n      // When attr='class', scopeClassAttribute() will handle the change as a\n      // side-effect and return `true`, allowing us to get to this branch,\n      // which cleans up the 'class' attribute if it's empty and we were\n      // supposed to have removed it.\n      // We check for `force` being falsey because we only want to clean up on\n      // removal of the attribute.\n      return this[utils.NATIVE_PREFIX + 'toggleAttribute'](attr, force);\n    }\n  },\n});\n\nif (!utils.settings.preferPerformance) {\n  eventPropertyNamesForElement.forEach((property) => {\n    ElementPatches[property] = wrappedDescriptorForEventProperty(property);\n  });\n}\n\nexport const ElementShadowPatches = utils.getOwnPropertyDescriptors({\n  /**\n   * @this {Element}\n   * @param {!{mode: string}} options\n   */\n  attachShadow(options) {\n    const root = attachShadow(this, options);\n    // TODO(sorvell): Workaround for CE not seeing shadowRoot in `on-demand`\n    // noPatch mode. CE's attachShadow patch is overwritten by this patch\n    // and cannot set its own special tracking for shadowRoot. It does this\n    // to be able to see closed shadowRoots.\n    // This is necessary so that the CE polyfill can traverse into nodes\n    // with shadowRoot that will under `on-demand` have their childNodes patched.\n    this['__CE_shadowRoot'] = root;\n    return root;\n  },\n\n  // Note: Can be patched on element prototype on all browsers.\n  // Must be patched on instance on browsers that support native Shadow DOM\n  // but do not have builtin accessors (old Chrome).\n  /** @this {Element} */\n  get shadowRoot() {\n    const nodeData = shadyDataForNode(this);\n    return (nodeData && nodeData.publicRoot) || null;\n  },\n});\n\nutils.assign(ElementPatches, ElementShadowPatches);\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nimport * as utils from '../utils.js';\nimport {getInnerHTML} from '../innerHTML.js';\nimport {clearNode} from './Node.js';\n\n/** @type {!Document} */\nconst inertDoc = document.implementation.createHTMLDocument('inert');\n\nexport const ElementOrShadowRootPatches = utils.getOwnPropertyDescriptors({\n  /** @this {Element} */\n  get innerHTML() {\n    if (utils.isTrackingLogicalChildNodes(this)) {\n      const content =\n        this.localName === 'template'\n          ? /** @type {HTMLTemplateElement} */ (this).content\n          : this;\n      return getInnerHTML(content, utils.childNodesArray);\n    } else {\n      return this[utils.NATIVE_PREFIX + 'innerHTML'];\n    }\n  },\n\n  /**\n   * @this {Element}\n   * @param {string} value\n   */\n  set innerHTML(value) {\n    if (this.localName === 'template') {\n      this[utils.NATIVE_PREFIX + 'innerHTML'] = value;\n    } else {\n      clearNode(this);\n      const containerName = this.localName || 'div';\n      let htmlContainer;\n      if (!this.namespaceURI || this.namespaceURI === inertDoc.namespaceURI) {\n        htmlContainer = inertDoc.createElement(containerName);\n      } else {\n        htmlContainer = inertDoc.createElementNS(\n          this.namespaceURI,\n          containerName\n        );\n      }\n      if (utils.settings.hasDescriptors) {\n        htmlContainer[utils.NATIVE_PREFIX + 'innerHTML'] = value;\n      } else {\n        htmlContainer.innerHTML = value;\n      }\n      let firstChild;\n      while ((firstChild = htmlContainer[utils.SHADY_PREFIX + 'firstChild'])) {\n        this[utils.SHADY_PREFIX + 'insertBefore'](firstChild);\n      }\n    }\n  },\n});\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nimport * as utils from '../utils.js';\n// prettier-ignore\nimport {eventPropertyNamesForHTMLElement, wrappedDescriptorForEventProperty} from '../patch-events.js';\nimport {shadyDataForNode} from '../shady-data.js';\n\nexport const HTMLElementPatches = utils.getOwnPropertyDescriptors({\n  /** @this {HTMLElement} */\n  blur() {\n    const nodeData = shadyDataForNode(this);\n    let root = nodeData && nodeData.root;\n    let shadowActive = root && root.activeElement;\n    if (shadowActive) {\n      shadowActive[utils.SHADY_PREFIX + 'blur']();\n    } else {\n      this[utils.NATIVE_PREFIX + 'blur']();\n    }\n  },\n});\n\nif (!utils.settings.preferPerformance) {\n  eventPropertyNamesForHTMLElement.forEach((property) => {\n    HTMLElementPatches[property] = wrappedDescriptorForEventProperty(property);\n  });\n}\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nimport * as utils from '../utils.js';\nimport {shadyDataForNode} from '../shady-data.js';\nimport {addEventListener, removeEventListener} from '../patch-events.js';\n\nexport const SlotPatches = utils.getOwnPropertyDescriptors({\n  /**\n   * @this {HTMLSlotElement}\n   * @param {Object=} options\n   */\n  assignedNodes(options) {\n    if (this.localName === 'slot') {\n      // Force any containing shadowRoot to flush so that distribution occurs\n      // and this node has assignedNodes.\n      const root = this[utils.SHADY_PREFIX + 'getRootNode']();\n      if (root && utils.isShadyRoot(root)) {\n        root._render();\n      }\n      const nodeData = shadyDataForNode(this);\n      return nodeData\n        ? (options && options.flatten\n            ? nodeData.flattenedNodes\n            : nodeData.assignedNodes) || []\n        : [];\n    }\n  },\n\n  /**\n   * @this {HTMLSlotElement}\n   * @param {string} type\n   * @param {Function} fn\n   * @param {Object|boolean=} optionsOrCapture\n   */\n  addEventListener(type, fn, optionsOrCapture) {\n    // NOTE, check if this is a `slot` because these patches are installed on\n    // Element where browsers don't have `<slot>`\n    if (this.localName !== 'slot' || type === 'slotchange') {\n      addEventListener.call(this, type, fn, optionsOrCapture);\n    } else {\n      if (typeof optionsOrCapture !== 'object') {\n        optionsOrCapture = {\n          capture: Boolean(optionsOrCapture),\n        };\n      }\n      const parent = this[utils.SHADY_PREFIX + 'parentNode'];\n      if (!parent) {\n        throw new Error(\n          'ShadyDOM cannot attach event to slot unless it has a `parentNode`'\n        );\n      }\n      optionsOrCapture.__shadyTarget = this;\n      parent[utils.SHADY_PREFIX + 'addEventListener'](\n        type,\n        fn,\n        optionsOrCapture\n      );\n    }\n  },\n\n  /**\n   * @this {HTMLSlotElement}\n   * @param {string} type\n   * @param {Function} fn\n   * @param {Object|boolean=} optionsOrCapture\n   */\n  removeEventListener(type, fn, optionsOrCapture) {\n    // NOTE, check if this is a `slot` because these patches are installed on\n    // Element where browsers don't have `<slot>`\n    if (this.localName !== 'slot' || type === 'slotchange') {\n      removeEventListener.call(this, type, fn, optionsOrCapture);\n    } else {\n      if (typeof optionsOrCapture !== 'object') {\n        optionsOrCapture = {\n          capture: Boolean(optionsOrCapture),\n        };\n      }\n      const parent = this[utils.SHADY_PREFIX + 'parentNode'];\n      if (!parent) {\n        throw new Error(\n          'ShadyDOM cannot attach event to slot unless it has a `parentNode`'\n        );\n      }\n      optionsOrCapture.__shadyTarget = this;\n      parent[utils.SHADY_PREFIX + 'removeEventListener'](\n        type,\n        fn,\n        optionsOrCapture\n      );\n    }\n  },\n});\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\nimport * as utils from '../utils.js';\nimport {query} from './ParentNode.js';\n\nexport const DocumentOrFragmentPatches = utils.getOwnPropertyDescriptors({\n  /**\n   * @this {Element}\n   * @param {string} id\n   */\n  getElementById(id) {\n    if (id === '') {\n      return null;\n    }\n    let result = query(\n      this,\n      function (n) {\n        return n.id == id;\n      },\n      function (n) {\n        return Boolean(n);\n      }\n    )[0];\n    return result || null;\n  },\n});\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nimport * as utils from '../utils.js';\nimport {ownerShadyRootForNode} from '../attach-shadow.js';\n\nfunction getDocumentActiveElement() {\n  if (utils.settings.hasDescriptors) {\n    return document[utils.NATIVE_PREFIX + 'activeElement'];\n  } else {\n    return document.activeElement;\n  }\n}\n\n// Get the element within the given set of roots.\nfunction getElInRoot(roots, el) {\n  let elRoot;\n  while (\n    el &&\n    !roots.has((elRoot = el[utils.SHADY_PREFIX + 'getRootNode']()))\n  ) {\n    el = elRoot.host;\n  }\n  return el;\n}\n\nfunction getAncestorRoots(docOrRoot) {\n  const roots = new Set();\n  roots.add(docOrRoot);\n  while (utils.isShadyRoot(docOrRoot) && docOrRoot.host) {\n    docOrRoot = docOrRoot.host[utils.SHADY_PREFIX + 'getRootNode']();\n    roots.add(docOrRoot);\n  }\n  return roots;\n}\n\nconst USE_NATIVE_DOCUMENT_EFP = 'useNativeDocumentEFP';\n\nconst elementsFromPointProperty =\n  utils.NATIVE_PREFIX +\n  utils.getPropertyName(Document.prototype, 'elementsFromPoint');\n\nexport const DocumentOrShadowRootPatches = utils.getOwnPropertyDescriptors({\n  /** @this {Document|ShadowRoot} */\n  get activeElement() {\n    let active = getDocumentActiveElement();\n    // In IE11, activeElement might be an empty object if the document is\n    // contained in an iframe.\n    // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/10998788/\n    if (!active || !active.nodeType) {\n      return null;\n    }\n    let isShadyRoot = !!utils.isShadyRoot(this);\n    if (this !== document) {\n      // If this node isn't a document or shady root, then it doesn't have\n      // an active element.\n      if (!isShadyRoot) {\n        return null;\n      }\n      // If this shady root's host is the active element or the active\n      // element is not a descendant of the host (in the composed tree),\n      // then it doesn't have an active element.\n      if (\n        this.host === active ||\n        !this.host[utils.NATIVE_PREFIX + 'contains'](active)\n      ) {\n        return null;\n      }\n    }\n    // This node is either the document or a shady root of which the active\n    // element is a (composed) descendant of its host; iterate upwards to\n    // find the active element's most shallow host within it.\n    let activeRoot = ownerShadyRootForNode(active);\n    while (activeRoot && activeRoot !== this) {\n      active = activeRoot.host;\n      activeRoot = ownerShadyRootForNode(active);\n    }\n    if (this === document) {\n      // This node is the document, so activeRoot should be null.\n      return activeRoot ? null : active;\n    } else {\n      // This node is a non-document shady root, and it should be\n      // activeRoot.\n      return activeRoot === this ? active : null;\n    }\n  },\n\n  /** @this {Document|ShadowRoot} */\n  elementsFromPoint(x, y) {\n    const nativeResult = document[elementsFromPointProperty](x, y);\n    // support optionally opt-ing out for document\n    if (this === document && utils.settings[USE_NATIVE_DOCUMENT_EFP]) {\n      return nativeResult;\n    }\n    const nativeArray = utils.arrayFrom(nativeResult);\n    // Filter native result to return the element in this root\n    // OR an above root.\n    // Set containing this root and its ancestor roots.\n    const ancestorRoots = getAncestorRoots(this);\n    // Use a Set since the elements can repeat.\n    const rootedResult = new Set();\n    for (let i = 0; i < nativeArray.length; i++) {\n      rootedResult.add(getElInRoot(ancestorRoots, nativeArray[i]));\n    }\n    // Note, for IE compat avoid Array.from(set).\n    const r = [];\n    rootedResult.forEach((x) => r.push(x));\n    return r;\n  },\n\n  /** @this {Document|ShadowRoot} */\n  elementFromPoint(x, y) {\n    // support optionally opt-ing out for document\n    return this === document && utils.settings[USE_NATIVE_DOCUMENT_EFP]\n      ? this[utils.NATIVE_PREFIX + 'elementFromPoint'](x, y)\n      : this[utils.SHADY_PREFIX + 'elementsFromPoint'](x, y)[0] || null;\n  },\n});\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nimport * as utils from '../utils.js';\n\nconst doc = window.document;\n\nexport const DocumentPatches = utils.getOwnPropertyDescriptors({\n  // note: Though not technically correct, we fast path `importNode`\n  // when called on a node not owned by the main document.\n  // This allows, for example, elements that cannot\n  // contain custom elements and are therefore not likely to contain shadowRoots\n  // to cloned natively. This is a fairly significant performance win.\n  /**\n   * @this {Document}\n   * @param {Node} node\n   * @param {boolean} deep\n   */\n  importNode(node, deep) {\n    // A template element normally has no children with shadowRoots, so make\n    // sure we always make a deep copy to correctly construct the template.content\n    if (node.ownerDocument !== doc || node.localName === 'template') {\n      return this[utils.NATIVE_PREFIX + 'importNode'](node, deep);\n    }\n    let n = this[utils.NATIVE_PREFIX + 'importNode'](node, false);\n    if (deep) {\n      for (\n        let c = node[utils.SHADY_PREFIX + 'firstChild'], nc;\n        c;\n        c = c[utils.SHADY_PREFIX + 'nextSibling']\n      ) {\n        nc = this[utils.SHADY_PREFIX + 'importNode'](c, true);\n        n[utils.SHADY_PREFIX + 'appendChild'](nc);\n      }\n    }\n    return n;\n  },\n});\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\nimport * as utils from '../utils.js';\n// prettier-ignore\nimport {addEventListener, removeEventListener, dispatchEvent} from '../patch-events.js';\n\nexport const WindowPatches = utils.getOwnPropertyDescriptors({\n  // Ensure that `dispatchEvent` is patched directly on Window since on\n  // IE11, Window does not descend from EventTarget.\n  dispatchEvent,\n\n  // NOTE: ensure these methods are bound to `window` so that `this` is correct\n  // when called directly from global context without a receiver; e.g.\n  // `addEventListener(...)`.\n  addEventListener: addEventListener.bind(window),\n\n  removeEventListener: removeEventListener.bind(window),\n});\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nimport * as utils from './utils.js';\nimport {EventTargetPatches} from './patches/EventTarget.js';\nimport {NodePatches} from './patches/Node.js';\nimport {SlotablePatches} from './patches/Slotable.js';\n// prettier-ignore\nimport {ParentNodePatches, ParentNodeDocumentOrFragmentPatches} from './patches/ParentNode.js';\nimport {ChildNodePatches} from './patches/ChildNode.js';\nimport {ElementPatches, ElementShadowPatches} from './patches/Element.js';\nimport {ElementOrShadowRootPatches} from './patches/ElementOrShadowRoot.js';\nimport {HTMLElementPatches} from './patches/HTMLElement.js';\nimport {SlotPatches} from './patches/Slot.js';\nimport {DocumentOrFragmentPatches} from './patches/DocumentOrFragment.js';\nimport {DocumentOrShadowRootPatches} from './patches/DocumentOrShadowRoot.js';\nimport {DocumentPatches} from './patches/Document.js';\nimport {WindowPatches} from './patches/Window.js';\n\n// Some browsers (IE/Edge) have non-standard HTMLElement accessors.\nconst NonStandardHTMLElement = {};\n\nif (Object.getOwnPropertyDescriptor(HTMLElement.prototype, 'parentElement')) {\n  NonStandardHTMLElement.parentElement = NodePatches.parentElement;\n}\n\nif (Object.getOwnPropertyDescriptor(HTMLElement.prototype, 'contains')) {\n  NonStandardHTMLElement.contains = NodePatches.contains;\n}\n\nif (Object.getOwnPropertyDescriptor(HTMLElement.prototype, 'children')) {\n  NonStandardHTMLElement.children = ParentNodePatches.children;\n}\n\nif (Object.getOwnPropertyDescriptor(HTMLElement.prototype, 'innerHTML')) {\n  NonStandardHTMLElement.innerHTML = ElementOrShadowRootPatches.innerHTML;\n}\n\nif (Object.getOwnPropertyDescriptor(HTMLElement.prototype, 'className')) {\n  NonStandardHTMLElement.className = ElementPatches.className;\n}\n\n// Avoid patching `innerHTML` if it does not exist on Element (IE)\n// and we can patch accessors (hasDescriptors).\nconst ElementShouldHaveInnerHTML =\n  !utils.settings.hasDescriptors || 'innerHTML' in Element.prototype;\n\n// setup patching\nconst patchMap = {\n  EventTarget: [EventTargetPatches],\n  Node: [NodePatches, !window.EventTarget ? EventTargetPatches : null],\n  Text: [SlotablePatches],\n  Comment: [SlotablePatches],\n  CDATASection: [SlotablePatches],\n  ProcessingInstruction: [SlotablePatches],\n  Element: [\n    ElementPatches,\n    ParentNodePatches,\n    ChildNodePatches,\n    SlotablePatches,\n    ElementShouldHaveInnerHTML ? ElementOrShadowRootPatches : null,\n    !window.HTMLSlotElement ? SlotPatches : null,\n  ],\n  HTMLElement: [HTMLElementPatches, NonStandardHTMLElement],\n  HTMLSlotElement: [SlotPatches],\n  DocumentFragment: [\n    ParentNodeDocumentOrFragmentPatches,\n    DocumentOrFragmentPatches,\n  ],\n  Document: [\n    DocumentPatches,\n    ParentNodeDocumentOrFragmentPatches,\n    DocumentOrFragmentPatches,\n    DocumentOrShadowRootPatches,\n  ],\n  Window: [WindowPatches],\n  CharacterData: [ChildNodePatches],\n  XMLHttpRequest: [!window.EventTarget ? EventTargetPatches : null],\n};\n\nconst getPatchPrototype = (name) => window[name] && window[name].prototype;\n\n// Note, must avoid patching accessors on prototypes when descriptors are not correct\n// because the CustomElements polyfill checks if these exist before patching instances.\n// CustomElements polyfill *only* cares about these accessors.\nconst disallowedNativePatches = utils.settings.hasDescriptors\n  ? null\n  : ['innerHTML', 'textContent'];\n\n/**\n * Patch a group of accessors on an object.\n * @param {!Object} proto\n * @param {!Array<Object>} list\n * @param {string=} prefix\n * @param {Array=} disallowed\n */\nfunction applyPatchList(proto, list, prefix, disallowed) {\n  list.forEach(\n    (patch) =>\n      proto && patch && utils.patchProperties(proto, patch, prefix, disallowed)\n  );\n}\n\n/** @param {string=} prefix */\nexport const applyPatches = (prefix) => {\n  const disallowed = prefix ? null : disallowedNativePatches;\n  for (let p in patchMap) {\n    const proto = getPatchPrototype(p);\n    applyPatchList(proto, patchMap[p], prefix, disallowed);\n  }\n};\n\nconst PROTO_IS_PATCHED = utils.SHADY_PREFIX + 'protoIsPatched';\n\n// This property is stored directly on these objects, rather than in a local\n// Map, because IE11 has a bug around `defineProperty`/`hasOwnProperty` which\n// breaks Closure Compiler's WeakMap polyfill when using both certain native\n// prototypes (e.g. of CDATASection) and their instances as keys - even if\n// they're isolated to different WeakMaps. Closure's WeakMap polyfill is used\n// transitively by its own Map and Set polyfills, so this bug applies to any\n// situation where either of Map or Set are polyfilled also.\nconst PATCHED_PROTO = utils.SHADY_PREFIX + 'patchedProto';\n\n// Patch non-element prototypes up front so that we don't have to check\n// the type of Node when patching an can always assume we're patching an element.\n['Text', 'Comment', 'CDATASection', 'ProcessingInstruction'].forEach((name) => {\n  const ctor = window[name];\n  const patchedProto = Object.create(ctor.prototype);\n  patchedProto[PROTO_IS_PATCHED] = true;\n  applyPatchList(patchedProto, patchMap.EventTarget);\n  applyPatchList(patchedProto, patchMap.Node);\n  if (patchMap[name]) {\n    applyPatchList(patchedProto, patchMap[name]);\n  }\n  ctor.prototype[PATCHED_PROTO] = patchedProto;\n});\n\nexport const patchElementProto = (proto) => {\n  proto[PROTO_IS_PATCHED] = true;\n  applyPatchList(proto, patchMap.EventTarget);\n  applyPatchList(proto, patchMap.Node);\n  applyPatchList(proto, patchMap.Element);\n  applyPatchList(proto, patchMap.HTMLElement);\n  applyPatchList(proto, patchMap.HTMLSlotElement);\n  return proto;\n};\n\nexport const patchNodeProto = (node) => {\n  if (node[PROTO_IS_PATCHED] || utils.isShadyRoot(node)) {\n    return;\n  }\n  const nativeProto = Object.getPrototypeOf(node);\n  // Note, this hasOwnProperty check is critical to avoid seeing a patched\n  // prototype lower in the prototype chain, e.g. if an <s> element has been\n  // patched, without this check, an <input> element would get the wrong patch.\n  let proto =\n    nativeProto.hasOwnProperty(PATCHED_PROTO) && nativeProto[PATCHED_PROTO];\n  if (!proto) {\n    proto = Object.create(nativeProto);\n    patchElementProto(proto);\n    nativeProto[PATCHED_PROTO] = proto;\n  }\n  Object.setPrototypeOf(node, proto);\n};\n\nexport const patchShadowOnElement = () => {\n  utils.patchProperties(Element.prototype, ElementShadowPatches);\n};\n\nexport const addShadyPrefixedProperties = () => {\n  // perform shady patches\n  applyPatches(utils.SHADY_PREFIX);\n\n  // install `_activeElement` because some browsers (older Chrome/Safari) do not have\n  // a 'configurable' `activeElement` accesssor.\n  const descriptor = DocumentOrShadowRootPatches.activeElement;\n  Object.defineProperty(document, '_activeElement', descriptor);\n\n  // On Window, we're patching `addEventListener` which is a weird auto-bound\n  // property that is not directly on the Window prototype.\n  utils.patchProperties(Window.prototype, WindowPatches, utils.SHADY_PREFIX);\n};\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nimport * as utils from './utils.js';\nimport {shadyDataForNode, ensureShadyDataForNode} from './shady-data.js';\n// prettier-ignore\nimport {patchInsideElementAccessors, patchOutsideElementAccessors} from './patch-instances.js';\nimport {patchNodeProto} from './patch-prototypes.js';\n\nconst OutsideAccessors = 1;\nconst InsideAcccessors = 2;\n\nconst patchOnDemand = utils.settings.patchOnDemand;\nconst hasDescriptors = utils.settings.hasDescriptors;\n\nfunction patchNode(node, type) {\n  if (patchOnDemand) {\n    patchNodeProto(node);\n  }\n  if (!hasDescriptors) {\n    if (type === OutsideAccessors) {\n      patchOutsideElementAccessors(node);\n    } else if (type === InsideAcccessors) {\n      patchInsideElementAccessors(node);\n    }\n  }\n}\n\nfunction linkNode(node, container, containerData, ref_node) {\n  patchNode(node, OutsideAccessors);\n  ref_node = ref_node || null;\n  const nodeData = ensureShadyDataForNode(node);\n  const ref_nodeData = ref_node ? ensureShadyDataForNode(ref_node) : null;\n  // update ref_node.previousSibling <-> node\n  nodeData.previousSibling = ref_node\n    ? ref_nodeData.previousSibling\n    : container[utils.SHADY_PREFIX + 'lastChild'];\n  let psd = shadyDataForNode(nodeData.previousSibling);\n  if (psd) {\n    psd.nextSibling = node;\n  }\n  // update node <-> ref_node\n  let nsd = shadyDataForNode((nodeData.nextSibling = ref_node));\n  if (nsd) {\n    nsd.previousSibling = node;\n  }\n  // update node <-> container\n  nodeData.parentNode = container;\n  if (ref_node) {\n    if (ref_node === containerData.firstChild) {\n      containerData.firstChild = node;\n    }\n  } else {\n    containerData.lastChild = node;\n    if (!containerData.firstChild) {\n      containerData.firstChild = node;\n    }\n  }\n  // remove caching of childNodes\n  containerData.childNodes = null;\n}\n\nexport const recordInsertBefore = (node, container, ref_node) => {\n  patchNode(container, InsideAcccessors);\n  const containerData = ensureShadyDataForNode(container);\n  if (containerData.firstChild !== undefined) {\n    containerData.childNodes = null;\n  }\n  // handle document fragments\n  if (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n    // Note, documentFragments should not have logical DOM so there's\n    // no need update that. It is possible to append a ShadowRoot, but we're\n    // choosing not to support that.\n    const first = node[utils.NATIVE_PREFIX + 'firstChild'];\n    for (let n = first; n; n = n[utils.NATIVE_PREFIX + 'nextSibling']) {\n      linkNode(n, container, containerData, ref_node);\n    }\n  } else {\n    linkNode(node, container, containerData, ref_node);\n  }\n};\n\nexport const recordRemoveChild = (node, container) => {\n  const nodeData = ensureShadyDataForNode(node);\n  const containerData = ensureShadyDataForNode(container);\n  if (node === containerData.firstChild) {\n    containerData.firstChild = nodeData.nextSibling;\n  }\n  if (node === containerData.lastChild) {\n    containerData.lastChild = nodeData.previousSibling;\n  }\n  let p = nodeData.previousSibling;\n  let n = nodeData.nextSibling;\n  if (p) {\n    ensureShadyDataForNode(p).nextSibling = n;\n  }\n  if (n) {\n    ensureShadyDataForNode(n).previousSibling = p;\n  }\n  // When an element is removed, logical data is no longer tracked.\n  // Explicitly set `undefined` here to indicate this. This is disginguished\n  // from `null` which is set if info is null.\n  nodeData.parentNode = nodeData.previousSibling = nodeData.nextSibling = undefined;\n  if (containerData.childNodes !== undefined) {\n    // remove caching of childNodes\n    containerData.childNodes = null;\n  }\n};\n\n/**\n * @param  {!Node|DocumentFragment} node\n * @param  {!Node|DocumentFragment=} adoptedParent\n */\nexport const recordChildNodes = (node, adoptedParent) => {\n  const nodeData = ensureShadyDataForNode(node);\n  if (!adoptedParent && nodeData.firstChild !== undefined) {\n    return;\n  }\n  // remove caching of childNodes\n  nodeData.childNodes = null;\n  const first = (nodeData.firstChild =\n    node[utils.NATIVE_PREFIX + 'firstChild']);\n  nodeData.lastChild = node[utils.NATIVE_PREFIX + 'lastChild'];\n  patchNode(node, InsideAcccessors);\n  for (let n = first, previous; n; n = n[utils.NATIVE_PREFIX + 'nextSibling']) {\n    const sd = ensureShadyDataForNode(n);\n    sd.parentNode = adoptedParent || node;\n    sd.nextSibling = n[utils.NATIVE_PREFIX + 'nextSibling'];\n    sd.previousSibling = previous || null;\n    previous = n;\n    patchNode(n, OutsideAccessors);\n  }\n};\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nimport * as utils from '../utils.js';\n\nexport const ShadowRootPatches = utils.getOwnPropertyDescriptors({\n  /**\n   * @this {ShadowRoot}\n   * @param {string} type\n   * @param {Function} fn\n   * @param {Object|boolean=} optionsOrCapture\n   */\n  addEventListener(type, fn, optionsOrCapture) {\n    if (typeof optionsOrCapture !== 'object') {\n      optionsOrCapture = {\n        capture: Boolean(optionsOrCapture),\n      };\n    }\n    // Note, `__shadyTarget` may already be set if an event was added on a <slot> child\n    optionsOrCapture.__shadyTarget = optionsOrCapture.__shadyTarget || this;\n    this.host[utils.SHADY_PREFIX + 'addEventListener'](\n      type,\n      fn,\n      optionsOrCapture\n    );\n  },\n\n  /**\n   * @this {ShadowRoot}\n   * @param {string} type\n   * @param {Function} fn\n   * @param {Object|boolean=} optionsOrCapture\n   */\n  removeEventListener(type, fn, optionsOrCapture) {\n    if (typeof optionsOrCapture !== 'object') {\n      optionsOrCapture = {\n        capture: Boolean(optionsOrCapture),\n      };\n    }\n    // Note, `__shadyTarget` may already be set if an event was added on a <slot> child\n    optionsOrCapture.__shadyTarget = optionsOrCapture.__shadyTarget || this;\n    this.host[utils.SHADY_PREFIX + 'removeEventListener'](\n      type,\n      fn,\n      optionsOrCapture\n    );\n  },\n});\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nimport * as utils from './utils.js';\nimport {NodePatches} from './patches/Node.js';\n// prettier-ignore\nimport {OutsideDescriptors, InsideDescriptors, TextContentInnerHTMLDescriptors} from './patch-instances.js';\nimport {ParentNodePatches} from './patches/ParentNode.js';\nimport {DocumentOrFragmentPatches} from './patches/DocumentOrFragment.js';\nimport {DocumentOrShadowRootPatches} from './patches/DocumentOrShadowRoot.js';\nimport {ElementOrShadowRootPatches} from './patches/ElementOrShadowRoot.js';\nimport {ShadowRootPatches} from './patches/ShadowRoot.js';\n\n/**\n * @param {!Object} proto\n * @param {string=} prefix\n */\nconst patchShadyAccessors = (proto, prefix) => {\n  utils.patchProperties(proto, ShadowRootPatches, prefix);\n  utils.patchProperties(proto, DocumentOrShadowRootPatches, prefix);\n  utils.patchProperties(proto, ElementOrShadowRootPatches, prefix);\n  // We ensure ParentNode accessors since these do not exist in Edge/IE on DocumentFragments.\n  utils.patchProperties(proto, ParentNodePatches, prefix);\n  // Ensure `shadowRoot` has basic descriptors when we cannot rely\n  // on them coming from DocumentFragment.\n  //\n  // Case 1, noPatching: Because we want noPatch ShadyRoots to have native property\n  // names so that they do not have to be wrapped...\n  // When we do *not* patch Node/DocumentFragment.prototype\n  // we must manually install those properties on ShadyRoot's prototype.\n  // Note, it's important to only install these in this mode so as not to stomp\n  // over CustomElements polyfill's patches on Node/DocumentFragment methods.\n  if (utils.settings.noPatch && !prefix) {\n    utils.patchProperties(proto, NodePatches, prefix);\n    utils.patchProperties(proto, DocumentOrFragmentPatches, prefix);\n  }\n  // Case 2, bad descriptors: Ensure accessors are on ShadowRoot.\n  // These descriptors are normally used for instance patching but because\n  // ShadyRoot can always be patched, just do it to the prototype.\n  else if (!utils.settings.hasDescriptors) {\n    utils.patchProperties(proto, OutsideDescriptors);\n    utils.patchProperties(proto, InsideDescriptors);\n    utils.patchProperties(proto, TextContentInnerHTMLDescriptors);\n  }\n};\n\nexport const patchShadyRoot = (proto) => {\n  proto.__proto__ = DocumentFragment.prototype;\n\n  // patch both prefixed and not, even when noPatch == true.\n  patchShadyAccessors(proto, utils.SHADY_PREFIX);\n  patchShadyAccessors(proto);\n\n  // Ensure native properties are all safely wrapped since ShadowRoot is not an\n  // actual DocumentFragment instance.\n  Object.defineProperties(proto, {\n    nodeType: {\n      value: Node.DOCUMENT_FRAGMENT_NODE,\n      configurable: true,\n    },\n    nodeName: {\n      value: '#document-fragment',\n      configurable: true,\n    },\n    nodeValue: {\n      value: null,\n      configurable: true,\n    },\n  });\n\n  // make undefined\n  ['localName', 'namespaceURI', 'prefix'].forEach((prop) => {\n    Object.defineProperty(proto, prop, {\n      value: undefined,\n      configurable: true,\n    });\n  });\n\n  // defer properties to host\n  ['ownerDocument', 'baseURI', 'isConnected'].forEach((prop) => {\n    Object.defineProperty(proto, prop, {\n      /** @this {ShadowRoot} */\n      get() {\n        return this.host[prop];\n      },\n      configurable: true,\n    });\n  });\n};\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nimport * as utils from './utils.js';\n// prettier-ignore\nimport {eventPropertyNamesForElement, eventPropertyNamesForHTMLElement} from './patch-events.js';\n\n/** @implements {IWrapper} */\nclass Wrapper {\n  /** @param {!Node} node */\n  constructor(node) {\n    this.node = node;\n  }\n\n  // node\n  addEventListener(name, fn, options) {\n    return this.node[utils.SHADY_PREFIX + 'addEventListener'](\n      name,\n      fn,\n      options\n    );\n  }\n\n  removeEventListener(name, fn, options) {\n    return this.node[utils.SHADY_PREFIX + 'removeEventListener'](\n      name,\n      fn,\n      options\n    );\n  }\n\n  appendChild(node) {\n    return this.node[utils.SHADY_PREFIX + 'appendChild'](node);\n  }\n\n  insertBefore(node, ref_node) {\n    return this.node[utils.SHADY_PREFIX + 'insertBefore'](node, ref_node);\n  }\n\n  removeChild(node) {\n    return this.node[utils.SHADY_PREFIX + 'removeChild'](node);\n  }\n\n  replaceChild(node, ref_node) {\n    return this.node[utils.SHADY_PREFIX + 'replaceChild'](node, ref_node);\n  }\n\n  cloneNode(deep) {\n    return this.node[utils.SHADY_PREFIX + 'cloneNode'](deep);\n  }\n\n  getRootNode(options) {\n    return this.node[utils.SHADY_PREFIX + 'getRootNode'](options);\n  }\n\n  contains(node) {\n    return this.node[utils.SHADY_PREFIX + 'contains'](node);\n  }\n\n  dispatchEvent(event) {\n    return this.node[utils.SHADY_PREFIX + 'dispatchEvent'](event);\n  }\n\n  // element\n  setAttribute(name, value) {\n    this.node[utils.SHADY_PREFIX + 'setAttribute'](name, value);\n  }\n\n  // NOTE: not needed, just here for balance\n  getAttribute(name) {\n    return this.node[utils.NATIVE_PREFIX + 'getAttribute'](name);\n  }\n\n  // NOTE: not needed, just here for balance\n  hasAttribute(name) {\n    return this.node[utils.NATIVE_PREFIX + 'hasAttribute'](name);\n  }\n\n  removeAttribute(name) {\n    this.node[utils.SHADY_PREFIX + 'removeAttribute'](name);\n  }\n\n  toggleAttribute(name, force) {\n    return this.node[utils.SHADY_PREFIX + 'toggleAttribute'](name, force);\n  }\n\n  attachShadow(options) {\n    return this.node[utils.SHADY_PREFIX + 'attachShadow'](options);\n  }\n\n  /** @return {!Node|undefined} */\n  get activeElement() {\n    if (\n      utils.isShadyRoot(this.node) ||\n      this.node.nodeType === Node.DOCUMENT_NODE\n    ) {\n      const e = this.node[utils.SHADY_PREFIX + 'activeElement'];\n      return e;\n    }\n    return undefined;\n  }\n\n  /**\n   * Installed for compatibility with browsers (older Chrome/Safari) that do\n   * not have a configurable `activeElement` accessor. Enables noPatch and\n   * patch mode both to consistently use ShadyDOM.wrap(document)._activeElement.\n   * @override\n   * @return {!Node|undefined}\n   */\n  get _activeElement() {\n    return this.activeElement;\n  }\n\n  // NOTE: not needed, just here for balance\n  /** @override */\n  focus() {\n    this.node[utils.NATIVE_PREFIX + 'focus']();\n  }\n\n  blur() {\n    this.node[utils.SHADY_PREFIX + 'blur']();\n  }\n\n  // document\n  importNode(node, deep) {\n    if (this.node.nodeType === Node.DOCUMENT_NODE) {\n      return this.node[utils.SHADY_PREFIX + 'importNode'](node, deep);\n    }\n  }\n\n  getElementById(id) {\n    if (this.node.nodeType === Node.DOCUMENT_NODE) {\n      return this.node[utils.SHADY_PREFIX + 'getElementById'](id);\n    }\n  }\n\n  elementsFromPoint(x, y) {\n    return this.node[utils.SHADY_PREFIX + 'elementsFromPoint'](x, y);\n  }\n\n  elementFromPoint(x, y) {\n    return this.node[utils.SHADY_PREFIX + 'elementFromPoint'](x, y);\n  }\n\n  // query\n  querySelector(selector) {\n    return this.node[utils.SHADY_PREFIX + 'querySelector'](selector);\n  }\n\n  querySelectorAll(selector, useNative) {\n    return this.node[utils.SHADY_PREFIX + 'querySelectorAll'](\n      selector,\n      useNative\n    );\n  }\n\n  // slot\n  assignedNodes(options) {\n    if (this.node.localName === 'slot') {\n      return this.node[utils.SHADY_PREFIX + 'assignedNodes'](options);\n    }\n  }\n\n  get host() {\n    if (utils.isShadyRoot(this.node)) {\n      return /** @type {!ShadowRoot} */ (this.node).host;\n    }\n    return undefined;\n  }\n\n  get parentNode() {\n    return this.node[utils.SHADY_PREFIX + 'parentNode'];\n  }\n\n  get firstChild() {\n    return this.node[utils.SHADY_PREFIX + 'firstChild'];\n  }\n\n  get lastChild() {\n    return this.node[utils.SHADY_PREFIX + 'lastChild'];\n  }\n\n  get nextSibling() {\n    return this.node[utils.SHADY_PREFIX + 'nextSibling'];\n  }\n\n  get previousSibling() {\n    return this.node[utils.SHADY_PREFIX + 'previousSibling'];\n  }\n\n  get childNodes() {\n    return this.node[utils.SHADY_PREFIX + 'childNodes'];\n  }\n\n  get parentElement() {\n    return this.node[utils.SHADY_PREFIX + 'parentElement'];\n  }\n\n  get firstElementChild() {\n    return this.node[utils.SHADY_PREFIX + 'firstElementChild'];\n  }\n\n  get lastElementChild() {\n    return this.node[utils.SHADY_PREFIX + 'lastElementChild'];\n  }\n\n  get nextElementSibling() {\n    return this.node[utils.SHADY_PREFIX + 'nextElementSibling'];\n  }\n\n  get previousElementSibling() {\n    return this.node[utils.SHADY_PREFIX + 'previousElementSibling'];\n  }\n\n  get children() {\n    return this.node[utils.SHADY_PREFIX + 'children'];\n  }\n\n  get childElementCount() {\n    return this.node[utils.SHADY_PREFIX + 'childElementCount'];\n  }\n\n  get shadowRoot() {\n    return this.node[utils.SHADY_PREFIX + 'shadowRoot'];\n  }\n\n  get assignedSlot() {\n    return this.node[utils.SHADY_PREFIX + 'assignedSlot'];\n  }\n\n  get isConnected() {\n    return this.node[utils.SHADY_PREFIX + 'isConnected'];\n  }\n\n  get innerHTML() {\n    return this.node[utils.SHADY_PREFIX + 'innerHTML'];\n  }\n\n  set innerHTML(value) {\n    this.node[utils.SHADY_PREFIX + 'innerHTML'] = value;\n  }\n\n  get textContent() {\n    return this.node[utils.SHADY_PREFIX + 'textContent'];\n  }\n\n  set textContent(value) {\n    this.node[utils.SHADY_PREFIX + 'textContent'] = value;\n  }\n\n  get slot() {\n    return this.node[utils.SHADY_PREFIX + 'slot'];\n  }\n\n  set slot(value) {\n    this.node[utils.SHADY_PREFIX + 'slot'] = value;\n  }\n\n  get className() {\n    return this.node[utils.SHADY_PREFIX + 'className'];\n  }\n\n  set className(value) {\n    this.node[utils.SHADY_PREFIX + 'className'] = value;\n  }\n\n  append(...args) {\n    return this.node[utils.SHADY_PREFIX + 'append'](...args);\n  }\n\n  prepend(...args) {\n    return this.node[utils.SHADY_PREFIX + 'prepend'](...args);\n  }\n\n  replaceChildren(...args) {\n    return this.node[utils.SHADY_PREFIX + 'replaceChildren'](...args);\n  }\n\n  after(...args) {\n    return this.node[utils.SHADY_PREFIX + 'after'](...args);\n  }\n\n  before(...args) {\n    return this.node[utils.SHADY_PREFIX + 'before'](...args);\n  }\n\n  remove() {\n    return this.node[utils.SHADY_PREFIX + 'remove']();\n  }\n\n  replaceWith(...args) {\n    return this.node[utils.SHADY_PREFIX + 'replaceWith'](...args);\n  }\n}\n\nconst addEventPropertyWrapper = (name) => {\n  Object.defineProperty(Wrapper.prototype, name, {\n    /** @this {Wrapper} */\n    get() {\n      return this.node[utils.SHADY_PREFIX + name];\n    },\n    /** @this {Wrapper} */\n    set(value) {\n      this.node[utils.SHADY_PREFIX + name] = value;\n    },\n    configurable: true,\n  });\n};\n\neventPropertyNamesForElement.forEach((name) => addEventPropertyWrapper(name));\neventPropertyNamesForHTMLElement.forEach((name) =>\n  addEventPropertyWrapper(name)\n);\n\nexport {Wrapper};\n\nconst wrapperMap = new WeakMap();\n\nexport function wrap(obj) {\n  if (utils.isShadyRoot(obj) || obj instanceof Wrapper) {\n    return obj;\n  }\n  let wrapper = wrapperMap.get(obj);\n  if (!wrapper) {\n    wrapper = new Wrapper(obj);\n    wrapperMap.set(obj, wrapper);\n  }\n  return wrapper;\n}\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n/**\n * Patches elements that interacts with ShadyDOM\n * such that tree traversal and mutation apis act like they would under\n * ShadowDOM.\n *\n * This import enables seemless interaction with ShadyDOM powered\n * custom elements, enabling better interoperation with 3rd party code,\n * libraries, and frameworks that use DOM tree manipulation apis.\n */\n\nimport * as utils from './utils.js';\nimport {flush, enqueue} from './flush.js';\n// prettier-ignore\nimport {observeChildren, unobserveChildren, filterMutations} from './observe-changes.js';\n// prettier-ignore\nimport {addNativePrefixedProperties, nativeMethods, nativeTree} from './patch-native.js';\n// prettier-ignore\nimport {patchInsideElementAccessors, patchOutsideElementAccessors} from './patch-instances.js';\nimport {patchEvents, patchClick, composedPath} from './patch-events.js';\nimport {ShadyRoot} from './attach-shadow.js';\nimport {wrap, Wrapper} from './wrapper.js';\n// prettier-ignore\nimport {addShadyPrefixedProperties, applyPatches, patchShadowOnElement, patchElementProto} from './patch-prototypes.js';\n\nif (utils.settings.inUse) {\n  const patch = utils.settings.hasDescriptors\n    ? (n) => n\n    : (node) => {\n        patchInsideElementAccessors(node);\n        patchOutsideElementAccessors(node);\n        return node;\n      };\n\n  let ShadyDOM = {\n    // TODO(sorvell): remove when Polymer does not depend on this.\n    'inUse': utils.settings.inUse,\n    // NOTE: old browsers without prototype accessors (very old Chrome\n    // and Safari) need manually patched accessors to properly set\n    // `innerHTML` and `textContent` when an element is:\n    // (1) inside a shadowRoot\n    // (2) does not have special (slot) children itself\n    // (3) and setting the property needs to provoke distribution (because\n    // a nested slot is added/removed)\n    'patch': patch,\n    'isShadyRoot': utils.isShadyRoot,\n    'enqueue': enqueue,\n    'flush': flush,\n    'flushInitial': (root) => {\n      root._flushInitial();\n    },\n    'settings': utils.settings,\n    'filterMutations': filterMutations,\n    'observeChildren': observeChildren,\n    'unobserveChildren': unobserveChildren,\n    // Set to true to defer native custom elements connection until the\n    // document has fully parsed. This enables custom elements that create\n    // shadowRoots to be defined while the document is loading. Elements\n    // customized as they are created by the parser will successfully\n    // render with this flag on.\n    'deferConnectionCallbacks': utils.settings['deferConnectionCallbacks'],\n    // Set to true to speed up the polyfill slightly at the cost of correctness\n    // * does not patch querySelector/All on Document or DocumentFragment\n    // * does not wrap connected/disconnected callbacks to de-dup these\n    // when using native customElements\n    // * does not wait to process children of elements with shadowRoots\n    // meaning shadowRoots should not be created while an element is parsing\n    // (e.g. if a custom element that creates a shadowRoot is defined before\n    // a candidate element in the document below it.\n    'preferPerformance': utils.settings['preferPerformance'],\n    // Integration point with ShadyCSS to disable styling MutationObserver,\n    // as ShadyDOM will now handle dynamic scoping.\n    'handlesDynamicScoping': true,\n    // Ensure the node is wrapped. This should be used when `noPatch` is set\n    // to ensure Shadow DOM compatible DOM operation.\n    // Note, wrap falls back to patch so that it ensures API \"always just works\"\n    'wrap': utils.settings.noPatch ? wrap : patch,\n    // When code should be compatible with `noPatch` `true` and `on-demand`\n    // settings, `wrapIfNeeded` can be used for optimal performance (v. `wrap`)\n    // for all DOM operations except the following: `appendChild` and\n    // `insertBefore` (when the node is being moved from a location where it\n    // was logically positioned in the DOM); when setting `className`/`class`;\n    // when calling `querySelector|All`; when setting `textContent` or\n    // `innerHTML`; `addEventListener`, `removeEventListener` and\n    // `dispatchEvent`; and all scope specific API's like `getRootNode`,\n    // `isConnected`, `slot`, `assignedSlot`, `assignedNodes`. Note,\n    // `wrapIfNeeded` falls back to a pass through to preserve optimal\n    // performance.\n    'wrapIfNeeded': utils.settings.noPatch === true ? wrap : (n) => n,\n    'Wrapper': Wrapper,\n    'composedPath': composedPath,\n    // Set to true to avoid patching regular platform property names. When set,\n    // Shadow DOM compatible behavior is only available when accessing DOM\n    // API using `ShadyDOM.wrap`, e.g. `ShadyDOM.wrap(element).shadowRoot`.\n    // This setting provides a small performance boost, but requires all DOM API\n    // access that requires Shadow DOM behavior to be proxied via `ShadyDOM.wrap`.\n    //\n    // WARNING: When `noPatch` is set and the Custom Elements polyfill is\n    // needed, the Custom Elements polyfill must be loaded before this\n    // polyfill; however, when `noPatch` is not used, this polyfill should be\n    // loaded before the Custom Elements polyfill. This is because\n    // ShadyDOM captures DOM mutation methods and when `noPatch` is used,\n    // ShadyDOM must call the mutation methods patched by the Custom Elements\n    // polyfill or custom elements will not function as expected. When `noPatch`\n    // is not used, the Custom Elements polyfill patches call through to the\n    // ShadyDOM patches so ShadyDOM should be loaded first.\n    'noPatch': utils.settings.noPatch,\n    'patchOnDemand': utils.settings.patchOnDemand,\n    'nativeMethods': nativeMethods,\n    'nativeTree': nativeTree,\n    'patchElementProto': patchElementProto,\n    // Use this setting to choose the implementation of `querySelector` and\n    // `querySelectorAll`. The options provide different tradeoffs between\n    // accuracy and performance, as explained below. More specifically, the\n    // logical tree exposed by Shady DOM through the DOM APIs it wraps doesn't\n    // match the structure of the tree seen by the browser (the 'real tree'), so\n    // the degree to which the browser itself is used to match selectors affects\n    // this tradeoff.\n    //\n    // - `undefined` (default): Shady DOM will walk the logical descendants of\n    // the context element and call `matches` with the given selector to find\n    // matching elements.\n    //\n    //   This option is a balance between accuracy and performance. This option\n    //   will be able to match all logical descendants of the context element\n    //   (i.e. including descendants of unassigned nodes) but selectors are\n    //   matched against the real tree, so complex selectors may fail to match\n    //   since their combinators will attempt to match against the structure of\n    //   the real tree. Generally, you should only pass compound selectors when\n    //   using the default implementation. This implementation also breaks the\n    //   semantics of `:scope` because the wrapped `querySelector` call is\n    //   translated into many `matches` calls on different elements.\n    //\n    // - `'native'`: Shady DOM's wrapper for (e.g.) `querySelector` will call\n    // into the native `querySelector` function and then filter out results that\n    // are not in the same shadow root in the logical tree.\n    //\n    //   This is the fastest option. This option will not match elements that\n    //   are logical descendants of unassigned nodes because they will not be in\n    //   the real tree, against which the browser matches the selector. Like the\n    //   default option, this option may not correctly match complex selectors\n    //   (i.e. those with combinators) due to the structural differences between\n    //   the real tree and the logical tree. This option preserves the semantics\n    //   of `:scope` because the context element of the call to the wrapper is\n    //   also the context element of the call to the native function.\n    //\n    // - `'selectorEngine'`: Shady DOM's wrapper for (e.g.) `querySelector` will\n    // partially parse the given selector list and perform the tree-traversal\n    // steps of a selector engine against the logical tree.\n    //\n    //   This is the slowest and most accurate option. This option is able to\n    //   find all logical descendants of the context element by manually walking\n    //   the tree. This option is also able to correctly match complex selectors\n    //   because it does not rely on the browser to handle combinators. Despite\n    //   using `matches` to match compound selectors during selector evaluation,\n    //   this option preserves the semantics of `:scope` by only considering\n    //   compound selectors containing `:scope` to be matching if the context\n    //   element of the `matches` call is also the context element of the\n    //   wrapper call.\n    //\n    //   However, the parser used for this option is not strictly correct.\n    //   Notable caveats include:\n    //\n    //     - The parser assumes the selector list it's given is syntactically\n    //     correct. When given a selector that would not parse under a full\n    //     implementation, this implementation may fail silently.\n    //\n    //     - Nested selectors are _not_ taken into consideration while walking\n    //     the tree. Each outer-most compound selector is tested against\n    //     candidate elements as a whole, without modification. This means that\n    //     selectors nested in arguments of functional pseudo-classes, such as\n    //     `a > b` in `:is(a > b)`, are still matched by the browser against the\n    //     real tree, not Shady DOM's logical tree.\n    //\n    //     - `:scope` is only supported at the top-level. Particularly, if the\n    //     text `:scope` appears anywhere within a compound selector, then the\n    //     selector engine will only allow that compound selector to match the\n    //     context element. Having the text `:scope` inside a string\n    //     (`x[y=\":scope\"]`) or an argument to a functional pseudo-selector\n    //     (`:not(:scope > x)`) will likely break your selector.\n    //\n    //     - The `:host` and `:host-context` pseudo-classes are not supported.\n    //\n    //     - Comments are not supported. (e.g. `a /* b */ c`)\n    //\n    //     - The (draft) column combinator is not supported. (e.g. `a || b`)\n    'querySelectorImplementation':\n      utils.settings['querySelectorImplementation'],\n  };\n\n  window['ShadyDOM'] = ShadyDOM;\n\n  // Modifies native prototypes for Node, Element, etc. to\n  // make native platform behavior available at prefixed names, e.g.\n  // `utils.NATIVE_PREFIX + 'firstChild'` or `__shady_native_firstChild`.\n  // This allows the standard names to be safely patched while retaining the\n  // ability for native behavior to be used. This polyfill manipulates DOM\n  // by using this saved native behavior.\n  // Note, some browsers do not have proper element descriptors for\n  // accessors; in this case, native behavior for these accessors is simulated\n  // via a TreeWalker.\n  addNativePrefixedProperties();\n\n  // Modifies native prototypes for Node, Element, etc. to make ShadowDOM\n  // behavior available at prefixed names, e.g.\n  // `utils.SHADY_PREFIX + 'firstChild` or `__shady_firstChild`. This is done\n  // so this polyfill can perform Shadow DOM style DOM manipulation.\n  // Because patching normal platform property names is optional, these prefixed\n  // names are used internally.\n  addShadyPrefixedProperties();\n\n  // Modifies native prototypes for Node, Element, etc. to patch\n  // regular platform property names to have Shadow DOM compatible API behavior.\n  // This applies the utils.SHADY_PREFIX behavior to normal names. For example,\n  // if `noPatch` is not set, then `el.__shady_firstChild` is equivalent to\n  // `el.firstChild`.\n  // NOTE, on older browsers (old Chrome/Safari) native accessors cannot be\n  // patched on prototypes (e.g. Node.prototype.firstChild cannot be modified).\n  // On these browsers, instance level patching is performed where needed; this\n  // instance patching is only done when `noPatch` is *not* set.\n  if (!utils.settings.noPatch) {\n    applyPatches();\n    // Patch click event behavior only if we're patching\n    patchClick();\n  } else if (utils.settings.patchOnDemand) {\n    // In `on-demand` patching, do patch `attachShadow` and `shadowRoot`.\n    // These are the only patched properties in `on-demand` mode and these\n    // patches kick off patching \"on-demand\" for other nodes.\n    patchShadowOnElement();\n  }\n\n  // For simplicity, patch events unconditionally.\n  // Patches the event system to have Shadow DOM compatible behavior (e.g.\n  // event retargeting). When `noPatch` is set, retargeting is only available\n  // when adding event listeners and dispatching events via `ShadyDOM.wrap`\n  // (e.g. `ShadyDOM.wrap(element).addEventListener(...)`).\n  patchEvents();\n\n  window.ShadowRoot = /** @type {function(new:ShadowRoot)} */ (ShadyRoot);\n}\n"],"names":["ScopingShim","nativeCssVariables","nativeShadow","cssBuild","disableRuntime","scopingShim","ApplyShim","CustomStyleInterface","window","ShadyCSS","prepareTemplate","template","elementName","elementExtends","flushCustomStyles","prepareTemplateDom","prepareTemplateStyles","styleSubtree","element","properties","styleElement","styleDocument","getComputedStyleValue","property","nativeCss","templateMap","StyleNode","CURRENT_VERSION","NEXT_VERSION","VALIDATING_VERSION","promise","Promise","resolve","invalidate","invalidateTemplate","isValid","templateIsValid","isValidating","templateIsValidating","startValidating","startValidatingTemplate","_validating","then","elementsAreInvalid","VAR_ASSIGN","MIXIN_MATCH","VAR_CONSUMED","ANIMATION_MATCH","MEDIA_MATCH","IS_VAR","BRACKETED","HOST_PREFIX","HOST_SUFFIX","updateNativeProperties","p","style","removeProperty","setProperty","value","getComputedStyle","getPropertyValue","trim","detectMixin","cssText","has","test","lastIndex","_typeof","obj","Symbol","iterator","constructor","prototype","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","_toPropertyKey","key","_createClass","Constructor","protoProps","staticProps","arg","_toPrimitive","String","input","hint","prim","toPrimitive","undefined","res","call","TypeError","Number","_classCallCheck","instance","parse","text","clean","parseCss","lex","replace","RX","comments","port","root","n","l","OPEN_BRACE","previous","push","CLOSE_BRACE","node","t","substring","ss","_expandUnicodeEscapes","multipleSpaces","lastIndexOf","s","indexOf","AT_START","MEDIA_START","types","MEDIA_RULE","match","keyframesRule","KEYFRAMES_RULE","split","pop","VAR_START","MIXIN_RULE","STYLE_RULE","r$","r","code","arguments","repeat","stringify","preserveProperties","_hasMixinRules","removeCustomProps","rules","Boolean","removeCustomPropAssignment","removeCustomPropApply","customProp","mixinProp","mixinApply","varApply","documentWait","CustomStyleProvider","SEEN_MARKER","CACHED_STYLE","transformFn","validateFn","enqueueDocumentValidation","addCustomStyle","getStyleForCustomStyle","customStyle","processStyles","cs","styleToTransform","default","defineProperties","get","set","fn","needsEnqueue","CustomStyleInterfaceInterface","readyPromise","whenReady","resolveFn","callback","requestAnimationFrame","document","readyState","addEventListener","StyleTransformer","getIsExtends","elementHasBuiltCss","wrap","flush","getClasses","classList","getAttribute","scopeRegExp","RegExp","concat","SCOPE_NAME","getCurrentScope","getOwnerScope","ownerRoot","getRootNode","ownerDocument","host","is","ensureCorrectScope","currentScope","domRemoveScope","ShadowRoot","ownerScope","domReplaceScope","ensureCorrectSubtreeScoping","unscopedNodes","j","unscopedNode","scopeForPreviouslyUnscopedNode","isElementWithBuiltCss","el","localName","handler","mxns","x","mxn","documentElement","head","addedNodes","nodeType","Node","ELEMENT_NODE","newScope","observer","MutationObserver","start","observe","childList","subtree","nativeCustomElements","delayedStart","body","listener","removeEventListener","takeRecords","StyleUtil","StyleProperties","ensureStylePlaceholder","getStylePlaceholder","StyleInfo","StyleCache","watcherFlush","ApplyShimUtils","adoptedCssTextMap","styleCache","_scopeCounter","_documentOwner","ast","_documentOwnerStyleInfo","_elementsHaveApplied","_applyShim","_customStyleInterface","_generateScopeSelector","name","id","getStyleAst","rulesForStyle","styleAstToString","toCssText","_gatherStyles","gatherStyleText","content","typeExtension","_prepared","extends","getCssBuild","optimalBuild","isOptimalCssBuild","info","_ensure","hasMixins","ownPropertyNames","decorateStyles","placeholder","_generateStaticStyle","_style","_ownPropertyNames","prepareAdoptedCssText","cssTextArray","join","_domPrepared","domAddScope","shadowroot","elementStyles","applyCss","_prepareHost","_StyleUtil$getIsExten","ownStylePropertyNames","styleInfo","_ensureApplyShim","_ensureCustomStyleInterface","_this","transformCustomStyleForDocument","needsApplyShimUpdate","customStyles","_reorderCustomStylesRules","_updateProperties","_applyCustomStyles","_revalidateCustomStyleApplyShim","_this2","styles","map","c","filter","sort","a","b","position","compareDocumentPosition","DOCUMENT_POSITION_FOLLOWING","DOCUMENT_POSITION_PRECEDING","styleRules","overrideProps","_mixOverrideStyleProps","styleElementNativeVariables","_isRootOwner","styleElementShimVariables","overrideStyleProperties","assign","_applyStyleProperties","_StyleUtil$getIsExten2","textContent","shadowRoot","querySelector","_styleOwnerForNode","cacheEntry","fetch","styleProperties","cachedScopeSelector","scopeSelector","cachedStyle","oldScopeSelector","applyElementStyle","applyElementScopeSelector","store","owner","ownerStyleInfo","ownerProperties","create","hostAndRootProps","hostAndRootPropertiesForScope","propertyData","propertyDataFromStyles","propertiesMatchingHost","hostProps","rootProps","_mixinOverrideStyles","reify","overrides","v","wrappedHost","isRootOwner","descendantRoot","descendantHosts","Array","from","querySelectorAll","_revalidateApplyShim","applyCustomStyle","_this3","forEachRule","rule","normalizeRootSelector","documentRule","setElementClass","classString","classes","definitelyString","scopeName","classAttr","k$","XSCOPE_NAME","setElementClassRaw","_styleInfoForNode","scopeNode","scope","unscopeNode","scopeForNode","currentScopeForNode","typeMax","cache","_validate","idx","pn","tagname","list","shift","entry","infoKey","_getStyleRules","applyStylePlaceHolder","placeholderMap","ce","origDefine","wrappedDefine","clazz","options","matchesSelector","selector","method","matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","rootSelector","checkRoot","hostScope","IS_IE","navigator","userAgent","self","keyframes","ruleIndex","decorateRule","index","collectPropertiesInCssText","propertyInfo","onKeyframesRule","_keyframes","names","hasProperties","collectProperties","collectCssText","m","rx","any","exec","collectConsumingCssText","getOwnPropertyNames","valueForProperty","valueForProperties","prefix","fallback","suffix","propertyValue","processVariableAndFallback","parts","colon","pp","slice","applyProperties","output","applyKeyframeTransforms","keyframeTransforms","hasAnimations","transform","keyframeNamesToTransform","keyframe","o","selectorToMatch","transformedSelector","addToBitMask","whenHostOrRootRule","_calcHostScope","parsedSelector","isRoot","isHost","_transformRuleCss","_transformComplexSelector","_calcElementScope","_element","transformStyles","hostSelector","rxHostSelector","hostRx","_StyleInfo$get","_elementKeyframeTransforms","isKeyframesSelector","_scopeSelector","keyframesRules","_scopeKeyframes","_keyframesRuleTransformer","keyframesNameRx","transformedKeyframesName","scopeId","splitSelectorList","old","parentNode","removeChild","applyStyle","css","bits","parseInt","nativeCssVariables_","calcCssVariables","settings","shimcssproperties","CSS","supports","dom","shouldRemoveScope","_transformDom","startNode","transformer","c$","_content","childNodes","children","remove","add","CLASS","newValue","oldScope","_this4","ext","isScoped","CSS_CLASS_PREFIX","_transformRule","p$","part","COMPLEX_SELECTOR_SEP","_twiddleNthPlus","NTH","type","inside","_preserveMatchesPseudo","MATCHES","end","findMatchingParen","Error","MATCHES_REPLACEMENT","_replaceMatchesPseudo","reduce","acc","cur","_this5","stop","isNth","inner","isMatches","_this$_preserveMatche","SLOTTED_START","HOST","SIMPLE_SELECTOR_SEP","_transformCompoundSelector","combinator","DIR_PAREN","before","dir","after","slottedIndex","SLOTTED","_transformHostSelector","_transformSimpleSelector","slotted","SLOTTED_PAREN","paren","attributes","PSEUDO_PREFIX","HOST_PAREN","SIMPLE_SELECTOR_PREFIX","typeSelector","SELECTOR_NO_MATCH","_transformDocumentSelector","ROOT","SCOPE_DOC_SELECTOR","processUnscopedStyle","isUnscopedStyle","styleRuleCallback","keyframesRuleCallback","onlyActiveRules","skipRules","matchMedia","moniker","contextNode","createScopeStyle","createElement","setAttribute","lastHeadApplyNode","placeHolder","createComment","insertBefore","firstChild","nextSibling","isTargetedBuild","buildType","level","str","comma","styleTextParts","CSS_BUILD_ATTR","__cssBuild","attrValue","buildComment","getBuildComment","removeBuildComment","Comment","commentParts","styleTextSet","Set","scopingAttribute","newStyle","appendChild","hasAttribute","aa","done","next","q","ba","globalThis","global","Math","ca","da","ShadyData","toJSON","ensureShadyDataForNode","__shady","u","shadyDataForNode","ShadyDOM","Element","attachShadow","ea","getOwnPropertyDescriptor","N","force","noPatch","C","preferPerformance","O","fa","ha","querySelectorImplementation","ga","V","ia","Document","msElementsFromPoint","w","ja","ka","y","la","ma","createTextNode","na","oa","characterData","pa","qa","contains","__shady_native_contains","ra","__shady_parentNode","z","d","isNaN","item","e","namedItem","f","g","sa","__shady_native_firstChild","__shady_native_nextSibling","ta","__shady_firstChild","__shady_nextSibling","ua","A","va","B","forEach","wa","xa","D","createDocumentFragment","ya","isArray","apply","za","E","Aa","Ba","enqueue","F","Ca","AsyncObserver","removedNodes","H","Da","Ea","Z","Fa","delete","size","Ga","filterMutations","Ha","Ia","Ja","escapeReplace","Ka","makeSet","La","Ma","Na","getInnerHTML","h","k","S","TEXT_NODE","data","COMMENT_NODE","console","error","G","Oa","__shady_native_querySelector","__shady_native_querySelectorAll","Pa","Qa","I","J","createTreeWalker","NodeFilter","SHOW_ALL","K","SHOW_ELEMENT","Ra","implementation","createHTMLDocument","Sa","__shady_native_removeChild","Ta","Ua","Va","EventTarget","__shady_native_addEventListener","Window","XMLHttpRequest","currentNode","lastChild","previousSibling","parentElement","DOCUMENT_FRAGMENT_NODE","SHOW_TEXT","nextNode","nodeValue","__shady_native_insertBefore","HTMLElement","firstElementChild","lastElementChild","childElementCount","previousElementSibling","nextElementSibling","innerHTML","namespaceURI","createElementNS","className","HTMLTemplateElement","DocumentFragment","Wa","__shady_childNodes","__shady_lastChild","__shady_childElementCount","__shady_children","__shady_firstElementChild","__shady_lastElementChild","__shady_shadowRoot","Xa","__shady_textContent","__shady_innerHTML","Ya","__shady_parentElement","__shady_previousSibling","__shady_nextElementSibling","__shady_previousElementSibling","__shady_className","Za","$a","ab","X","bb","W","customElements","polyfillWrapFlushCallback","L","Date","now","cb","Event","db","capture","eb","once","U","T","fb","blur","focus","focusin","focusout","click","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","wheel","beforeinput","keydown","keyup","compositionstart","compositionupdate","compositionend","touchstart","touchend","touchmove","touchcancel","pointerover","pointerenter","pointerdown","pointermove","pointerup","pointercancel","pointerout","pointerleave","gotpointercapture","lostpointercapture","dragstart","drag","dragenter","dragleave","dragover","drop","dragend","DOMActivate","DOMFocusIn","DOMFocusOut","keypress","gb","DOMAttrModified","DOMAttributeNameChanged","DOMCharacterDataModified","DOMElementNameChanged","DOMNodeInserted","DOMNodeInsertedIntoDocument","DOMNodeRemoved","DOMNodeRemovedFromDocument","DOMSubtreeModified","hb","getRootNodeWithFallback","__shady_getRootNode","M","pathComposer","__shady_assignedSlot","ib","__composedPath","jb","retarget","kb","composed","__composed","isTrusted","composedPath","__target","currentTarget","__previousCurrentTarget","relatedTarget","__relatedTarget","__relatedTargetComposedPath","stopPropagation","stopImmediatePropagation","__immediatePropagationStopped","lb","AT_TARGET","__shady_native_eventPhase","mb","mixinComposedFlag","__proto__","nb","ob","hasRetargeted","pb","fireHandlers","__handlers","qb","hasOwnProperty","rb","shadyDispatchEvent","bubbles","CAPTURING_PHASE","BUBBLING_PHASE","eventPhase","sb","findListener","tb","dispatchEvent","ub","__shady_native_dispatchEvent","vb","handleEvent","__shady_removeEventListener","bubble","wb","__shady_native_removeEventListener","splice","xb","activateFocusEventOverrides","yb","patchEvent","getPrototypeOf","__shady_sourceProto","__shady_patchedProto","zb","Ab","CustomEvent","Bb","MouseEvent","Cb","patchClick","cancelable","__shady_dispatchEvent","Db","Eb","Fb","__shady_addEventListener","newSplice","Gb","calcSplices","min","Hb","reverse","equals","Ib","Jb","getScopingShim","Kb","scopeClassAttribute","Lb","removeShadyScoping","Mb","currentScopeIsCorrect","Nb","Ob","treeVisitor","Pb","Qb","Rb","Sb","Tb","clearNode","__shady_removeChild","Ub","removeOwnerShadyRoot","Vb","firstComposedNode","Wb","scheduleObserver","ac","__shady_native_parentNode","__shady_native_lastChild","__shady_native_previousSibling","__shady_native_childNodes","__shady_native_parentElement","isConnected","__shady_native_textContent","__shady_insertBefore","P","__noInsertionPoint","Xb","Q","Yb","__shady_native_appendChild","adoptNode","Zb","$b","replaceChild","cloneNode","__shady_native_cloneNode","ATTRIBUTE_NODE","__shady_cloneNode","__shady_appendChild","R","assignedSlot","bc","cc","Map","dc","ec","fc","query","gc","queryChildNodes","hc","__shady_native_firstElementChild","__shady_native_lastElementChild","__shady_native_children","append","prepend","replaceChildren","ic","some","jc","kc","lc","replaceWith","mc","nc","distributeAttributeChange","oc","Y","pc","qc","rc","__shady_native_previousElementSibling","__shady_native_nextElementSibling","slot","__shady_setAttribute","__shady_native_setAttribute","removeAttribute","__shady_native_removeAttribute","toggleAttribute","__shady_native_toggleAttribute","wc","shadyUpgradeFragment","sc","tc","uc","vc","__CE_shadowRoot","xc","yc","__shady_native_innerHTML","zc","activeElement","__shady_blur","__shady_native_blur","Ac","assignedNodes","flatten","Bc","getElementById","Cc","getElInRoot","Dc","getAncestorRoots","Ec","Fc","__shady_native_activeElement","elementsFromPoint","useNativeDocumentEFP","elementFromPoint","__shady_native_elementFromPoint","__shady_elementsFromPoint","Gc","Hc","importNode","__shady_native_importNode","__shady_importNode","Ic","bind","Text","CDATASection","ProcessingInstruction","HTMLSlotElement","CharacterData","Jc","applyPatchList","Kc","__shady_protoIsPatched","Lc","Mc","Nc","Oc","patchNode","setPrototypeOf","Pc","linkNode","Qc","Rc","deferConnectionCallbacks","Sc","Tc","ancestorList","unshift","ShadyRoot","mode","_renderSelf","Uc","Vc","Wc","__shady_slot","nodeName","define","Xc","clear","__shadydom_connectedCallback","__shadydom_disconnectedCallback","Yc","connectedCallback","disconnectedCallback","Zc","$c","CustomElementRegistry","Wrapper","__shady_replaceChild","__shady_contains","__shady_native_getAttribute","__shady_removeAttribute","__shady_toggleAttribute","__shady_attachShadow","__shady_native_focus","DOCUMENT_NODE","__shady_getElementById","__shady_elementFromPoint","__shady_querySelector","__shady_querySelectorAll","__shady_assignedNodes","__shady_append","__shady_prepend","__shady_after","__shady_before","__shady_remove","__shady_replaceWith","__shady_activeElement","_activeElement","__shady_isConnected","ad","bd","WeakMap","cd","dd","inUse","patch","isShadyRoot","flushInitial","observeChildren","unobserveChildren","handlesDynamicScoping","wrapIfNeeded","patchOnDemand","nativeMethods","nativeTree","patchElementProto"],"sourceRoot":""}