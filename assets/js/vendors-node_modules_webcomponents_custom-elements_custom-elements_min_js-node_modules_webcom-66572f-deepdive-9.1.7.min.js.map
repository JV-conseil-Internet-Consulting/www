{"version":3,"file":"vendors-node_modules_webcomponents_custom-elements_custom-elements_min_js-node_modules_webcom-66572f-deepdive-9.1.7.min.js","mappings":"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","sources":["webpack://deepdive/ts_src/Patch/Native.ts","webpack://deepdive/ts_src/Utilities.ts","webpack://deepdive/ts_src/CustomElementInternals.ts","webpack://deepdive/ts_src/custom-elements.ts","webpack://deepdive/ts_src/CustomElementState.ts","webpack://deepdive/ts_src/Deferred.ts","webpack://deepdive/ts_src/DocumentConstructionObserver.ts","webpack://deepdive/ts_src/CustomElementRegistry.ts","webpack://deepdive/ts_src/Patch/Interface/ParentNode.ts","webpack://deepdive/ts_src/Patch/Document.ts","webpack://deepdive/ts_src/Patch/Interface/ChildNode.ts","webpack://deepdive/ts_src/Patch/Element.ts","webpack://deepdive/ts_src/AlreadyConstructedMarker.ts","webpack://deepdive/ts_src/Patch/HTMLElement.ts","webpack://deepdive/ts_src/Patch/Node.ts","webpack://deepdive/ts_src/Patch/DocumentFragment.ts"],"sourcesContent":["/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nexport const Document_createElement = window.Document.prototype.createElement;\nexport const Document_createElementNS =\n  window.Document.prototype.createElementNS;\nexport const Document_importNode = window.Document.prototype.importNode;\n\nexport const Document_prepend = window.Document.prototype['prepend'];\nexport const Document_append = window.Document.prototype['append'];\nexport const DocumentFragment_prepend =\n  window.DocumentFragment.prototype['prepend'];\nexport const DocumentFragment_append =\n  window.DocumentFragment.prototype['append'];\nexport const Node_cloneNode = window.Node.prototype.cloneNode;\nexport const Node_appendChild = window.Node.prototype.appendChild;\nexport const Node_insertBefore = window.Node.prototype.insertBefore;\nexport const Node_removeChild = window.Node.prototype.removeChild;\nexport const Node_replaceChild = window.Node.prototype.replaceChild;\nexport const Node_textContent = Object.getOwnPropertyDescriptor(\n  window.Node.prototype,\n  'textContent'\n);\nexport const Element_attachShadow = window.Element.prototype['attachShadow'];\nexport const Element_innerHTML = Object.getOwnPropertyDescriptor(\n  window.Element.prototype,\n  'innerHTML'\n);\nexport const Element_getAttribute = window.Element.prototype.getAttribute;\nexport const Element_setAttribute = window.Element.prototype.setAttribute;\nexport const Element_removeAttribute = window.Element.prototype.removeAttribute;\nexport const Element_toggleAttribute = window.Element.prototype.toggleAttribute;\nexport const Element_getAttributeNS = window.Element.prototype.getAttributeNS;\nexport const Element_setAttributeNS = window.Element.prototype.setAttributeNS;\nexport const Element_removeAttributeNS =\n  window.Element.prototype.removeAttributeNS;\nexport const Element_insertAdjacentElement =\n  window.Element.prototype['insertAdjacentElement'];\nexport const Element_insertAdjacentHTML =\n  window.Element.prototype['insertAdjacentHTML'];\nexport const Element_prepend = window.Element.prototype['prepend'];\nexport const Element_append = window.Element.prototype['append'];\nexport const Element_before = window.Element.prototype['before'];\nexport const Element_after = window.Element.prototype['after'];\nexport const Element_replaceWith = window.Element.prototype['replaceWith'];\nexport const Element_remove = window.Element.prototype['remove'];\nexport const HTMLElement = window.HTMLElement;\nexport const HTMLElement_innerHTML = Object.getOwnPropertyDescriptor(\n  window.HTMLElement.prototype,\n  'innerHTML'\n);\nexport const HTMLElement_insertAdjacentElement =\n  window.HTMLElement.prototype['insertAdjacentElement'];\nexport const HTMLElement_insertAdjacentHTML =\n  window.HTMLElement.prototype['insertAdjacentHTML'];\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nconst reservedElementNameSet = new Set<string>();\n// IE11 does not support constructing a set using an iterable.\n[\n  'annotation-xml',\n  'color-profile',\n  'font-face',\n  'font-face-src',\n  'font-face-uri',\n  'font-face-format',\n  'font-face-name',\n  'missing-glyph',\n].forEach((item) => reservedElementNameSet.add(item));\n\nexport function isValidCustomElementName(localName: string) {\n  const reserved = reservedElementNameSet.has(localName);\n  const validForm = /^[a-z][.0-9_a-z]*-[-.0-9_a-z]*$/.test(localName);\n  return !reserved && validForm;\n}\n\n// Note, IE11 doesn't have `document.contains`.\nconst nativeContains = document.contains\n  ? document.contains.bind(document)\n  : document.documentElement.contains.bind(document.documentElement);\n\nexport function isConnected(node: Node) {\n  // Use `Node#isConnected`, if defined.\n  const nativeValue = node.isConnected;\n  if (nativeValue !== undefined) {\n    return nativeValue;\n  }\n  // Optimization: It's significantly faster here to try to use `contains`,\n  // especially on Edge/IE/\n  if (nativeContains(node)) {\n    return true;\n  }\n\n  let current: Node | undefined = node;\n  while (\n    current &&\n    !(current.__CE_isImportDocument || current instanceof Document)\n  ) {\n    current =\n      current.parentNode ||\n      (window.ShadowRoot && current instanceof ShadowRoot\n        ? current.host\n        : undefined);\n  }\n  return !!(\n    current &&\n    (current.__CE_isImportDocument || current instanceof Document)\n  );\n}\n\nexport function childrenFromFragment(\n  fragment: DocumentFragment\n): Array<Element> {\n  // Note, IE doesn't have `children` on document fragments.\n  const nativeChildren = fragment.children;\n  if (nativeChildren) {\n    return Array.prototype.slice.call(nativeChildren);\n  }\n  const children: Array<Element> = [];\n  for (let n = fragment.firstChild; n; n = n.nextSibling) {\n    if (n.nodeType === Node.ELEMENT_NODE) {\n      children.push(n as Element);\n    }\n  }\n  return children;\n}\n\nfunction nextSiblingOrAncestorSibling(root: Node, start: Node) {\n  let node: Node | null = start;\n  while (node && node !== root && !node.nextSibling) {\n    node = node.parentNode;\n  }\n  return !node || node === root ? null : node.nextSibling;\n}\n\nfunction nextNode(root: Node, start: Node) {\n  return start.firstChild\n    ? start.firstChild\n    : nextSiblingOrAncestorSibling(root, start);\n}\n\nexport function walkDeepDescendantElements(\n  root: Node,\n  callback: (elem: Element) => void,\n  visitedImports?: Set<Node>\n) {\n  let node: Node | null = root;\n  while (node) {\n    if (node.nodeType === Node.ELEMENT_NODE) {\n      const element = node as Element;\n\n      callback(element);\n\n      const localName = element.localName;\n      if (localName === 'link' && element.getAttribute('rel') === 'import') {\n        // If this import (polyfilled or not) has its root node available,\n        // walk it.\n        const importNode = (element as HTMLLinkElement).import;\n        if (visitedImports === undefined) {\n          visitedImports = new Set();\n        }\n        if (importNode instanceof Node && !visitedImports.has(importNode)) {\n          // Prevent multiple walks of the same import root.\n          visitedImports.add(importNode);\n\n          for (\n            let child = importNode.firstChild;\n            child;\n            child = child.nextSibling\n          ) {\n            walkDeepDescendantElements(child, callback, visitedImports);\n          }\n        }\n\n        // Ignore descendants of import links to prevent attempting to walk the\n        // elements created by the HTML Imports polyfill that we just walked\n        // above.\n        node = nextSiblingOrAncestorSibling(root, element);\n        continue;\n      } else if (localName === 'template') {\n        // Ignore descendants of templates. There shouldn't be any descendants\n        // because they will be moved into `.content` during construction in\n        // browsers that support template but, in case they exist and are still\n        // waiting to be moved by a polyfill, they will be ignored.\n        node = nextSiblingOrAncestorSibling(root, element);\n        continue;\n      }\n\n      // Walk shadow roots.\n      const shadowRoot = element.__CE_shadowRoot;\n      if (shadowRoot) {\n        for (\n          let child = shadowRoot.firstChild;\n          child;\n          child = child.nextSibling\n        ) {\n          walkDeepDescendantElements(child, callback, visitedImports);\n        }\n      }\n    }\n\n    node = nextNode(root, node);\n  }\n}\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nimport CustomElementRegistry from './CustomElementRegistry.js';\nimport {CustomElementState as CEState} from './CustomElementState.js';\nimport * as Native from './Patch/Native.js';\nimport * as Utilities from './Utilities.js';\n\nconst NS_HTML = 'http://www.w3.org/1999/xhtml';\n\nexport default class CustomElementInternals {\n  private readonly _patchesNode: Array<(node: Node) => void> = [];\n  private readonly _patchesElement: Array<(elem: Element) => void> = [];\n  private _hasPatches = false;\n  public readonly shadyDomFastWalk: boolean;\n  public readonly useDocumentConstructionObserver: boolean;\n\n  constructor(options: {\n    shadyDomFastWalk: boolean;\n    noDocumentConstructionObserver: boolean;\n  }) {\n    this.shadyDomFastWalk = options.shadyDomFastWalk;\n    this.useDocumentConstructionObserver = !options.noDocumentConstructionObserver;\n  }\n\n  forEachElement(\n    node: Node,\n    callback: (elem: Element) => void,\n    visitedImports?: Set<Node>\n  ) {\n    const sd = window['ShadyDOM'];\n    if (this.shadyDomFastWalk && sd && sd['inUse']) {\n      if (node.nodeType === Node.ELEMENT_NODE) {\n        const element = node as Element;\n        callback(element);\n      }\n      // most easily gets to document, element, documentFragment\n      if ((node as Element).querySelectorAll!) {\n        const elements = sd['nativeMethods'].querySelectorAll.call(node, '*');\n        for (let i = 0; i < elements.length; i++) {\n          callback(elements[i]);\n        }\n      }\n    } else {\n      Utilities.walkDeepDescendantElements(node, callback, visitedImports);\n    }\n  }\n\n  addNodePatch(patch: (node: Node) => void) {\n    this._hasPatches = true;\n    this._patchesNode.push(patch);\n  }\n\n  addElementPatch(patch: (element: Element) => void) {\n    this._hasPatches = true;\n    this._patchesElement.push(patch);\n  }\n\n  patchTree(node: Node) {\n    if (!this._hasPatches) {\n      return;\n    }\n\n    this.forEachElement(node, (element) => this.patchElement(element));\n  }\n\n  patchNode(node: Node) {\n    if (!this._hasPatches) {\n      return;\n    }\n\n    if (node.__CE_patched) {\n      return;\n    }\n    node.__CE_patched = true;\n\n    for (let i = 0; i < this._patchesNode.length; i++) {\n      this._patchesNode[i](node);\n    }\n  }\n\n  patchElement(element: Element) {\n    if (!this._hasPatches) {\n      return;\n    }\n\n    if (element.__CE_patched) {\n      return;\n    }\n    element.__CE_patched = true;\n\n    for (let i = 0; i < this._patchesNode.length; i++) {\n      this._patchesNode[i](element);\n    }\n\n    for (let i = 0; i < this._patchesElement.length; i++) {\n      this._patchesElement[i](element);\n    }\n  }\n\n  connectTree(root: Node) {\n    const elements: Array<Element> = [];\n\n    this.forEachElement(root, (element) => elements.push(element));\n\n    for (let i = 0; i < elements.length; i++) {\n      const element = elements[i];\n      if (element.__CE_state === CEState.custom) {\n        this.connectedCallback(element);\n      } else {\n        this.upgradeReaction(element as HTMLElement);\n      }\n    }\n  }\n\n  disconnectTree(root: Node) {\n    const elements: Array<Element> = [];\n\n    this.forEachElement(root, (element) => elements.push(element));\n\n    for (let i = 0; i < elements.length; i++) {\n      const element = elements[i];\n      if (element.__CE_state === CEState.custom) {\n        this.disconnectedCallback(element);\n      }\n    }\n  }\n\n  /**\n   * Upgrades all uncustomized custom elements at and below a root node for\n   * which there is a definition. When custom element reaction callbacks are\n   * assumed to be called synchronously (which, by the current DOM / HTML spec\n   * definitions, they are *not*), callbacks for both elements customized\n   * synchronously by the parser and elements being upgraded occur in the same\n   * relative order.\n   *\n   * NOTE: This function, when used to simulate the construction of a tree\n   * that is already created but not customized (i.e. by the parser), does\n   * *not* prevent the element from reading the 'final' (true) state of the\n   * tree. For example, the element, during truly synchronous parsing /\n   * construction would see that it contains no children as they have not yet\n   * been inserted. However, this function does not modify the tree, the\n   * element will (incorrectly) have children. Additionally, self-modification\n   * restrictions for custom element constructors imposed by the DOM spec are\n   * *not* enforced.\n   *\n   *\n   * The following nested list shows the steps extending down from the HTML\n   * spec's parsing section that cause elements to be synchronously created\n   * and upgraded:\n   *\n   * The \"in body\" insertion mode:\n   * https://html.spec.whatwg.org/multipage/syntax.html#parsing-main-inbody\n   * - Switch on token:\n   *   .. other cases ..\n   *   -> Any other start tag\n   *      - [Insert an HTML element](below) for the token.\n   *\n   * Insert an HTML element:\n   * https://html.spec.whatwg.org/multipage/syntax.html#insert-an-html-element\n   * - Insert a foreign element for the token in the HTML namespace:\n   *   https://html.spec.whatwg.org/multipage/syntax.html#insert-a-foreign-element\n   *   - Create an element for a token:\n   *     https://html.spec.whatwg.org/multipage/syntax.html#create-an-element-for-the-token\n   *     - Will execute script flag is true?\n   *       - (Element queue pushed to the custom element reactions stack.)\n   *     - Create an element:\n   *       https://dom.spec.whatwg.org/#concept-create-element\n   *       - Sync CE flag is true?\n   *         - Constructor called.\n   *         - Self-modification restrictions enforced.\n   *       - Sync CE flag is false?\n   *         - (Upgrade reaction enqueued.)\n   *     - Attributes appended to element.\n   *       (`attributeChangedCallback` reactions enqueued.)\n   *     - Will execute script flag is true?\n   *       - (Element queue popped from the custom element reactions stack.\n   *         Reactions in the popped stack are invoked.)\n   *   - (Element queue pushed to the custom element reactions stack.)\n   *   - Insert the element:\n   *     https://dom.spec.whatwg.org/#concept-node-insert\n   *     - Shadow-including descendants are connected. During parsing\n   *       construction, there are no shadow-*excluding* descendants.\n   *       However, the constructor may have validly attached a shadow\n   *       tree to itself and added descendants to that shadow tree.\n   *       (`connectedCallback` reactions enqueued.)\n   *   - (Element queue popped from the custom element reactions stack.\n   *     Reactions in the popped stack are invoked.)\n   */\n  patchAndUpgradeTree(\n    root: Node,\n    options: {\n      visitedImports?: Set<Node>;\n      upgrade?: (elem: HTMLElement) => void;\n    } = {}\n  ) {\n    const visitedImports = options.visitedImports;\n    const upgrade =\n      options.upgrade || ((element) => this.upgradeReaction(element));\n\n    const elements: Array<Element> = [];\n\n    const gatherElements = (element: Element) => {\n      if (this._hasPatches) {\n        this.patchElement(element);\n      }\n      if (\n        element.localName === 'link' &&\n        element.getAttribute('rel') === 'import'\n      ) {\n        const importElem = element as HTMLLinkElement;\n        // The HTML Imports polyfill sets a descendant element of the link to\n        // the `import` property, specifically this is *not* a Document.\n        const importNode = importElem.import;\n\n        if (importNode instanceof Node) {\n          importNode.__CE_isImportDocument = true;\n          // Connected links are associated with the global registry.\n          importNode.__CE_registry = document.__CE_registry;\n        }\n\n        if (importNode && importNode.readyState === 'complete') {\n          importNode.__CE_documentLoadHandled = true;\n        } else {\n          // If this link's import root is not available, its contents can't\n          // be walked. Wait for 'load' and walk it when it's ready.\n          element.addEventListener('load', () => {\n            const importNode = importElem.import!;\n\n            if (importNode.__CE_documentLoadHandled) {\n              return;\n            }\n            importNode.__CE_documentLoadHandled = true;\n\n            // Clone the `visitedImports` set that was populated sync during\n            // the `patchAndUpgradeTree` call that caused this 'load' handler\n            // to be added. Then, remove *this* link's import node so that we\n            // can walk that import again, even if it was partially walked\n            // later during the same `patchAndUpgradeTree` call.\n            const clonedVisitedImports = new Set<Node>();\n            if (visitedImports) {\n              // IE11 does not support constructing a set using an iterable.\n              visitedImports.forEach((item) => clonedVisitedImports.add(item));\n              clonedVisitedImports.delete(importNode);\n            }\n            this.patchAndUpgradeTree(importNode, {\n              visitedImports: clonedVisitedImports,\n              upgrade,\n            });\n          });\n        }\n      } else {\n        elements.push(element);\n      }\n    };\n\n    // `forEachElement` populates (and internally checks against)\n    // `visitedImports` when traversing a loaded import.\n    this.forEachElement(root, gatherElements, visitedImports);\n\n    for (let i = 0; i < elements.length; i++) {\n      upgrade(elements[i] as HTMLElement);\n    }\n  }\n\n  upgradeReaction(element: HTMLElement) {\n    try {\n      const definition = this._lookupACustomElementDefinition(\n        element.ownerDocument!,\n        element.localName\n      );\n      if (definition) {\n        this._upgradeAnElement(element, definition);\n      }\n    } catch (e: unknown) {\n      this.reportTheException(e);\n    }\n  }\n\n  /**\n   * @see https://html.spec.whatwg.org/multipage/custom-elements.html#concept-upgrade-an-element\n   */\n  private _upgradeAnElement(\n    element: HTMLElement,\n    definition: CustomElementDefinition\n  ) {\n    const currentState = element.__CE_state;\n    if (currentState !== undefined) {\n      return;\n    }\n\n    definition.constructionStack.push(element);\n\n    try {\n      try {\n        const result = new definition.constructorFunction();\n        if (result !== element) {\n          throw new Error(\n            'The custom element constructor did not produce the element being upgraded.'\n          );\n        }\n      } finally {\n        definition.constructionStack.pop();\n      }\n    } catch (e) {\n      element.__CE_state = CEState.failed;\n      throw e;\n    }\n\n    element.__CE_state = CEState.custom;\n    element.__CE_definition = definition;\n\n    // Check `hasAttributes` here to avoid iterating when it's not necessary.\n    if (definition.attributeChangedCallback && element.hasAttributes()) {\n      const observedAttributes = definition.observedAttributes;\n      for (let i = 0; i < observedAttributes.length; i++) {\n        const name = observedAttributes[i];\n        const value = element.getAttribute(name);\n        if (value !== null) {\n          this.attributeChangedCallback(element, name, null, value, null);\n        }\n      }\n    }\n\n    if (Utilities.isConnected(element)) {\n      this.connectedCallback(element);\n    }\n  }\n\n  connectedCallback(element: Element) {\n    const definition = element.__CE_definition!;\n    if (definition.connectedCallback) {\n      try {\n        definition.connectedCallback.call(element);\n      } catch (e: unknown) {\n        this.reportTheException(e);\n      }\n    }\n  }\n\n  disconnectedCallback(element: Element) {\n    const definition = element.__CE_definition!;\n    if (definition.disconnectedCallback) {\n      try {\n        definition.disconnectedCallback.call(element);\n      } catch (e: unknown) {\n        this.reportTheException(e);\n      }\n    }\n  }\n\n  attributeChangedCallback(\n    element: Element,\n    name: string,\n    oldValue?: string | null,\n    newValue?: string | null,\n    namespace?: string | null\n  ) {\n    const definition = element.__CE_definition!;\n    if (\n      definition.attributeChangedCallback &&\n      definition.observedAttributes.indexOf(name) > -1\n    ) {\n      try {\n        definition.attributeChangedCallback.call(\n          element,\n          name,\n          oldValue,\n          newValue,\n          namespace\n        );\n      } catch (e: unknown) {\n        this.reportTheException(e);\n      }\n    }\n  }\n\n  /**\n   * Runs HTML's 'look up a custom element definition', excluding the namespace\n   * check.\n   *\n   * @see https://html.spec.whatwg.org/multipage/custom-elements.html#look-up-a-custom-element-definition\n   */\n  private _lookupACustomElementDefinition(\n    doc: Document,\n    localName: string\n  ): CustomElementDefinition | undefined {\n    // The document must be associated with a registry.\n    const registry = doc.__CE_registry;\n    if (!registry) {\n      return;\n    }\n\n    // Prevent elements created in documents without a browsing context from\n    // upgrading.\n    //\n    // https://html.spec.whatwg.org/multipage/custom-elements.html#look-up-a-custom-element-definition\n    //   \"If document does not have a browsing context, return null.\"\n    //\n    // https://html.spec.whatwg.org/multipage/window-object.html#dom-document-defaultview\n    //   \"The defaultView IDL attribute of the Document interface, on getting,\n    //   must return this Document's browsing context's WindowProxy object, if\n    //   this Document has an associated browsing context, or null otherwise.\"\n    if (!doc.defaultView && !doc.__CE_isImportDocument) {\n      return;\n    }\n\n    return registry.internal_localNameToDefinition(localName);\n  }\n\n  /**\n   * Runs the DOM's 'create an element'. If namespace is not null, then the\n   * native `createElementNS` is used. Otherwise, `createElement` is used.\n   *\n   * Note, the template polyfill only wraps `createElement`, preventing this\n   * function from using `createElementNS` in all cases.\n   *\n   * @see https://dom.spec.whatwg.org/#concept-create-element\n   */\n  createAnElement(\n    doc: Document,\n    localName: string,\n    namespace: string | null\n  ): Element {\n    const registry = doc.__CE_registry;\n    // Only create custom elements if the document is associated with a\n    // registry.\n    if (registry && (namespace === null || namespace === NS_HTML)) {\n      const definition = ((registry as unknown) as CustomElementRegistry).internal_localNameToDefinition(\n        localName\n      );\n      if (definition) {\n        try {\n          const result = new definition.constructorFunction();\n\n          // These conformance checks can't be performed when the user calls\n          // the element's constructor themselves. However, this also true in\n          // native implementations.\n\n          if (\n            result.__CE_state === undefined ||\n            result.__CE_definition === undefined\n          ) {\n            throw new Error(\n              `Failed to construct '${localName}': ` +\n                'The returned value was not constructed with the HTMLElement ' +\n                'constructor.'\n            );\n          }\n\n          if (result.namespaceURI !== NS_HTML) {\n            throw new Error(\n              `Failed to construct '${localName}': ` +\n                \"The constructed element's namespace must be the HTML \" +\n                'namespace.'\n            );\n          }\n\n          // The following Errors should be DOMExceptions but DOMException\n          // isn't constructible in all browsers.\n\n          if (result.hasAttributes()) {\n            throw new Error(\n              `Failed to construct '${localName}': ` +\n                'The constructed element must not have any attributes.'\n            );\n          }\n\n          // ShadyDOM doesn't wrap `#hasChildNodes`, so we check `#firstChild`\n          // instead.\n          if (result.firstChild !== null) {\n            throw new Error(\n              `Failed to construct '${localName}': ` +\n                'The constructed element must not have any children.'\n            );\n          }\n\n          if (result.parentNode !== null) {\n            throw new Error(\n              `Failed to construct '${localName}': ` +\n                'The constructed element must not have a parent node.'\n            );\n          }\n\n          if (result.ownerDocument !== doc) {\n            throw new Error(\n              `Failed to construct '${localName}': ` +\n                \"The constructed element's owner document is incorrect.\"\n            );\n          }\n\n          if (result.localName !== localName) {\n            throw new Error(\n              `Failed to construct '${localName}': ` +\n                \"The constructed element's local name is incorrect.\"\n            );\n          }\n\n          return result;\n        } catch (e: unknown) {\n          this.reportTheException(e);\n\n          // When construction fails, a new HTMLUnknownElement is produced.\n          // However, there's no direct way to create one, so we create a\n          // regular HTMLElement and replace its prototype.\n          const result =\n            namespace === null\n              ? Native.Document_createElement.call(doc, localName)\n              : Native.Document_createElementNS.call(doc, namespace, localName);\n          Object.setPrototypeOf(result, HTMLUnknownElement.prototype);\n          result.__CE_state = CEState.failed;\n          result.__CE_definition = undefined;\n          this.patchElement(result);\n          return result;\n        }\n      }\n    }\n\n    const result =\n      namespace === null\n        ? Native.Document_createElement.call(doc, localName)\n        : Native.Document_createElementNS.call(doc, namespace, localName);\n    this.patchElement(result);\n    return result;\n  }\n\n  /**\n   * Runs the DOM's 'report the exception' algorithm.\n   *\n   * @see https://html.spec.whatwg.org/multipage/webappapis.html#report-the-exception\n   */\n  reportTheException(arg: unknown) {\n    interface ExtendedError extends Error {\n      // Non-standard Safari properties.\n      sourceURL?: string;\n      line?: number;\n      column?: number;\n\n      // Non-standard Firefox properties.\n      fileName?: string;\n      lineNumber?: number;\n      columnNumber?: number;\n    }\n\n    let message = '';\n    let filename = '';\n    let lineno = 0;\n    let colno = 0;\n\n    if (arg instanceof Error) {\n      const error = arg as ExtendedError;\n      message = error.message;\n      filename = error.sourceURL || error.fileName || '';\n      lineno = error.line || error.lineNumber || 0;\n      colno = error.column || error.columnNumber || 0;\n    } else {\n      message = `Uncaught ${String(arg)}`;\n    }\n\n    let event: ErrorEvent | undefined = undefined;\n    if (ErrorEvent.prototype.initErrorEvent === undefined) {\n      event = new ErrorEvent('error', {\n        cancelable: true,\n        message,\n        filename,\n        lineno,\n        colno,\n        error: arg,\n      });\n    } else {\n      event = document.createEvent('ErrorEvent') as ErrorEvent;\n      // initErrorEvent(type, bubbles, cancelable, message, filename, line)\n      event.initErrorEvent!('error', false, true, message, filename, lineno);\n      // Hack for IE, where ErrorEvent#preventDefault does not set\n      // #defaultPrevented to true.\n      event.preventDefault = function (this: ErrorEvent) {\n        Object.defineProperty(this, 'defaultPrevented', {\n          configurable: true,\n          get: function (this: ErrorEvent) {\n            return true;\n          },\n        });\n      };\n    }\n\n    if (event.error === undefined) {\n      Object.defineProperty(event, 'error', {\n        configurable: true,\n        enumerable: true,\n        get: function () {\n          return arg;\n        },\n      });\n    }\n\n    window.dispatchEvent(event);\n    if (!event.defaultPrevented) {\n      // In 'report the exception', UAs may optionally write errors to the\n      // console if their associated ErrorEvent isn't handled during dispatch\n      // (indicated by calling `preventDefault`). In practice, these errors are\n      // always displayed.\n      console.error(arg);\n    }\n  }\n}\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nimport CustomElementInternals from './CustomElementInternals.js';\nimport CustomElementRegistry from './CustomElementRegistry.js';\nimport PatchDocument from './Patch/Document.js';\nimport PatchDocumentFragment from './Patch/DocumentFragment.js';\nimport PatchElement from './Patch/Element.js';\nimport PatchHTMLElement from './Patch/HTMLElement.js';\nimport PatchNode from './Patch/Node.js';\n\nconst priorCustomElements = window['customElements'];\n\nfunction installPolyfill() {\n  const noDocumentConstructionObserver = !!priorCustomElements?.[\n    'noDocumentConstructionObserver'\n  ];\n  const shadyDomFastWalk = !!priorCustomElements?.['shadyDomFastWalk'];\n\n  const internals = new CustomElementInternals({\n    noDocumentConstructionObserver,\n    shadyDomFastWalk,\n  });\n\n  PatchHTMLElement(internals);\n  PatchDocument(internals);\n  PatchDocumentFragment(internals);\n  PatchNode(internals);\n  PatchElement(internals);\n\n  window[\n    'CustomElementRegistry'\n  ] = (CustomElementRegistry as unknown) as typeof window['CustomElementRegistry'];\n\n  const customElements = new CustomElementRegistry(internals);\n\n  // The main document is associated with the global registry.\n  document.__CE_registry = customElements;\n\n  Object.defineProperty(window, 'customElements', {\n    configurable: true,\n    enumerable: true,\n    value: customElements,\n  });\n}\n\nif (\n  !priorCustomElements ||\n  priorCustomElements['forcePolyfill'] ||\n  typeof priorCustomElements['define'] != 'function' ||\n  typeof priorCustomElements['get'] != 'function'\n) {\n  installPolyfill();\n}\n\n// This is NOT public API and is only meant to work around a GC bug in older\n// versions of Safari that randomly removes the polyfill during tests.\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n(window as any)['__CE_installPolyfill'] = installPolyfill;\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nexport const CustomElementState = {\n  custom: 1,\n  failed: 2,\n} as const;\nexport type CustomElementState =\n  | typeof CustomElementState.custom\n  | typeof CustomElementState.failed;\n\nexport default CustomElementState;\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nexport default class Deferred<T> {\n  private _value: T | undefined = undefined;\n\n  private _resolve!: (val: T) => void;\n\n  private readonly _promise: Promise<T>;\n  constructor() {\n    this._promise = new Promise((resolve) => {\n      this._resolve = resolve;\n    });\n  }\n\n  resolve(value: T) {\n    if (this._value) {\n      throw new Error('Already resolved.');\n    }\n\n    this._value = value;\n    this._resolve(value);\n  }\n\n  toPromise() {\n    return this._promise;\n  }\n}\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nimport CustomElementInternals from './CustomElementInternals.js';\n\nexport default class DocumentConstructionObserver {\n  private readonly _internals: CustomElementInternals;\n  private readonly _document: Document;\n  private _observer: MutationObserver | undefined = undefined;\n  constructor(internals: CustomElementInternals, doc: Document) {\n    this._internals = internals;\n    this._document = doc;\n\n    // Simulate tree construction for all currently accessible nodes in the\n    // document.\n    this._internals.patchAndUpgradeTree(this._document);\n\n    if (this._document.readyState === 'loading') {\n      this._observer = new MutationObserver(this._handleMutations.bind(this));\n\n      // Nodes created by the parser are given to the observer *before* the next\n      // task runs. Inline scripts are run in a new task. This means that the\n      // observer will be able to handle the newly parsed nodes before the\n      // inline script is run.\n      this._observer.observe(this._document, {\n        childList: true,\n        subtree: true,\n      });\n    }\n  }\n\n  disconnect() {\n    if (this._observer) {\n      this._observer.disconnect();\n    }\n  }\n\n  private _handleMutations(mutations: ReadonlyArray<MutationRecord>) {\n    // Once the document's `readyState` is 'interactive' or 'complete', all new\n    // nodes created within that document will be the result of script and\n    // should be handled by patching.\n    const readyState = this._document.readyState;\n    if (readyState === 'interactive' || readyState === 'complete') {\n      this.disconnect();\n    }\n\n    for (let i = 0; i < mutations.length; i++) {\n      const addedNodes = mutations[i].addedNodes;\n      for (let j = 0; j < addedNodes.length; j++) {\n        const node = addedNodes[j];\n        this._internals.patchAndUpgradeTree(node);\n      }\n    }\n  }\n}\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nimport {AlreadyConstructedMarkerType} from './AlreadyConstructedMarker.js';\nimport CustomElementInternals from './CustomElementInternals.js';\nimport Deferred from './Deferred.js';\nimport DocumentConstructionObserver from './DocumentConstructionObserver.js';\nimport * as Utilities from './Utilities.js';\n\ninterface ElementConstructor {\n  new (): HTMLElement;\n  observedAttributes?: Array<string>;\n}\ntype ConstructorGetter = () => ElementConstructor;\n\n/**\n * @unrestricted\n */\nexport default class CustomElementRegistry {\n  private readonly _localNameToConstructorGetter = new Map<\n    string,\n    ConstructorGetter\n  >();\n  private readonly _localNameToDefinition = new Map<\n    string,\n    CustomElementDefinition\n  >();\n  private readonly _constructorToDefinition = new Map<\n    ElementConstructor,\n    CustomElementDefinition\n  >();\n  private _elementDefinitionIsRunning = false;\n  private readonly _internals: CustomElementInternals;\n  private readonly _whenDefinedDeferred = new Map<\n    string,\n    Deferred<undefined>\n  >();\n\n  /**\n   * The default flush callback triggers the document walk synchronously.\n   */\n  private _flushCallback: (fn: () => void) => void = (fn) => fn();\n  private _flushPending = false;\n\n  /**\n   * A map from `localName`s of definitions that were defined *after* the\n   * last flush to unupgraded elements matching that definition, in document\n   * order. Entries are added to this map when a definition is registered,\n   * but the list of elements is only populated during a flush after which\n   * all of the entries are removed. DO NOT edit outside of `#_flush`.\n   */\n  private readonly _unflushedLocalNames: Array<string> = [];\n\n  private readonly _documentConstructionObserver:\n    | DocumentConstructionObserver\n    | undefined;\n\n  constructor(internals: CustomElementInternals) {\n    this._internals = internals;\n    this._documentConstructionObserver = internals.useDocumentConstructionObserver\n      ? new DocumentConstructionObserver(internals, document)\n      : undefined;\n  }\n\n  polyfillDefineLazy(localName: string, constructorGetter: ConstructorGetter) {\n    if (!(constructorGetter instanceof Function)) {\n      throw new TypeError(\n        'Custom element constructor getters must be functions.'\n      );\n    }\n    this.internal_assertCanDefineLocalName(localName);\n    this._localNameToConstructorGetter.set(localName, constructorGetter);\n    this._unflushedLocalNames.push(localName);\n    // If we've already called the flush callback and it hasn't called back\n    // yet, don't call it again.\n    if (!this._flushPending) {\n      this._flushPending = true;\n      this._flushCallback(() => this._flush());\n    }\n  }\n\n  define(localName: string, constructor: Function) {\n    if (!(constructor instanceof Function)) {\n      throw new TypeError('Custom element constructors must be functions.');\n    }\n\n    this.internal_assertCanDefineLocalName(localName);\n\n    this.internal_reifyDefinition(localName, constructor as ElementConstructor);\n    this._unflushedLocalNames.push(localName);\n    // If we've already called the flush callback and it hasn't called back\n    // yet, don't call it again.\n    if (!this._flushPending) {\n      this._flushPending = true;\n      this._flushCallback(() => this._flush());\n    }\n  }\n\n  internal_assertCanDefineLocalName(localName: string) {\n    if (!Utilities.isValidCustomElementName(localName)) {\n      throw new SyntaxError(`The element name '${localName}' is not valid.`);\n    }\n\n    if (this.internal_localNameToDefinition(localName)) {\n      throw new Error(\n        `A custom element with name ` +\n          `'${localName}' has already been defined.`\n      );\n    }\n\n    if (this._elementDefinitionIsRunning) {\n      throw new Error('A custom element is already being defined.');\n    }\n  }\n\n  internal_reifyDefinition(localName: string, constructor: ElementConstructor) {\n    this._elementDefinitionIsRunning = true;\n\n    let connectedCallback: CustomElementDefinition['connectedCallback'];\n    let disconnectedCallback: CustomElementDefinition['disconnectedCallback'];\n    let adoptedCallback: CustomElementDefinition['adoptedCallback'];\n    let attributeChangedCallback: CustomElementDefinition['attributeChangedCallback'];\n    let observedAttributes: CustomElementDefinition['observedAttributes'];\n    try {\n      const prototype = constructor.prototype;\n      if (!(prototype instanceof Object)) {\n        throw new TypeError(\n          \"The custom element constructor's prototype is not an object.\"\n        );\n      }\n\n      type CEReactionCallback =\n        | 'connectedCallback'\n        | 'disconnectedCallback'\n        | 'adoptedCallback'\n        | 'attributeChangedCallback';\n      const getCallback = function getCallback(name: CEReactionCallback) {\n        const callbackValue = prototype[name];\n        if (\n          callbackValue !== undefined &&\n          !(callbackValue instanceof Function)\n        ) {\n          throw new Error(`The '${name}' callback must be a function.`);\n        }\n        return callbackValue;\n      };\n\n      connectedCallback = getCallback('connectedCallback');\n      disconnectedCallback = getCallback('disconnectedCallback');\n      adoptedCallback = getCallback('adoptedCallback');\n      attributeChangedCallback = getCallback('attributeChangedCallback');\n      // `observedAttributes` should not be read unless an\n      // `attributesChangedCallback` exists\n      observedAttributes =\n        (attributeChangedCallback && constructor['observedAttributes']) || [];\n      // eslint-disable-next-line no-useless-catch\n    } catch (e) {\n      throw e;\n    } finally {\n      this._elementDefinitionIsRunning = false;\n    }\n\n    const definition = {\n      localName,\n      constructorFunction: constructor,\n      connectedCallback,\n      disconnectedCallback,\n      adoptedCallback,\n      attributeChangedCallback,\n      observedAttributes,\n      constructionStack: [] as Array<\n        HTMLElement | AlreadyConstructedMarkerType\n      >,\n    };\n\n    this._localNameToDefinition.set(localName, definition);\n    this._constructorToDefinition.set(\n      definition.constructorFunction,\n      definition\n    );\n\n    return definition;\n  }\n\n  upgrade(node: Node): void {\n    this._internals.patchAndUpgradeTree(node);\n  }\n\n  private _flush() {\n    // If no new definitions were defined, don't attempt to flush. This could\n    // happen if a flush callback keeps the function it is given and calls it\n    // multiple times.\n    if (this._flushPending === false) {\n      return;\n    }\n    this._flushPending = false;\n\n    /**\n     * Unupgraded elements with definitions that were defined *before* the last\n     * flush, in document order.\n     */\n    const elementsWithStableDefinitions: Array<HTMLElement> = [];\n\n    const unflushedLocalNames = this._unflushedLocalNames;\n    const elementsWithPendingDefinitions = new Map<\n      string,\n      Array<HTMLElement>\n    >();\n    for (let i = 0; i < unflushedLocalNames.length; i++) {\n      elementsWithPendingDefinitions.set(unflushedLocalNames[i], []);\n    }\n\n    this._internals.patchAndUpgradeTree(document, {\n      upgrade: (element) => {\n        // Ignore the element if it has already upgraded or failed to upgrade.\n        if (element.__CE_state !== undefined) {\n          return;\n        }\n\n        const localName = element.localName;\n\n        // If there is an applicable pending definition for the element, add the\n        // element to the list of elements to be upgraded with that definition.\n        const pendingElements = elementsWithPendingDefinitions.get(localName);\n        if (pendingElements) {\n          pendingElements.push(element);\n          // If there is *any other* applicable definition for the element, add\n          // it to the list of elements with stable definitions that need to be\n          // upgraded.\n        } else if (this._localNameToDefinition.has(localName)) {\n          elementsWithStableDefinitions.push(element);\n        }\n      },\n    });\n\n    // Upgrade elements with 'stable' definitions first.\n    for (let i = 0; i < elementsWithStableDefinitions.length; i++) {\n      this._internals.upgradeReaction(elementsWithStableDefinitions[i]);\n    }\n\n    // Upgrade elements with 'pending' definitions in the order they were\n    // defined.\n    for (let i = 0; i < unflushedLocalNames.length; i++) {\n      const localName = unflushedLocalNames[i];\n      const pendingUpgradableElements = elementsWithPendingDefinitions.get(\n        localName\n      )!;\n\n      // Attempt to upgrade all applicable elements.\n      for (let i = 0; i < pendingUpgradableElements.length; i++) {\n        this._internals.upgradeReaction(pendingUpgradableElements[i]);\n      }\n\n      // Resolve any promises created by `whenDefined` for the definition.\n      const deferred = this._whenDefinedDeferred.get(localName);\n      if (deferred) {\n        deferred.resolve(undefined);\n      }\n    }\n\n    unflushedLocalNames.length = 0;\n  }\n\n  get(localName: string): undefined | {new (): HTMLElement} {\n    const definition = this.internal_localNameToDefinition(localName);\n    if (definition) {\n      return definition.constructorFunction;\n    }\n\n    return undefined;\n  }\n\n  whenDefined(localName: string): Promise<void> {\n    if (!Utilities.isValidCustomElementName(localName)) {\n      return Promise.reject(\n        new SyntaxError(`'${localName}' is not a valid custom element name.`)\n      );\n    }\n\n    const prior = this._whenDefinedDeferred.get(localName);\n    if (prior) {\n      return prior.toPromise();\n    }\n\n    const deferred = new Deferred<undefined>();\n    this._whenDefinedDeferred.set(localName, deferred);\n\n    // Resolve immediately if the given local name has a regular or lazy\n    // definition *and* the full document walk to upgrade elements with that\n    // local name has already happened.\n    //\n    // The behavior of the returned promise differs between the lazy and the\n    // non-lazy cases if the definition fails. Normally, the definition would\n    // fail synchronously and no pending promises would resolve. However, if\n    // the definition is lazy but has not yet been reified, the promise is\n    // resolved early here even though it might fail later when reified.\n    const anyDefinitionExists =\n      this._localNameToDefinition.has(localName) ||\n      this._localNameToConstructorGetter.has(localName);\n    const definitionHasFlushed =\n      this._unflushedLocalNames.indexOf(localName) === -1;\n    if (anyDefinitionExists && definitionHasFlushed) {\n      deferred.resolve(undefined);\n    }\n\n    return deferred.toPromise();\n  }\n\n  polyfillWrapFlushCallback(outer: (fn: () => void) => void) {\n    if (this._documentConstructionObserver) {\n      this._documentConstructionObserver.disconnect();\n    }\n    const inner = this._flushCallback;\n    this._flushCallback = (flush) => outer(() => inner(flush));\n  }\n\n  internal_localNameToDefinition(\n    localName: string\n  ): CustomElementDefinition | undefined {\n    const existingDefinition = this._localNameToDefinition.get(localName);\n    if (existingDefinition) {\n      return existingDefinition;\n    }\n\n    const constructorGetter = this._localNameToConstructorGetter.get(localName);\n    if (constructorGetter) {\n      this._localNameToConstructorGetter.delete(localName);\n      try {\n        return this.internal_reifyDefinition(localName, constructorGetter());\n      } catch (e: unknown) {\n        this._internals.reportTheException(e);\n      }\n    }\n\n    return undefined;\n  }\n\n  internal_constructorToDefinition(\n    constructor: ElementConstructor\n  ): CustomElementDefinition | undefined {\n    return this._constructorToDefinition.get(constructor);\n  }\n}\n\n// Closure compiler exports.\n/* eslint-disable no-self-assign */\nCustomElementRegistry.prototype['define'] =\n  CustomElementRegistry.prototype.define;\nCustomElementRegistry.prototype['upgrade'] =\n  CustomElementRegistry.prototype.upgrade;\nCustomElementRegistry.prototype['get'] = CustomElementRegistry.prototype.get;\nCustomElementRegistry.prototype['whenDefined'] =\n  CustomElementRegistry.prototype.whenDefined;\nCustomElementRegistry.prototype['polyfillDefineLazy'] =\n  CustomElementRegistry.prototype.polyfillDefineLazy;\nCustomElementRegistry.prototype['polyfillWrapFlushCallback'] =\n  CustomElementRegistry.prototype.polyfillWrapFlushCallback;\n/* eslint-enable no-self-assign */\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nimport CustomElementInternals from '../../CustomElementInternals.js';\nimport * as Utilities from '../../Utilities.js';\n\ntype NativeMethod = (this: Node, ...args: Array<Node | string>) => void;\n\ninterface ParentNodeNativeMethods {\n  prepend: NativeMethod;\n  append: NativeMethod;\n}\n\nexport default function (\n  internals: CustomElementInternals,\n  destination: ParentNode,\n  builtIn: ParentNodeNativeMethods\n) {\n  function appendPrependPatch(builtInMethod: NativeMethod): NativeMethod {\n    return function (this: Node, ...nodes) {\n      /**\n       * A copy of `nodes`, with any DocumentFragment replaced by its children.\n       */\n      const flattenedNodes: Array<Node | string> = [];\n\n      /**\n       * Elements in `nodes` that were connected before this call.\n       */\n      const connectedElements: Array<Node> = [];\n\n      for (let i = 0; i < nodes.length; i++) {\n        const node = nodes[i];\n\n        if (node instanceof Element && Utilities.isConnected(node)) {\n          connectedElements.push(node);\n        }\n\n        if (node instanceof DocumentFragment) {\n          for (let child = node.firstChild; child; child = child.nextSibling) {\n            flattenedNodes.push(child);\n          }\n        } else {\n          flattenedNodes.push(node);\n        }\n      }\n\n      builtInMethod.apply(this, nodes);\n\n      for (let i = 0; i < connectedElements.length; i++) {\n        internals.disconnectTree(connectedElements[i]);\n      }\n\n      if (Utilities.isConnected(this)) {\n        for (let i = 0; i < flattenedNodes.length; i++) {\n          const node = flattenedNodes[i];\n          if (node instanceof Element) {\n            internals.connectTree(node);\n          }\n        }\n      }\n    };\n  }\n\n  if (builtIn.prepend !== undefined) {\n    destination.prepend = appendPrependPatch(builtIn.prepend);\n  }\n\n  if (builtIn.append !== undefined) {\n    destination.append = appendPrependPatch(builtIn.append);\n  }\n}\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nimport CustomElementInternals from '../CustomElementInternals.js';\n\nimport PatchParentNode from './Interface/ParentNode.js';\nimport * as Native from './Native.js';\n\nexport default function (internals: CustomElementInternals) {\n  Document.prototype.createElement = function (\n    this: Document,\n    localName: string\n  ) {\n    return internals.createAnElement(this, localName, null);\n  } as typeof Document.prototype.createElement;\n\n  Document.prototype.importNode = function <T extends Node>(\n    this: Document,\n    node: T,\n    deep?: boolean\n  ): T {\n    const clone = Native.Document_importNode.call(this, node, !!deep) as T;\n    // Only create custom elements if this document is associated with the\n    // registry.\n    if (!this.__CE_registry) {\n      internals.patchTree(clone);\n    } else {\n      internals.patchAndUpgradeTree(clone);\n    }\n    return clone;\n  };\n\n  Document.prototype.createElementNS = function (\n    this: Document,\n    namespace: string | null,\n    localName: string\n  ) {\n    return internals.createAnElement(this, localName, namespace);\n  } as typeof Document.prototype.createElementNS;\n\n  PatchParentNode(internals, Document.prototype, {\n    prepend: Native.Document_prepend,\n    append: Native.Document_append,\n  });\n}\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nimport CustomElementInternals from '../../CustomElementInternals.js';\nimport * as Utilities from '../../Utilities.js';\n\ntype NativeMethod = (this: ChildNode, ...args: Array<Node | string>) => void;\n\ninterface ChildNodeNativeMethods {\n  before: NativeMethod;\n  after: NativeMethod;\n  replaceWith: NativeMethod;\n  remove: (this: ChildNode) => void;\n}\n\nexport default function (\n  internals: CustomElementInternals,\n  destination: ChildNode,\n  builtIn: ChildNodeNativeMethods\n) {\n  function beforeAfterPatch(builtInMethod: NativeMethod): NativeMethod {\n    return function (this: ChildNode, ...nodes) {\n      const flattenedNodes: Array<string | Node> = [];\n      const connectedElements: Array<Node> = [];\n\n      for (let i = 0; i < nodes.length; i++) {\n        const node = nodes[i];\n\n        if (node instanceof Element && Utilities.isConnected(node)) {\n          connectedElements.push(node);\n        }\n\n        if (node instanceof DocumentFragment) {\n          for (let child = node.firstChild; child; child = child.nextSibling) {\n            flattenedNodes.push(child);\n          }\n        } else {\n          flattenedNodes.push(node);\n        }\n      }\n\n      builtInMethod.apply(this, nodes);\n\n      for (let i = 0; i < connectedElements.length; i++) {\n        internals.disconnectTree(connectedElements[i]);\n      }\n\n      if (Utilities.isConnected(this)) {\n        for (let i = 0; i < flattenedNodes.length; i++) {\n          const node = flattenedNodes[i];\n          if (node instanceof Element) {\n            internals.connectTree(node);\n          }\n        }\n      }\n    };\n  }\n\n  if (builtIn.before !== undefined) {\n    destination.before = beforeAfterPatch(builtIn.before);\n  }\n\n  if (builtIn.after !== undefined) {\n    destination.after = beforeAfterPatch(builtIn.after);\n  }\n\n  if (builtIn.replaceWith !== undefined) {\n    destination.replaceWith = function (\n      this: ChildNode,\n      ...nodes: Array<Node | string>\n    ) {\n      /**\n       * A copy of `nodes`, with any DocumentFragment replaced by its children.\n       */\n      const flattenedNodes: Array<Node | string> = [];\n\n      /**\n       * Elements in `nodes` that were connected before this call.\n       */\n      const connectedElements: Array<Node> = [];\n\n      for (let i = 0; i < nodes.length; i++) {\n        const node = nodes[i];\n\n        if (node instanceof Element && Utilities.isConnected(node)) {\n          connectedElements.push(node);\n        }\n\n        if (node instanceof DocumentFragment) {\n          for (let child = node.firstChild; child; child = child.nextSibling) {\n            flattenedNodes.push(child);\n          }\n        } else {\n          flattenedNodes.push(node);\n        }\n      }\n\n      const wasConnected = Utilities.isConnected(this);\n\n      builtIn.replaceWith.apply(this, nodes);\n\n      for (let i = 0; i < connectedElements.length; i++) {\n        internals.disconnectTree(connectedElements[i]);\n      }\n\n      if (wasConnected) {\n        internals.disconnectTree(this);\n        for (let i = 0; i < flattenedNodes.length; i++) {\n          const node = flattenedNodes[i];\n          if (node instanceof Element) {\n            internals.connectTree(node);\n          }\n        }\n      }\n    };\n  }\n\n  if (builtIn.remove !== undefined) {\n    destination.remove = function (this: ChildNode) {\n      const wasConnected = Utilities.isConnected(this);\n\n      builtIn.remove.call(this);\n\n      if (wasConnected) {\n        internals.disconnectTree(this);\n      }\n    };\n  }\n}\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nimport CustomElementInternals from '../CustomElementInternals.js';\nimport CEState from '../CustomElementState.js';\nimport * as Utilities from '../Utilities.js';\n\nimport PatchChildNode from './Interface/ChildNode.js';\nimport PatchParentNode from './Interface/ParentNode.js';\nimport * as Native from './Native.js';\n\nexport default function (internals: CustomElementInternals) {\n  if (Native.Element_attachShadow) {\n    Element.prototype.attachShadow = function (\n      this: Element,\n      init: ShadowRootInit\n    ) {\n      const shadowRoot = Native.Element_attachShadow.call(this, init);\n      internals.patchNode(shadowRoot);\n      this.__CE_shadowRoot = shadowRoot;\n      return shadowRoot;\n    };\n  }\n\n  function patch_innerHTML(\n    destination: Element,\n    baseDescriptor: PropertyDescriptor\n  ) {\n    Object.defineProperty(destination, 'innerHTML', {\n      enumerable: baseDescriptor.enumerable,\n      configurable: true,\n      get: baseDescriptor.get,\n      set: function (this: Element, htmlString) {\n        const isConnected = Utilities.isConnected(this);\n\n        // NOTE: In IE11, when using the native `innerHTML` setter, all nodes\n        // that were previously descendants of the context element have all of\n        // their children removed as part of the set - the entire subtree is\n        // 'disassembled'. This work around walks the subtree *before* using the\n        // native setter.\n        let removedElements: undefined | Array<Element> = undefined;\n        if (isConnected) {\n          removedElements = [];\n          internals.forEachElement(this, (element) => {\n            if (element !== this) {\n              removedElements!.push(element);\n            }\n          });\n        }\n\n        baseDescriptor.set!.call(this, htmlString);\n\n        if (removedElements) {\n          for (let i = 0; i < removedElements.length; i++) {\n            const element = removedElements[i];\n            if (element.__CE_state === CEState.custom) {\n              internals.disconnectedCallback(element);\n            }\n          }\n        }\n\n        // Only create custom elements if this element's owner document is\n        // associated with the registry.\n        if (!this.ownerDocument!.__CE_registry) {\n          internals.patchTree(this);\n        } else {\n          internals.patchAndUpgradeTree(this);\n        }\n        return htmlString;\n      },\n    });\n  }\n\n  if (Native.Element_innerHTML && Native.Element_innerHTML.get) {\n    patch_innerHTML(Element.prototype, Native.Element_innerHTML);\n  } else if (Native.HTMLElement_innerHTML && Native.HTMLElement_innerHTML.get) {\n    patch_innerHTML(HTMLElement.prototype, Native.HTMLElement_innerHTML);\n  } else {\n    internals.addElementPatch(function (element) {\n      patch_innerHTML(element, {\n        enumerable: true,\n        configurable: true,\n        // Implements getting `innerHTML` by performing an unpatched `cloneNode`\n        // of the element and returning the resulting element's `innerHTML`.\n        // TODO: Is this too expensive?\n        get: function (this: Element) {\n          return (Native.Node_cloneNode.call(this, true) as Element).innerHTML;\n        },\n        // Implements setting `innerHTML` by creating an unpatched element,\n        // setting `innerHTML` of that element and replacing the target\n        // element's children with those of the unpatched element.\n        set: function (this: Element, assignedValue) {\n          // NOTE: re-route to `content` for `template` elements.\n          // We need to do this because `template.appendChild` does not\n          // route into `template.content`.\n          const isTemplate = this.localName === 'template';\n          const content = isTemplate\n            ? (this as HTMLTemplateElement).content\n            : this;\n          const rawElement = Native.Document_createElementNS.call(\n            document,\n            this.namespaceURI,\n            this.localName\n          );\n          rawElement.innerHTML = assignedValue;\n\n          while (content.childNodes.length > 0) {\n            Native.Node_removeChild.call(content, content.childNodes[0]);\n          }\n          const container = isTemplate\n            ? (rawElement as HTMLTemplateElement).content\n            : rawElement;\n          while (container.childNodes.length > 0) {\n            Native.Node_appendChild.call(content, container.childNodes[0]);\n          }\n        },\n      });\n    });\n  }\n\n  Element.prototype.setAttribute = function (this: Element, name, newValue) {\n    // Fast path for non-custom elements.\n    if (this.__CE_state !== CEState.custom) {\n      return Native.Element_setAttribute.call(this, name, newValue);\n    }\n\n    const oldValue = Native.Element_getAttribute.call(this, name);\n    Native.Element_setAttribute.call(this, name, newValue);\n    newValue = Native.Element_getAttribute.call(this, name)!;\n    internals.attributeChangedCallback(this, name, oldValue, newValue, null);\n  };\n\n  Element.prototype.setAttributeNS = function (\n    this: Element,\n    namespace,\n    name,\n    newValue\n  ) {\n    // Fast path for non-custom elements.\n    if (this.__CE_state !== CEState.custom) {\n      return Native.Element_setAttributeNS.call(\n        this,\n        namespace,\n        name,\n        newValue\n      );\n    }\n\n    const oldValue = Native.Element_getAttributeNS.call(this, namespace, name);\n    Native.Element_setAttributeNS.call(this, namespace, name, newValue);\n    newValue = Native.Element_getAttributeNS.call(this, namespace, name)!;\n    internals.attributeChangedCallback(\n      this,\n      name,\n      oldValue,\n      newValue,\n      namespace\n    );\n  };\n\n  Element.prototype.removeAttribute = function (this: Element, name) {\n    // Fast path for non-custom elements.\n    if (this.__CE_state !== CEState.custom) {\n      return Native.Element_removeAttribute.call(this, name);\n    }\n\n    const oldValue = Native.Element_getAttribute.call(this, name);\n    Native.Element_removeAttribute.call(this, name);\n    if (oldValue !== null) {\n      internals.attributeChangedCallback(this, name, oldValue, null, null);\n    }\n  };\n\n  if (Native.Element_toggleAttribute) {\n    Element.prototype.toggleAttribute = function (\n      this: Element,\n      name,\n      force?: boolean | undefined\n    ) {\n      // Fast path for non-custom elements.\n      if (this.__CE_state !== CEState.custom) {\n        return Native.Element_toggleAttribute.call(this, name, force);\n      }\n\n      const oldValue = Native.Element_getAttribute.call(this, name);\n      const hadAttribute = oldValue !== null;\n      const hasAttribute = Native.Element_toggleAttribute.call(\n        this,\n        name,\n        force\n      );\n      if (hadAttribute !== hasAttribute) {\n        internals.attributeChangedCallback(\n          this,\n          name,\n          oldValue,\n          hasAttribute ? '' : null,\n          null\n        );\n      }\n      return hasAttribute;\n    };\n  }\n\n  Element.prototype.removeAttributeNS = function (\n    this: Element,\n    namespace,\n    name\n  ) {\n    // Fast path for non-custom elements.\n    if (this.__CE_state !== CEState.custom) {\n      return Native.Element_removeAttributeNS.call(this, namespace, name);\n    }\n\n    const oldValue = Native.Element_getAttributeNS.call(this, namespace, name);\n    Native.Element_removeAttributeNS.call(this, namespace, name);\n    // In older browsers, `Element#getAttributeNS` may return the empty string\n    // instead of null if the attribute does not exist. For details, see;\n    // https://developer.mozilla.org/en-US/docs/Web/API/Element/getAttributeNS#Notes\n    const newValue = Native.Element_getAttributeNS.call(this, namespace, name);\n    if (oldValue !== newValue) {\n      internals.attributeChangedCallback(\n        this,\n        name,\n        oldValue,\n        newValue,\n        namespace\n      );\n    }\n  };\n\n  function patch_insertAdjacentElement(\n    destination: Element,\n    baseMethod: Element['insertAdjacentElement']\n  ) {\n    destination.insertAdjacentElement = function (\n      this: Element,\n      position,\n      element\n    ) {\n      const wasConnected = Utilities.isConnected(element);\n      const insertedElement = baseMethod.call(this, position, element)!;\n\n      if (wasConnected) {\n        internals.disconnectTree(element);\n      }\n\n      if (Utilities.isConnected(insertedElement)) {\n        internals.connectTree(element);\n      }\n      return insertedElement;\n    };\n  }\n\n  if (Native.HTMLElement_insertAdjacentElement) {\n    patch_insertAdjacentElement(\n      HTMLElement.prototype,\n      Native.HTMLElement_insertAdjacentElement\n    );\n  } else if (Native.Element_insertAdjacentElement) {\n    patch_insertAdjacentElement(\n      Element.prototype,\n      Native.Element_insertAdjacentElement\n    );\n  }\n\n  function patch_insertAdjacentHTML(\n    destination: Element,\n    baseMethod: Element['insertAdjacentHTML']\n  ) {\n    /**\n     * Patches and upgrades all nodes which are siblings between `start`\n     * (inclusive) and `end` (exclusive). If `end` is `null`, then all siblings\n     * following `start` will be patched and upgraded.\n     */\n    function upgradeNodesInRange(start: Node, end: Node | null) {\n      const nodes = [];\n      for (let node: Node = start; node !== end; node = node.nextSibling!) {\n        nodes.push(node);\n      }\n      for (let i = 0; i < nodes.length; i++) {\n        internals.patchAndUpgradeTree(nodes[i]);\n      }\n    }\n\n    destination.insertAdjacentHTML = function (this: Element, position, text) {\n      const strPosition = position.toLowerCase();\n\n      if (strPosition === 'beforebegin') {\n        const marker = this.previousSibling;\n        baseMethod.call(this, strPosition, text);\n        upgradeNodesInRange(marker || this.parentNode!.firstChild!, this);\n      } else if (strPosition === 'afterbegin') {\n        const marker = this.firstChild;\n        baseMethod.call(this, strPosition, text);\n        upgradeNodesInRange(this.firstChild!, marker);\n      } else if (strPosition === 'beforeend') {\n        const marker = this.lastChild;\n        baseMethod.call(this, strPosition, text);\n        upgradeNodesInRange(marker || this.firstChild!, null);\n      } else if (strPosition === 'afterend') {\n        const marker = this.nextSibling;\n        baseMethod.call(this, strPosition, text);\n        upgradeNodesInRange(this.nextSibling!, marker);\n      } else {\n        throw new SyntaxError(\n          `The value provided (${String(strPosition)}) is ` +\n            \"not one of 'beforebegin', 'afterbegin', 'beforeend', or 'afterend'.\"\n        );\n      }\n    };\n  }\n\n  if (Native.HTMLElement_insertAdjacentHTML) {\n    patch_insertAdjacentHTML(\n      HTMLElement.prototype,\n      Native.HTMLElement_insertAdjacentHTML\n    );\n  } else if (Native.Element_insertAdjacentHTML) {\n    patch_insertAdjacentHTML(\n      Element.prototype,\n      Native.Element_insertAdjacentHTML\n    );\n  }\n\n  PatchParentNode(internals, Element.prototype, {\n    prepend: Native.Element_prepend,\n    append: Native.Element_append,\n  });\n\n  PatchChildNode(internals, Element.prototype, {\n    before: Native.Element_before,\n    after: Native.Element_after,\n    replaceWith: Native.Element_replaceWith,\n    remove: Native.Element_remove,\n  });\n}\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * Represents the 'already constructed marker' used in custom\n * element construction stacks.\n *\n * https://html.spec.whatwg.org/#concept-already-constructed-marker\n */\nconst alreadyConstructedMarker = {} as {_alreadyConstructedMarker: never};\n\nexport default alreadyConstructedMarker;\nexport type AlreadyConstructedMarkerType = typeof alreadyConstructedMarker;\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nimport AlreadyConstructedMarker from '../AlreadyConstructedMarker.js';\nimport CustomElementInternals from '../CustomElementInternals.js';\nimport CEState from '../CustomElementState.js';\nimport * as Native from './Native.js';\n\nexport default function (internals: CustomElementInternals) {\n  const PatchedHTMLElement = function HTMLElement(this: HTMLElement) {\n    // This should really be `new.target` but `new.target` can't be\n    // emulated in ES5. Assuming the user keeps the default value of the\n    // constructor's prototype's `constructor` property, this is\n    // equivalent.\n    const constructor = this.constructor as {new (): HTMLElement};\n\n    // Always look up the definition from the global registry.\n    const registry = document.__CE_registry!;\n    const definition = registry.internal_constructorToDefinition(constructor);\n    if (!definition) {\n      throw new Error(\n        'Failed to construct a custom element: ' +\n          'The constructor was not registered with `customElements`.'\n      );\n    }\n\n    const constructionStack = definition.constructionStack;\n\n    if (constructionStack.length === 0) {\n      const element = Native.Document_createElement.call(\n        document,\n        definition.localName\n      ) as HTMLElement;\n      Object.setPrototypeOf(element, constructor.prototype as typeof element);\n      element.__CE_state = CEState.custom;\n      element.__CE_definition = definition;\n      internals.patchElement(element);\n      return element;\n    }\n\n    const lastIndex = constructionStack.length - 1;\n    const element = constructionStack[lastIndex];\n    if (element === AlreadyConstructedMarker) {\n      const localName = definition.localName;\n      throw new Error(\n        `Failed to construct '${localName}': ` +\n          'This element was already constructed.'\n      );\n    }\n    const toConstructElement = element as HTMLElement;\n    constructionStack[lastIndex] = AlreadyConstructedMarker;\n\n    Object.setPrototypeOf(\n      toConstructElement,\n      constructor.prototype as typeof toConstructElement\n    );\n    internals.patchElement(toConstructElement);\n\n    return toConstructElement;\n  };\n\n  PatchedHTMLElement.prototype = Native.HTMLElement.prototype;\n  // Safari 9 has `writable: false` on the propertyDescriptor\n  // Make it writable so that TypeScript can patch up the\n  // constructor in the ES5 compiled code.\n  Object.defineProperty(HTMLElement.prototype, 'constructor', {\n    writable: true,\n    configurable: true,\n    enumerable: false,\n    value: PatchedHTMLElement,\n  });\n\n  window['HTMLElement'] = (PatchedHTMLElement as unknown) as typeof HTMLElement;\n}\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nimport CustomElementInternals from '../CustomElementInternals.js';\nimport * as Utilities from '../Utilities.js';\n\nimport * as Native from './Native.js';\n\nexport default function (internals: CustomElementInternals) {\n  // `Node#nodeValue` is implemented on `Attr`.\n  // `Node#textContent` is implemented on `Attr`, `Element`.\n\n  Node.prototype.insertBefore = function <T extends Node>(\n    this: Node,\n    node: T,\n    refNode: Node | null\n  ) {\n    if (node instanceof DocumentFragment) {\n      const insertedNodes = Utilities.childrenFromFragment(node);\n      const nativeResult = Native.Node_insertBefore.call(this, node, refNode);\n\n      // DocumentFragments can't be connected, so `disconnectTree` will never\n      // need to be called on a DocumentFragment's children after inserting it.\n\n      if (Utilities.isConnected(this)) {\n        for (let i = 0; i < insertedNodes.length; i++) {\n          internals.connectTree(insertedNodes[i]);\n        }\n      }\n\n      return nativeResult as T;\n    }\n\n    const nodeWasConnectedElement =\n      node instanceof Element && Utilities.isConnected(node);\n    const nativeResult = Native.Node_insertBefore.call(\n      this,\n      node,\n      refNode\n    ) as T;\n\n    if (nodeWasConnectedElement) {\n      internals.disconnectTree(node);\n    }\n\n    if (Utilities.isConnected(this)) {\n      internals.connectTree(node);\n    }\n\n    return nativeResult;\n  };\n\n  Node.prototype.appendChild = function <T extends Node>(this: Node, node: T) {\n    if (node instanceof DocumentFragment) {\n      const insertedNodes = Utilities.childrenFromFragment(node);\n      const nativeResult = Native.Node_appendChild.call(this, node) as T;\n\n      // DocumentFragments can't be connected, so `disconnectTree` will never\n      // need to be called on a DocumentFragment's children after inserting it.\n\n      if (Utilities.isConnected(this)) {\n        for (let i = 0; i < insertedNodes.length; i++) {\n          internals.connectTree(insertedNodes[i]);\n        }\n      }\n\n      return nativeResult;\n    }\n\n    const nodeWasConnectedElement =\n      node instanceof Element && Utilities.isConnected(node);\n    const nativeResult = Native.Node_appendChild.call(this, node) as T;\n\n    if (nodeWasConnectedElement) {\n      internals.disconnectTree(node);\n    }\n\n    if (Utilities.isConnected(this)) {\n      internals.connectTree(node);\n    }\n\n    return nativeResult;\n  };\n\n  Node.prototype.cloneNode = function (this: Node, deep) {\n    const clone = Native.Node_cloneNode.call(this, !!deep);\n    // Only create custom elements if this element's owner document is\n    // associated with the registry.\n    if (!this.ownerDocument!.__CE_registry) {\n      internals.patchTree(clone);\n    } else {\n      internals.patchAndUpgradeTree(clone);\n    }\n    return clone;\n  };\n\n  Node.prototype.removeChild = function <T extends Node>(this: Node, node: T) {\n    const nodeWasConnectedElement =\n      node instanceof Element && Utilities.isConnected(node);\n    const nativeResult = Native.Node_removeChild.call(this, node) as T;\n\n    if (nodeWasConnectedElement) {\n      internals.disconnectTree(node);\n    }\n\n    return nativeResult;\n  };\n\n  Node.prototype.replaceChild = function <T extends Node>(\n    this: Node,\n    nodeToInsert: Node,\n    nodeToRemove: T\n  ) {\n    if (nodeToInsert instanceof DocumentFragment) {\n      const insertedNodes = Utilities.childrenFromFragment(nodeToInsert);\n      const nativeResult = Native.Node_replaceChild.call(\n        this,\n        nodeToInsert,\n        nodeToRemove\n      ) as T;\n\n      // DocumentFragments can't be connected, so `disconnectTree` will never\n      // need to be called on a DocumentFragment's children after inserting it.\n\n      if (Utilities.isConnected(this)) {\n        internals.disconnectTree(nodeToRemove);\n        for (let i = 0; i < insertedNodes.length; i++) {\n          internals.connectTree(insertedNodes[i]);\n        }\n      }\n\n      return nativeResult;\n    }\n\n    const nodeToInsertWasConnectedElement =\n      nodeToInsert instanceof Element && Utilities.isConnected(nodeToInsert);\n    const nativeResult = Native.Node_replaceChild.call(\n      this,\n      nodeToInsert,\n      nodeToRemove\n    ) as T;\n    const thisIsConnected = Utilities.isConnected(this);\n\n    if (thisIsConnected) {\n      internals.disconnectTree(nodeToRemove);\n    }\n\n    if (nodeToInsertWasConnectedElement) {\n      internals.disconnectTree(nodeToInsert);\n    }\n\n    if (thisIsConnected) {\n      internals.connectTree(nodeToInsert);\n    }\n\n    return nativeResult;\n  };\n\n  function patch_textContent(\n    destination: Node,\n    baseDescriptor: PropertyDescriptor\n  ) {\n    Object.defineProperty(destination, 'textContent', {\n      enumerable: baseDescriptor.enumerable,\n      configurable: true,\n      get: baseDescriptor.get,\n      set: function (this: Node, assignedValue) {\n        // If this is a text node then there are no nodes to disconnect.\n        if (this.nodeType === Node.TEXT_NODE) {\n          baseDescriptor.set!.call(this, assignedValue);\n          return;\n        }\n\n        let removedNodes = undefined;\n        // Checking for `firstChild` is faster than reading `childNodes.length`\n        // to compare with 0.\n        if (this.firstChild) {\n          // Using `childNodes` is faster than `children`, even though we only\n          // care about elements.\n          const childNodes = this.childNodes;\n          const childNodesLength = childNodes.length;\n          if (childNodesLength > 0 && Utilities.isConnected(this)) {\n            // Copying an array by iterating is faster than using slice.\n            removedNodes = new Array(childNodesLength);\n            for (let i = 0; i < childNodesLength; i++) {\n              removedNodes[i] = childNodes[i];\n            }\n          }\n        }\n\n        baseDescriptor.set!.call(this, assignedValue);\n\n        if (removedNodes) {\n          for (let i = 0; i < removedNodes.length; i++) {\n            internals.disconnectTree(removedNodes[i]);\n          }\n        }\n      },\n    });\n  }\n\n  if (Native.Node_textContent && Native.Node_textContent.get) {\n    patch_textContent(Node.prototype, Native.Node_textContent);\n  } else {\n    internals.addNodePatch(function (element) {\n      patch_textContent(element, {\n        enumerable: true,\n        configurable: true,\n        // NOTE: This implementation of the `textContent` getter assumes that\n        // text nodes' `textContent` getter will not be patched.\n        get: function (this: Node) {\n          const parts: Array<string | null> = [];\n\n          for (let n = this.firstChild; n; n = n.nextSibling) {\n            if (n.nodeType === Node.COMMENT_NODE) {\n              continue;\n            }\n            parts.push(n.textContent);\n          }\n\n          return parts.join('');\n        },\n        set: function (this: Node, assignedValue) {\n          while (this.firstChild) {\n            Native.Node_removeChild.call(this, this.firstChild);\n          }\n          // `textContent = null | undefined | ''` does not result in\n          // a TextNode childNode\n          if (assignedValue != null && assignedValue !== '') {\n            Native.Node_appendChild.call(\n              this,\n              document.createTextNode(assignedValue)\n            );\n          }\n        },\n      });\n    });\n  }\n}\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nimport CustomElementInternals from '../CustomElementInternals.js';\n\nimport PatchParentNode from './Interface/ParentNode.js';\nimport * as Native from './Native.js';\n\nexport default function (internals: CustomElementInternals) {\n  PatchParentNode(internals, DocumentFragment.prototype, {\n    prepend: Native.DocumentFragment_prepend,\n    append: Native.DocumentFragment_append,\n  });\n}\n"],"names":["n","window","Document","prototype","createElement","p","createElementNS","aa","importNode","ba","prepend","ca","append","da","DocumentFragment","ea","q","Node","cloneNode","r","appendChild","t","insertBefore","u","removeChild","v","replaceChild","w","Object","getOwnPropertyDescriptor","y","Element","attachShadow","z","A","getAttribute","B","setAttribute","C","removeAttribute","D","toggleAttribute","E","getAttributeNS","F","setAttributeNS","G","removeAttributeNS","H","insertAdjacentElement","fa","insertAdjacentHTML","ha","ia","ja","before","ka","after","la","replaceWith","ma","remove","na","HTMLElement","I","oa","pa","qa","Set","split","forEach","a","add","ra","isValidCustomElementName","b","has","test","sa","document","contains","bind","documentElement","J","isConnected","__CE_isImportDocument","parentNode","ShadowRoot","host","K","childrenFromFragment","children","Array","slice","call","firstChild","nextSibling","nodeType","ELEMENT_NODE","push","L","nextSiblingOrAncestorSibling","M","walkDeepDescendantElements","d","f","c","e","localName","__CE_shadowRoot","N","CustomElementInternals","O","noDocumentConstructionObserver","shadyDomFastWalk","m","g","j","P","ShadyDOM","inUse","querySelectorAll","nativeMethods","length","ta","ua","Q","R","__CE_patched","S","__CE_state","connectedCallback","T","U","disconnectedCallback","V","upgrade","h","__CE_registry","readyState","__CE_documentLoadHandled","addEventListener","k","l","ownerDocument","defaultView","W","constructionStack","constructorFunction","Error","pop","__CE_definition","attributeChangedCallback","hasAttributes","observedAttributes","X","indexOf","va","namespaceURI","setPrototypeOf","HTMLUnknownElement","message","sourceURL","fileName","line","lineNumber","column","columnNumber","String","ErrorEvent","initErrorEvent","cancelable","filename","lineno","colno","error","createEvent","preventDefault","defineProperty","configurable","get","enumerable","dispatchEvent","defaultPrevented","console","wa","Deferred","Promise","resolve","xa","DocumentConstructionObserver","MutationObserver","observe","childList","subtree","ya","disconnect","addedNodes","Y","CustomElementRegistry","s","Map","o","i","Function","TypeError","za","set","Aa","define","Ba","SyntaxError","x","adoptedCallback","whenDefined","reject","polyfillWrapFlushCallback","polyfillDefineLazy","Z","appendPrependPatch","arguments","apply","Ca","Da","beforeAfterPatch","Ea","patch_innerHTML","patch_insertAdjacentElement","patch_insertAdjacentHTML","upgradeNodesInRange","toLowerCase","previousSibling","lastChild","innerHTML","content","childNodes","Fa","Ga","constructor","writable","value","Ha","patch_textContent","TEXT_NODE","COMMENT_NODE","textContent","join","createTextNode","customElements","Ia","installPolyfill","forcePolyfill","__CE_installPolyfill"],"sourceRoot":""}