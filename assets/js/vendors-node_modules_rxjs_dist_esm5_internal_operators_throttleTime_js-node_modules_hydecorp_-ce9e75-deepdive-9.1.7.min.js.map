{"version":3,"file":"vendors-node_modules_rxjs_dist_esm5_internal_operators_throttleTime_js-node_modules_hydecorp_-ce9e75-deepdive-9.1.7.min.js","mappings":"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","sources":["webpack://deepdive/../../../../src/internal/observable/combineLatest.ts","webpack://deepdive/../../../../src/internal/operators/repeatWhen.ts","webpack://deepdive/../../../../src/internal/operators/sample.ts","webpack://deepdive/../../../../src/internal/operators/skip.ts","webpack://deepdive/../../../../src/internal/operators/skipWhile.ts","webpack://deepdive/../../../../src/internal/operators/throttle.ts","webpack://deepdive/../../../../src/internal/operators/throttleTime.ts","webpack://deepdive/../../../../src/internal/operators/timestamp.ts","webpack://deepdive/../../../../src/internal/util/argsArgArrayOrObject.ts","webpack://deepdive/../../../../src/internal/util/createObject.ts","webpack://deepdive/../src/calc.ts","webpack://deepdive/../src/common.ts","webpack://deepdive/../src/constants.ts","webpack://deepdive/../src/index.ts","webpack://deepdive/../src/observables.ts","webpack://deepdive/../src/styles.ts","webpack://deepdive/../src/update.ts","webpack://deepdive/../src/directives/class-map.ts","webpack://deepdive/../src/directives/style-map.ts"],"sourcesContent":[null,null,null,null,null,null,null,null,null,null,"import { VELOCITY_THRESHOLD } from \"./constants\";\n\nimport { Coord } from './observables';\n\n// Using shorthands for common functions\nconst min = Math.min.bind(Math);\nconst max = Math.max.bind(Math);\n\nexport class CalcMixin {\n  side!: 'left' | 'right';\n  range!: [number, number];\n\n  calcIsInRange({ clientX }: Coord, opened: boolean) {\n    // console.log(this.range, this.align);\n    switch (this.side) {\n      case \"left\": {\n        const [lower, upper] = this.range;\n        return clientX > lower && (opened || clientX < upper);\n      }\n      case \"right\": {\n        const upper = window.innerWidth - this.range[0];\n        const lower = window.innerWidth - this.range[1];\n        return clientX < upper && (opened || clientX > lower);\n      }\n      default:\n        throw Error();\n    }\n  }\n\n  calcIsSwipe({ clientX: startX }: Coord, { clientX: endX }: Coord, translateX: number, drawerWidth: number, _: number): boolean {\n    return endX !== startX || (translateX > 0 && translateX < drawerWidth);\n  }\n\n  calcWillOpen(_: {}, __: {}, translateX: number, drawerWidth: number, velocity: number): boolean {\n    switch (this.side) {\n      case \"left\": {\n        if (velocity > VELOCITY_THRESHOLD) return true;\n        else if (velocity < -VELOCITY_THRESHOLD) return false;\n        else if (translateX >= drawerWidth / 2) return true;\n        else return false;\n      }\n      case \"right\": {\n        if (-velocity > VELOCITY_THRESHOLD) return true;\n        else if (-velocity < -VELOCITY_THRESHOLD) return false;\n        else if (translateX <= -drawerWidth / 2) return true;\n        else return false;\n      }\n      default:\n        throw Error();\n    }\n  }\n\n  calcTranslateX({ clientX: moveX }: Coord, { clientX: startX }: Coord, startTranslateX: number, drawerWidth: number): number {\n    switch (this.side) {\n      case \"left\": {\n        const deltaX = moveX - startX;\n        const translateX = startTranslateX + deltaX;\n        return max(0, min(drawerWidth, translateX));\n      }\n      case \"right\": {\n        const deltaX = moveX - startX;\n        const translateX = startTranslateX + deltaX;\n        return min(0, max(-drawerWidth, translateX));\n      }\n      default:\n        throw Error();\n    }\n  }\n};","import { of } from \"rxjs\";\nimport { map } from \"rxjs/operators\";\nimport { createResizeObservable } from '@hydecorp/component';\nimport { ComplexAttributeConverter } from \"lit-element\";\n\nexport { applyMixins, subscribeWhen, filterWhen, tween } from '@hydecorp/component';\n\nexport function easeOutSine(t: number, b: number, c: number, d: number) {\n  return c * Math.sin((t / d) * (Math.PI / 2)) + b;\n}\n\nexport function observeWidth(el: HTMLElement) {\n  // This component should have at least basic support without `ResizeObserver` support,\n  // so we pass a one-time measurement when it's missing. Obviously this won't update, so BYO polyfill.\n  const resize$ = \"ResizeObserver\" in window\n    ? createResizeObservable(el)\n    : of({ contentRect: { width: el.clientWidth }});\n  return resize$.pipe(map(({ contentRect: { width } }) => width));\n}\n\nexport const rangeConverter: ComplexAttributeConverter<number[]> = {\n  fromAttribute(attr) {\n    return (attr ?? '').replace(/[\\[\\]]/g, '')\n      .split(',')\n      .map(Number);\n  },\n\n  toAttribute(range) {\n    return range.join(',');\n  },\n};\n\nexport function rangeHasChanged(curr: number[], prev: number[] = []) {\n  return curr.length !== prev.length || curr.some((v, i) => v !== prev[i]);\n}\n","// The base duration of the fling animation.\nexport const BASE_DURATION = 200;\n\n// We adjust the duration of the animation using the width of the drawer.\n// There is no physics to this, but we know from testing that the animation starts to feel bad\n// when the drawer increases in size.\n// From testing we know that, if we increase the duration as a fraction of the drawer width,\n// the animation stays smooth across common display sizes.\nexport const WIDTH_CONTRIBUTION = 0.15;\n\n// Minimum velocity of the drawer (in px/ms) when releasing to make it fling to opened/closed state.\nexport const VELOCITY_THRESHOLD = 0.15;\n","/** \n * Copyright (c) 2020 Florian Klampfer <https://qwtel.com/>\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n * \n * @license \n * @nocompile\n */\nimport { html, property, customElement, query } from 'lit-element';\nimport { classMap } from 'lit-html/directives/class-map';\nimport { styleMap } from 'lit-html/directives/style-map';\n\nimport { Observable, Subject, BehaviorSubject, combineLatest, merge, NEVER, defer, fromEvent } from \"rxjs\";\nimport { startWith, takeUntil, map, share, withLatestFrom, tap, sample, timestamp, pairwise, filter, switchMap, skip, finalize } from 'rxjs/operators';\n\nimport { RxLitElement, createResolvablePromise } from '@hydecorp/component';\n\nimport { BASE_DURATION, WIDTH_CONTRIBUTION } from './constants';\nimport { applyMixins, filterWhen, easeOutSine, observeWidth, rangeConverter, rangeHasChanged, tween } from './common';\nimport { ObservablesMixin, Coord } from './observables';\nimport { CalcMixin } from './calc';\nimport { UpdateMixin, DOMUpdater } from './update';\nimport { styles } from './styles';\n\n@customElement('hy-drawer')\nexport class HyDrawer \n    extends applyMixins(RxLitElement, [ObservablesMixin, UpdateMixin, CalcMixin])\n    implements ObservablesMixin, UpdateMixin, CalcMixin {\n\n  static styles = styles;\n\n  @query('.scrim') scrimEl!: HTMLElement;\n  @query('.wrapper') contentEl!: HTMLElement;\n  @query('.peek') peekEl!: HTMLElement;\n\n  @property({ type: Boolean, reflect: true }) opened: boolean = false;\n  @property({ type: String, reflect: true }) side: \"left\" | \"right\" = \"left\";\n  @property({ type: Boolean, reflect: true }) persistent: boolean = false;\n  @property({ type: Number, reflect: true }) threshold: number = 10;\n  @property({ type: Boolean, reflect: true }) noScroll: boolean = false;\n  @property({ type: Boolean, reflect: true }) mouseEvents: boolean = false;\n  // @property({ type: Boolean, reflect: true }) hashChange: boolean = false;\n  @property({ reflect: true, converter: rangeConverter, hasChanged: rangeHasChanged }) range: [number, number] = [0, 100];\n\n  // State\n  @property() scrimClickable!: boolean;\n  @property() grabbing!: boolean;\n  @property() willChange: boolean = false;\n\n  #initialized = createResolvablePromise();\n  get initialized() {\n    return this.#initialized;\n  }\n \n  // get histId() { return this.id || this.tagName; }\n  // get hashId() { return `#${this.histId}--opened`; }\n\n  translateX!: number;\n  opacity!: number;\n  isSliding!: boolean;\n\n  $!: {\n    opened: Subject<boolean>;\n    side: Subject<\"left\" | \"right\">;\n    persistent: Subject<boolean>;\n    preventDefault: Subject<boolean>;\n    mouseEvents: Subject<boolean>;\n    // hashChange: Subject<boolean>;\n  };\n\n  animateTo$!: Subject<boolean>;\n\n  // TODO: Prefer composition to mixins...\n  // ObservablesMixin\n  getStartObservable!: () => Observable<Coord>;\n  getMoveObservable!: (start: Observable<Coord>, end: Observable<Coord>) => Observable<Coord>;\n  getEndObservable!: () => Observable<Coord>;\n  getIsSlidingObservable!: (move: Observable<Coord>, start: Observable<Coord>, end: Observable<Coord>) => Observable<boolean>;\n  getIsSlidingObservableInner!: (move: Observable<Coord>, start: Observable<Coord>) => Observable<boolean>;\n\n  // CalcMixin\n  calcIsInRange!: (start: Coord, opened: boolean) => boolean;\n  calcIsSwipe!: (start: Coord, end: Coord, translateX: number, drawerWidth: number, _: number) => boolean;\n  calcWillOpen!: (start: {}, end: {}, translateX: number, drawerWidth: number, velocity: number) => boolean;\n  calcTranslateX!: (move: Coord, start: Coord, startTranslateX: number, drawerWidth: number) => number;\n\n  // UpdateMixin\n  updateDOM!: (translateX: number, drawerWidth: number) => void;\n  updater!: DOMUpdater;\n\n  // HyDrawer\n  getDrawerWidth(): Observable<number> {\n    const content$ = observeWidth(this.contentEl)\n      .pipe(tap(px => this.fireEvent('content-width-change', { detail: px })));\n    const peek$ = observeWidth(this.peekEl)\n      .pipe(tap(px => this.fireEvent('peek-width-change', { detail: px })));\n\n    return combineLatest([content$, peek$]).pipe(\n      // takeUntil(this.subjects.disconnect),\n      map(([contentWidth, peekWidth]) => contentWidth - peekWidth),\n      share(),\n    );\n  }\n\n  // private consolidateState() {\n  //   const hashOpened = location.hash === this.hashId;\n  //   const isReload = history.state && history.state[this.histId];\n  //   if (isReload) {\n  //     if (hashOpened !== this.opened) {\n  //       this.opened = hashOpened;\n  //     }\n  //   } else {\n  //     const url = new URL(location.href);\n  //     const newState = { ...history.state, [this.histId]: { backable: false } };\n  //     if (hashOpened && !this.opened) {\n  //       url.hash = '';\n  //       history.replaceState(newState, document.title, url.href);\n\n  //       url.hash = this.hashId;\n  //       history.pushState({ [this.histId]: { backable: true } }, document.title, url.href);\n\n  //       this.opened = true;\n  //     }\n  //     else if (!hashOpened && this.opened) {\n  //       history.replaceState(newState, document.title, url.href);\n\n  //       url.hash = this.hashId;\n  //       history.pushState({ [this.histId]: { backable: true } }, document.title, url.href);\n  //     }\n  //     else {\n  //       history.replaceState(newState, document.title, url.href);\n  //     }\n  //   }\n  // }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    // if (this.hashChange) this.consolidateState()\n\n    this.$ = {\n      opened: new BehaviorSubject(this.opened),\n      side: new BehaviorSubject(this.side),\n      persistent: new BehaviorSubject(this.persistent),\n      preventDefault: new BehaviorSubject(this.noScroll),\n      mouseEvents: new BehaviorSubject(this.mouseEvents),\n      // hashChange: new BehaviorSubject(this.hashChange),\n    };\n\n    this.scrimClickable = this.opened\n    this.animateTo$ = new Subject<boolean>();\n    this.updater = DOMUpdater.getUpdaterForPlatform(this);\n    this.updateComplete.then(this.upgrade);\n  }\n\n  #translateX$!: Observable<number>;\n  #startTranslateX$!: Observable<number>;\n  #tweenTranslateX$!: Observable<number>;\n\n  upgrade = () => {\n    const drawerWidth$ = this.getDrawerWidth();\n    const active$ = this.$.persistent.pipe(map(_ => !_));\n\n    const start$ = this.getStartObservable().pipe(\n      // takeUntil(this.subjects.disconnect),\n      filterWhen(active$),\n      share(),\n    );\n\n    const isScrimVisible$ = defer(() => {\n      return this.#translateX$.pipe(map(translateX => translateX !== 0))\n    });\n\n    const isInRange$ = start$.pipe(\n      withLatestFrom(isScrimVisible$),\n      map(args => this.calcIsInRange(...args)),\n      tap((inRange) => {\n        if (inRange) {\n          this.willChange = true;\n          this.fireEvent('prepare');\n        }\n      }),\n      share(),\n    );\n\n    const end$ = this.getEndObservable().pipe(\n      // takeUntil(this.subjects.disconnect),\n      filterWhen(active$, isInRange$),\n      tap(() => { if (this.mouseEvents) this.grabbing = false; }),\n      share(),\n    );\n\n    const move$ = this.getMoveObservable(start$, end$).pipe(\n      // takeUntil(this.subjects.disconnect),\n      filterWhen(active$, isInRange$),\n      share(),\n    );\n\n    const isSliding$ = this.getIsSlidingObservable(move$, start$, end$).pipe(\n      tap(isSliding => {\n        this.isSliding = isSliding;\n        if (isSliding && this.mouseEvents) this.grabbing = true;\n        // if (isSliding) this.fireEvent('slidestart', { detail: this.opened });\n      })\n    );\n\n    const translateX$ = this.#translateX$ = defer(() => {\n      const jumpTranslateX$ = combineLatest([this.$.opened, this.$.side, drawerWidth$]).pipe(\n        map(([opened, side, drawerWidth]) => {\n          return !opened ? 0 : drawerWidth * (side === \"left\" ? 1 : -1);\n        }),\n      );\n\n      const moveTranslateX$ = move$.pipe(\n        filterWhen(isSliding$),\n        tap(() => (this.scrimClickable = false)),\n        tap(({ event }) => event && this.noScroll && event.preventDefault()),\n        withLatestFrom(start$, this.#startTranslateX$, drawerWidth$),\n        map(args => this.calcTranslateX(...args))\n      );\n\n      return merge(this.#tweenTranslateX$, jumpTranslateX$, moveTranslateX$);\n    }).pipe(share());\n\n    this.#startTranslateX$ = translateX$.pipe(sample(start$));\n\n    const velocity$ = translateX$.pipe(\n      timestamp(),\n      pairwise(),\n      filter(([{ timestamp: prevTime }, { timestamp: time }]) => time - prevTime > 0),\n      map(\n        ([{ value: prevX, timestamp: prevTime }, { value: x, timestamp: time }]) =>\n          (x - prevX) / (time - prevTime)\n      ),\n      startWith(0),\n    );\n\n    const willOpen$ = end$.pipe(\n      withLatestFrom(start$, translateX$, drawerWidth$, velocity$),\n      filter(args => this.calcIsSwipe(...args)),\n      map(args => this.calcWillOpen(...args)),\n      // TODO: only fire `slideend` event when slidestart fired as well?\n      // tap(willOpen => this.fireEvent('slideend', { detail: willOpen })),\n    );\n\n    const animateTo$ = this.animateTo$.pipe(tap(() => {\n      this.willChange = true;\n      this.fireEvent('prepare');\n    }));\n\n    this.#tweenTranslateX$ = merge(willOpen$, animateTo$).pipe(\n      withLatestFrom(translateX$, drawerWidth$),\n      switchMap(([willOpen, translateX, drawerWidth]) => {\n        const inv = this.side === \"left\" ? 1 : -1;\n        const endTranslateX = willOpen ? drawerWidth * inv : 0;\n        const diffTranslateX = endTranslateX - translateX;\n        const duration = Math.ceil(BASE_DURATION + drawerWidth * WIDTH_CONTRIBUTION);\n\n        return tween(easeOutSine, translateX, diffTranslateX, duration).pipe(\n          finalize(() => { this.transitioned(willOpen) }),\n          takeUntil(start$),\n          takeUntil(this.$.side.pipe(skip(1))),\n          share(),\n        );\n      })\n    );\n\n    translateX$.pipe(\n      withLatestFrom(drawerWidth$),\n      tap((args) => {\n        this.updateDOM(...args);\n        const { translateX, opacity } = this;\n        this.fireEvent('move', { detail: { translateX, opacity }, bubbles: false });\n      }),\n    ).subscribe();\n\n    fromEvent(this.scrimEl, \"click\").pipe(\n      // takeUntil(this.subjects.disconnect),\n      tap(() => this.close()),\n    ).subscribe();\n\n    active$.pipe(\n      // takeUntil(this.subjects.disconnect),\n      tap((active) => {\n        this.scrimEl.style.display = active ? \"block\" : \"none\";\n      }),\n    ).subscribe();\n\n    this.$.mouseEvents.pipe(\n      // takeUntil(this.subjects.disconnect),\n      switchMap(mouseEvents => {\n        return mouseEvents\n          ? start$.pipe(withLatestFrom(isInRange$))\n          : NEVER;\n      }),\n      filter(([coord, isInRange]) => isInRange && coord.event != null),\n      tap(([{ event }]) => event && event.preventDefault()),\n    ).subscribe();\n\n    // fromEvent(window, 'hashchange').pipe(\n    //   // takeUntil(this.subjects.disconnect),\n    //   subscribeWhen(this.$.hashChange),\n    //   tap(() => {\n    //     const opened = location.hash === this.hashId;\n    //     if (!history.state && opened) {\n    //       history.replaceState({ [this.histId]: { backable: true } }, document.title)\n    //     }\n\n    //     // If the state doesn't match open/close the drawer\n    //     if (opened !== this.opened) this.animateTo$.next(opened);\n    //   }),\n    // ).subscribe();\n\n    this.fireEvent(\"init\", { detail: this.opened });\n    this.#initialized.resolve(this);\n  }\n\n  private transitioned = (hasOpened: boolean) => {\n    this.opened = this.scrimClickable = hasOpened;\n    this.willChange = false;\n\n    // if (this.hashChange) this.transitionedHash(hasOpened)\n\n    this.fireEvent('transitioned', { detail: hasOpened });\n  }\n\n  // private transitionedHash(hasOpened: boolean) {\n  //   const hasClosed = !hasOpened;\n  //   const { backable } = history.state && history.state[this.histId] || { backable: false }\n  //   if (hasClosed && backable) {\n  //     history.back()\n  //   } \n  //   if (hasOpened && location.hash !== this.hashId) {\n  //     location.hash = this.hashId;\n  //   }\n  // }\n\n  render() {\n    return html`\n      <div class=\"peek full-height\"></div>\n      <div\n        class=\"scrim\"\n        style=${styleMap({\n          willChange: this.willChange ? 'opacity' : '',\n          pointerEvents: this.scrimClickable ? 'all' : '',\n        })}>\n      </div>\n      ${this.mouseEvents && this.grabbing && !this.scrimClickable \n        ? html`<div class=\"grabbing-screen full-screen\"></div>` \n        : null}\n      <div\n        class=${classMap({\n          wrapper: true,\n          'full-height': true,\n          [this.side]: true,\n          grab: this.mouseEvents,\n          grabbing: this.mouseEvents && this.grabbing,\n        })}\n        style=${styleMap({ \n          willChange: this.willChange ? 'transform' : '',\n        })}\n      >\n        <div class=\"overflow\">\n          <slot></slot>\n        </div>\n      </div>\n    `;\n  }\n\n  @property()\n  open() {\n    this.animateTo$.next(true);\n  }\n\n  @property()\n  close() {\n    this.animateTo$.next(false);\n  }\n\n  @property()\n  toggle() {\n    this.animateTo$.next(!this.opened);\n  }\n}\n","import { Observable, combineLatest, fromEvent, merge, NEVER, ObservedValueOf } from \"rxjs\";\n\nimport {\n  // tap,\n  filter,\n  map,\n  mapTo,\n  repeatWhen,\n  skipWhile,\n  startWith,\n  switchMap,\n  take,\n  withLatestFrom,\n} from \"rxjs/operators\";\n\nimport { subscribeWhen } from \"./common\";\n\nconst abs = Math.abs.bind(Math);\n\nexport type Coord = {\n  readonly target: EventTarget;\n  readonly clientX: number;\n  readonly clientY: number;\n  readonly pageX: number;\n  readonly pageY: number;\n  readonly screenX: number;\n  readonly screenY: number;\n  event?: Event;\n}\n\nexport class ObservablesMixin {\n  $!: {\n    mouseEvents: Observable<boolean>;\n    preventDefault: Observable<boolean>;\n  }\n\n  threshold!: number;\n  noScroll!: boolean;\n\n  getStartObservable() {\n    return combineLatest([this.$.mouseEvents]).pipe(\n      switchMap(([mouseEvents]) => {\n        const touchstart$ = (<Observable<TouchEvent>>fromEvent(document, \"touchstart\", { passive: true })).pipe(\n          filter(({ touches }) => touches.length === 1),\n          map(({ touches }) => touches[0] as Coord)\n        );\n\n        const mousedown$ = !mouseEvents\n          ? NEVER\n          : (<Observable<MouseEvent>>fromEvent(document, \"mousedown\")).pipe(\n            map((e) => (((e as Coord).event = e), e as Coord)),\n          );\n\n        return merge(touchstart$, mousedown$);\n      })\n    );\n  }\n\n  getMoveObservable(start$: Observable<Coord>, end$: Observable<Coord>) {\n    return combineLatest([this.$.mouseEvents, this.$.preventDefault]).pipe(\n      switchMap(([mouseEvents, preventDefault]) => {\n        const touchmove$ = (<Observable<TouchEvent>>fromEvent(document, \"touchmove\", { passive: !preventDefault })).pipe(\n          map(e => (((e.touches[0] as Coord).event = e), e.touches[0] as Coord))\n        );\n\n        const mousemove$ = !mouseEvents\n          ? NEVER\n          : (<Observable<MouseEvent>>fromEvent(document, \"mousemove\", { passive: !preventDefault })).pipe(\n            subscribeWhen(merge(start$.pipe(mapTo(true)), end$.pipe(mapTo(false)))),\n            map(e => (((e as Coord).event = e), e as Coord))\n          );\n\n        return merge(touchmove$, mousemove$);\n      })\n    );\n  }\n\n  getEndObservable() {\n    return combineLatest([this.$.mouseEvents]).pipe(\n      switchMap(([mouseEvents]) => {\n        const touchend$ = (<Observable<TouchEvent>>fromEvent(document, \"touchend\", { passive: true })).pipe(\n          filter(({ touches }) => touches.length === 0),\n          map(event => event.changedTouches[0] as Coord)\n        );\n\n        const mouseup$ = !mouseEvents\n          ? NEVER\n          : (<Observable<MouseEvent>>fromEvent(document, \"mouseup\", { passive: true })).pipe(\n            map(e => (((e as Coord).event = e), e as Coord)),\n          );\n\n        return merge(touchend$, mouseup$);\n      })\n    );\n  }\n\n  getIsSlidingObservable(move$: Observable<Coord>, start$: Observable<Coord>, end$: Observable<Coord>) {\n    return this.getIsSlidingObservableInner(move$, start$).pipe(\n      take(1),\n      startWith(undefined),\n      repeatWhen(() => end$)\n    );\n  }\n\n  getIsSlidingObservableInner(move$: Observable<Coord>, start$: Observable<Coord>) {\n    if (this.threshold) {\n      return move$.pipe(\n        withLatestFrom(start$),\n        skipWhile(\n          ([{ clientX, clientY }, { clientX: startX, clientY: startY }]) =>\n            abs(startY - clientY) < this.threshold && abs(startX - clientX) < this.threshold\n        ),\n        map(\n          ([{ clientX, clientY }, { clientX: startX, clientY: startY }]) =>\n            abs(startX - clientX) >= abs(startY - clientY)\n        )\n      );\n    } else {\n      return move$.pipe(\n        withLatestFrom(start$),\n        map(([{ clientX, clientY, event }, { clientX: startX, clientY: startY }]) => {\n          const isSliding = abs(startX - clientX) >= abs(startY - clientY);\n          if (this.noScroll && isSliding && event) event.preventDefault();\n          return isSliding;\n        })\n      );\n    }\n  }\n}\n","import { css } from 'lit-element';\n\nexport const styles = css`\n  @media screen {\n    :host {\n      touch-action: pan-x;\n    }\n\n    .full-screen {\n      position: fixed;\n      top: 0;\n      left: 0;\n      height: 100vh;\n      width: 100vw;\n    }\n\n    .full-height {\n      position: fixed;\n      top: 0;\n      height: 100vh;\n    }\n\n    .peek {\n      left: 0;\n      width: var(--hy-drawer-peek-width, 0px);\n      visibility: hidden;\n      z-index: calc(var(--hy-drawer-z-index, 100) - 1);\n    }\n\n    .scrim {\n      position: fixed;\n      top: 0;\n      left: 0;\n      height: 10vh;\n      width: 10vw;\n      transform: scale(10);\n      transform-origin: top left;\n      opacity: 0;\n      pointer-events: none;\n      background: var(--hy-drawer-scrim-background, rgba(0, 0, 0, 0.5));\n      z-index: var(--hy-drawer-z-index, 100);\n      -webkit-tap-highlight-color: transparent;\n    }\n\n    .range {\n      position: fixed;\n      top: 0;\n      height: 100vh;\n      z-index: calc(var(--hy-drawer-z-index, 100) + 1);\n    }\n\n    .grabbing-screen {\n      cursor: grabbing;\n      z-index: calc(var(--hy-drawer-z-index, 100) + 2);\n    }\n\n    .wrapper {\n      width: var(--hy-drawer-width, 300px);\n      background: var(--hy-drawer-background, inherit);\n      box-shadow: var(--hy-drawer-box-shadow, 0 0 15px rgba(0, 0, 0, 0.25));\n      z-index: calc(var(--hy-drawer-z-index, 100) + 3);\n      contain: strict;\n    }\n\n    .wrapper.left {\n      left:  calc(-1 * var(--hy-drawer-width, 300px) + var(--hy-drawer-peek-width, 0px));\n    }\n\n    .wrapper.right {\n      right:  calc(-1 * var(--hy-drawer-width, 300px) + var(--hy-drawer-peek-width, 0px));\n    }\n\n    .wrapper > .overflow {\n      position: absolute;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      left: 0;\n      overflow-x: hidden;\n      overflow-y: auto;\n      overscroll-behavior: contain;\n      -webkit-overflow-scrolling: touch;\n    }\n\n    .grab {\n      cursor: move;\n      cursor: grab;\n    }\n\n    .grabbing {\n      cursor: grabbing;\n    }\n  }\n\n  @media print {\n    .scrim {\n      display: none !important;\n    }\n\n    .wrapper {\n      transform: none !important;\n    }\n  }\n`;","export type CallbackValue = { translateX: number, opacity: number };\n\nexport class UpdateMixin {\n  contentEl!: HTMLElement;\n  scrimEl!: HTMLElement;\n\n  translateX!: number;\n  side!: string;\n  opacity!: number;\n\n  updater!: DOMUpdater;\n\n  updateDOM(translateX: number, drawerWidth: number) {\n    const inv = this.side === \"left\" ? 1 : -1;\n    const opacity = (translateX / drawerWidth) * inv || 0;\n\n    this.translateX = translateX;\n    this.opacity = opacity;\n\n    this.updater.updateDOM(translateX, opacity);\n  }\n}\n\nexport abstract class DOMUpdater {\n  static getUpdaterForPlatform(parent: UpdateMixin) {\n    const hasCSSOM = \"attributeStyleMap\" in Element.prototype && \"CSS\" in window && \"number\" in CSS;\n    return hasCSSOM\n      ? new AttributeStyleMapUpdater(parent)\n      : new StyleUpdater(parent);\n  }\n\n  private parent: UpdateMixin;\n  constructor(parent: UpdateMixin) {\n    this.parent = parent;\n  }\n  get contentEl() { return this.parent.contentEl }\n  get scrimEl() { return this.parent.scrimEl }\n\n  abstract updateDOM(translateX: number, opacity: number): void;\n}\n\nexport class StyleUpdater extends DOMUpdater {\n  constructor(parent: UpdateMixin) { super(parent); }\n\n  updateDOM(translateX: number, opacity: number) {\n    this.contentEl.style.transform = `translate(${translateX}px, 0px)`;\n    this.scrimEl.style.opacity = `${opacity}`;\n  }\n}\n\nexport class AttributeStyleMapUpdater extends DOMUpdater {\n  private tvalue: CSSTransformValue;\n  private ovalue: CSSUnitValue;\n\n  constructor(parent: UpdateMixin) {\n    super(parent);\n    this.tvalue = new CSSTransformValue([new CSSTranslate(CSS.px(0), CSS.px(0))]);\n    this.ovalue = CSS.number(1);\n  }\n\n  updateDOM(translateX: number, opacity: number) {\n    ((this.tvalue[0] as CSSTranslate).x as CSSUnitValue).value = translateX;\n    this.ovalue.value = opacity;\n\n    this.contentEl.attributeStyleMap.set(\"transform\", this.tvalue);\n    this.scrimEl.attributeStyleMap.set(\"opacity\", this.ovalue);\n  }\n}","/**\n * @license\n * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\nimport {AttributePart, directive, Part, PropertyPart} from '../lit-html.js';\n\n// IE11 doesn't support classList on SVG elements, so we emulate it with a Set\nclass ClassList {\n  element: Element;\n  classes: Set<string> = new Set();\n  changed = false;\n\n  constructor(element: Element) {\n    this.element = element;\n    const classList = (element.getAttribute('class') || '').split(/\\s+/);\n    for (const cls of classList) {\n      this.classes.add(cls);\n    }\n  }\n  add(cls: string) {\n    this.classes.add(cls);\n    this.changed = true;\n  }\n\n  remove(cls: string) {\n    this.classes.delete(cls);\n    this.changed = true;\n  }\n\n  commit() {\n    if (this.changed) {\n      let classString = '';\n      this.classes.forEach((cls) => classString += cls + ' ');\n      this.element.setAttribute('class', classString);\n    }\n  }\n}\n\nexport interface ClassInfo {\n  readonly [name: string]: string|boolean|number;\n}\n\n/**\n * Stores the ClassInfo object applied to a given AttributePart.\n * Used to unset existing values when a new ClassInfo object is applied.\n */\nconst previousClassesCache = new WeakMap<Part, Set<string>>();\n\n/**\n * A directive that applies CSS classes. This must be used in the `class`\n * attribute and must be the only part used in the attribute. It takes each\n * property in the `classInfo` argument and adds the property name to the\n * element's `class` if the property value is truthy; if the property value is\n * falsey, the property name is removed from the element's `class`. For example\n * `{foo: bar}` applies the class `foo` if the value of `bar` is truthy.\n * @param classInfo {ClassInfo}\n */\nexport const classMap = directive((classInfo: ClassInfo) => (part: Part) => {\n  if (!(part instanceof AttributePart) || (part instanceof PropertyPart) ||\n      part.committer.name !== 'class' || part.committer.parts.length > 1) {\n    throw new Error(\n        'The `classMap` directive must be used in the `class` attribute ' +\n        'and must be the only part in the attribute.');\n  }\n\n  const {committer} = part;\n  const {element} = committer;\n\n  let previousClasses = previousClassesCache.get(part);\n  if (previousClasses === undefined) {\n    // Write static classes once\n    // Use setAttribute() because className isn't a string on SVG elements\n    element.setAttribute('class', committer.strings.join(' '));\n    previousClassesCache.set(part, previousClasses = new Set());\n  }\n\n  const classList =\n      (element.classList || new ClassList(element)) as DOMTokenList | ClassList;\n\n  // Remove old classes that no longer apply\n  // We use forEach() instead of for-of so that re don't require down-level\n  // iteration.\n  previousClasses.forEach((name) => {\n    if (!(name in classInfo)) {\n      classList.remove(name);\n      previousClasses!.delete(name);\n    }\n  });\n\n  // Add or remove classes based on their classMap value\n  for (const name in classInfo) {\n    const value = classInfo[name];\n    if (value != previousClasses.has(name)) {\n      // We explicitly want a loose truthy check of `value` because it seems\n      // more convenient that '' and 0 are skipped.\n      if (value) {\n        classList.add(name);\n        previousClasses.add(name);\n      } else {\n        classList.remove(name);\n        previousClasses.delete(name);\n      }\n    }\n  }\n  if (typeof (classList as ClassList).commit === 'function') {\n    (classList as ClassList).commit();\n  }\n});\n","/**\n * @license\n * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\nimport {AttributePart, directive, Part, PropertyPart} from '../lit-html.js';\n\nexport interface StyleInfo {\n  readonly [name: string]: string;\n}\n\n/**\n * Stores the StyleInfo object applied to a given AttributePart.\n * Used to unset existing values when a new StyleInfo object is applied.\n */\nconst previousStylePropertyCache = new WeakMap<AttributePart, Set<string>>();\n\n/**\n * A directive that applies CSS properties to an element.\n *\n * `styleMap` can only be used in the `style` attribute and must be the only\n * expression in the attribute. It takes the property names in the `styleInfo`\n * object and adds the property values as CSS properties. Property names with\n * dashes (`-`) are assumed to be valid CSS property names and set on the\n * element's style object using `setProperty()`. Names without dashes are\n * assumed to be camelCased JavaScript property names and set on the element's\n * style object using property assignment, allowing the style object to\n * translate JavaScript-style names to CSS property names.\n *\n * For example `styleMap({backgroundColor: 'red', 'border-top': '5px', '--size':\n * '0'})` sets the `background-color`, `border-top` and `--size` properties.\n *\n * @param styleInfo {StyleInfo}\n */\nexport const styleMap = directive((styleInfo: StyleInfo) => (part: Part) => {\n  if (!(part instanceof AttributePart) || (part instanceof PropertyPart) ||\n      part.committer.name !== 'style' || part.committer.parts.length > 1) {\n    throw new Error(\n        'The `styleMap` directive must be used in the style attribute ' +\n        'and must be the only part in the attribute.');\n  }\n\n  const {committer} = part;\n  const {style} = committer.element as HTMLElement;\n\n  let previousStyleProperties = previousStylePropertyCache.get(part);\n\n  if (previousStyleProperties === undefined) {\n    // Write static styles once\n    style.cssText = committer.strings.join(' ');\n    previousStylePropertyCache.set(part, previousStyleProperties = new Set());\n  }\n\n  // Remove old properties that no longer exist in styleInfo\n  // We use forEach() instead of for-of so that re don't require down-level\n  // iteration.\n  previousStyleProperties.forEach((name) => {\n    if (!(name in styleInfo)) {\n      previousStyleProperties!.delete(name);\n      if (name.indexOf('-') === -1) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        (style as any)[name] = null;\n      } else {\n        style.removeProperty(name);\n      }\n    }\n  });\n\n  // Add or update properties\n  for (const name in styleInfo) {\n    previousStyleProperties.add(name);\n    if (name.indexOf('-') === -1) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      (style as any)[name] = styleInfo[name];\n    } else {\n      style.setProperty(name, styleInfo[name]);\n    }\n  }\n});\n"],"names":["Observable","argsArgArrayOrObject","from","identity","mapOneOrManyArgs","popResultSelector","popScheduler","createObject","createOperatorSubscriber","executeSchedule","combineLatest","args","_i","arguments","length","scheduler","resultSelector","_a","observables","keys","result","combineLatestInit","values","pipe","valueTransform","subscriber","maybeSchedule","Array","active","remainingFirstValues","i","source","hasFirstValue","subscribe","value","next","slice","complete","execute","subscription","innerFrom","Subject","operate","repeatWhen","notifier","innerSub","syncResub","completions$","isNotifierComplete","isMainComplete","checkComplete","getCompletionSubject","subscribeForRepeatWhen","undefined","unsubscribe","noop","sample","hasValue","lastValue","filter","skip","count","_","index","skipWhile","predicate","taking","defaultThrottleConfig","leading","trailing","throttle","durationSelector","config","sendValue","throttled","isComplete","endThrottling","send","cleanupThrottling","startThrottle","closed","asyncScheduler","timer","throttleTime","duration","duration$","dateTimestampProvider","map","timestamp","timestampProvider","now","isArray","getPrototypeOf","Object","objectProto","prototype","getKeys","first_1","isPOJO","key","obj","reduce","VELOCITY_THRESHOLD","min","Math","bind","max","CalcMixin","calcIsInRange","_ref","opened","clientX","side","lower","upper","range","window","innerWidth","Error","calcIsSwipe","_ref2","_ref3","translateX","drawerWidth","startX","endX","calcWillOpen","__","velocity","calcTranslateX","_ref4","_ref5","startTranslateX","moveX","deltaX","of","createResizeObservable","applyMixins","subscribeWhen","filterWhen","tween","easeOutSine","t","b","c","d","sin","PI","observeWidth","el","resize$","contentRect","width","clientWidth","rangeConverter","fromAttribute","attr","replace","split","Number","toAttribute","join","rangeHasChanged","curr","prev","some","v","BASE_DURATION","WIDTH_CONTRIBUTION","html","property","customElement","query","classMap","styleMap","BehaviorSubject","merge","NEVER","defer","fromEvent","startWith","takeUntil","share","withLatestFrom","tap","pairwise","switchMap","finalize","RxLitElement","createResolvablePromise","ObservablesMixin","UpdateMixin","DOMUpdater","styles","HyDrawer","constructor","persistent","threshold","noScroll","mouseEvents","willChange","_HyDrawer_initialized","set","_HyDrawer_translateX$","_HyDrawer_startTranslateX$","_HyDrawer_tweenTranslateX$","upgrade","drawerWidth$","getDrawerWidth","active$","$","start$","getStartObservable","isScrimVisible$","__classPrivateFieldGet","isInRange$","inRange","fireEvent","end$","getEndObservable","grabbing","move$","getMoveObservable","isSliding$","getIsSlidingObservable","isSliding","translateX$","__classPrivateFieldSet","jumpTranslateX$","moveTranslateX$","scrimClickable","event","preventDefault","velocity$","prevTime","time","prevX","x","willOpen$","animateTo$","willOpen","inv","endTranslateX","diffTranslateX","ceil","transitioned","updateDOM","opacity","detail","bubbles","scrimEl","close","style","display","_ref6","coord","isInRange","_ref7","resolve","hasOpened","initialized","content$","contentEl","px","peek$","peekEl","_ref8","contentWidth","peekWidth","connectedCallback","updater","getUpdaterForPlatform","updateComplete","then","render","_templateObject","_taggedTemplateLiteral","pointerEvents","_templateObject2","wrapper","grab","open","toggle","__decorate","type","Boolean","reflect","String","converter","hasChanged","mapTo","take","abs","touchstart$","document","passive","touches","mousedown$","e","touchmove$","mousemove$","touchend$","changedTouches","mouseup$","getIsSlidingObservableInner","clientY","startY","_ref9","css","parent","hasCSSOM","Element","CSS","AttributeStyleMapUpdater","StyleUpdater","transform","concat","tvalue","CSSTransformValue","CSSTranslate","ovalue","number","attributeStyleMap","AttributePart","directive","PropertyPart","ClassList","element","classes","Set","changed","classList","getAttribute","cls","add","remove","delete","commit","classString","forEach","setAttribute","previousClassesCache","WeakMap","classInfo","part","committer","name","parts","previousClasses","get","strings","has","previousStylePropertyCache","styleInfo","previousStyleProperties","cssText","indexOf","removeProperty","setProperty"],"sourceRoot":""}