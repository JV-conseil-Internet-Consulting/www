"use strict";(self.webpackChunkdeepdive=self.webpackChunkdeepdive||[]).push([[970],{7754:(e,t,r)=>{r.d(t,{n:()=>i});var n=(0,r(7675).d)((function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}}));function i(e,t){var r="object"==typeof t;return new Promise((function(i,o){var s,a=!1;e.subscribe({next:function(e){s=e,a=!0},error:o,complete:function(){a?i(s):r?i(t.defaultValue):o(new n)}})}))}},1775:(e,t,r)=>{r.d(t,{$:()=>h});var n=r(7582),i=r(3943),o=r(3852),s=r(1247),a=r(4743),c=r(2388),l=r(114);function h(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=(0,l.jO)(e),h=(0,s.k)(e);return h.length?new i.y((function(e){var t=h.map((function(){return[]})),i=h.map((function(){return!1}));e.add((function(){t=i=null}));for(var s=function(s){(0,o.Xf)(h[s]).subscribe((0,c.x)(e,(function(o){if(t[s].push(o),t.every((function(e){return e.length}))){var a=t.map((function(e){return e.shift()}));e.next(r?r.apply(void 0,(0,n.ev)([],(0,n.CR)(a))):a),t.some((function(e,t){return!e.length&&i[t]}))&&e.complete()}}),(function(){i[s]=!0,!t[s].length&&e.complete()})))},a=0;!e.closed&&a<h.length;a++)s(a);return function(){t=i=null}})):a.E}},2154:(e,t,r)=>{r.d(t,{K:()=>s});var n=r(3852),i=r(2388),o=r(6423);function s(e){return(0,o.e)((function(t,r){var o,a=null,c=!1;a=t.subscribe((0,i.x)(r,void 0,void 0,(function(i){o=(0,n.Xf)(e(i,s(e)(t))),a?(a.unsubscribe(),a=null,o.subscribe(r)):c=!0}))),c&&(a.unsubscribe(),a=null,o.subscribe(r))}))}},8138:(e,t,r)=>{r.d(t,{z:()=>a});var n=r(5915),i=r(3852),o=r(6423),s=r(2388);function a(e,t){return t?function(r){return r.pipe(a((function(r,o){return(0,i.Xf)(e(r,o)).pipe((0,n.U)((function(e,n){return t(r,e,o,n)})))})))}:(0,o.e)((function(t,r){var n=0,o=null,a=!1;t.subscribe((0,s.x)(r,(function(t){o||(o=(0,s.x)(r,void 0,(function(){o=null,a&&r.complete()})),(0,i.Xf)(e(t,n++)).subscribe(o))}),(function(){a=!0,!o&&r.complete()})))}))}},1247:(e,t,r)=>{r.d(t,{k:()=>i});var n=Array.isArray;function i(e){return 1===e.length&&n(e[0])?e[0]:e}},7733:(e,t,r)=>{r.r(t),r.d(t,{HyPushState:()=>ke});var n,i=r(7582),o=r(1908),s=r(5022),a=r(22),c=r(1377),l=r(4557),h=r(2206),u=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n}return(0,i.ZT)(t,e),t.prototype.requestAsyncId=function(t,r,n){return void 0===n&&(n=0),null!==n&&n>0?e.prototype.requestAsyncId.call(this,t,r,n):(t.actions.push(this),t._scheduled||(t._scheduled=h.l.requestAnimationFrame((function(){return t.flush(void 0)}))))},t.prototype.recycleAsyncId=function(t,r,n){var i;if(void 0===n&&(n=0),null!=n?n>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,t,r,n);var o=t.actions;null!=r&&(null===(i=o[o.length-1])||void 0===i?void 0:i.id)!==r&&(h.l.cancelAnimationFrame(r),t._scheduled=void 0)},t}(l.o),p=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,i.ZT)(t,e),t.prototype.flush=function(e){this._active=!0;var t=this._scheduled;this._scheduled=void 0;var r,n=this.actions;e=e||n.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=n[0])&&e.id===t&&n.shift());if(this._active=!1,r){for(;(e=n[0])&&e.id===t&&n.shift();)e.unsubscribe();throw r}},t}(r(5913).v))(u),f=r(5574),d=r(5557),v=r(5915),m=r(8649),b=r(7057),y=r(4038),g=r(2124),w=r(6958),S=r(4682),P=r(9113),O=r(6220),E=r(6906),j=r(6814),_=r(2154),Q=r(2909),A=r(8254);function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location;return null!=e&&(e.protocol!==t.protocol||e.host!==t.host)}function L(e){return e&&""===e.target}function R(e,t){var{url:r,anchor:n}=e;return!(!L(n)||k(r,t)||function(e){var{hash:t,origin:r,pathname:n}=e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location;return""!==t&&r===i.origin&&n===i.pathname}(r,t))}function T(e){var{cause:t,url:{pathname:r,hash:i},oldURL:o}=e;return r===(null==o?void 0:o.pathname)&&(t===n.Pop||t===n.Push&&""!==i)}!function(e){e.Init="init",e.Hint="hint",e.Push="push",e.Pop="pop"}(n||(n={}));var H=r(2726),U=r(1775),C=r(7994);function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){M(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function M(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class D{constructor(e){this.parent=e}fetchPage(e){return(0,A.kx)(e.url.href,{method:"GET",mode:"cors",headers:{Accept:"text/html"}}).pipe((0,E.w)((e=>e.text())),(0,v.U)((t=>N(N({},e),{},{responseText:t}))),(0,_.K)((t=>(0,H.of)(N(N({},e),{},{error:t,responseText:null})))))}selectPrefetch(e,t,r){var{href:n}=e;return n===t.url.href?(0,H.of)(t):r.pipe((0,C.q)(1))}getResponse(e,t,r){return(0,U.$)(this.selectPrefetch(t.url,r,e),this.parent.animPromise).pipe((0,v.U)((e=>{var[r]=e;return N(N({},r),t)})))}}var x=r(6666),I=r(6365),W=r(7390);function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){X(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function X(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class F{constructor(e){this.parent=e}get scriptSelector(){return this.parent.scriptSelector}removeScriptTags(e){var t=[];return e.forEach((e=>{e&&this.scriptSelector&&e.querySelectorAll(this.scriptSelector).forEach((e=>{if(e instanceof HTMLScriptElement){var r=function(e){var t=document.createElement("script");return Array.from(e.attributes).forEach((e=>t.setAttributeNode(e.cloneNode()))),t.innerHTML=e.innerHTML,t}(e),n=[r,e];t.push(n)}}))})),t}reinsertScriptTags(e){if(!this.scriptSelector)return Promise.resolve(e);var{scripts:t}=e,r=document.write;return(0,x.D)(t).pipe((0,I.b)((e=>this.insertScript(e))),(0,_.K)((t=>(0,H.of)($($({},e),{},{error:t})))),(0,W.x)((()=>document.write=r)),(0,P.h)(e)).toPromise()}insertScript(e){var[t,r]=e;return document.write=function(){for(var e=document.createElement("div"),t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];e.innerHTML=n.join(),Array.from(e.childNodes).forEach((e=>{var t;return null===(t=r.parentNode)||void 0===t?void 0:t.insertBefore(e,r)}))},new Promise(((e,n)=>{var i,o;""!==t.src?(t.addEventListener("load",e),t.addEventListener("error",n),null===(i=r.parentNode)||void 0===i||i.replaceChild(t,r)):(null===(o=r.parentNode)||void 0===o||o.replaceChild(t,r),e({}))}))}}function K(e,t){e.forEach((e=>{e&&(e.querySelectorAll("[href]").forEach(V("href",t)),e.querySelectorAll("[src]").forEach(V("src",t)),e.querySelectorAll("img[srcset]").forEach(function(e,t){return r=>{try{var n=r.getAttribute(e);if(null==n)return;r.setAttribute(e,n.split(/\s*,\s*/).map((e=>{var r=e.split(/\s+/);return r[0]=new URL(r[0],t).href,r.join(" ")})).join(", "))}catch(e){}}}("srcset",t)),e.querySelectorAll("blockquote[cite]").forEach(V("cite",t)),e.querySelectorAll("del[cite]").forEach(V("cite",t)),e.querySelectorAll("ins[cite]").forEach(V("cite",t)),e.querySelectorAll("q[cite]").forEach(V("cite",t)),e.querySelectorAll("img[longdesc]").forEach(V("longdesc",t)),e.querySelectorAll("frame[longdesc]").forEach(V("longdesc",t)),e.querySelectorAll("iframe[longdesc]").forEach(V("longdesc",t)),e.querySelectorAll("img[usemap]").forEach(V("usemap",t)),e.querySelectorAll("input[usemap]").forEach(V("usemap",t)),e.querySelectorAll("object[usemap]").forEach(V("usemap",t)),e.querySelectorAll("form[action]").forEach(V("action",t)),e.querySelectorAll("button[formaction]").forEach(V("formaction",t)),e.querySelectorAll("input[formaction]").forEach(V("formaction",t)),e.querySelectorAll("video[poster]").forEach(V("poster",t)),e.querySelectorAll("object[data]").forEach(V("data",t)),e.querySelectorAll("object[codebase]").forEach(V("codebase",t)),e.querySelectorAll("object[archive]").forEach(function(e,t){return r=>{try{var n=r.getAttribute(e);if(null==n)return;r.setAttribute(e,n.split(/[\s,]+/).map((e=>new URL(e,t).href)).join(", "))}catch(e){}}}("archive",t)))}))}function V(e,t){return r=>{try{var n=r.getAttribute(e);if(null==n)return;r.setAttribute(e,new URL(n,t).href)}catch(e){}}}function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(r),!0).forEach((function(t){Z(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Z(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var G="link[rel=canonical]",J="meta[name=description]";class ee{constructor(e){this.parent=e,this.scriptManager=new F(e)}get el(){return this.parent}get replaceSelector(){return this.parent.replaceSelector}get scriptSelector(){return this.parent.scriptSelector}getReplaceElements(e){if(this.replaceSelector)return this.replaceSelector.split(",").map((t=>e.querySelector(t)));if(this.el.id)return[e.getElementById(this.el.id)];var t=Array.from(document.getElementsByTagName(this.el.tagName)).indexOf(this.el);return[e.getElementsByTagName(this.el.tagName)[t]]}responseToContent(e){var{responseText:t}=e,r=(new DOMParser).parseFromString(t,"text/html"),{title:n=""}=r,i=this.getReplaceElements(r);if(i.every((e=>null==e)))throw new Error("Couldn't find any element in the document at '".concat(location,"'."));var o=this.scriptSelector?this.scriptManager.removeScriptTags(i):[];return z(z({},e),{},{document:r,title:n,replaceEls:i,scripts:o})}replaceContentWithSelector(e,t){e.split(",").map((e=>document.querySelector(e))).forEach(((e,r)=>{var n,i=t[r];i&&(null===(n=null==e?void 0:e.parentNode)||void 0===n||n.replaceChild(i,e))}))}replaceContentWholesale(e){var[t]=e;t&&(this.el.innerHTML=t.innerHTML)}replaceContent(e){this.replaceSelector?this.replaceContentWithSelector(this.replaceSelector,e):this.replaceContentWholesale(e)}replaceHead(e){var{head:t}=this.el.ownerDocument,r=t.querySelector(G),n=e.head.querySelector(G);r&&n&&(r.href=n.href);var i=t.querySelector(J),o=e.head.querySelector(J);i&&o&&(i.content=o.content)}updateDOM(e){try{var{replaceEls:t,document:r}=e;k(this.parent)&&K(t,this.parent.href),this.replaceHead(r),this.replaceContent(t)}catch(t){throw z(z({},e),{},{error:t})}}reinsertScriptTags(e){return this.scriptManager.reinsertScriptTags(e)}}var te=r(5075),re=r(1001),ne=e=>Array.prototype.concat.apply([],e),ie=e=>({addedNodes:new Set(ne(e.map((e=>Array.from(e.addedNodes))))),removedNodes:new Set(ne(e.map((e=>Array.from(e.removedNodes)))))});class oe{setupEventListeners(){var e=(0,a.R)(this.el,"click").pipe((0,v.U)((e=>{var t=(0,A.Wn)(e.target,this.linkSelector);if(t instanceof HTMLAnchorElement)return[e,t]})),(0,m.h)((e=>!!e))),t=(e,t)=>e.matches(t)&&e instanceof HTMLAnchorElement?(0,H.of)(e):(0,x.D)(e.querySelectorAll(t)).pipe((0,m.h)((e=>e instanceof HTMLAnchorElement)));return{hintEvent$:this.$.linkSelector.pipe((0,E.w)((e=>{var r=new Map,n=e=>{r.has(e)||r.set(e,(e=>(0,c.T)((0,a.R)(e,"mouseenter",{passive:!0}),(0,a.R)(e,"touchstart",{passive:!0}),(0,a.R)(e,"focus",{passive:!0})).pipe((0,v.U)((t=>[t,e]))))(e))},i=e=>{r.delete(e)};return(0,A.j4)(this.el,{childList:!0,subtree:!0}).pipe((0,y.O)({addedNodes:[this.el],removedNodes:[]}),(0,A.rI)(500),(0,v.U)(ie),(0,E.w)((o=>{var{addedNodes:s,removedNodes:a}=o;return(0,x.D)(a).pipe((0,m.h)((e=>e instanceof Element)),(0,te.z)((r=>t(r,e))),(0,b.b)(i)).subscribe(),(0,x.D)(s).pipe((0,m.h)((e=>e instanceof Element)),(0,te.z)((r=>t(r,e))),(0,b.b)(n)).subscribe(),(0,x.D)(r.values()).pipe((0,re.J)())})),(0,A.p1)(this.$.prefetch))}))),pushEvent$:e}}}function se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?se(Object(r),!0).forEach((function(t){ce(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ce(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var le,he,ue,pe,fe,de,ve,me,be,ye,ge,we,Se,Pe=e=>new Promise((t=>setTimeout(t,e)));class Oe{constructor(e){this.parent=e}onStart(e){this.parent.animPromise=Pe(this.parent.duration);this.parent.fireEvent("start",{detail:ae(ae({},e),{},{transitionUntil:e=>{this.parent.animPromise=Promise.all([this.parent.animPromise,e])}})})}emitDOMError(e){console.error(e);var t=location.href;window.history.back(),setTimeout((()=>document.location.assign(t)),100)}emitNetworkError(e){console.error(e),this.parent.fireEvent("networkerror",{detail:e})}emitError(e){console.error(e),this.parent.fireEvent("error",{detail:e})}emitReady(e){this.parent.fireEvent("ready",{detail:e})}emitAfter(e){this.parent.fadePromise=Pe(this.parent.duration);this.parent.fireEvent("after",{detail:ae(ae({},e),{},{transitionUntil:e=>{this.parent.fadePromise=Promise.all([this.parent.fadePromise,e])}})})}emitProgress(e){this.parent.fireEvent("progress",{detail:e})}emitLoad(e){this.parent.fireEvent("load",{detail:e})}}function Ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function je(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(r),!0).forEach((function(t){_e(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _e(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}window.HashChangeEvent=window.HashChangeEvent||function(e){var{oldURL:t="",newURL:r=""}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new CustomEvent(e);return n.oldURL=t,n.newURL=r,n};class Qe{constructor(e){this.updateHistoryScrollPosition=()=>{if(!k(this.parent)){var e=this.assignScrollPosition(history.state||{});history.replaceState(e,document.title)}},this.parent=e}updateHistoryState(e){var{cause:t,replace:r,url:i,oldURL:o}=e;if(!k(this.parent))switch(t){case n.Init:case n.Push:var{histId:s}=this.parent;if(r||i.href===location.href){var a=je(je({},history.state),{},{[s]:{}});history.replaceState(a,document.title,i.href)}else history.pushState({[s]:{}},document.title,i.href);case n.Pop:this.parent.simulateHashChange&&o&&function(e,t){e.hash!==t.hash&&window.dispatchEvent(new HashChangeEvent("hashchange",{newURL:e.href,oldURL:t.href}))}(i,o)}}updateTitle(e){var{cause:t,title:r}=e;document.title=r,k(this.parent)||t!==n.Push||history.replaceState(history.state,r)}assignScrollPosition(e){var{histId:t}=this.parent;return je(je({},e),{},{[t]:je(je({},e[t]),{},{scrollTop:(0,A.cx)(),scrollHeight:(0,A.aZ)()})})}}class Ae{constructor(e){this.parent=e,"scrollRestoration"in history&&(history.scrollRestoration="manual")}manageScrollPosition(e){var{cause:t,url:{hash:r}}=e;switch(t){case n.Push:this.scrollHashIntoView(r,{behavior:"smooth",block:"start",inline:"nearest"});break;case n.Pop:this.restoreScrollPosition();break;case n.Init:this.restoreScrollPositionOnReload()}}elementFromHash(e){return document.getElementById(decodeURIComponent(e.substr(1)))}scrollHashIntoView(e,t){if(e){var r=this.elementFromHash(e);r&&r.scrollIntoView(t)}else window.scroll(window.pageXOffset,0)}restoreScrollPosition(){var{histId:e}=this.parent,{scrollTop:t}=history.state&&history.state[e]||{};null!=t&&window.scroll(window.pageXOffset,t)}restoreScrollPositionOnReload(){var{histId:e}=this.parent;history.state&&history.state[e]&&0===(0,A.cx)()?this.restoreScrollPosition():location.hash&&requestAnimationFrame((()=>this.scrollHashIntoView(location.hash,!0)))}}var ke=class extends((0,A.ef)(A.FV,[oe])){constructor(){super(...arguments),this.el=this,this.linkSelector="a[href]:not([data-no-push])",this.prefetch=!1,this.duration=0,this.simulateHashChange=!1,this.baseURL=window.location.href,le.set(this,(0,A.vb)()),this.animPromise=Promise.resolve(null),this.fadePromise=Promise.resolve(null),he.set(this,new Ae(this)),ue.set(this,new Qe(this)),pe.set(this,new D(this)),fe.set(this,new ee(this)),de.set(this,new Oe(this)),ve.set(this,new URL(this.baseURL)),me.set(this,((e,t)=>{var r=new URL((0,i.Q_)(this,ve,"f").href);r[e]=t,this.assign(r.href)})),be.set(this,0),ye.set(this,new s.x),ge.set(this,(e=>{k((0,A.Wn)(e.target,"a[href]"))&&(0,i.Q_)(this,ue,"f").updateHistoryScrollPosition()})),we.set(this,void 0),Se.set(this,(()=>{var{pushEvent$:e,hintEvent$:t}=this.setupEventListeners(),r=e.pipe((0,v.U)((e=>{var[t,r]=e;return{cause:n.Push,url:new URL(r.href,this.href),anchor:r,event:t,cacheNr:(0,i.Q_)(this,be,"f")}})),(0,m.h)((e=>function(e,t){var{url:r,anchor:n,event:{metaKey:i,ctrlKey:o}}=e;return!(i||o||!L(n)||k(r,t))}(e,this))),(0,b.b)((e=>{var{event:t}=e;t.preventDefault(),(0,i.Q_)(this,ue,"f").updateHistoryScrollPosition()}))),o=(0,a.R)(window,"popstate").pipe((0,m.h)((()=>window.history.state&&window.history.state[this.histId])),(0,v.U)((e=>({cause:n.Pop,url:new URL(window.location.href),cacheNr:(0,i.Q_)(this,be,"f"),event:e})))),s=(0,i.Q_)(this,ye,"f"),l=(0,c.T)(r,o,s).pipe((0,y.O)({url:new URL(window.location.href)}),(0,g.G)(),(0,v.U)((e=>{var[t,r]=e;return Object.assign(r,{oldURL:t.url})})),(0,w.B)()),h=l.pipe((0,m.h)((e=>!T(e))),(0,w.B)()),u=l.pipe((0,m.h)((e=>T(e))),(0,m.h)((()=>history.state&&history.state[this.histId])),(0,S.Q)(p),(0,b.b)((e=>{(0,i.Q_)(this,ue,"f").updateHistoryState(e),(0,i.Q_)(this,he,"f").manageScrollPosition(e)}))),d=(0,f.P)((()=>(0,c.T)(h.pipe((0,P.h)(!0)),(0,i.Q_)(this,we,"f").pipe((0,P.h)(!1))))).pipe((0,y.O)(!1)),H=t.pipe((0,A.o5)(d.pipe((0,v.U)((e=>!e)))),(0,v.U)((e=>{var[t,r]=e;return{cause:n.Hint,url:new URL(r.href,this.href),anchor:r,event:t,cacheNr:(0,i.Q_)(this,be,"f")}})),(0,m.h)((e=>R(e,this)))),U=(0,c.T)(H,h).pipe((0,O.x)(((e,t)=>{return n=t,(r=e).url.href===n.url.href&&r.error===n.error&&r.cacheNr===n.cacheNr;
/**
 * Copyright (c) 2020 Florian Klampfer <https://qwtel.com/>
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 *
 * @license
 * @nocompile
 */
var r,n})),(0,E.w)((e=>(0,i.Q_)(this,pe,"f").fetchPage(e))),(0,y.O)({url:{}}),(0,w.B)()),C=(0,i.YH)(this,we,h.pipe((0,b.b)((e=>{(0,i.Q_)(this,de,"f").onStart(e),(0,i.Q_)(this,ue,"f").updateHistoryState(e),(0,i.YH)(this,ve,e.url,"f")})),(0,j.M)(U),(0,E.w)((e=>(0,i.Q_)(this,pe,"f").getResponse(U,...e))),(0,w.B)()),"f"),q=C.pipe((0,m.h)((e=>!e.error))),N=C.pipe((0,m.h)((e=>!!e.error))),M=q.pipe((0,v.U)((e=>(0,i.Q_)(this,fe,"f").responseToContent(e))),(0,b.b)((e=>(0,i.Q_)(this,de,"f").emitReady(e))),(0,S.Q)(p),(0,b.b)((e=>{(0,i.Q_)(this,fe,"f").updateDOM(e),(0,i.Q_)(this,ue,"f").updateTitle(e),(0,i.Q_)(this,de,"f").emitAfter(e)})),(0,y.O)({cause:n.Init,url:(0,i.Q_)(this,ve,"f"),scripts:[]}),(0,S.Q)(p),(0,b.b)((e=>(0,i.Q_)(this,he,"f").manageScrollPosition(e))),(0,b.b)({error:e=>(0,i.Q_)(this,de,"f").emitDOMError(e)}),(0,_.K)(((e,t)=>t)),(0,E.w)((e=>this.fadePromise.then((()=>e)))),(0,E.w)((e=>(0,i.Q_)(this,fe,"f").reinsertScriptTags(e))),(0,b.b)({error:e=>(0,i.Q_)(this,de,"f").emitError(e)}),(0,_.K)(((e,t)=>t)),(0,b.b)((e=>(0,i.Q_)(this,de,"f").emitLoad(e)))),D=N.pipe((0,b.b)((e=>(0,i.Q_)(this,de,"f").emitNetworkError(e)))),x=h.pipe((0,E.w)((e=>(0,f.P)((()=>this.animPromise)).pipe((0,Q.R)(C),(0,P.h)(e)))),(0,b.b)((e=>(0,i.Q_)(this,de,"f").emitProgress(e))));M.subscribe(),u.subscribe(),D.subscribe(),x.subscribe(),(0,i.Q_)(this,le,"f").resolve(this),this.fireEvent("init")}))}createRenderRoot(){return this}get initialized(){return(0,i.Q_)(this,le,"f")}get hash(){return(0,i.Q_)(this,ve,"f").hash}get host(){return(0,i.Q_)(this,ve,"f").host}get hostname(){return(0,i.Q_)(this,ve,"f").hostname}get href(){return(0,i.Q_)(this,ve,"f").href}get pathname(){return(0,i.Q_)(this,ve,"f").pathname}get port(){return(0,i.Q_)(this,ve,"f").port}get protocol(){return(0,i.Q_)(this,ve,"f").protocol}get search(){return(0,i.Q_)(this,ve,"f").search}get origin(){return(0,i.Q_)(this,ve,"f").origin}get ancestorOrigins(){return window.location.ancestorOrigins}set hash(e){(0,i.Q_)(this,me,"f").call(this,"hash",e)}set host(e){(0,i.Q_)(this,me,"f").call(this,"host",e)}set hostname(e){(0,i.Q_)(this,me,"f").call(this,"hostname",e)}set href(e){(0,i.Q_)(this,me,"f").call(this,"href",e)}set pathname(e){(0,i.Q_)(this,me,"f").call(this,"pathname",e)}set port(e){(0,i.Q_)(this,me,"f").call(this,"port",e)}set protocol(e){(0,i.Q_)(this,me,"f").call(this,"protocol",e)}set search(e){(0,i.Q_)(this,me,"f").call(this,"search",e)}get histId(){return this.id||this.tagName}assign(e){var t;(0,i.Q_)(this,ye,"f").next({cause:n.Push,url:new URL(e,this.href),cacheNr:(0,i.YH)(this,be,(t=(0,i.Q_)(this,be,"f"),++t),"f")})}reload(){var e;(0,i.Q_)(this,ye,"f").next({cause:n.Push,url:new URL(this.href),cacheNr:(0,i.YH)(this,be,(e=(0,i.Q_)(this,be,"f"),++e),"f"),replace:!0})}replace(e){var t;(0,i.Q_)(this,ye,"f").next({cause:n.Push,url:new URL(e,this.href),cacheNr:(0,i.YH)(this,be,(t=(0,i.Q_)(this,be,"f"),++t),"f"),replace:!0})}connectedCallback(){super.connectedCallback(),this.$={linkSelector:new d.X(this.linkSelector),prefetch:new d.X(this.prefetch)},window.addEventListener("beforeunload",(0,i.Q_)(this,ue,"f").updateHistoryScrollPosition),document.documentElement.addEventListener("click",(0,i.Q_)(this,ge,"f")),this.updateComplete.then((0,i.Q_)(this,Se,"f"))}disconnectedCallback(){window.removeEventListener("beforeunload",(0,i.Q_)(this,ue,"f").updateHistoryScrollPosition),document.documentElement.removeEventListener("click",(0,i.Q_)(this,ge,"f"))}};le=new WeakMap,he=new WeakMap,ue=new WeakMap,pe=new WeakMap,fe=new WeakMap,de=new WeakMap,ve=new WeakMap,me=new WeakMap,be=new WeakMap,ye=new WeakMap,ge=new WeakMap,we=new WeakMap,Se=new WeakMap,(0,i.gn)([(0,o.Cb)({type:String,reflect:!0,attribute:"replace-selector"})],ke.prototype,"replaceSelector",void 0),(0,i.gn)([(0,o.Cb)({type:String,reflect:!0,attribute:"link-selector"})],ke.prototype,"linkSelector",void 0),(0,i.gn)([(0,o.Cb)({type:String,reflect:!0,attribute:"script-selector"})],ke.prototype,"scriptSelector",void 0),(0,i.gn)([(0,o.Cb)({type:Boolean,reflect:!0})],ke.prototype,"prefetch",void 0),(0,i.gn)([(0,o.Cb)({type:Number,reflect:!0})],ke.prototype,"duration",void 0),(0,i.gn)([(0,o.Cb)({type:Boolean,reflect:!0,attribute:"hashchange"})],ke.prototype,"simulateHashChange",void 0),(0,i.gn)([(0,o.Cb)({type:String})],ke.prototype,"baseURL",void 0),(0,i.gn)([(0,o.Cb)()],ke.prototype,"assign",null),(0,i.gn)([(0,o.Cb)()],ke.prototype,"reload",null),(0,i.gn)([(0,o.Cb)()],ke.prototype,"replace",null),ke=(0,i.gn)([(0,o.Mo)("hy-push-state")],ke)}}]);