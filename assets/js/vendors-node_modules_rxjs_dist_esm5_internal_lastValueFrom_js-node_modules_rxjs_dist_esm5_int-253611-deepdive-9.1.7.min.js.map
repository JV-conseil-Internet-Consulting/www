{"version":3,"file":"vendors-node_modules_rxjs_dist_esm5_internal_lastValueFrom_js-node_modules_rxjs_dist_esm5_int-253611-deepdive-9.1.7.min.js","mappings":"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","sources":["webpack://deepdive/../../../src/internal/lastValueFrom.ts","webpack://deepdive/../../../../src/internal/observable/zip.ts","webpack://deepdive/../../../../src/internal/operators/catchError.ts","webpack://deepdive/../../../../src/internal/operators/exhaustMap.ts","webpack://deepdive/../../../../src/internal/scheduler/AnimationFrameAction.ts","webpack://deepdive/../../../../src/internal/scheduler/AnimationFrameScheduler.ts","webpack://deepdive/../../../../src/internal/scheduler/animationFrame.ts","webpack://deepdive/../../../../src/internal/util/EmptyError.ts","webpack://deepdive/../../../../src/internal/util/argsOrArgArray.ts","webpack://deepdive/../src/common.ts","webpack://deepdive/../src/event-listeners.ts","webpack://deepdive/../src/event.ts","webpack://deepdive/../src/fetch.ts","webpack://deepdive/../src/history.ts","webpack://deepdive/../src/index.ts","webpack://deepdive/../src/rewrite-urls.ts","webpack://deepdive/../src/script.ts","webpack://deepdive/../src/scroll.ts","webpack://deepdive/../src/update.ts"],"sourcesContent":[null,null,null,null,null,null,null,null,null,"export {\n  applyMixins,\n  subscribeWhen,\n  unsubscribeWhen,\n  filterWhen,\n  bufferDebounceTime,\n  fetchRx,\n  fragmentFromString,\n  createMutationObservable,\n  getScrollHeight,\n  getScrollLeft,\n  getScrollTop,\n  matches,\n  matchesAncestors\n} from '@hydecorp/component';\n\nexport enum Cause {\n  Init = \"init\",\n  Hint = \"hint\",\n  Push = \"push\",\n  Pop = \"pop\",\n};\n\nexport interface Context {\n  cause: Cause,\n  url: URL,\n  oldURL?: URL,\n  cacheNr?: number,\n  replace?: boolean,\n  error?: any,\n  anchor?: HTMLAnchorElement,\n}\n\nexport interface ClickContext extends Context {\n  event: MouseEvent,\n}\n\nexport function isExternal(\n  url?: { protocol: string, host: string } | null,\n  location: { protocol: string, host: string } = window.location,\n) {\n  return url != null && (url.protocol !== location.protocol || url.host !== location.host);\n}\n\nexport function isHash(\n  { hash, origin, pathname }: { hash: string, origin: string, pathname: string },\n  location: { hash: string, origin: string, pathname: string } = window.location,\n) {\n  return hash !== \"\" && origin === location.origin && pathname === location.pathname;\n}\n\nexport function shouldLoadAnchor(anchor?: HTMLAnchorElement | null) {\n  return anchor && anchor.target === \"\";\n}\n\nexport function isPushEvent({ url, anchor, event: { metaKey, ctrlKey } }: ClickContext, location: Location) {\n  return !!(\n    !metaKey &&\n    !ctrlKey &&\n    shouldLoadAnchor(anchor) &&\n    !isExternal(url, location)\n  );\n}\n\nexport function isHintEvent({ url, anchor }: Context, location: Location) {\n  return !!(\n    shouldLoadAnchor(anchor) &&\n    !isExternal(url, location) &&\n    !isHash(url, location)\n  );\n}\n\nexport function isHashChange({\n  cause,\n  url: { pathname, hash },\n  oldURL,\n}: Context) {\n  return pathname === oldURL?.pathname && (cause === Cause.Pop || (cause === Cause.Push && hash !== ''));\n}\n","import { Subject, Observable, from, fromEvent, of, merge, NEVER } from \"rxjs\";\n\nimport { matchesAncestors, createMutationObservable, subscribeWhen, bufferDebounceTime } from \"./common\";\nimport { map, filter, startWith, tap, mergeMap, mergeAll, switchMap } from \"rxjs/operators\";\n\nconst flat = <T>(x: Array<Array<T>>): Array<T> => Array.prototype.concat.apply([], x);\n\ntype MiniRecord = { addedNodes: Iterable<Node>, removedNodes: Iterable<Node> };\n\nconst combineRecords = (records: MiniRecord[]) => ({\n  addedNodes: new Set(flat(records.map(r => Array.from(r.addedNodes)))),\n  removedNodes: new Set(flat(records.map(r => Array.from(r.removedNodes)))),\n});\n\nexport class EventListenersMixin {\n  el!: HTMLElement;\n\n  linkSelector!: string;\n\n  $!: {\n    linkSelector: Subject<string>;\n    prefetch: Subject<boolean>;\n  }\n\n  // LINKS 2\n  setupEventListeners() {\n    const pushEvent$ = fromEvent(this.el, \"click\").pipe(\n      map(event => {\n        const anchor = matchesAncestors(<Element>event.target, this.linkSelector);\n        if (anchor instanceof HTMLAnchorElement) {\n          return [event, anchor] as [MouseEvent, HTMLAnchorElement];\n        }\n      }),\n      filter(x => !!x),\n    );\n\n    const matchOrQuery = (el: Element, selector: string): Observable<HTMLAnchorElement> => {\n      if (el.matches(selector) && el instanceof HTMLAnchorElement) {\n        return of(el);\n      } else {\n        return from(el.querySelectorAll(selector)).pipe(\n          filter((el): el is HTMLAnchorElement => el instanceof HTMLAnchorElement),\n        );\n      }\n    }\n\n    const addEventListeners = (link: HTMLAnchorElement) => {\n      return merge(\n        fromEvent(link, \"mouseenter\", { passive: true }),\n        fromEvent(link, \"touchstart\", { passive: true }),\n        fromEvent(link, \"focus\", { passive: true }),\n      ).pipe(map(event => [event, link] as [Event, HTMLAnchorElement]))\n    };\n\n    const hintEvent$ = this.$.linkSelector.pipe(switchMap((linkSelector) => {\n      const links = new Map<HTMLAnchorElement, Observable<[Event, HTMLAnchorElement]>>();\n\n      const addLink = (link: HTMLAnchorElement) => {\n        if (!links.has(link)) {\n          links.set(link, addEventListeners(link));\n        }\n      }\n      const removeLink = (link: HTMLAnchorElement) => {\n        links.delete(link);\n      }\n\n\n      return createMutationObservable(this.el, { childList: true, subtree: true }).pipe(\n        startWith({ addedNodes: [this.el], removedNodes: [] }),\n        bufferDebounceTime(500),\n        map(combineRecords),\n        switchMap(({ addedNodes, removedNodes }) => {\n          from(removedNodes).pipe(\n            filter((el): el is Element => el instanceof Element),\n            mergeMap(el => matchOrQuery(el, linkSelector)),\n            tap(removeLink)\n          ).subscribe()\n\n          from(addedNodes).pipe(\n            filter((el): el is Element => el instanceof Element),\n            mergeMap(el => matchOrQuery(el, linkSelector)),\n            tap(addLink)\n          ).subscribe()\n\n          return from(links.values()).pipe(mergeAll());\n        }),\n        subscribeWhen(this.$.prefetch),\n      );\n    }));\n\n    return { hintEvent$, pushEvent$ }\n  }\n}\n","import { Context } from './common';\nimport { ResponseContextErr } from './fetch';\nimport { HyPushState } from \"./index\";\n\nconst timeout = (t: number) => new Promise(r => setTimeout(r, t));\n\nexport class EventManager {\n  private parent: HyPushState;\n\n  constructor(parent: HyPushState) {\n    this.parent = parent;\n  }\n\n  onStart(context: Context) {\n    this.parent.animPromise = timeout(this.parent.duration);\n\n    const transitionUntil = (promise: Promise<{}>) => {\n      this.parent.animPromise = Promise.all([this.parent.animPromise, promise]);\n    };\n\n    this.parent.fireEvent('start', { detail: { ...context, transitionUntil } });\n  }\n\n  emitDOMError(error: any) {\n    if (process.env.DEBUG) console.error(error);\n\n    // To open the link directly, we first pop one entry off the browser history.\n    // We have to do this because some browsers (Safari) won't handle the back button correctly otherwise.\n    // We then wait for a short time and change the document's location.\n    // TODO: If we didn't call `pushState` optimistically we wouldn't have to do this.\n    // TODO: Use browser sniffing instead?\n    const url = location.href;\n    window.history.back();\n    setTimeout(() => document.location.assign(url), 100);\n  }\n\n  emitNetworkError(context: ResponseContextErr) {\n    if (process.env.DEBUG) console.error(context);\n    this.parent.fireEvent('networkerror', { detail: context });\n  }\n\n  emitError(context: Context) {\n    if (process.env.DEBUG) console.error(context);\n    this.parent.fireEvent('error', { detail: context });\n  }\n\n  emitReady(context: Context) {\n    this.parent.fireEvent('ready', { detail: context });\n  }\n\n  emitAfter(context: Context) {\n    this.parent.fadePromise = timeout(this.parent.duration);\n\n    const transitionUntil = (promise: Promise<{}>) => {\n      this.parent.fadePromise = Promise.all([this.parent.fadePromise, promise]);\n    };\n\n    this.parent.fireEvent('after', { detail: { ...context, transitionUntil } });\n  }\n\n  emitProgress(context: Context) {\n    this.parent.fireEvent('progress', { detail: context });\n  }\n\n  emitLoad(context: Context) {\n    this.parent.fireEvent('load', { detail: context });\n  }\n};","import { of, zip, Observable } from \"rxjs\";\nimport { catchError, map, take, switchMap } from \"rxjs/operators\";\n\nimport { fetchRx, Context } from \"./common\";\nimport { HyPushState } from './index';\n\nexport interface ResponseContext extends Context {\n  responseText: string | null;\n  error?: any;\n};\n\nexport interface ResponseContextOk extends ResponseContext {\n  responseText: string;\n};\n\nexport interface ResponseContextErr extends ResponseContext {\n  responseText: null;\n  error: any;\n};\n\nexport class FetchManager {\n  private parent: HyPushState;\n\n  constructor(parent: HyPushState) {\n    this.parent = parent;\n  }\n\n  fetchPage(context: Context): Observable<ResponseContext> {\n    return fetchRx(context.url.href, {\n      method: \"GET\",\n      mode: 'cors', ///isExternal(this.parent) ? 'cors' : undefined,\n      headers: { Accept: \"text/html\" },\n    })\n    .pipe(\n      switchMap(response => response.text()),\n      map(responseText => ({ ...context, responseText })),\n      catchError(error => of({ ...context, error, responseText: null })),\n    );\n  }\n\n  private selectPrefetch({ href }: URL, latestPrefetch: ResponseContext, prefetch$: Observable<ResponseContext>) {\n    return href === latestPrefetch.url.href // && latestPrefetch.error == null\n      ? of(latestPrefetch)\n      : prefetch$.pipe(take(1));\n  }\n\n  // Returns an observable that emits exactly one notice, which contains the response.\n  // It will not emit until an (optional) page transition animation completes.\n  getResponse(prefetch$: Observable<ResponseContext>, context: Context, latestPrefetch: ResponseContext) {\n    return zip(\n      this.selectPrefetch(context.url, latestPrefetch, prefetch$),\n      this.parent.animPromise,\n    ).pipe(\n      map(([prefetch]) => ({ ...prefetch, ...context }) as ResponseContext),\n    );\n  }\n};\n","import { isExternal, getScrollTop, getScrollHeight, Cause, Context } from \"./common\";\n\nimport { ReplaceContext } from \"./update\";\n\n// @ts-ignore\nwindow.HashChangeEvent = window.HashChangeEvent || function HashChangeEvent(type, { oldURL = '', newURL = '' } = {}) {\n  const e = new CustomEvent(type)\n  // @ts-ignore\n  e.oldURL = oldURL;\n  // @ts-ignore\n  e.newURL = newURL;\n  return e;\n}\n\nfunction simHashChange(newURL: URL, oldURL: URL) {\n  if (newURL.hash !== oldURL.hash) {\n    window.dispatchEvent(new HashChangeEvent('hashchange', { newURL: newURL.href, oldURL: oldURL.href }));\n  }\n}\n\nexport class HistoryManager {\n  private parent: Location & { histId: string, simulateHashChange: boolean };\n\n  constructor(parent: Location & { histId: string, simulateHashChange: boolean }) {\n    this.parent = parent;\n  }\n\n  updateHistoryState({ cause, replace, url, oldURL }: Context) {\n    if (isExternal(this.parent)) return;\n\n    switch (cause) {\n      case Cause.Init:\n      case Cause.Push: {\n        const { histId } = this.parent;\n\n        if (replace || url.href === location.href) {\n          const state = { ...history.state, [histId]: {} };\n          history.replaceState(state, document.title, url.href);\n        } else {\n          history.pushState({ [histId]: {} }, document.title, url.href);\n        }\n        // no break\n      }\n      case Cause.Pop: {\n        if (this.parent.simulateHashChange && oldURL) simHashChange(url, oldURL);\n        break;\n      }\n      default: {\n        // if (process.env.DEBUG) console.warn(`Type '${cause}' not reconginzed`);\n        break;\n      }\n    }\n  }\n\n  updateTitle({ cause, title }: ReplaceContext) {\n    document.title = title;\n    if (!isExternal(this.parent) && cause === Cause.Push) {\n      history.replaceState(history.state, title);\n    }\n  }\n\n  updateHistoryScrollPosition = () => {\n    if (isExternal(this.parent)) return;\n\n    const state = this.assignScrollPosition(history.state || {});\n    history.replaceState(state, document.title);\n  }\n\n  private assignScrollPosition(state: any) {\n    const { histId } = this.parent;\n    return {\n      ...state,\n      [histId]: {\n        ...state[histId],\n        scrollTop: getScrollTop(),\n        scrollHeight: getScrollHeight(),\n      },\n    };\n  }\n};\n","/** \n * Copyright (c) 2020 Florian Klampfer <https://qwtel.com/>\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n * \n * @license \n * @nocompile\n */\nimport { property, customElement } from 'lit-element';\n\nimport { Observable, Subject, BehaviorSubject, merge, defer, fromEvent, animationFrameScheduler } from \"rxjs\";\nimport { map, filter, tap, takeUntil, startWith, pairwise, share, mapTo, switchMap, distinctUntilChanged, withLatestFrom, catchError, observeOn } from 'rxjs/operators';\n\nimport { RxLitElement, createResolvablePromise, matchesAncestors } from '@hydecorp/component';\n\nimport { applyMixins, Context, Cause, ClickContext, isPushEvent, isHashChange, isHintEvent, filterWhen, isExternal } from './common';\n\nimport { FetchManager, ResponseContext, ResponseContextErr, ResponseContextOk } from './fetch';\nimport { UpdateManager } from './update';\nimport { EventListenersMixin } from './event-listeners';\nimport { EventManager } from './event';\nimport { HistoryManager } from './history';\nimport { ScrollManager } from './scroll';\n\nfunction compareContext(p: Context, q: Context) {\n  return p.url.href === q.url.href && p.error === q.error && p.cacheNr === q.cacheNr;\n}\n\n@customElement('hy-push-state')\nexport class HyPushState\n  extends applyMixins(RxLitElement, [EventListenersMixin])\n  implements Location, EventListenersMixin {\n\n  el: HTMLElement = this\n\n  createRenderRoot() { return this }\n\n  @property({ type: String, reflect: true, attribute: 'replace-selector' }) replaceSelector?: string;\n  @property({ type: String, reflect: true, attribute: 'link-selector' }) linkSelector: string = \"a[href]:not([data-no-push])\";\n  @property({ type: String, reflect: true, attribute: 'script-selector' }) scriptSelector?: string;\n  @property({ type: Boolean, reflect: true }) prefetch: boolean = false;\n  @property({ type: Number, reflect: true }) duration: number = 0;\n  // @property({ type: Boolean, reflect: true, attribute: 'simulate-load' }) simulateLoad: boolean = false;\n  @property({ type: Boolean, reflect: true, attribute: 'hashchange' }) simulateHashChange: boolean = false;\n\n  @property({ type: String }) baseURL: string = window.location.href;\n\n  #initialized = createResolvablePromise();\n  get initialized() {\n    return this.#initialized;\n  }\n\n  $!: {\n    linkSelector: Subject<string>;\n    prefetch: Subject<boolean>;\n  };\n\n  animPromise: Promise<any> = Promise.resolve(null);\n  fadePromise: Promise<any> = Promise.resolve(null);\n\n  #scrollManager = new ScrollManager(this);\n  #historyManager = new HistoryManager(this);\n  #fetchManager = new FetchManager(this);\n  #updateManager = new UpdateManager(this);\n  #eventManager = new EventManager(this);\n\n  #url = new URL(this.baseURL)\n\n  #setLocation = (key: 'hash' | 'host' | 'hostname' | 'href' | 'pathname' | 'port' | 'protocol' | 'search', value: string) => {\n    const u = new URL(this.#url.href);\n    u[key] = value;\n    this.assign(u.href);\n  }\n\n  // Implement Location\n  get hash() { return this.#url.hash }\n  get host() { return this.#url.host }\n  get hostname() { return this.#url.hostname }\n  get href() { return this.#url.href }\n  get pathname() { return this.#url.pathname }\n  get port() { return this.#url.port }\n  get protocol() { return this.#url.protocol }\n  get search() { return this.#url.search }\n  get origin() { return this.#url.origin }\n  get ancestorOrigins() { return window.location.ancestorOrigins }\n\n  set hash(value) { this.#setLocation('hash', value) }\n  set host(value) { this.#setLocation('host', value) }\n  set hostname(value) { this.#setLocation('hostname', value) }\n  set href(value) { this.#setLocation('href', value) }\n  set pathname(value) { this.#setLocation('pathname', value) }\n  set port(value) { this.#setLocation('port', value) }\n  set protocol(value) { this.#setLocation('protocol', value) }\n  set search(value) { this.#setLocation('search', value) }\n\n  // EventListenersMixin\n  setupEventListeners!: () => {\n    pushEvent$: Observable<[MouseEvent, HTMLAnchorElement]>;\n    hintEvent$: Observable<[Event, HTMLAnchorElement]>;\n  };\n\n  #cacheNr = 0;\n\n  get histId() { return this.id || this.tagName }\n\n  #reload$ = new Subject<Context>();\n\n  @property()\n  assign(url: string) {\n    this.#reload$.next({\n      cause: Cause.Push,\n      url: new URL(url, this.href),\n      cacheNr: ++this.#cacheNr,\n    });\n  }\n\n  @property()\n  reload() {\n    this.#reload$.next({\n      cause: Cause.Push,\n      url: new URL(this.href),\n      cacheNr: ++this.#cacheNr,\n      replace: true,\n    });\n  }\n\n  @property()\n  replace(url: string) {\n    this.#reload$.next({\n      cause: Cause.Push,\n      url: new URL(url, this.href),\n      cacheNr: ++this.#cacheNr,\n      replace: true,\n    });\n  }\n\n  connectedCallback() {\n    super.connectedCallback()\n\n    this.$ = {\n      linkSelector: new BehaviorSubject(this.linkSelector),\n      prefetch: new BehaviorSubject(this.prefetch),\n    };\n\n    // Remember the current scroll position (for F5/reloads).\n    window.addEventListener(\"beforeunload\", this.#historyManager.updateHistoryScrollPosition);\n\n    // Remember scroll position for backward/forward navigation cache.\n    // Technically, this is only necessary for Safari, because other browsers will not use the BFN cache\n    // when a beforeunload event is registered...\n    document.documentElement.addEventListener('click', this.#updateHistoryScrollPosition)\n\n    this.updateComplete.then(this.#upgrade)\n  }\n\n  #updateHistoryScrollPosition = (event: MouseEvent) => {\n    const anchor = matchesAncestors(event.target as Element, 'a[href]') as HTMLAnchorElement | null;\n    if (isExternal(anchor)) {\n      this.#historyManager.updateHistoryScrollPosition();\n    }\n  }\n\n  #response$!: Observable<ResponseContext>\n\n  #upgrade = () => {\n    const { pushEvent$, hintEvent$ } = this.setupEventListeners();\n\n    const push$: Observable<ClickContext> = pushEvent$.pipe(\n      // takeUntil(this.subjects.disconnect),\n      map(([event, anchor]) => ({\n        cause: Cause.Push,\n        url: new URL(anchor.href, this.href),\n        anchor,\n        event,\n        cacheNr: this.#cacheNr,\n      })),\n      filter(x => isPushEvent(x, this)),\n      tap(({ event }) => {\n        event.preventDefault();\n        this.#historyManager.updateHistoryScrollPosition();\n      })\n    );\n\n    const pop$: Observable<Context> = fromEvent(window, \"popstate\").pipe(\n      // takeUntil(this.subjects.disconnect),\n      filter(() => window.history.state && window.history.state[this.histId]),\n      map(event => ({\n        cause: Cause.Pop,\n        url: new URL(window.location.href),\n        cacheNr: this.#cacheNr,\n        event,\n      }))\n    );\n\n    const reload$ = this.#reload$; // .pipe(takeUntil(this.subjects.disconnect));\n\n    const merged$: Observable<Context> = merge(push$, pop$, reload$).pipe(\n      startWith({ url: new URL(window.location.href) } as Context),\n      pairwise(),\n      map(([old, current]) => Object.assign(current, { oldURL: old.url })),\n      share(),\n    );\n\n    const page$ = merged$.pipe(\n      filter(p => !isHashChange(p)),\n      share(),\n    );\n\n    const hash$ = merged$.pipe(\n      filter(p => isHashChange(p)),\n      filter(() => history.state && history.state[this.histId]),\n      observeOn<Context>(animationFrameScheduler),\n      tap(context => {\n        this.#historyManager.updateHistoryState(context);\n        this.#scrollManager.manageScrollPosition(context);\n      }),\n    );\n\n    const pauser$ = defer(() => merge(\n      page$.pipe(mapTo(true)),\n      this.#response$.pipe(mapTo(false)),\n    )).pipe(\n      startWith(false),\n    );\n\n    const hint$: Observable<Context> = hintEvent$.pipe(\n      // takeUntil(this.subjects.disconnect),\n      filterWhen(pauser$.pipe(map(x => !x))),\n      map(([event, anchor]) => ({\n        cause: Cause.Hint,\n        url: new URL(anchor.href, this.href),\n        anchor,\n        event,\n        cacheNr: this.#cacheNr,\n      })),\n      filter(x => isHintEvent(x, this)),\n    );\n\n    const prefetchResponse$ = merge(hint$, page$).pipe(\n      distinctUntilChanged((x, y) => compareContext(x, y)),\n      switchMap(x => this.#fetchManager.fetchPage(x)),\n      startWith({ url: {} } as ResponseContext),\n      share(),\n    );\n\n    const response$ = this.#response$ = page$.pipe(\n      tap(context => {\n        this.#eventManager.onStart(context)\n        this.#historyManager.updateHistoryState(context);\n        this.#url = context.url;\n      }),\n      withLatestFrom(prefetchResponse$),\n      switchMap((args) => this.#fetchManager.getResponse(prefetchResponse$, ...args)),\n      share(),\n    );\n\n    const responseOk$ = response$.pipe(filter((ctx): ctx is ResponseContextOk => !ctx.error));\n    const responseErr$ = response$.pipe(filter((ctx): ctx is ResponseContextErr => !!ctx.error));\n\n    const main$ = responseOk$.pipe(\n      map(context => this.#updateManager.responseToContent(context)),\n      tap(context => this.#eventManager.emitReady(context)),\n      observeOn(animationFrameScheduler),\n      tap(context => {\n        this.#updateManager.updateDOM(context);\n        this.#historyManager.updateTitle(context)\n        this.#eventManager.emitAfter(context);\n      }),\n      startWith({\n        cause: Cause.Init,\n        url: this.#url,\n        scripts: [],\n      }),\n      observeOn(animationFrameScheduler),\n      tap(context => this.#scrollManager.manageScrollPosition(context)),\n      tap({ error: (e) => this.#eventManager.emitDOMError(e) }),\n      catchError((_, c) => c),\n      switchMap((x) => this.fadePromise.then(() => x)),\n      switchMap(x => this.#updateManager.reinsertScriptTags(x)),\n      tap({ error: e => this.#eventManager.emitError(e) }),\n      catchError((_, c) => c),\n      tap(context => this.#eventManager.emitLoad(context)),\n    );\n\n    const error$ = responseErr$.pipe(\n      tap(e => this.#eventManager.emitNetworkError(e)),\n    );\n\n    const progress$ = page$.pipe(\n      switchMap(context =>\n        defer(() => this.animPromise).pipe(\n          takeUntil(response$),\n          mapTo(context),\n        ),\n      ),\n      tap(context => this.#eventManager.emitProgress(context)),\n    );\n\n    // Subscriptions\n    main$.subscribe();\n    hash$.subscribe();\n    error$.subscribe();\n    progress$.subscribe();\n\n    this.#initialized.resolve(this);\n    this.fireEvent('init');\n  }\n\n  disconnectedCallback() {\n    window.removeEventListener(\"beforeunload\", this.#historyManager.updateHistoryScrollPosition);\n    document.documentElement.removeEventListener('click', this.#updateHistoryScrollPosition);\n  }\n}\n","// When fetching documents from an external source,\n// relative URLs will be resolved relative to the current `window.location`.\n// We can rewrite URL to absolute urls\nexport function rewriteURLs(replaceEls: (Element | null)[], base: string) {\n  replaceEls.forEach((el) => {\n    if (!el) return;\n    el.querySelectorAll(\"[href]\").forEach(rewriteURL(\"href\", base));\n    el.querySelectorAll(\"[src]\").forEach(rewriteURL(\"src\", base));\n    el.querySelectorAll(\"img[srcset]\").forEach(rewriteURLSrcSet(\"srcset\", base));\n    el.querySelectorAll(\"blockquote[cite]\").forEach(rewriteURL(\"cite\", base));\n    el.querySelectorAll(\"del[cite]\").forEach(rewriteURL(\"cite\", base));\n    el.querySelectorAll(\"ins[cite]\").forEach(rewriteURL(\"cite\", base));\n    el.querySelectorAll(\"q[cite]\").forEach(rewriteURL(\"cite\", base));\n    el.querySelectorAll(\"img[longdesc]\").forEach(rewriteURL(\"longdesc\", base));\n    el.querySelectorAll(\"frame[longdesc]\").forEach(rewriteURL(\"longdesc\", base));\n    el.querySelectorAll(\"iframe[longdesc]\").forEach(rewriteURL(\"longdesc\", base));\n    el.querySelectorAll(\"img[usemap]\").forEach(rewriteURL(\"usemap\", base));\n    el.querySelectorAll(\"input[usemap]\").forEach(rewriteURL(\"usemap\", base));\n    el.querySelectorAll(\"object[usemap]\").forEach(rewriteURL(\"usemap\", base));\n    el.querySelectorAll(\"form[action]\").forEach(rewriteURL(\"action\", base));\n    el.querySelectorAll(\"button[formaction]\").forEach(rewriteURL(\"formaction\", base));\n    el.querySelectorAll(\"input[formaction]\").forEach(rewriteURL(\"formaction\", base));\n    el.querySelectorAll(\"video[poster]\").forEach(rewriteURL(\"poster\", base));\n    el.querySelectorAll(\"object[data]\").forEach(rewriteURL(\"data\", base));\n    el.querySelectorAll(\"object[codebase]\").forEach(rewriteURL(\"codebase\", base));\n    el.querySelectorAll(\"object[archive]\").forEach(rewriteURLList(\"archive\", base));\n    /* el.querySelectorAll(\"command[icon]\").forEach(this.rewriteURL(\"icon\")); */ // obsolte\n  });\n}\n\nfunction rewriteURL(attr: string, base: string) {\n  return (el: Element) => {\n    try {\n      const attrVal = el.getAttribute(attr);\n      if (attrVal == null) return;\n      el.setAttribute(attr, new URL(attrVal, base).href);\n    } catch (e) {\n      // if (process.env.DEBUG) console.warn(`Couldn't rewrite URL in attribute ${attr} on element`, el);\n    }\n  };\n}\n\nfunction rewriteURLSrcSet(attr: string, base: string) {\n  return (el: Element) => {\n    try {\n      const attrVal = el.getAttribute(attr);\n      if (attrVal == null) return;\n      el.setAttribute(\n        attr,\n        attrVal\n          .split(/\\s*,\\s*/)\n          .map(str => {\n            const pair = str.split(/\\s+/);\n            pair[0] = new URL(pair[0], base).href;\n            return pair.join(\" \");\n          })\n          .join(\", \")\n      );\n    } catch (e) {\n      // if (process.env.DEBUG) console.warn(`Couldn't rewrite URLs in attribute ${attr} on element`, el);\n    }\n  };\n}\n\nfunction rewriteURLList(attr: string, base: string) {\n  return (el: Element) => {\n    try {\n      const attrVal = el.getAttribute(attr);\n      if (attrVal == null) return;\n      el.setAttribute(\n        attr,\n        attrVal\n          .split(/[\\s,]+/)\n          .map(str => new URL(str, base).href)\n          .join(\", \")\n      );\n    } catch (e) {\n      // if (process.env.DEBUG) console.warn(`Couldn't rewrite URLs in attribute ${attr} on element`, el);\n    }\n  };\n}","import { of, from } from \"rxjs\";\nimport { concatMap, catchError, finalize, mapTo } from \"rxjs/operators\";\n\nimport { HyPushState } from \".\";\n\nfunction cloneScript(script: HTMLScriptElement) {\n  const newScript = document.createElement('script');\n  Array.from(script.attributes).forEach(attr => newScript.setAttributeNode(attr.cloneNode() as Attr));\n  newScript.innerHTML = script.innerHTML;\n  return newScript;\n}\n\nexport class ScriptManager {\n  private parent: HyPushState;\n\n  constructor(parent: HyPushState) {\n    this.parent = parent;\n  }\n\n  get scriptSelector() { return this.parent.scriptSelector }\n\n  removeScriptTags(replaceEls: (Element|null)[]) {\n    const scripts: Array<[HTMLScriptElement, HTMLScriptElement]> = [];\n\n    replaceEls.forEach(el => {\n      if (el && this.scriptSelector) {\n        el.querySelectorAll(this.scriptSelector).forEach((script) => {\n          if (script instanceof HTMLScriptElement) {\n            const newScript = cloneScript(script);\n            const pair: [HTMLScriptElement, HTMLScriptElement] = [newScript, script];\n            scripts.push(pair);\n          }\n        });\n      }\n    });\n\n    return scripts;\n  }\n\n  reinsertScriptTags(context: { scripts: Array<[HTMLScriptElement, HTMLScriptElement]> }) {\n    if (!this.scriptSelector) return Promise.resolve(context);\n\n    const { scripts } = context;\n\n    const originalWrite = document.write;\n\n    return from(scripts).pipe(\n      concatMap(script => this.insertScript(script)),\n      catchError(error => of({ ...context, error })),\n      finalize(() => (document.write = originalWrite)),\n      mapTo(context),\n    )\n      .toPromise();\n  }\n\n  private insertScript([script, ref]: [HTMLScriptElement, HTMLScriptElement]): Promise<{}> {\n    document.write = (...args) => {\n      const temp = document.createElement(\"div\");\n      temp.innerHTML = args.join();\n      Array.from(temp.childNodes).forEach(node => ref.parentNode?.insertBefore(node, ref));\n    };\n\n    return new Promise((resolve, reject) => {\n      if (script.src !== \"\") {\n        script.addEventListener(\"load\", resolve);\n        script.addEventListener(\"error\", reject);\n        ref.parentNode?.replaceChild(script, ref);\n      } else {\n        ref.parentNode?.replaceChild(script, ref);\n        resolve({});\n      }\n    });\n  }\n}","import { getScrollTop, Cause } from \"./common\";\n\ninterface ScrollState {\n  [k: string]: any;\n  scrollTop?: number;\n  scrollHeight?: number;\n}\n\nexport class ScrollManager {\n  private parent: { histId: string } & HTMLElement;\n\n  constructor(parent: { histId: string } & HTMLElement) {\n    this.parent = parent;\n    if ('scrollRestoration' in history) {\n      history.scrollRestoration = 'manual';\n    }\n  }\n\n  manageScrollPosition({ cause, url: { hash } }: { cause: Cause, url: URL }) {\n    switch (cause) {\n      case Cause.Push: {\n        // FIXME: make configurable\n        this.scrollHashIntoView(hash, { behavior: \"smooth\", block: \"start\", inline: \"nearest\" });\n        break;\n      }\n      case Cause.Pop: {\n        this.restoreScrollPosition();\n        break;\n      }\n      case Cause.Init: {\n        this.restoreScrollPositionOnReload();\n        break;\n      }\n    }\n  }\n\n  private elementFromHash(hash: string) {\n    return document.getElementById(decodeURIComponent(hash.substr(1)))\n  }\n\n  private scrollHashIntoView(hash: string, options: boolean | ScrollIntoViewOptions) {\n    if (hash) {\n      const el = this.elementFromHash(hash);\n      if (el) el.scrollIntoView(options);\n    } else {\n      window.scroll(window.pageXOffset, 0);\n    }\n  }\n\n  private restoreScrollPosition() {\n    const { histId } = this.parent;\n    const { scrollTop } = (history.state && history.state[histId]) || {} as ScrollState;\n\n    if (scrollTop != null) {\n      window.scroll(window.pageXOffset, scrollTop);\n    }\n  }\n\n  private restoreScrollPositionOnReload() {\n    const { histId } = this.parent;\n    const scrollState = history.state && history.state[histId];\n    // FIXME: As far as I can tell there is no better way of figuring out if the user has scrolled\n    //        and it doesn't work on hash links b/c the scroll position is going to be non-null by definition\n    if (scrollState && getScrollTop() === 0) {\n      this.restoreScrollPosition();\n    } else if (location.hash) {\n      requestAnimationFrame(() => this.scrollHashIntoView(location.hash, true));\n    }\n  }\n};\n","import { isExternal, fragmentFromString } from \"./common\";\n\nimport { ScriptManager } from \"./script\";\nimport { rewriteURLs } from \"./rewrite-urls\";\n\nimport { ResponseContext, ResponseContextOk } from './fetch';\nimport { HyPushState } from \".\";\n\nconst CANONICAL_SEL = 'link[rel=canonical]';\nconst META_DESC_SEL = 'meta[name=description]';\n\nexport interface ReplaceContext extends ResponseContext {\n  title: string;\n  document: Document,\n  replaceEls: (Element | null)[];\n  scripts: Array<[HTMLScriptElement, HTMLScriptElement]>;\n};\n\nexport class UpdateManager {\n  private parent!: HyPushState;\n  private scriptManager!: ScriptManager;\n\n  constructor(parent: HyPushState) {\n    this.parent = parent;\n    this.scriptManager = new ScriptManager(parent);\n  }\n\n  get el() { return this.parent; }\n  get replaceSelector() { return this.parent.replaceSelector; }\n  get scriptSelector() { return this.parent.scriptSelector; }\n\n  // Extracts the elements to be replaced\n  private getReplaceElements(doc: Document): (Element | null)[] {\n    if (this.replaceSelector) {\n      return this.replaceSelector.split(',').map(sel => doc.querySelector(sel));\n    } else if (this.el.id) {\n      return [doc.getElementById(this.el.id)];\n    } else {\n      const index = Array.from(document.getElementsByTagName(this.el.tagName)).indexOf(this.el);\n      return [doc.getElementsByTagName(this.el.tagName)[index]];\n    }\n  }\n\n  // Takes the response string and turns it into document fragments\n  // that can be inserted into the DOM.\n  responseToContent(context: ResponseContextOk): ReplaceContext {\n    const { responseText } = context;\n\n    const doc = new DOMParser().parseFromString(responseText, 'text/html');\n    const { title = '' } = doc;\n    const replaceEls = this.getReplaceElements(doc);\n\n    if (replaceEls.every(el => el == null)) {\n      throw new Error(`Couldn't find any element in the document at '${location}'.`);\n    }\n\n    const scripts = this.scriptSelector\n      ? this.scriptManager.removeScriptTags(replaceEls)\n      : [];\n\n    return { ...context, document: doc, title, replaceEls, scripts };\n  }\n\n  // Replaces the old elements with the new one, one-by-one.\n  private replaceContentWithSelector(replaceSelector: string, elements: (Element | null)[]) {\n    replaceSelector\n      .split(',')\n      .map(sel => document.querySelector(sel))\n      .forEach((oldElement, i) => {\n        const el = elements[i];\n        if (el) oldElement?.parentNode?.replaceChild(el, oldElement);\n      });\n  }\n\n  // When no `replaceIds` are set, replace the entire content of the component (slow).\n  private replaceContentWholesale([el]: (Element | null)[]) {\n    if (el) this.el.innerHTML = el.innerHTML;\n  }\n\n  private replaceContent(replaceEls: (Element | null)[]) {\n    if (this.replaceSelector) {\n      this.replaceContentWithSelector(this.replaceSelector, replaceEls);\n    } else {\n      this.replaceContentWholesale(replaceEls);\n    }\n  }\n\n  private replaceHead(doc: Document)  {\n    const { head } = this.el.ownerDocument;\n\n    const canonicalEl = head.querySelector(CANONICAL_SEL) as HTMLLinkElement|null;\n    const cEl = doc.head.querySelector(CANONICAL_SEL) as HTMLLinkElement|null;\n    if (canonicalEl && cEl) canonicalEl.href = cEl.href;\n\n    const metaDescEl = head.querySelector(META_DESC_SEL) as HTMLMetaElement|null;\n    const mEl = doc.head.querySelector(META_DESC_SEL) as HTMLMetaElement|null;\n    if (metaDescEl && mEl) metaDescEl.content = mEl.content;\n  }\n\n  updateDOM(context: ReplaceContext) {\n    try {\n      const { replaceEls, document } = context;\n      if (isExternal(this.parent)) rewriteURLs(replaceEls, this.parent.href);\n      this.replaceHead(document)\n      this.replaceContent(replaceEls);\n    } catch (error) {\n      throw { ...context, error };\n    }\n  }\n\n  reinsertScriptTags(context: { scripts: Array<[HTMLScriptElement, HTMLScriptElement]> }) {\n    return this.scriptManager.reinsertScriptTags(context);\n  }\n}\n"],"names":["EmptyError","lastValueFrom","source","config","hasConfig","_typeof","Promise","resolve","reject","_hasValue","_value","subscribe","next","value","error","complete","defaultValue","Observable","innerFrom","argsOrArgArray","EMPTY","createOperatorSubscriber","popResultSelector","zip","args","_i","arguments","length","resultSelector","sources","subscriber","buffers","map","completed","add","sourceIndex","push","every","buffer","result","shift","apply","__spreadArray","__read","some","i","closed","operate","catchError","selector","innerSub","syncUnsub","handledResult","undefined","err","unsubscribe","exhaustMap","project","pipe","a","b","ii","index","isComplete","outerValue","AsyncAction","animationFrameProvider","AnimationFrameAction","_super","__extends","scheduler","work","_this","call","prototype","requestAsyncId","id","delay","actions","_scheduled","requestAnimationFrame","flush","recycleAsyncId","_a","cancelAnimationFrame","AsyncScheduler","AnimationFrameScheduler","action","_active","flushId","execute","state","animationFrameScheduler","animationFrame","createErrorClass","EmptyErrorImpl","name","message","isArray","Array","applyMixins","subscribeWhen","unsubscribeWhen","filterWhen","bufferDebounceTime","fetchRx","fragmentFromString","createMutationObservable","getScrollHeight","getScrollLeft","getScrollTop","matches","matchesAncestors","Cause","isExternal","url","location","window","protocol","host","isHash","_ref","hash","origin","pathname","shouldLoadAnchor","anchor","target","isPushEvent","_ref2","_ref2$event","event","metaKey","ctrlKey","isHintEvent","_ref3","isHashChange","_ref4","cause","_ref4$url","oldURL","Pop","Push","from","fromEvent","of","merge","filter","startWith","tap","mergeMap","mergeAll","switchMap","flat","x","concat","combineRecords","records","addedNodes","Set","r","removedNodes","EventListenersMixin","_classCallCheck","_createClass","key","setupEventListeners","pushEvent$","el","linkSelector","HTMLAnchorElement","matchOrQuery","querySelectorAll","addEventListeners","link","passive","hintEvent$","$","links","Map","addLink","has","set","removeLink","childList","subtree","Element","values","prefetch","timeout","t","setTimeout","EventManager","parent","onStart","context","animPromise","duration","transitionUntil","promise","all","fireEvent","detail","_objectSpread","emitDOMError","process","env","DEBUG","console","href","history","back","document","assign","emitNetworkError","emitError","emitReady","emitAfter","_this2","fadePromise","emitProgress","emitLoad","take","FetchManager","fetchPage","method","mode","headers","Accept","response","text","responseText","selectPrefetch","latestPrefetch","prefetch$","getResponse","_slicedToArray","HashChangeEvent","type","_ref$oldURL","_ref$newURL","newURL","e","CustomEvent","simHashChange","dispatchEvent","HistoryManager","updateHistoryScrollPosition","assignScrollPosition","replaceState","title","updateHistoryState","replace","Init","histId","_defineProperty","pushState","simulateHashChange","updateTitle","scrollTop","scrollHeight","property","customElement","Subject","BehaviorSubject","defer","takeUntil","pairwise","share","mapTo","distinctUntilChanged","withLatestFrom","observeOn","RxLitElement","createResolvablePromise","UpdateManager","ScrollManager","compareContext","p","q","cacheNr","HyPushState","_applyMixins","_inherits","_createSuper","_assertThisInitialized","baseURL","_HyPushState_initialized","_HyPushState_scrollManager","_HyPushState_historyManager","_HyPushState_fetchManager","_HyPushState_updateManager","_HyPushState_eventManager","_HyPushState_url","URL","_HyPushState_setLocation","u","__classPrivateFieldGet","_HyPushState_cacheNr","_HyPushState_reload$","_HyPushState_updateHistoryScrollPosition","_HyPushState_response$","_HyPushState_upgrade","_this$setupEventListe","push$","preventDefault","pop$","reload$","merged$","_ref5","old","current","Object","page$","hash$","manageScrollPosition","pauser$","hint$","_ref6","_ref7","Hint","prefetchResponse$","y","response$","__classPrivateFieldSet","_classPrivateFieldGe","_toConsumableArray","responseOk$","ctx","responseErr$","main$","responseToContent","updateDOM","scripts","_","c","then","reinsertScriptTags","error$","progress$","createRenderRoot","get","hostname","port","search","ancestorOrigins","tagName","reload","connectedCallback","_get","_getPrototypeOf","addEventListener","documentElement","updateComplete","disconnectedCallback","removeEventListener","__decorate","String","reflect","attribute","Boolean","Number","rewriteURLs","replaceEls","base","forEach","rewriteURL","rewriteURLSrcSet","rewriteURLList","attr","attrVal","getAttribute","setAttribute","split","str","pair","join","concatMap","finalize","cloneScript","script","newScript","createElement","attributes","setAttributeNode","cloneNode","innerHTML","ScriptManager","scriptSelector","removeScriptTags","HTMLScriptElement","originalWrite","write","insertScript","toPromise","ref","temp","_len","_key","childNodes","node","parentNode","insertBefore","src","replaceChild","_b","scrollRestoration","scrollHashIntoView","behavior","block","inline","restoreScrollPosition","restoreScrollPositionOnReload","elementFromHash","getElementById","decodeURIComponent","substr","options","scrollIntoView","scroll","pageXOffset","scrollState","CANONICAL_SEL","META_DESC_SEL","scriptManager","replaceSelector","getReplaceElements","doc","sel","querySelector","getElementsByTagName","indexOf","DOMParser","parseFromString","_doc$title","Error","replaceContentWithSelector","elements","oldElement","replaceContentWholesale","replaceContent","replaceHead","head","ownerDocument","canonicalEl","cEl","metaDescEl","mEl","content"],"sourceRoot":""}