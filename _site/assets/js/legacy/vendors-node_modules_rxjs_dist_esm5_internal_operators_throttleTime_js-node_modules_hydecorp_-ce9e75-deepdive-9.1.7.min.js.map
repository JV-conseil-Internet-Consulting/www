{"version":3,"file":"legacy/vendors-node_modules_rxjs_dist_esm5_internal_operators_throttleTime_js-node_modules_hydecorp_-ce9e75-deepdive-9.1.7.min.js","mappings":"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","sources":["webpack://deepdive/../../../../src/internal/observable/combineLatest.ts","webpack://deepdive/../../../../src/internal/operators/repeatWhen.ts","webpack://deepdive/../../../../src/internal/operators/sample.ts","webpack://deepdive/../../../../src/internal/operators/skip.ts","webpack://deepdive/../../../../src/internal/operators/skipWhile.ts","webpack://deepdive/../../../../src/internal/operators/throttle.ts","webpack://deepdive/../../../../src/internal/operators/throttleTime.ts","webpack://deepdive/../../../../src/internal/operators/timestamp.ts","webpack://deepdive/../../../../src/internal/util/argsArgArrayOrObject.ts","webpack://deepdive/../../../../src/internal/util/createObject.ts","webpack://deepdive/../src/calc.ts","webpack://deepdive/../src/common.ts","webpack://deepdive/../src/constants.ts","webpack://deepdive/../src/index.ts","webpack://deepdive/../src/observables.ts","webpack://deepdive/../src/styles.ts","webpack://deepdive/../src/update.ts","webpack://deepdive/../src/directives/class-map.ts","webpack://deepdive/../src/directives/style-map.ts"],"sourcesContent":[null,null,null,null,null,null,null,null,null,null,"import { VELOCITY_THRESHOLD } from \"./constants\";\n\nimport { Coord } from './observables';\n\n// Using shorthands for common functions\nconst min = Math.min.bind(Math);\nconst max = Math.max.bind(Math);\n\nexport class CalcMixin {\n  side!: 'left' | 'right';\n  range!: [number, number];\n\n  calcIsInRange({ clientX }: Coord, opened: boolean) {\n    // console.log(this.range, this.align);\n    switch (this.side) {\n      case \"left\": {\n        const [lower, upper] = this.range;\n        return clientX > lower && (opened || clientX < upper);\n      }\n      case \"right\": {\n        const upper = window.innerWidth - this.range[0];\n        const lower = window.innerWidth - this.range[1];\n        return clientX < upper && (opened || clientX > lower);\n      }\n      default:\n        throw Error();\n    }\n  }\n\n  calcIsSwipe({ clientX: startX }: Coord, { clientX: endX }: Coord, translateX: number, drawerWidth: number, _: number): boolean {\n    return endX !== startX || (translateX > 0 && translateX < drawerWidth);\n  }\n\n  calcWillOpen(_: {}, __: {}, translateX: number, drawerWidth: number, velocity: number): boolean {\n    switch (this.side) {\n      case \"left\": {\n        if (velocity > VELOCITY_THRESHOLD) return true;\n        else if (velocity < -VELOCITY_THRESHOLD) return false;\n        else if (translateX >= drawerWidth / 2) return true;\n        else return false;\n      }\n      case \"right\": {\n        if (-velocity > VELOCITY_THRESHOLD) return true;\n        else if (-velocity < -VELOCITY_THRESHOLD) return false;\n        else if (translateX <= -drawerWidth / 2) return true;\n        else return false;\n      }\n      default:\n        throw Error();\n    }\n  }\n\n  calcTranslateX({ clientX: moveX }: Coord, { clientX: startX }: Coord, startTranslateX: number, drawerWidth: number): number {\n    switch (this.side) {\n      case \"left\": {\n        const deltaX = moveX - startX;\n        const translateX = startTranslateX + deltaX;\n        return max(0, min(drawerWidth, translateX));\n      }\n      case \"right\": {\n        const deltaX = moveX - startX;\n        const translateX = startTranslateX + deltaX;\n        return min(0, max(-drawerWidth, translateX));\n      }\n      default:\n        throw Error();\n    }\n  }\n};","import { of } from \"rxjs\";\nimport { map } from \"rxjs/operators\";\nimport { createResizeObservable } from '@hydecorp/component';\nimport { ComplexAttributeConverter } from \"lit-element\";\n\nexport { applyMixins, subscribeWhen, filterWhen, tween } from '@hydecorp/component';\n\nexport function easeOutSine(t: number, b: number, c: number, d: number) {\n  return c * Math.sin((t / d) * (Math.PI / 2)) + b;\n}\n\nexport function observeWidth(el: HTMLElement) {\n  // This component should have at least basic support without `ResizeObserver` support,\n  // so we pass a one-time measurement when it's missing. Obviously this won't update, so BYO polyfill.\n  const resize$ = \"ResizeObserver\" in window\n    ? createResizeObservable(el)\n    : of({ contentRect: { width: el.clientWidth }});\n  return resize$.pipe(map(({ contentRect: { width } }) => width));\n}\n\nexport const rangeConverter: ComplexAttributeConverter<number[]> = {\n  fromAttribute(attr) {\n    return (attr ?? '').replace(/[\\[\\]]/g, '')\n      .split(',')\n      .map(Number);\n  },\n\n  toAttribute(range) {\n    return range.join(',');\n  },\n};\n\nexport function rangeHasChanged(curr: number[], prev: number[] = []) {\n  return curr.length !== prev.length || curr.some((v, i) => v !== prev[i]);\n}\n","// The base duration of the fling animation.\nexport const BASE_DURATION = 200;\n\n// We adjust the duration of the animation using the width of the drawer.\n// There is no physics to this, but we know from testing that the animation starts to feel bad\n// when the drawer increases in size.\n// From testing we know that, if we increase the duration as a fraction of the drawer width,\n// the animation stays smooth across common display sizes.\nexport const WIDTH_CONTRIBUTION = 0.15;\n\n// Minimum velocity of the drawer (in px/ms) when releasing to make it fling to opened/closed state.\nexport const VELOCITY_THRESHOLD = 0.15;\n","/** \n * Copyright (c) 2020 Florian Klampfer <https://qwtel.com/>\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n * \n * @license \n * @nocompile\n */\nimport { html, property, customElement, query } from 'lit-element';\nimport { classMap } from 'lit-html/directives/class-map';\nimport { styleMap } from 'lit-html/directives/style-map';\n\nimport { Observable, Subject, BehaviorSubject, combineLatest, merge, NEVER, defer, fromEvent } from \"rxjs\";\nimport { startWith, takeUntil, map, share, withLatestFrom, tap, sample, timestamp, pairwise, filter, switchMap, skip, finalize } from 'rxjs/operators';\n\nimport { RxLitElement, createResolvablePromise } from '@hydecorp/component';\n\nimport { BASE_DURATION, WIDTH_CONTRIBUTION } from './constants';\nimport { applyMixins, filterWhen, easeOutSine, observeWidth, rangeConverter, rangeHasChanged, tween } from './common';\nimport { ObservablesMixin, Coord } from './observables';\nimport { CalcMixin } from './calc';\nimport { UpdateMixin, DOMUpdater } from './update';\nimport { styles } from './styles';\n\n@customElement('hy-drawer')\nexport class HyDrawer \n    extends applyMixins(RxLitElement, [ObservablesMixin, UpdateMixin, CalcMixin])\n    implements ObservablesMixin, UpdateMixin, CalcMixin {\n\n  static styles = styles;\n\n  @query('.scrim') scrimEl!: HTMLElement;\n  @query('.wrapper') contentEl!: HTMLElement;\n  @query('.peek') peekEl!: HTMLElement;\n\n  @property({ type: Boolean, reflect: true }) opened: boolean = false;\n  @property({ type: String, reflect: true }) side: \"left\" | \"right\" = \"left\";\n  @property({ type: Boolean, reflect: true }) persistent: boolean = false;\n  @property({ type: Number, reflect: true }) threshold: number = 10;\n  @property({ type: Boolean, reflect: true }) noScroll: boolean = false;\n  @property({ type: Boolean, reflect: true }) mouseEvents: boolean = false;\n  // @property({ type: Boolean, reflect: true }) hashChange: boolean = false;\n  @property({ reflect: true, converter: rangeConverter, hasChanged: rangeHasChanged }) range: [number, number] = [0, 100];\n\n  // State\n  @property() scrimClickable!: boolean;\n  @property() grabbing!: boolean;\n  @property() willChange: boolean = false;\n\n  #initialized = createResolvablePromise();\n  get initialized() {\n    return this.#initialized;\n  }\n \n  // get histId() { return this.id || this.tagName; }\n  // get hashId() { return `#${this.histId}--opened`; }\n\n  translateX!: number;\n  opacity!: number;\n  isSliding!: boolean;\n\n  $!: {\n    opened: Subject<boolean>;\n    side: Subject<\"left\" | \"right\">;\n    persistent: Subject<boolean>;\n    preventDefault: Subject<boolean>;\n    mouseEvents: Subject<boolean>;\n    // hashChange: Subject<boolean>;\n  };\n\n  animateTo$!: Subject<boolean>;\n\n  // TODO: Prefer composition to mixins...\n  // ObservablesMixin\n  getStartObservable!: () => Observable<Coord>;\n  getMoveObservable!: (start: Observable<Coord>, end: Observable<Coord>) => Observable<Coord>;\n  getEndObservable!: () => Observable<Coord>;\n  getIsSlidingObservable!: (move: Observable<Coord>, start: Observable<Coord>, end: Observable<Coord>) => Observable<boolean>;\n  getIsSlidingObservableInner!: (move: Observable<Coord>, start: Observable<Coord>) => Observable<boolean>;\n\n  // CalcMixin\n  calcIsInRange!: (start: Coord, opened: boolean) => boolean;\n  calcIsSwipe!: (start: Coord, end: Coord, translateX: number, drawerWidth: number, _: number) => boolean;\n  calcWillOpen!: (start: {}, end: {}, translateX: number, drawerWidth: number, velocity: number) => boolean;\n  calcTranslateX!: (move: Coord, start: Coord, startTranslateX: number, drawerWidth: number) => number;\n\n  // UpdateMixin\n  updateDOM!: (translateX: number, drawerWidth: number) => void;\n  updater!: DOMUpdater;\n\n  // HyDrawer\n  getDrawerWidth(): Observable<number> {\n    const content$ = observeWidth(this.contentEl)\n      .pipe(tap(px => this.fireEvent('content-width-change', { detail: px })));\n    const peek$ = observeWidth(this.peekEl)\n      .pipe(tap(px => this.fireEvent('peek-width-change', { detail: px })));\n\n    return combineLatest([content$, peek$]).pipe(\n      // takeUntil(this.subjects.disconnect),\n      map(([contentWidth, peekWidth]) => contentWidth - peekWidth),\n      share(),\n    );\n  }\n\n  // private consolidateState() {\n  //   const hashOpened = location.hash === this.hashId;\n  //   const isReload = history.state && history.state[this.histId];\n  //   if (isReload) {\n  //     if (hashOpened !== this.opened) {\n  //       this.opened = hashOpened;\n  //     }\n  //   } else {\n  //     const url = new URL(location.href);\n  //     const newState = { ...history.state, [this.histId]: { backable: false } };\n  //     if (hashOpened && !this.opened) {\n  //       url.hash = '';\n  //       history.replaceState(newState, document.title, url.href);\n\n  //       url.hash = this.hashId;\n  //       history.pushState({ [this.histId]: { backable: true } }, document.title, url.href);\n\n  //       this.opened = true;\n  //     }\n  //     else if (!hashOpened && this.opened) {\n  //       history.replaceState(newState, document.title, url.href);\n\n  //       url.hash = this.hashId;\n  //       history.pushState({ [this.histId]: { backable: true } }, document.title, url.href);\n  //     }\n  //     else {\n  //       history.replaceState(newState, document.title, url.href);\n  //     }\n  //   }\n  // }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    // if (this.hashChange) this.consolidateState()\n\n    this.$ = {\n      opened: new BehaviorSubject(this.opened),\n      side: new BehaviorSubject(this.side),\n      persistent: new BehaviorSubject(this.persistent),\n      preventDefault: new BehaviorSubject(this.noScroll),\n      mouseEvents: new BehaviorSubject(this.mouseEvents),\n      // hashChange: new BehaviorSubject(this.hashChange),\n    };\n\n    this.scrimClickable = this.opened\n    this.animateTo$ = new Subject<boolean>();\n    this.updater = DOMUpdater.getUpdaterForPlatform(this);\n    this.updateComplete.then(this.upgrade);\n  }\n\n  #translateX$!: Observable<number>;\n  #startTranslateX$!: Observable<number>;\n  #tweenTranslateX$!: Observable<number>;\n\n  upgrade = () => {\n    const drawerWidth$ = this.getDrawerWidth();\n    const active$ = this.$.persistent.pipe(map(_ => !_));\n\n    const start$ = this.getStartObservable().pipe(\n      // takeUntil(this.subjects.disconnect),\n      filterWhen(active$),\n      share(),\n    );\n\n    const isScrimVisible$ = defer(() => {\n      return this.#translateX$.pipe(map(translateX => translateX !== 0))\n    });\n\n    const isInRange$ = start$.pipe(\n      withLatestFrom(isScrimVisible$),\n      map(args => this.calcIsInRange(...args)),\n      tap((inRange) => {\n        if (inRange) {\n          this.willChange = true;\n          this.fireEvent('prepare');\n        }\n      }),\n      share(),\n    );\n\n    const end$ = this.getEndObservable().pipe(\n      // takeUntil(this.subjects.disconnect),\n      filterWhen(active$, isInRange$),\n      tap(() => { if (this.mouseEvents) this.grabbing = false; }),\n      share(),\n    );\n\n    const move$ = this.getMoveObservable(start$, end$).pipe(\n      // takeUntil(this.subjects.disconnect),\n      filterWhen(active$, isInRange$),\n      share(),\n    );\n\n    const isSliding$ = this.getIsSlidingObservable(move$, start$, end$).pipe(\n      tap(isSliding => {\n        this.isSliding = isSliding;\n        if (isSliding && this.mouseEvents) this.grabbing = true;\n        // if (isSliding) this.fireEvent('slidestart', { detail: this.opened });\n      })\n    );\n\n    const translateX$ = this.#translateX$ = defer(() => {\n      const jumpTranslateX$ = combineLatest([this.$.opened, this.$.side, drawerWidth$]).pipe(\n        map(([opened, side, drawerWidth]) => {\n          return !opened ? 0 : drawerWidth * (side === \"left\" ? 1 : -1);\n        }),\n      );\n\n      const moveTranslateX$ = move$.pipe(\n        filterWhen(isSliding$),\n        tap(() => (this.scrimClickable = false)),\n        tap(({ event }) => event && this.noScroll && event.preventDefault()),\n        withLatestFrom(start$, this.#startTranslateX$, drawerWidth$),\n        map(args => this.calcTranslateX(...args))\n      );\n\n      return merge(this.#tweenTranslateX$, jumpTranslateX$, moveTranslateX$);\n    }).pipe(share());\n\n    this.#startTranslateX$ = translateX$.pipe(sample(start$));\n\n    const velocity$ = translateX$.pipe(\n      timestamp(),\n      pairwise(),\n      filter(([{ timestamp: prevTime }, { timestamp: time }]) => time - prevTime > 0),\n      map(\n        ([{ value: prevX, timestamp: prevTime }, { value: x, timestamp: time }]) =>\n          (x - prevX) / (time - prevTime)\n      ),\n      startWith(0),\n    );\n\n    const willOpen$ = end$.pipe(\n      withLatestFrom(start$, translateX$, drawerWidth$, velocity$),\n      filter(args => this.calcIsSwipe(...args)),\n      map(args => this.calcWillOpen(...args)),\n      // TODO: only fire `slideend` event when slidestart fired as well?\n      // tap(willOpen => this.fireEvent('slideend', { detail: willOpen })),\n    );\n\n    const animateTo$ = this.animateTo$.pipe(tap(() => {\n      this.willChange = true;\n      this.fireEvent('prepare');\n    }));\n\n    this.#tweenTranslateX$ = merge(willOpen$, animateTo$).pipe(\n      withLatestFrom(translateX$, drawerWidth$),\n      switchMap(([willOpen, translateX, drawerWidth]) => {\n        const inv = this.side === \"left\" ? 1 : -1;\n        const endTranslateX = willOpen ? drawerWidth * inv : 0;\n        const diffTranslateX = endTranslateX - translateX;\n        const duration = Math.ceil(BASE_DURATION + drawerWidth * WIDTH_CONTRIBUTION);\n\n        return tween(easeOutSine, translateX, diffTranslateX, duration).pipe(\n          finalize(() => { this.transitioned(willOpen) }),\n          takeUntil(start$),\n          takeUntil(this.$.side.pipe(skip(1))),\n          share(),\n        );\n      })\n    );\n\n    translateX$.pipe(\n      withLatestFrom(drawerWidth$),\n      tap((args) => {\n        this.updateDOM(...args);\n        const { translateX, opacity } = this;\n        this.fireEvent('move', { detail: { translateX, opacity }, bubbles: false });\n      }),\n    ).subscribe();\n\n    fromEvent(this.scrimEl, \"click\").pipe(\n      // takeUntil(this.subjects.disconnect),\n      tap(() => this.close()),\n    ).subscribe();\n\n    active$.pipe(\n      // takeUntil(this.subjects.disconnect),\n      tap((active) => {\n        this.scrimEl.style.display = active ? \"block\" : \"none\";\n      }),\n    ).subscribe();\n\n    this.$.mouseEvents.pipe(\n      // takeUntil(this.subjects.disconnect),\n      switchMap(mouseEvents => {\n        return mouseEvents\n          ? start$.pipe(withLatestFrom(isInRange$))\n          : NEVER;\n      }),\n      filter(([coord, isInRange]) => isInRange && coord.event != null),\n      tap(([{ event }]) => event && event.preventDefault()),\n    ).subscribe();\n\n    // fromEvent(window, 'hashchange').pipe(\n    //   // takeUntil(this.subjects.disconnect),\n    //   subscribeWhen(this.$.hashChange),\n    //   tap(() => {\n    //     const opened = location.hash === this.hashId;\n    //     if (!history.state && opened) {\n    //       history.replaceState({ [this.histId]: { backable: true } }, document.title)\n    //     }\n\n    //     // If the state doesn't match open/close the drawer\n    //     if (opened !== this.opened) this.animateTo$.next(opened);\n    //   }),\n    // ).subscribe();\n\n    this.fireEvent(\"init\", { detail: this.opened });\n    this.#initialized.resolve(this);\n  }\n\n  private transitioned = (hasOpened: boolean) => {\n    this.opened = this.scrimClickable = hasOpened;\n    this.willChange = false;\n\n    // if (this.hashChange) this.transitionedHash(hasOpened)\n\n    this.fireEvent('transitioned', { detail: hasOpened });\n  }\n\n  // private transitionedHash(hasOpened: boolean) {\n  //   const hasClosed = !hasOpened;\n  //   const { backable } = history.state && history.state[this.histId] || { backable: false }\n  //   if (hasClosed && backable) {\n  //     history.back()\n  //   } \n  //   if (hasOpened && location.hash !== this.hashId) {\n  //     location.hash = this.hashId;\n  //   }\n  // }\n\n  render() {\n    return html`\n      <div class=\"peek full-height\"></div>\n      <div\n        class=\"scrim\"\n        style=${styleMap({\n          willChange: this.willChange ? 'opacity' : '',\n          pointerEvents: this.scrimClickable ? 'all' : '',\n        })}>\n      </div>\n      ${this.mouseEvents && this.grabbing && !this.scrimClickable \n        ? html`<div class=\"grabbing-screen full-screen\"></div>` \n        : null}\n      <div\n        class=${classMap({\n          wrapper: true,\n          'full-height': true,\n          [this.side]: true,\n          grab: this.mouseEvents,\n          grabbing: this.mouseEvents && this.grabbing,\n        })}\n        style=${styleMap({ \n          willChange: this.willChange ? 'transform' : '',\n        })}\n      >\n        <div class=\"overflow\">\n          <slot></slot>\n        </div>\n      </div>\n    `;\n  }\n\n  @property()\n  open() {\n    this.animateTo$.next(true);\n  }\n\n  @property()\n  close() {\n    this.animateTo$.next(false);\n  }\n\n  @property()\n  toggle() {\n    this.animateTo$.next(!this.opened);\n  }\n}\n","import { Observable, combineLatest, fromEvent, merge, NEVER, ObservedValueOf } from \"rxjs\";\n\nimport {\n  // tap,\n  filter,\n  map,\n  mapTo,\n  repeatWhen,\n  skipWhile,\n  startWith,\n  switchMap,\n  take,\n  withLatestFrom,\n} from \"rxjs/operators\";\n\nimport { subscribeWhen } from \"./common\";\n\nconst abs = Math.abs.bind(Math);\n\nexport type Coord = {\n  readonly target: EventTarget;\n  readonly clientX: number;\n  readonly clientY: number;\n  readonly pageX: number;\n  readonly pageY: number;\n  readonly screenX: number;\n  readonly screenY: number;\n  event?: Event;\n}\n\nexport class ObservablesMixin {\n  $!: {\n    mouseEvents: Observable<boolean>;\n    preventDefault: Observable<boolean>;\n  }\n\n  threshold!: number;\n  noScroll!: boolean;\n\n  getStartObservable() {\n    return combineLatest([this.$.mouseEvents]).pipe(\n      switchMap(([mouseEvents]) => {\n        const touchstart$ = (<Observable<TouchEvent>>fromEvent(document, \"touchstart\", { passive: true })).pipe(\n          filter(({ touches }) => touches.length === 1),\n          map(({ touches }) => touches[0] as Coord)\n        );\n\n        const mousedown$ = !mouseEvents\n          ? NEVER\n          : (<Observable<MouseEvent>>fromEvent(document, \"mousedown\")).pipe(\n            map((e) => (((e as Coord).event = e), e as Coord)),\n          );\n\n        return merge(touchstart$, mousedown$);\n      })\n    );\n  }\n\n  getMoveObservable(start$: Observable<Coord>, end$: Observable<Coord>) {\n    return combineLatest([this.$.mouseEvents, this.$.preventDefault]).pipe(\n      switchMap(([mouseEvents, preventDefault]) => {\n        const touchmove$ = (<Observable<TouchEvent>>fromEvent(document, \"touchmove\", { passive: !preventDefault })).pipe(\n          map(e => (((e.touches[0] as Coord).event = e), e.touches[0] as Coord))\n        );\n\n        const mousemove$ = !mouseEvents\n          ? NEVER\n          : (<Observable<MouseEvent>>fromEvent(document, \"mousemove\", { passive: !preventDefault })).pipe(\n            subscribeWhen(merge(start$.pipe(mapTo(true)), end$.pipe(mapTo(false)))),\n            map(e => (((e as Coord).event = e), e as Coord))\n          );\n\n        return merge(touchmove$, mousemove$);\n      })\n    );\n  }\n\n  getEndObservable() {\n    return combineLatest([this.$.mouseEvents]).pipe(\n      switchMap(([mouseEvents]) => {\n        const touchend$ = (<Observable<TouchEvent>>fromEvent(document, \"touchend\", { passive: true })).pipe(\n          filter(({ touches }) => touches.length === 0),\n          map(event => event.changedTouches[0] as Coord)\n        );\n\n        const mouseup$ = !mouseEvents\n          ? NEVER\n          : (<Observable<MouseEvent>>fromEvent(document, \"mouseup\", { passive: true })).pipe(\n            map(e => (((e as Coord).event = e), e as Coord)),\n          );\n\n        return merge(touchend$, mouseup$);\n      })\n    );\n  }\n\n  getIsSlidingObservable(move$: Observable<Coord>, start$: Observable<Coord>, end$: Observable<Coord>) {\n    return this.getIsSlidingObservableInner(move$, start$).pipe(\n      take(1),\n      startWith(undefined),\n      repeatWhen(() => end$)\n    );\n  }\n\n  getIsSlidingObservableInner(move$: Observable<Coord>, start$: Observable<Coord>) {\n    if (this.threshold) {\n      return move$.pipe(\n        withLatestFrom(start$),\n        skipWhile(\n          ([{ clientX, clientY }, { clientX: startX, clientY: startY }]) =>\n            abs(startY - clientY) < this.threshold && abs(startX - clientX) < this.threshold\n        ),\n        map(\n          ([{ clientX, clientY }, { clientX: startX, clientY: startY }]) =>\n            abs(startX - clientX) >= abs(startY - clientY)\n        )\n      );\n    } else {\n      return move$.pipe(\n        withLatestFrom(start$),\n        map(([{ clientX, clientY, event }, { clientX: startX, clientY: startY }]) => {\n          const isSliding = abs(startX - clientX) >= abs(startY - clientY);\n          if (this.noScroll && isSliding && event) event.preventDefault();\n          return isSliding;\n        })\n      );\n    }\n  }\n}\n","import { css } from 'lit-element';\n\nexport const styles = css`\n  @media screen {\n    :host {\n      touch-action: pan-x;\n    }\n\n    .full-screen {\n      position: fixed;\n      top: 0;\n      left: 0;\n      height: 100vh;\n      width: 100vw;\n    }\n\n    .full-height {\n      position: fixed;\n      top: 0;\n      height: 100vh;\n    }\n\n    .peek {\n      left: 0;\n      width: var(--hy-drawer-peek-width, 0px);\n      visibility: hidden;\n      z-index: calc(var(--hy-drawer-z-index, 100) - 1);\n    }\n\n    .scrim {\n      position: fixed;\n      top: 0;\n      left: 0;\n      height: 10vh;\n      width: 10vw;\n      transform: scale(10);\n      transform-origin: top left;\n      opacity: 0;\n      pointer-events: none;\n      background: var(--hy-drawer-scrim-background, rgba(0, 0, 0, 0.5));\n      z-index: var(--hy-drawer-z-index, 100);\n      -webkit-tap-highlight-color: transparent;\n    }\n\n    .range {\n      position: fixed;\n      top: 0;\n      height: 100vh;\n      z-index: calc(var(--hy-drawer-z-index, 100) + 1);\n    }\n\n    .grabbing-screen {\n      cursor: grabbing;\n      z-index: calc(var(--hy-drawer-z-index, 100) + 2);\n    }\n\n    .wrapper {\n      width: var(--hy-drawer-width, 300px);\n      background: var(--hy-drawer-background, inherit);\n      box-shadow: var(--hy-drawer-box-shadow, 0 0 15px rgba(0, 0, 0, 0.25));\n      z-index: calc(var(--hy-drawer-z-index, 100) + 3);\n      contain: strict;\n    }\n\n    .wrapper.left {\n      left:  calc(-1 * var(--hy-drawer-width, 300px) + var(--hy-drawer-peek-width, 0px));\n    }\n\n    .wrapper.right {\n      right:  calc(-1 * var(--hy-drawer-width, 300px) + var(--hy-drawer-peek-width, 0px));\n    }\n\n    .wrapper > .overflow {\n      position: absolute;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      left: 0;\n      overflow-x: hidden;\n      overflow-y: auto;\n      overscroll-behavior: contain;\n      -webkit-overflow-scrolling: touch;\n    }\n\n    .grab {\n      cursor: move;\n      cursor: grab;\n    }\n\n    .grabbing {\n      cursor: grabbing;\n    }\n  }\n\n  @media print {\n    .scrim {\n      display: none !important;\n    }\n\n    .wrapper {\n      transform: none !important;\n    }\n  }\n`;","export type CallbackValue = { translateX: number, opacity: number };\n\nexport class UpdateMixin {\n  contentEl!: HTMLElement;\n  scrimEl!: HTMLElement;\n\n  translateX!: number;\n  side!: string;\n  opacity!: number;\n\n  updater!: DOMUpdater;\n\n  updateDOM(translateX: number, drawerWidth: number) {\n    const inv = this.side === \"left\" ? 1 : -1;\n    const opacity = (translateX / drawerWidth) * inv || 0;\n\n    this.translateX = translateX;\n    this.opacity = opacity;\n\n    this.updater.updateDOM(translateX, opacity);\n  }\n}\n\nexport abstract class DOMUpdater {\n  static getUpdaterForPlatform(parent: UpdateMixin) {\n    const hasCSSOM = \"attributeStyleMap\" in Element.prototype && \"CSS\" in window && \"number\" in CSS;\n    return hasCSSOM\n      ? new AttributeStyleMapUpdater(parent)\n      : new StyleUpdater(parent);\n  }\n\n  private parent: UpdateMixin;\n  constructor(parent: UpdateMixin) {\n    this.parent = parent;\n  }\n  get contentEl() { return this.parent.contentEl }\n  get scrimEl() { return this.parent.scrimEl }\n\n  abstract updateDOM(translateX: number, opacity: number): void;\n}\n\nexport class StyleUpdater extends DOMUpdater {\n  constructor(parent: UpdateMixin) { super(parent); }\n\n  updateDOM(translateX: number, opacity: number) {\n    this.contentEl.style.transform = `translate(${translateX}px, 0px)`;\n    this.scrimEl.style.opacity = `${opacity}`;\n  }\n}\n\nexport class AttributeStyleMapUpdater extends DOMUpdater {\n  private tvalue: CSSTransformValue;\n  private ovalue: CSSUnitValue;\n\n  constructor(parent: UpdateMixin) {\n    super(parent);\n    this.tvalue = new CSSTransformValue([new CSSTranslate(CSS.px(0), CSS.px(0))]);\n    this.ovalue = CSS.number(1);\n  }\n\n  updateDOM(translateX: number, opacity: number) {\n    ((this.tvalue[0] as CSSTranslate).x as CSSUnitValue).value = translateX;\n    this.ovalue.value = opacity;\n\n    this.contentEl.attributeStyleMap.set(\"transform\", this.tvalue);\n    this.scrimEl.attributeStyleMap.set(\"opacity\", this.ovalue);\n  }\n}","/**\n * @license\n * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\nimport {AttributePart, directive, Part, PropertyPart} from '../lit-html.js';\n\n// IE11 doesn't support classList on SVG elements, so we emulate it with a Set\nclass ClassList {\n  element: Element;\n  classes: Set<string> = new Set();\n  changed = false;\n\n  constructor(element: Element) {\n    this.element = element;\n    const classList = (element.getAttribute('class') || '').split(/\\s+/);\n    for (const cls of classList) {\n      this.classes.add(cls);\n    }\n  }\n  add(cls: string) {\n    this.classes.add(cls);\n    this.changed = true;\n  }\n\n  remove(cls: string) {\n    this.classes.delete(cls);\n    this.changed = true;\n  }\n\n  commit() {\n    if (this.changed) {\n      let classString = '';\n      this.classes.forEach((cls) => classString += cls + ' ');\n      this.element.setAttribute('class', classString);\n    }\n  }\n}\n\nexport interface ClassInfo {\n  readonly [name: string]: string|boolean|number;\n}\n\n/**\n * Stores the ClassInfo object applied to a given AttributePart.\n * Used to unset existing values when a new ClassInfo object is applied.\n */\nconst previousClassesCache = new WeakMap<Part, Set<string>>();\n\n/**\n * A directive that applies CSS classes. This must be used in the `class`\n * attribute and must be the only part used in the attribute. It takes each\n * property in the `classInfo` argument and adds the property name to the\n * element's `class` if the property value is truthy; if the property value is\n * falsey, the property name is removed from the element's `class`. For example\n * `{foo: bar}` applies the class `foo` if the value of `bar` is truthy.\n * @param classInfo {ClassInfo}\n */\nexport const classMap = directive((classInfo: ClassInfo) => (part: Part) => {\n  if (!(part instanceof AttributePart) || (part instanceof PropertyPart) ||\n      part.committer.name !== 'class' || part.committer.parts.length > 1) {\n    throw new Error(\n        'The `classMap` directive must be used in the `class` attribute ' +\n        'and must be the only part in the attribute.');\n  }\n\n  const {committer} = part;\n  const {element} = committer;\n\n  let previousClasses = previousClassesCache.get(part);\n  if (previousClasses === undefined) {\n    // Write static classes once\n    // Use setAttribute() because className isn't a string on SVG elements\n    element.setAttribute('class', committer.strings.join(' '));\n    previousClassesCache.set(part, previousClasses = new Set());\n  }\n\n  const classList =\n      (element.classList || new ClassList(element)) as DOMTokenList | ClassList;\n\n  // Remove old classes that no longer apply\n  // We use forEach() instead of for-of so that re don't require down-level\n  // iteration.\n  previousClasses.forEach((name) => {\n    if (!(name in classInfo)) {\n      classList.remove(name);\n      previousClasses!.delete(name);\n    }\n  });\n\n  // Add or remove classes based on their classMap value\n  for (const name in classInfo) {\n    const value = classInfo[name];\n    if (value != previousClasses.has(name)) {\n      // We explicitly want a loose truthy check of `value` because it seems\n      // more convenient that '' and 0 are skipped.\n      if (value) {\n        classList.add(name);\n        previousClasses.add(name);\n      } else {\n        classList.remove(name);\n        previousClasses.delete(name);\n      }\n    }\n  }\n  if (typeof (classList as ClassList).commit === 'function') {\n    (classList as ClassList).commit();\n  }\n});\n","/**\n * @license\n * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\nimport {AttributePart, directive, Part, PropertyPart} from '../lit-html.js';\n\nexport interface StyleInfo {\n  readonly [name: string]: string;\n}\n\n/**\n * Stores the StyleInfo object applied to a given AttributePart.\n * Used to unset existing values when a new StyleInfo object is applied.\n */\nconst previousStylePropertyCache = new WeakMap<AttributePart, Set<string>>();\n\n/**\n * A directive that applies CSS properties to an element.\n *\n * `styleMap` can only be used in the `style` attribute and must be the only\n * expression in the attribute. It takes the property names in the `styleInfo`\n * object and adds the property values as CSS properties. Property names with\n * dashes (`-`) are assumed to be valid CSS property names and set on the\n * element's style object using `setProperty()`. Names without dashes are\n * assumed to be camelCased JavaScript property names and set on the element's\n * style object using property assignment, allowing the style object to\n * translate JavaScript-style names to CSS property names.\n *\n * For example `styleMap({backgroundColor: 'red', 'border-top': '5px', '--size':\n * '0'})` sets the `background-color`, `border-top` and `--size` properties.\n *\n * @param styleInfo {StyleInfo}\n */\nexport const styleMap = directive((styleInfo: StyleInfo) => (part: Part) => {\n  if (!(part instanceof AttributePart) || (part instanceof PropertyPart) ||\n      part.committer.name !== 'style' || part.committer.parts.length > 1) {\n    throw new Error(\n        'The `styleMap` directive must be used in the style attribute ' +\n        'and must be the only part in the attribute.');\n  }\n\n  const {committer} = part;\n  const {style} = committer.element as HTMLElement;\n\n  let previousStyleProperties = previousStylePropertyCache.get(part);\n\n  if (previousStyleProperties === undefined) {\n    // Write static styles once\n    style.cssText = committer.strings.join(' ');\n    previousStylePropertyCache.set(part, previousStyleProperties = new Set());\n  }\n\n  // Remove old properties that no longer exist in styleInfo\n  // We use forEach() instead of for-of so that re don't require down-level\n  // iteration.\n  previousStyleProperties.forEach((name) => {\n    if (!(name in styleInfo)) {\n      previousStyleProperties!.delete(name);\n      if (name.indexOf('-') === -1) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        (style as any)[name] = null;\n      } else {\n        style.removeProperty(name);\n      }\n    }\n  });\n\n  // Add or update properties\n  for (const name in styleInfo) {\n    previousStyleProperties.add(name);\n    if (name.indexOf('-') === -1) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      (style as any)[name] = styleInfo[name];\n    } else {\n      style.setProperty(name, styleInfo[name]);\n    }\n  }\n});\n"],"names":["Observable","argsArgArrayOrObject","from","identity","mapOneOrManyArgs","popResultSelector","popScheduler","createObject","createOperatorSubscriber","executeSchedule","combineLatest","args","_i","arguments","length","scheduler","resultSelector","_a","observables","keys","result","combineLatestInit","values","pipe","valueTransform","subscriber","maybeSchedule","Array","active","remainingFirstValues","i","source","hasFirstValue","subscribe","value","next","slice","complete","execute","subscription","innerFrom","Subject","operate","repeatWhen","notifier","innerSub","syncResub","completions$","isNotifierComplete","isMainComplete","checkComplete","getCompletionSubject","subscribeForRepeatWhen","undefined","unsubscribe","noop","sample","hasValue","lastValue","filter","skip","count","_","index","skipWhile","predicate","taking","defaultThrottleConfig","leading","trailing","throttle","durationSelector","config","sendValue","throttled","isComplete","endThrottling","send","cleanupThrottling","startThrottle","closed","asyncScheduler","timer","throttleTime","duration","duration$","dateTimestampProvider","map","timestamp","timestampProvider","now","isArray","getPrototypeOf","Object","objectProto","prototype","getKeys","first_1","isPOJO","key","obj","_typeof","reduce","VELOCITY_THRESHOLD","min","Math","bind","max","CalcMixin","_classCallCheck","_createClass","calcIsInRange","_ref","opened","clientX","side","_this$range","_slicedToArray","range","lower","upper","window","innerWidth","Error","calcIsSwipe","_ref2","_ref3","translateX","drawerWidth","startX","endX","calcWillOpen","__","velocity","calcTranslateX","_ref4","_ref5","startTranslateX","moveX","deltaX","of","createResizeObservable","applyMixins","subscribeWhen","filterWhen","tween","easeOutSine","t","b","c","d","sin","PI","observeWidth","el","resize$","contentRect","width","clientWidth","rangeConverter","fromAttribute","attr","replace","split","Number","toAttribute","join","rangeHasChanged","curr","prev","some","v","BASE_DURATION","WIDTH_CONTRIBUTION","html","property","customElement","query","classMap","styleMap","BehaviorSubject","merge","NEVER","defer","fromEvent","startWith","takeUntil","share","withLatestFrom","tap","pairwise","switchMap","finalize","RxLitElement","createResolvablePromise","ObservablesMixin","UpdateMixin","DOMUpdater","styles","HyDrawer","_applyMixins","_inherits","_super","_createSuper","_this","persistent","threshold","noScroll","mouseEvents","willChange","_HyDrawer_initialized","set","_assertThisInitialized","_HyDrawer_translateX$","_HyDrawer_startTranslateX$","_HyDrawer_tweenTranslateX$","upgrade","drawerWidth$","getDrawerWidth","active$","$","start$","getStartObservable","isScrimVisible$","__classPrivateFieldGet","isInRange$","_this2","apply","_toConsumableArray","inRange","fireEvent","end$","getEndObservable","grabbing","move$","getMoveObservable","isSliding$","getIsSlidingObservable","isSliding","translateX$","__classPrivateFieldSet","jumpTranslateX$","moveTranslateX$","scrimClickable","event","preventDefault","_this3","velocity$","prevTime","time","_ref6","_ref7","_ref7$","prevX","_ref7$2","x","willOpen$","_this4","_this5","animateTo$","_ref8","_ref9","willOpen","inv","endTranslateX","diffTranslateX","ceil","transitioned","_this6","updateDOM","_assertThisInitialize","opacity","detail","bubbles","scrimEl","close","style","display","_ref10","_ref11","coord","isInRange","_ref12","_ref13","resolve","hasOpened","get","_this7","content$","contentEl","px","peek$","peekEl","_ref14","_ref15","contentWidth","peekWidth","connectedCallback","_get","_getPrototypeOf","call","updater","getUpdaterForPlatform","updateComplete","then","render","_classMap","_templateObject","_taggedTemplateLiteral","pointerEvents","_templateObject2","wrapper","_defineProperty","open","toggle","__decorate","type","Boolean","reflect","String","converter","hasChanged","mapTo","take","abs","touchstart$","document","passive","touches","mousedown$","e","touchmove$","mousemove$","touchend$","changedTouches","mouseup$","getIsSlidingObservableInner","_ref11$","clientY","_ref11$2","startY","_ref13$","_ref13$2","_ref15$","_ref15$2","css","parent","hasCSSOM","Element","CSS","AttributeStyleMapUpdater","StyleUpdater","_DOMUpdater","transform","concat","_DOMUpdater2","_super2","tvalue","CSSTransformValue","CSSTranslate","ovalue","number","attributeStyleMap","AttributePart","directive","PropertyPart","ClassList","element","classes","Set","changed","classList","getAttribute","_iterator","_createForOfIteratorHelper","_step","s","n","done","cls","add","err","f","remove","delete","commit","classString","forEach","setAttribute","previousClassesCache","WeakMap","classInfo","part","committer","name","parts","previousClasses","strings","has","previousStylePropertyCache","styleInfo","previousStyleProperties","cssText","indexOf","removeProperty","setProperty"],"sourceRoot":""}