{"version":3,"file":"legacy/vendors-node_modules_webcomponents_custom-elements_custom-elements_min_js-node_modules_webcom-66572f-deepdive-9.1.7.min.js","mappings":"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","sources":["webpack://deepdive/ts_src/Patch/Native.ts","webpack://deepdive/ts_src/Utilities.ts","webpack://deepdive/ts_src/CustomElementInternals.ts","webpack://deepdive/ts_src/custom-elements.ts","webpack://deepdive/ts_src/CustomElementState.ts","webpack://deepdive/ts_src/Deferred.ts","webpack://deepdive/ts_src/DocumentConstructionObserver.ts","webpack://deepdive/ts_src/CustomElementRegistry.ts","webpack://deepdive/ts_src/Patch/Interface/ParentNode.ts","webpack://deepdive/ts_src/Patch/Document.ts","webpack://deepdive/ts_src/Patch/Interface/ChildNode.ts","webpack://deepdive/ts_src/Patch/Element.ts","webpack://deepdive/ts_src/AlreadyConstructedMarker.ts","webpack://deepdive/ts_src/Patch/HTMLElement.ts","webpack://deepdive/ts_src/Patch/Node.ts","webpack://deepdive/ts_src/Patch/DocumentFragment.ts","webpack://deepdive/./node_modules/@webcomponents/template/template.js","webpack://deepdive/./node_modules/@webcomponents/url/url.js","webpack://deepdive/./node_modules/@webcomponents/webcomponents-platform/webcomponents-platform.js"],"sourcesContent":["/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nexport const Document_createElement = window.Document.prototype.createElement;\nexport const Document_createElementNS =\n  window.Document.prototype.createElementNS;\nexport const Document_importNode = window.Document.prototype.importNode;\n\nexport const Document_prepend = window.Document.prototype['prepend'];\nexport const Document_append = window.Document.prototype['append'];\nexport const DocumentFragment_prepend =\n  window.DocumentFragment.prototype['prepend'];\nexport const DocumentFragment_append =\n  window.DocumentFragment.prototype['append'];\nexport const Node_cloneNode = window.Node.prototype.cloneNode;\nexport const Node_appendChild = window.Node.prototype.appendChild;\nexport const Node_insertBefore = window.Node.prototype.insertBefore;\nexport const Node_removeChild = window.Node.prototype.removeChild;\nexport const Node_replaceChild = window.Node.prototype.replaceChild;\nexport const Node_textContent = Object.getOwnPropertyDescriptor(\n  window.Node.prototype,\n  'textContent'\n);\nexport const Element_attachShadow = window.Element.prototype['attachShadow'];\nexport const Element_innerHTML = Object.getOwnPropertyDescriptor(\n  window.Element.prototype,\n  'innerHTML'\n);\nexport const Element_getAttribute = window.Element.prototype.getAttribute;\nexport const Element_setAttribute = window.Element.prototype.setAttribute;\nexport const Element_removeAttribute = window.Element.prototype.removeAttribute;\nexport const Element_toggleAttribute = window.Element.prototype.toggleAttribute;\nexport const Element_getAttributeNS = window.Element.prototype.getAttributeNS;\nexport const Element_setAttributeNS = window.Element.prototype.setAttributeNS;\nexport const Element_removeAttributeNS =\n  window.Element.prototype.removeAttributeNS;\nexport const Element_insertAdjacentElement =\n  window.Element.prototype['insertAdjacentElement'];\nexport const Element_insertAdjacentHTML =\n  window.Element.prototype['insertAdjacentHTML'];\nexport const Element_prepend = window.Element.prototype['prepend'];\nexport const Element_append = window.Element.prototype['append'];\nexport const Element_before = window.Element.prototype['before'];\nexport const Element_after = window.Element.prototype['after'];\nexport const Element_replaceWith = window.Element.prototype['replaceWith'];\nexport const Element_remove = window.Element.prototype['remove'];\nexport const HTMLElement = window.HTMLElement;\nexport const HTMLElement_innerHTML = Object.getOwnPropertyDescriptor(\n  window.HTMLElement.prototype,\n  'innerHTML'\n);\nexport const HTMLElement_insertAdjacentElement =\n  window.HTMLElement.prototype['insertAdjacentElement'];\nexport const HTMLElement_insertAdjacentHTML =\n  window.HTMLElement.prototype['insertAdjacentHTML'];\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nconst reservedElementNameSet = new Set<string>();\n// IE11 does not support constructing a set using an iterable.\n[\n  'annotation-xml',\n  'color-profile',\n  'font-face',\n  'font-face-src',\n  'font-face-uri',\n  'font-face-format',\n  'font-face-name',\n  'missing-glyph',\n].forEach((item) => reservedElementNameSet.add(item));\n\nexport function isValidCustomElementName(localName: string) {\n  const reserved = reservedElementNameSet.has(localName);\n  const validForm = /^[a-z][.0-9_a-z]*-[-.0-9_a-z]*$/.test(localName);\n  return !reserved && validForm;\n}\n\n// Note, IE11 doesn't have `document.contains`.\nconst nativeContains = document.contains\n  ? document.contains.bind(document)\n  : document.documentElement.contains.bind(document.documentElement);\n\nexport function isConnected(node: Node) {\n  // Use `Node#isConnected`, if defined.\n  const nativeValue = node.isConnected;\n  if (nativeValue !== undefined) {\n    return nativeValue;\n  }\n  // Optimization: It's significantly faster here to try to use `contains`,\n  // especially on Edge/IE/\n  if (nativeContains(node)) {\n    return true;\n  }\n\n  let current: Node | undefined = node;\n  while (\n    current &&\n    !(current.__CE_isImportDocument || current instanceof Document)\n  ) {\n    current =\n      current.parentNode ||\n      (window.ShadowRoot && current instanceof ShadowRoot\n        ? current.host\n        : undefined);\n  }\n  return !!(\n    current &&\n    (current.__CE_isImportDocument || current instanceof Document)\n  );\n}\n\nexport function childrenFromFragment(\n  fragment: DocumentFragment\n): Array<Element> {\n  // Note, IE doesn't have `children` on document fragments.\n  const nativeChildren = fragment.children;\n  if (nativeChildren) {\n    return Array.prototype.slice.call(nativeChildren);\n  }\n  const children: Array<Element> = [];\n  for (let n = fragment.firstChild; n; n = n.nextSibling) {\n    if (n.nodeType === Node.ELEMENT_NODE) {\n      children.push(n as Element);\n    }\n  }\n  return children;\n}\n\nfunction nextSiblingOrAncestorSibling(root: Node, start: Node) {\n  let node: Node | null = start;\n  while (node && node !== root && !node.nextSibling) {\n    node = node.parentNode;\n  }\n  return !node || node === root ? null : node.nextSibling;\n}\n\nfunction nextNode(root: Node, start: Node) {\n  return start.firstChild\n    ? start.firstChild\n    : nextSiblingOrAncestorSibling(root, start);\n}\n\nexport function walkDeepDescendantElements(\n  root: Node,\n  callback: (elem: Element) => void,\n  visitedImports?: Set<Node>\n) {\n  let node: Node | null = root;\n  while (node) {\n    if (node.nodeType === Node.ELEMENT_NODE) {\n      const element = node as Element;\n\n      callback(element);\n\n      const localName = element.localName;\n      if (localName === 'link' && element.getAttribute('rel') === 'import') {\n        // If this import (polyfilled or not) has its root node available,\n        // walk it.\n        const importNode = (element as HTMLLinkElement).import;\n        if (visitedImports === undefined) {\n          visitedImports = new Set();\n        }\n        if (importNode instanceof Node && !visitedImports.has(importNode)) {\n          // Prevent multiple walks of the same import root.\n          visitedImports.add(importNode);\n\n          for (\n            let child = importNode.firstChild;\n            child;\n            child = child.nextSibling\n          ) {\n            walkDeepDescendantElements(child, callback, visitedImports);\n          }\n        }\n\n        // Ignore descendants of import links to prevent attempting to walk the\n        // elements created by the HTML Imports polyfill that we just walked\n        // above.\n        node = nextSiblingOrAncestorSibling(root, element);\n        continue;\n      } else if (localName === 'template') {\n        // Ignore descendants of templates. There shouldn't be any descendants\n        // because they will be moved into `.content` during construction in\n        // browsers that support template but, in case they exist and are still\n        // waiting to be moved by a polyfill, they will be ignored.\n        node = nextSiblingOrAncestorSibling(root, element);\n        continue;\n      }\n\n      // Walk shadow roots.\n      const shadowRoot = element.__CE_shadowRoot;\n      if (shadowRoot) {\n        for (\n          let child = shadowRoot.firstChild;\n          child;\n          child = child.nextSibling\n        ) {\n          walkDeepDescendantElements(child, callback, visitedImports);\n        }\n      }\n    }\n\n    node = nextNode(root, node);\n  }\n}\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nimport CustomElementRegistry from './CustomElementRegistry.js';\nimport {CustomElementState as CEState} from './CustomElementState.js';\nimport * as Native from './Patch/Native.js';\nimport * as Utilities from './Utilities.js';\n\nconst NS_HTML = 'http://www.w3.org/1999/xhtml';\n\nexport default class CustomElementInternals {\n  private readonly _patchesNode: Array<(node: Node) => void> = [];\n  private readonly _patchesElement: Array<(elem: Element) => void> = [];\n  private _hasPatches = false;\n  public readonly shadyDomFastWalk: boolean;\n  public readonly useDocumentConstructionObserver: boolean;\n\n  constructor(options: {\n    shadyDomFastWalk: boolean;\n    noDocumentConstructionObserver: boolean;\n  }) {\n    this.shadyDomFastWalk = options.shadyDomFastWalk;\n    this.useDocumentConstructionObserver = !options.noDocumentConstructionObserver;\n  }\n\n  forEachElement(\n    node: Node,\n    callback: (elem: Element) => void,\n    visitedImports?: Set<Node>\n  ) {\n    const sd = window['ShadyDOM'];\n    if (this.shadyDomFastWalk && sd && sd['inUse']) {\n      if (node.nodeType === Node.ELEMENT_NODE) {\n        const element = node as Element;\n        callback(element);\n      }\n      // most easily gets to document, element, documentFragment\n      if ((node as Element).querySelectorAll!) {\n        const elements = sd['nativeMethods'].querySelectorAll.call(node, '*');\n        for (let i = 0; i < elements.length; i++) {\n          callback(elements[i]);\n        }\n      }\n    } else {\n      Utilities.walkDeepDescendantElements(node, callback, visitedImports);\n    }\n  }\n\n  addNodePatch(patch: (node: Node) => void) {\n    this._hasPatches = true;\n    this._patchesNode.push(patch);\n  }\n\n  addElementPatch(patch: (element: Element) => void) {\n    this._hasPatches = true;\n    this._patchesElement.push(patch);\n  }\n\n  patchTree(node: Node) {\n    if (!this._hasPatches) {\n      return;\n    }\n\n    this.forEachElement(node, (element) => this.patchElement(element));\n  }\n\n  patchNode(node: Node) {\n    if (!this._hasPatches) {\n      return;\n    }\n\n    if (node.__CE_patched) {\n      return;\n    }\n    node.__CE_patched = true;\n\n    for (let i = 0; i < this._patchesNode.length; i++) {\n      this._patchesNode[i](node);\n    }\n  }\n\n  patchElement(element: Element) {\n    if (!this._hasPatches) {\n      return;\n    }\n\n    if (element.__CE_patched) {\n      return;\n    }\n    element.__CE_patched = true;\n\n    for (let i = 0; i < this._patchesNode.length; i++) {\n      this._patchesNode[i](element);\n    }\n\n    for (let i = 0; i < this._patchesElement.length; i++) {\n      this._patchesElement[i](element);\n    }\n  }\n\n  connectTree(root: Node) {\n    const elements: Array<Element> = [];\n\n    this.forEachElement(root, (element) => elements.push(element));\n\n    for (let i = 0; i < elements.length; i++) {\n      const element = elements[i];\n      if (element.__CE_state === CEState.custom) {\n        this.connectedCallback(element);\n      } else {\n        this.upgradeReaction(element as HTMLElement);\n      }\n    }\n  }\n\n  disconnectTree(root: Node) {\n    const elements: Array<Element> = [];\n\n    this.forEachElement(root, (element) => elements.push(element));\n\n    for (let i = 0; i < elements.length; i++) {\n      const element = elements[i];\n      if (element.__CE_state === CEState.custom) {\n        this.disconnectedCallback(element);\n      }\n    }\n  }\n\n  /**\n   * Upgrades all uncustomized custom elements at and below a root node for\n   * which there is a definition. When custom element reaction callbacks are\n   * assumed to be called synchronously (which, by the current DOM / HTML spec\n   * definitions, they are *not*), callbacks for both elements customized\n   * synchronously by the parser and elements being upgraded occur in the same\n   * relative order.\n   *\n   * NOTE: This function, when used to simulate the construction of a tree\n   * that is already created but not customized (i.e. by the parser), does\n   * *not* prevent the element from reading the 'final' (true) state of the\n   * tree. For example, the element, during truly synchronous parsing /\n   * construction would see that it contains no children as they have not yet\n   * been inserted. However, this function does not modify the tree, the\n   * element will (incorrectly) have children. Additionally, self-modification\n   * restrictions for custom element constructors imposed by the DOM spec are\n   * *not* enforced.\n   *\n   *\n   * The following nested list shows the steps extending down from the HTML\n   * spec's parsing section that cause elements to be synchronously created\n   * and upgraded:\n   *\n   * The \"in body\" insertion mode:\n   * https://html.spec.whatwg.org/multipage/syntax.html#parsing-main-inbody\n   * - Switch on token:\n   *   .. other cases ..\n   *   -> Any other start tag\n   *      - [Insert an HTML element](below) for the token.\n   *\n   * Insert an HTML element:\n   * https://html.spec.whatwg.org/multipage/syntax.html#insert-an-html-element\n   * - Insert a foreign element for the token in the HTML namespace:\n   *   https://html.spec.whatwg.org/multipage/syntax.html#insert-a-foreign-element\n   *   - Create an element for a token:\n   *     https://html.spec.whatwg.org/multipage/syntax.html#create-an-element-for-the-token\n   *     - Will execute script flag is true?\n   *       - (Element queue pushed to the custom element reactions stack.)\n   *     - Create an element:\n   *       https://dom.spec.whatwg.org/#concept-create-element\n   *       - Sync CE flag is true?\n   *         - Constructor called.\n   *         - Self-modification restrictions enforced.\n   *       - Sync CE flag is false?\n   *         - (Upgrade reaction enqueued.)\n   *     - Attributes appended to element.\n   *       (`attributeChangedCallback` reactions enqueued.)\n   *     - Will execute script flag is true?\n   *       - (Element queue popped from the custom element reactions stack.\n   *         Reactions in the popped stack are invoked.)\n   *   - (Element queue pushed to the custom element reactions stack.)\n   *   - Insert the element:\n   *     https://dom.spec.whatwg.org/#concept-node-insert\n   *     - Shadow-including descendants are connected. During parsing\n   *       construction, there are no shadow-*excluding* descendants.\n   *       However, the constructor may have validly attached a shadow\n   *       tree to itself and added descendants to that shadow tree.\n   *       (`connectedCallback` reactions enqueued.)\n   *   - (Element queue popped from the custom element reactions stack.\n   *     Reactions in the popped stack are invoked.)\n   */\n  patchAndUpgradeTree(\n    root: Node,\n    options: {\n      visitedImports?: Set<Node>;\n      upgrade?: (elem: HTMLElement) => void;\n    } = {}\n  ) {\n    const visitedImports = options.visitedImports;\n    const upgrade =\n      options.upgrade || ((element) => this.upgradeReaction(element));\n\n    const elements: Array<Element> = [];\n\n    const gatherElements = (element: Element) => {\n      if (this._hasPatches) {\n        this.patchElement(element);\n      }\n      if (\n        element.localName === 'link' &&\n        element.getAttribute('rel') === 'import'\n      ) {\n        const importElem = element as HTMLLinkElement;\n        // The HTML Imports polyfill sets a descendant element of the link to\n        // the `import` property, specifically this is *not* a Document.\n        const importNode = importElem.import;\n\n        if (importNode instanceof Node) {\n          importNode.__CE_isImportDocument = true;\n          // Connected links are associated with the global registry.\n          importNode.__CE_registry = document.__CE_registry;\n        }\n\n        if (importNode && importNode.readyState === 'complete') {\n          importNode.__CE_documentLoadHandled = true;\n        } else {\n          // If this link's import root is not available, its contents can't\n          // be walked. Wait for 'load' and walk it when it's ready.\n          element.addEventListener('load', () => {\n            const importNode = importElem.import!;\n\n            if (importNode.__CE_documentLoadHandled) {\n              return;\n            }\n            importNode.__CE_documentLoadHandled = true;\n\n            // Clone the `visitedImports` set that was populated sync during\n            // the `patchAndUpgradeTree` call that caused this 'load' handler\n            // to be added. Then, remove *this* link's import node so that we\n            // can walk that import again, even if it was partially walked\n            // later during the same `patchAndUpgradeTree` call.\n            const clonedVisitedImports = new Set<Node>();\n            if (visitedImports) {\n              // IE11 does not support constructing a set using an iterable.\n              visitedImports.forEach((item) => clonedVisitedImports.add(item));\n              clonedVisitedImports.delete(importNode);\n            }\n            this.patchAndUpgradeTree(importNode, {\n              visitedImports: clonedVisitedImports,\n              upgrade,\n            });\n          });\n        }\n      } else {\n        elements.push(element);\n      }\n    };\n\n    // `forEachElement` populates (and internally checks against)\n    // `visitedImports` when traversing a loaded import.\n    this.forEachElement(root, gatherElements, visitedImports);\n\n    for (let i = 0; i < elements.length; i++) {\n      upgrade(elements[i] as HTMLElement);\n    }\n  }\n\n  upgradeReaction(element: HTMLElement) {\n    try {\n      const definition = this._lookupACustomElementDefinition(\n        element.ownerDocument!,\n        element.localName\n      );\n      if (definition) {\n        this._upgradeAnElement(element, definition);\n      }\n    } catch (e: unknown) {\n      this.reportTheException(e);\n    }\n  }\n\n  /**\n   * @see https://html.spec.whatwg.org/multipage/custom-elements.html#concept-upgrade-an-element\n   */\n  private _upgradeAnElement(\n    element: HTMLElement,\n    definition: CustomElementDefinition\n  ) {\n    const currentState = element.__CE_state;\n    if (currentState !== undefined) {\n      return;\n    }\n\n    definition.constructionStack.push(element);\n\n    try {\n      try {\n        const result = new definition.constructorFunction();\n        if (result !== element) {\n          throw new Error(\n            'The custom element constructor did not produce the element being upgraded.'\n          );\n        }\n      } finally {\n        definition.constructionStack.pop();\n      }\n    } catch (e) {\n      element.__CE_state = CEState.failed;\n      throw e;\n    }\n\n    element.__CE_state = CEState.custom;\n    element.__CE_definition = definition;\n\n    // Check `hasAttributes` here to avoid iterating when it's not necessary.\n    if (definition.attributeChangedCallback && element.hasAttributes()) {\n      const observedAttributes = definition.observedAttributes;\n      for (let i = 0; i < observedAttributes.length; i++) {\n        const name = observedAttributes[i];\n        const value = element.getAttribute(name);\n        if (value !== null) {\n          this.attributeChangedCallback(element, name, null, value, null);\n        }\n      }\n    }\n\n    if (Utilities.isConnected(element)) {\n      this.connectedCallback(element);\n    }\n  }\n\n  connectedCallback(element: Element) {\n    const definition = element.__CE_definition!;\n    if (definition.connectedCallback) {\n      try {\n        definition.connectedCallback.call(element);\n      } catch (e: unknown) {\n        this.reportTheException(e);\n      }\n    }\n  }\n\n  disconnectedCallback(element: Element) {\n    const definition = element.__CE_definition!;\n    if (definition.disconnectedCallback) {\n      try {\n        definition.disconnectedCallback.call(element);\n      } catch (e: unknown) {\n        this.reportTheException(e);\n      }\n    }\n  }\n\n  attributeChangedCallback(\n    element: Element,\n    name: string,\n    oldValue?: string | null,\n    newValue?: string | null,\n    namespace?: string | null\n  ) {\n    const definition = element.__CE_definition!;\n    if (\n      definition.attributeChangedCallback &&\n      definition.observedAttributes.indexOf(name) > -1\n    ) {\n      try {\n        definition.attributeChangedCallback.call(\n          element,\n          name,\n          oldValue,\n          newValue,\n          namespace\n        );\n      } catch (e: unknown) {\n        this.reportTheException(e);\n      }\n    }\n  }\n\n  /**\n   * Runs HTML's 'look up a custom element definition', excluding the namespace\n   * check.\n   *\n   * @see https://html.spec.whatwg.org/multipage/custom-elements.html#look-up-a-custom-element-definition\n   */\n  private _lookupACustomElementDefinition(\n    doc: Document,\n    localName: string\n  ): CustomElementDefinition | undefined {\n    // The document must be associated with a registry.\n    const registry = doc.__CE_registry;\n    if (!registry) {\n      return;\n    }\n\n    // Prevent elements created in documents without a browsing context from\n    // upgrading.\n    //\n    // https://html.spec.whatwg.org/multipage/custom-elements.html#look-up-a-custom-element-definition\n    //   \"If document does not have a browsing context, return null.\"\n    //\n    // https://html.spec.whatwg.org/multipage/window-object.html#dom-document-defaultview\n    //   \"The defaultView IDL attribute of the Document interface, on getting,\n    //   must return this Document's browsing context's WindowProxy object, if\n    //   this Document has an associated browsing context, or null otherwise.\"\n    if (!doc.defaultView && !doc.__CE_isImportDocument) {\n      return;\n    }\n\n    return registry.internal_localNameToDefinition(localName);\n  }\n\n  /**\n   * Runs the DOM's 'create an element'. If namespace is not null, then the\n   * native `createElementNS` is used. Otherwise, `createElement` is used.\n   *\n   * Note, the template polyfill only wraps `createElement`, preventing this\n   * function from using `createElementNS` in all cases.\n   *\n   * @see https://dom.spec.whatwg.org/#concept-create-element\n   */\n  createAnElement(\n    doc: Document,\n    localName: string,\n    namespace: string | null\n  ): Element {\n    const registry = doc.__CE_registry;\n    // Only create custom elements if the document is associated with a\n    // registry.\n    if (registry && (namespace === null || namespace === NS_HTML)) {\n      const definition = ((registry as unknown) as CustomElementRegistry).internal_localNameToDefinition(\n        localName\n      );\n      if (definition) {\n        try {\n          const result = new definition.constructorFunction();\n\n          // These conformance checks can't be performed when the user calls\n          // the element's constructor themselves. However, this also true in\n          // native implementations.\n\n          if (\n            result.__CE_state === undefined ||\n            result.__CE_definition === undefined\n          ) {\n            throw new Error(\n              `Failed to construct '${localName}': ` +\n                'The returned value was not constructed with the HTMLElement ' +\n                'constructor.'\n            );\n          }\n\n          if (result.namespaceURI !== NS_HTML) {\n            throw new Error(\n              `Failed to construct '${localName}': ` +\n                \"The constructed element's namespace must be the HTML \" +\n                'namespace.'\n            );\n          }\n\n          // The following Errors should be DOMExceptions but DOMException\n          // isn't constructible in all browsers.\n\n          if (result.hasAttributes()) {\n            throw new Error(\n              `Failed to construct '${localName}': ` +\n                'The constructed element must not have any attributes.'\n            );\n          }\n\n          // ShadyDOM doesn't wrap `#hasChildNodes`, so we check `#firstChild`\n          // instead.\n          if (result.firstChild !== null) {\n            throw new Error(\n              `Failed to construct '${localName}': ` +\n                'The constructed element must not have any children.'\n            );\n          }\n\n          if (result.parentNode !== null) {\n            throw new Error(\n              `Failed to construct '${localName}': ` +\n                'The constructed element must not have a parent node.'\n            );\n          }\n\n          if (result.ownerDocument !== doc) {\n            throw new Error(\n              `Failed to construct '${localName}': ` +\n                \"The constructed element's owner document is incorrect.\"\n            );\n          }\n\n          if (result.localName !== localName) {\n            throw new Error(\n              `Failed to construct '${localName}': ` +\n                \"The constructed element's local name is incorrect.\"\n            );\n          }\n\n          return result;\n        } catch (e: unknown) {\n          this.reportTheException(e);\n\n          // When construction fails, a new HTMLUnknownElement is produced.\n          // However, there's no direct way to create one, so we create a\n          // regular HTMLElement and replace its prototype.\n          const result =\n            namespace === null\n              ? Native.Document_createElement.call(doc, localName)\n              : Native.Document_createElementNS.call(doc, namespace, localName);\n          Object.setPrototypeOf(result, HTMLUnknownElement.prototype);\n          result.__CE_state = CEState.failed;\n          result.__CE_definition = undefined;\n          this.patchElement(result);\n          return result;\n        }\n      }\n    }\n\n    const result =\n      namespace === null\n        ? Native.Document_createElement.call(doc, localName)\n        : Native.Document_createElementNS.call(doc, namespace, localName);\n    this.patchElement(result);\n    return result;\n  }\n\n  /**\n   * Runs the DOM's 'report the exception' algorithm.\n   *\n   * @see https://html.spec.whatwg.org/multipage/webappapis.html#report-the-exception\n   */\n  reportTheException(arg: unknown) {\n    interface ExtendedError extends Error {\n      // Non-standard Safari properties.\n      sourceURL?: string;\n      line?: number;\n      column?: number;\n\n      // Non-standard Firefox properties.\n      fileName?: string;\n      lineNumber?: number;\n      columnNumber?: number;\n    }\n\n    let message = '';\n    let filename = '';\n    let lineno = 0;\n    let colno = 0;\n\n    if (arg instanceof Error) {\n      const error = arg as ExtendedError;\n      message = error.message;\n      filename = error.sourceURL || error.fileName || '';\n      lineno = error.line || error.lineNumber || 0;\n      colno = error.column || error.columnNumber || 0;\n    } else {\n      message = `Uncaught ${String(arg)}`;\n    }\n\n    let event: ErrorEvent | undefined = undefined;\n    if (ErrorEvent.prototype.initErrorEvent === undefined) {\n      event = new ErrorEvent('error', {\n        cancelable: true,\n        message,\n        filename,\n        lineno,\n        colno,\n        error: arg,\n      });\n    } else {\n      event = document.createEvent('ErrorEvent') as ErrorEvent;\n      // initErrorEvent(type, bubbles, cancelable, message, filename, line)\n      event.initErrorEvent!('error', false, true, message, filename, lineno);\n      // Hack for IE, where ErrorEvent#preventDefault does not set\n      // #defaultPrevented to true.\n      event.preventDefault = function (this: ErrorEvent) {\n        Object.defineProperty(this, 'defaultPrevented', {\n          configurable: true,\n          get: function (this: ErrorEvent) {\n            return true;\n          },\n        });\n      };\n    }\n\n    if (event.error === undefined) {\n      Object.defineProperty(event, 'error', {\n        configurable: true,\n        enumerable: true,\n        get: function () {\n          return arg;\n        },\n      });\n    }\n\n    window.dispatchEvent(event);\n    if (!event.defaultPrevented) {\n      // In 'report the exception', UAs may optionally write errors to the\n      // console if their associated ErrorEvent isn't handled during dispatch\n      // (indicated by calling `preventDefault`). In practice, these errors are\n      // always displayed.\n      console.error(arg);\n    }\n  }\n}\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nimport CustomElementInternals from './CustomElementInternals.js';\nimport CustomElementRegistry from './CustomElementRegistry.js';\nimport PatchDocument from './Patch/Document.js';\nimport PatchDocumentFragment from './Patch/DocumentFragment.js';\nimport PatchElement from './Patch/Element.js';\nimport PatchHTMLElement from './Patch/HTMLElement.js';\nimport PatchNode from './Patch/Node.js';\n\nconst priorCustomElements = window['customElements'];\n\nfunction installPolyfill() {\n  const noDocumentConstructionObserver = !!priorCustomElements?.[\n    'noDocumentConstructionObserver'\n  ];\n  const shadyDomFastWalk = !!priorCustomElements?.['shadyDomFastWalk'];\n\n  const internals = new CustomElementInternals({\n    noDocumentConstructionObserver,\n    shadyDomFastWalk,\n  });\n\n  PatchHTMLElement(internals);\n  PatchDocument(internals);\n  PatchDocumentFragment(internals);\n  PatchNode(internals);\n  PatchElement(internals);\n\n  window[\n    'CustomElementRegistry'\n  ] = (CustomElementRegistry as unknown) as typeof window['CustomElementRegistry'];\n\n  const customElements = new CustomElementRegistry(internals);\n\n  // The main document is associated with the global registry.\n  document.__CE_registry = customElements;\n\n  Object.defineProperty(window, 'customElements', {\n    configurable: true,\n    enumerable: true,\n    value: customElements,\n  });\n}\n\nif (\n  !priorCustomElements ||\n  priorCustomElements['forcePolyfill'] ||\n  typeof priorCustomElements['define'] != 'function' ||\n  typeof priorCustomElements['get'] != 'function'\n) {\n  installPolyfill();\n}\n\n// This is NOT public API and is only meant to work around a GC bug in older\n// versions of Safari that randomly removes the polyfill during tests.\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n(window as any)['__CE_installPolyfill'] = installPolyfill;\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nexport const CustomElementState = {\n  custom: 1,\n  failed: 2,\n} as const;\nexport type CustomElementState =\n  | typeof CustomElementState.custom\n  | typeof CustomElementState.failed;\n\nexport default CustomElementState;\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nexport default class Deferred<T> {\n  private _value: T | undefined = undefined;\n\n  private _resolve!: (val: T) => void;\n\n  private readonly _promise: Promise<T>;\n  constructor() {\n    this._promise = new Promise((resolve) => {\n      this._resolve = resolve;\n    });\n  }\n\n  resolve(value: T) {\n    if (this._value) {\n      throw new Error('Already resolved.');\n    }\n\n    this._value = value;\n    this._resolve(value);\n  }\n\n  toPromise() {\n    return this._promise;\n  }\n}\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nimport CustomElementInternals from './CustomElementInternals.js';\n\nexport default class DocumentConstructionObserver {\n  private readonly _internals: CustomElementInternals;\n  private readonly _document: Document;\n  private _observer: MutationObserver | undefined = undefined;\n  constructor(internals: CustomElementInternals, doc: Document) {\n    this._internals = internals;\n    this._document = doc;\n\n    // Simulate tree construction for all currently accessible nodes in the\n    // document.\n    this._internals.patchAndUpgradeTree(this._document);\n\n    if (this._document.readyState === 'loading') {\n      this._observer = new MutationObserver(this._handleMutations.bind(this));\n\n      // Nodes created by the parser are given to the observer *before* the next\n      // task runs. Inline scripts are run in a new task. This means that the\n      // observer will be able to handle the newly parsed nodes before the\n      // inline script is run.\n      this._observer.observe(this._document, {\n        childList: true,\n        subtree: true,\n      });\n    }\n  }\n\n  disconnect() {\n    if (this._observer) {\n      this._observer.disconnect();\n    }\n  }\n\n  private _handleMutations(mutations: ReadonlyArray<MutationRecord>) {\n    // Once the document's `readyState` is 'interactive' or 'complete', all new\n    // nodes created within that document will be the result of script and\n    // should be handled by patching.\n    const readyState = this._document.readyState;\n    if (readyState === 'interactive' || readyState === 'complete') {\n      this.disconnect();\n    }\n\n    for (let i = 0; i < mutations.length; i++) {\n      const addedNodes = mutations[i].addedNodes;\n      for (let j = 0; j < addedNodes.length; j++) {\n        const node = addedNodes[j];\n        this._internals.patchAndUpgradeTree(node);\n      }\n    }\n  }\n}\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nimport {AlreadyConstructedMarkerType} from './AlreadyConstructedMarker.js';\nimport CustomElementInternals from './CustomElementInternals.js';\nimport Deferred from './Deferred.js';\nimport DocumentConstructionObserver from './DocumentConstructionObserver.js';\nimport * as Utilities from './Utilities.js';\n\ninterface ElementConstructor {\n  new (): HTMLElement;\n  observedAttributes?: Array<string>;\n}\ntype ConstructorGetter = () => ElementConstructor;\n\n/**\n * @unrestricted\n */\nexport default class CustomElementRegistry {\n  private readonly _localNameToConstructorGetter = new Map<\n    string,\n    ConstructorGetter\n  >();\n  private readonly _localNameToDefinition = new Map<\n    string,\n    CustomElementDefinition\n  >();\n  private readonly _constructorToDefinition = new Map<\n    ElementConstructor,\n    CustomElementDefinition\n  >();\n  private _elementDefinitionIsRunning = false;\n  private readonly _internals: CustomElementInternals;\n  private readonly _whenDefinedDeferred = new Map<\n    string,\n    Deferred<undefined>\n  >();\n\n  /**\n   * The default flush callback triggers the document walk synchronously.\n   */\n  private _flushCallback: (fn: () => void) => void = (fn) => fn();\n  private _flushPending = false;\n\n  /**\n   * A map from `localName`s of definitions that were defined *after* the\n   * last flush to unupgraded elements matching that definition, in document\n   * order. Entries are added to this map when a definition is registered,\n   * but the list of elements is only populated during a flush after which\n   * all of the entries are removed. DO NOT edit outside of `#_flush`.\n   */\n  private readonly _unflushedLocalNames: Array<string> = [];\n\n  private readonly _documentConstructionObserver:\n    | DocumentConstructionObserver\n    | undefined;\n\n  constructor(internals: CustomElementInternals) {\n    this._internals = internals;\n    this._documentConstructionObserver = internals.useDocumentConstructionObserver\n      ? new DocumentConstructionObserver(internals, document)\n      : undefined;\n  }\n\n  polyfillDefineLazy(localName: string, constructorGetter: ConstructorGetter) {\n    if (!(constructorGetter instanceof Function)) {\n      throw new TypeError(\n        'Custom element constructor getters must be functions.'\n      );\n    }\n    this.internal_assertCanDefineLocalName(localName);\n    this._localNameToConstructorGetter.set(localName, constructorGetter);\n    this._unflushedLocalNames.push(localName);\n    // If we've already called the flush callback and it hasn't called back\n    // yet, don't call it again.\n    if (!this._flushPending) {\n      this._flushPending = true;\n      this._flushCallback(() => this._flush());\n    }\n  }\n\n  define(localName: string, constructor: Function) {\n    if (!(constructor instanceof Function)) {\n      throw new TypeError('Custom element constructors must be functions.');\n    }\n\n    this.internal_assertCanDefineLocalName(localName);\n\n    this.internal_reifyDefinition(localName, constructor as ElementConstructor);\n    this._unflushedLocalNames.push(localName);\n    // If we've already called the flush callback and it hasn't called back\n    // yet, don't call it again.\n    if (!this._flushPending) {\n      this._flushPending = true;\n      this._flushCallback(() => this._flush());\n    }\n  }\n\n  internal_assertCanDefineLocalName(localName: string) {\n    if (!Utilities.isValidCustomElementName(localName)) {\n      throw new SyntaxError(`The element name '${localName}' is not valid.`);\n    }\n\n    if (this.internal_localNameToDefinition(localName)) {\n      throw new Error(\n        `A custom element with name ` +\n          `'${localName}' has already been defined.`\n      );\n    }\n\n    if (this._elementDefinitionIsRunning) {\n      throw new Error('A custom element is already being defined.');\n    }\n  }\n\n  internal_reifyDefinition(localName: string, constructor: ElementConstructor) {\n    this._elementDefinitionIsRunning = true;\n\n    let connectedCallback: CustomElementDefinition['connectedCallback'];\n    let disconnectedCallback: CustomElementDefinition['disconnectedCallback'];\n    let adoptedCallback: CustomElementDefinition['adoptedCallback'];\n    let attributeChangedCallback: CustomElementDefinition['attributeChangedCallback'];\n    let observedAttributes: CustomElementDefinition['observedAttributes'];\n    try {\n      const prototype = constructor.prototype;\n      if (!(prototype instanceof Object)) {\n        throw new TypeError(\n          \"The custom element constructor's prototype is not an object.\"\n        );\n      }\n\n      type CEReactionCallback =\n        | 'connectedCallback'\n        | 'disconnectedCallback'\n        | 'adoptedCallback'\n        | 'attributeChangedCallback';\n      const getCallback = function getCallback(name: CEReactionCallback) {\n        const callbackValue = prototype[name];\n        if (\n          callbackValue !== undefined &&\n          !(callbackValue instanceof Function)\n        ) {\n          throw new Error(`The '${name}' callback must be a function.`);\n        }\n        return callbackValue;\n      };\n\n      connectedCallback = getCallback('connectedCallback');\n      disconnectedCallback = getCallback('disconnectedCallback');\n      adoptedCallback = getCallback('adoptedCallback');\n      attributeChangedCallback = getCallback('attributeChangedCallback');\n      // `observedAttributes` should not be read unless an\n      // `attributesChangedCallback` exists\n      observedAttributes =\n        (attributeChangedCallback && constructor['observedAttributes']) || [];\n      // eslint-disable-next-line no-useless-catch\n    } catch (e) {\n      throw e;\n    } finally {\n      this._elementDefinitionIsRunning = false;\n    }\n\n    const definition = {\n      localName,\n      constructorFunction: constructor,\n      connectedCallback,\n      disconnectedCallback,\n      adoptedCallback,\n      attributeChangedCallback,\n      observedAttributes,\n      constructionStack: [] as Array<\n        HTMLElement | AlreadyConstructedMarkerType\n      >,\n    };\n\n    this._localNameToDefinition.set(localName, definition);\n    this._constructorToDefinition.set(\n      definition.constructorFunction,\n      definition\n    );\n\n    return definition;\n  }\n\n  upgrade(node: Node): void {\n    this._internals.patchAndUpgradeTree(node);\n  }\n\n  private _flush() {\n    // If no new definitions were defined, don't attempt to flush. This could\n    // happen if a flush callback keeps the function it is given and calls it\n    // multiple times.\n    if (this._flushPending === false) {\n      return;\n    }\n    this._flushPending = false;\n\n    /**\n     * Unupgraded elements with definitions that were defined *before* the last\n     * flush, in document order.\n     */\n    const elementsWithStableDefinitions: Array<HTMLElement> = [];\n\n    const unflushedLocalNames = this._unflushedLocalNames;\n    const elementsWithPendingDefinitions = new Map<\n      string,\n      Array<HTMLElement>\n    >();\n    for (let i = 0; i < unflushedLocalNames.length; i++) {\n      elementsWithPendingDefinitions.set(unflushedLocalNames[i], []);\n    }\n\n    this._internals.patchAndUpgradeTree(document, {\n      upgrade: (element) => {\n        // Ignore the element if it has already upgraded or failed to upgrade.\n        if (element.__CE_state !== undefined) {\n          return;\n        }\n\n        const localName = element.localName;\n\n        // If there is an applicable pending definition for the element, add the\n        // element to the list of elements to be upgraded with that definition.\n        const pendingElements = elementsWithPendingDefinitions.get(localName);\n        if (pendingElements) {\n          pendingElements.push(element);\n          // If there is *any other* applicable definition for the element, add\n          // it to the list of elements with stable definitions that need to be\n          // upgraded.\n        } else if (this._localNameToDefinition.has(localName)) {\n          elementsWithStableDefinitions.push(element);\n        }\n      },\n    });\n\n    // Upgrade elements with 'stable' definitions first.\n    for (let i = 0; i < elementsWithStableDefinitions.length; i++) {\n      this._internals.upgradeReaction(elementsWithStableDefinitions[i]);\n    }\n\n    // Upgrade elements with 'pending' definitions in the order they were\n    // defined.\n    for (let i = 0; i < unflushedLocalNames.length; i++) {\n      const localName = unflushedLocalNames[i];\n      const pendingUpgradableElements = elementsWithPendingDefinitions.get(\n        localName\n      )!;\n\n      // Attempt to upgrade all applicable elements.\n      for (let i = 0; i < pendingUpgradableElements.length; i++) {\n        this._internals.upgradeReaction(pendingUpgradableElements[i]);\n      }\n\n      // Resolve any promises created by `whenDefined` for the definition.\n      const deferred = this._whenDefinedDeferred.get(localName);\n      if (deferred) {\n        deferred.resolve(undefined);\n      }\n    }\n\n    unflushedLocalNames.length = 0;\n  }\n\n  get(localName: string): undefined | {new (): HTMLElement} {\n    const definition = this.internal_localNameToDefinition(localName);\n    if (definition) {\n      return definition.constructorFunction;\n    }\n\n    return undefined;\n  }\n\n  whenDefined(localName: string): Promise<void> {\n    if (!Utilities.isValidCustomElementName(localName)) {\n      return Promise.reject(\n        new SyntaxError(`'${localName}' is not a valid custom element name.`)\n      );\n    }\n\n    const prior = this._whenDefinedDeferred.get(localName);\n    if (prior) {\n      return prior.toPromise();\n    }\n\n    const deferred = new Deferred<undefined>();\n    this._whenDefinedDeferred.set(localName, deferred);\n\n    // Resolve immediately if the given local name has a regular or lazy\n    // definition *and* the full document walk to upgrade elements with that\n    // local name has already happened.\n    //\n    // The behavior of the returned promise differs between the lazy and the\n    // non-lazy cases if the definition fails. Normally, the definition would\n    // fail synchronously and no pending promises would resolve. However, if\n    // the definition is lazy but has not yet been reified, the promise is\n    // resolved early here even though it might fail later when reified.\n    const anyDefinitionExists =\n      this._localNameToDefinition.has(localName) ||\n      this._localNameToConstructorGetter.has(localName);\n    const definitionHasFlushed =\n      this._unflushedLocalNames.indexOf(localName) === -1;\n    if (anyDefinitionExists && definitionHasFlushed) {\n      deferred.resolve(undefined);\n    }\n\n    return deferred.toPromise();\n  }\n\n  polyfillWrapFlushCallback(outer: (fn: () => void) => void) {\n    if (this._documentConstructionObserver) {\n      this._documentConstructionObserver.disconnect();\n    }\n    const inner = this._flushCallback;\n    this._flushCallback = (flush) => outer(() => inner(flush));\n  }\n\n  internal_localNameToDefinition(\n    localName: string\n  ): CustomElementDefinition | undefined {\n    const existingDefinition = this._localNameToDefinition.get(localName);\n    if (existingDefinition) {\n      return existingDefinition;\n    }\n\n    const constructorGetter = this._localNameToConstructorGetter.get(localName);\n    if (constructorGetter) {\n      this._localNameToConstructorGetter.delete(localName);\n      try {\n        return this.internal_reifyDefinition(localName, constructorGetter());\n      } catch (e: unknown) {\n        this._internals.reportTheException(e);\n      }\n    }\n\n    return undefined;\n  }\n\n  internal_constructorToDefinition(\n    constructor: ElementConstructor\n  ): CustomElementDefinition | undefined {\n    return this._constructorToDefinition.get(constructor);\n  }\n}\n\n// Closure compiler exports.\n/* eslint-disable no-self-assign */\nCustomElementRegistry.prototype['define'] =\n  CustomElementRegistry.prototype.define;\nCustomElementRegistry.prototype['upgrade'] =\n  CustomElementRegistry.prototype.upgrade;\nCustomElementRegistry.prototype['get'] = CustomElementRegistry.prototype.get;\nCustomElementRegistry.prototype['whenDefined'] =\n  CustomElementRegistry.prototype.whenDefined;\nCustomElementRegistry.prototype['polyfillDefineLazy'] =\n  CustomElementRegistry.prototype.polyfillDefineLazy;\nCustomElementRegistry.prototype['polyfillWrapFlushCallback'] =\n  CustomElementRegistry.prototype.polyfillWrapFlushCallback;\n/* eslint-enable no-self-assign */\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nimport CustomElementInternals from '../../CustomElementInternals.js';\nimport * as Utilities from '../../Utilities.js';\n\ntype NativeMethod = (this: Node, ...args: Array<Node | string>) => void;\n\ninterface ParentNodeNativeMethods {\n  prepend: NativeMethod;\n  append: NativeMethod;\n}\n\nexport default function (\n  internals: CustomElementInternals,\n  destination: ParentNode,\n  builtIn: ParentNodeNativeMethods\n) {\n  function appendPrependPatch(builtInMethod: NativeMethod): NativeMethod {\n    return function (this: Node, ...nodes) {\n      /**\n       * A copy of `nodes`, with any DocumentFragment replaced by its children.\n       */\n      const flattenedNodes: Array<Node | string> = [];\n\n      /**\n       * Elements in `nodes` that were connected before this call.\n       */\n      const connectedElements: Array<Node> = [];\n\n      for (let i = 0; i < nodes.length; i++) {\n        const node = nodes[i];\n\n        if (node instanceof Element && Utilities.isConnected(node)) {\n          connectedElements.push(node);\n        }\n\n        if (node instanceof DocumentFragment) {\n          for (let child = node.firstChild; child; child = child.nextSibling) {\n            flattenedNodes.push(child);\n          }\n        } else {\n          flattenedNodes.push(node);\n        }\n      }\n\n      builtInMethod.apply(this, nodes);\n\n      for (let i = 0; i < connectedElements.length; i++) {\n        internals.disconnectTree(connectedElements[i]);\n      }\n\n      if (Utilities.isConnected(this)) {\n        for (let i = 0; i < flattenedNodes.length; i++) {\n          const node = flattenedNodes[i];\n          if (node instanceof Element) {\n            internals.connectTree(node);\n          }\n        }\n      }\n    };\n  }\n\n  if (builtIn.prepend !== undefined) {\n    destination.prepend = appendPrependPatch(builtIn.prepend);\n  }\n\n  if (builtIn.append !== undefined) {\n    destination.append = appendPrependPatch(builtIn.append);\n  }\n}\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nimport CustomElementInternals from '../CustomElementInternals.js';\n\nimport PatchParentNode from './Interface/ParentNode.js';\nimport * as Native from './Native.js';\n\nexport default function (internals: CustomElementInternals) {\n  Document.prototype.createElement = function (\n    this: Document,\n    localName: string\n  ) {\n    return internals.createAnElement(this, localName, null);\n  } as typeof Document.prototype.createElement;\n\n  Document.prototype.importNode = function <T extends Node>(\n    this: Document,\n    node: T,\n    deep?: boolean\n  ): T {\n    const clone = Native.Document_importNode.call(this, node, !!deep) as T;\n    // Only create custom elements if this document is associated with the\n    // registry.\n    if (!this.__CE_registry) {\n      internals.patchTree(clone);\n    } else {\n      internals.patchAndUpgradeTree(clone);\n    }\n    return clone;\n  };\n\n  Document.prototype.createElementNS = function (\n    this: Document,\n    namespace: string | null,\n    localName: string\n  ) {\n    return internals.createAnElement(this, localName, namespace);\n  } as typeof Document.prototype.createElementNS;\n\n  PatchParentNode(internals, Document.prototype, {\n    prepend: Native.Document_prepend,\n    append: Native.Document_append,\n  });\n}\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nimport CustomElementInternals from '../../CustomElementInternals.js';\nimport * as Utilities from '../../Utilities.js';\n\ntype NativeMethod = (this: ChildNode, ...args: Array<Node | string>) => void;\n\ninterface ChildNodeNativeMethods {\n  before: NativeMethod;\n  after: NativeMethod;\n  replaceWith: NativeMethod;\n  remove: (this: ChildNode) => void;\n}\n\nexport default function (\n  internals: CustomElementInternals,\n  destination: ChildNode,\n  builtIn: ChildNodeNativeMethods\n) {\n  function beforeAfterPatch(builtInMethod: NativeMethod): NativeMethod {\n    return function (this: ChildNode, ...nodes) {\n      const flattenedNodes: Array<string | Node> = [];\n      const connectedElements: Array<Node> = [];\n\n      for (let i = 0; i < nodes.length; i++) {\n        const node = nodes[i];\n\n        if (node instanceof Element && Utilities.isConnected(node)) {\n          connectedElements.push(node);\n        }\n\n        if (node instanceof DocumentFragment) {\n          for (let child = node.firstChild; child; child = child.nextSibling) {\n            flattenedNodes.push(child);\n          }\n        } else {\n          flattenedNodes.push(node);\n        }\n      }\n\n      builtInMethod.apply(this, nodes);\n\n      for (let i = 0; i < connectedElements.length; i++) {\n        internals.disconnectTree(connectedElements[i]);\n      }\n\n      if (Utilities.isConnected(this)) {\n        for (let i = 0; i < flattenedNodes.length; i++) {\n          const node = flattenedNodes[i];\n          if (node instanceof Element) {\n            internals.connectTree(node);\n          }\n        }\n      }\n    };\n  }\n\n  if (builtIn.before !== undefined) {\n    destination.before = beforeAfterPatch(builtIn.before);\n  }\n\n  if (builtIn.after !== undefined) {\n    destination.after = beforeAfterPatch(builtIn.after);\n  }\n\n  if (builtIn.replaceWith !== undefined) {\n    destination.replaceWith = function (\n      this: ChildNode,\n      ...nodes: Array<Node | string>\n    ) {\n      /**\n       * A copy of `nodes`, with any DocumentFragment replaced by its children.\n       */\n      const flattenedNodes: Array<Node | string> = [];\n\n      /**\n       * Elements in `nodes` that were connected before this call.\n       */\n      const connectedElements: Array<Node> = [];\n\n      for (let i = 0; i < nodes.length; i++) {\n        const node = nodes[i];\n\n        if (node instanceof Element && Utilities.isConnected(node)) {\n          connectedElements.push(node);\n        }\n\n        if (node instanceof DocumentFragment) {\n          for (let child = node.firstChild; child; child = child.nextSibling) {\n            flattenedNodes.push(child);\n          }\n        } else {\n          flattenedNodes.push(node);\n        }\n      }\n\n      const wasConnected = Utilities.isConnected(this);\n\n      builtIn.replaceWith.apply(this, nodes);\n\n      for (let i = 0; i < connectedElements.length; i++) {\n        internals.disconnectTree(connectedElements[i]);\n      }\n\n      if (wasConnected) {\n        internals.disconnectTree(this);\n        for (let i = 0; i < flattenedNodes.length; i++) {\n          const node = flattenedNodes[i];\n          if (node instanceof Element) {\n            internals.connectTree(node);\n          }\n        }\n      }\n    };\n  }\n\n  if (builtIn.remove !== undefined) {\n    destination.remove = function (this: ChildNode) {\n      const wasConnected = Utilities.isConnected(this);\n\n      builtIn.remove.call(this);\n\n      if (wasConnected) {\n        internals.disconnectTree(this);\n      }\n    };\n  }\n}\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nimport CustomElementInternals from '../CustomElementInternals.js';\nimport CEState from '../CustomElementState.js';\nimport * as Utilities from '../Utilities.js';\n\nimport PatchChildNode from './Interface/ChildNode.js';\nimport PatchParentNode from './Interface/ParentNode.js';\nimport * as Native from './Native.js';\n\nexport default function (internals: CustomElementInternals) {\n  if (Native.Element_attachShadow) {\n    Element.prototype.attachShadow = function (\n      this: Element,\n      init: ShadowRootInit\n    ) {\n      const shadowRoot = Native.Element_attachShadow.call(this, init);\n      internals.patchNode(shadowRoot);\n      this.__CE_shadowRoot = shadowRoot;\n      return shadowRoot;\n    };\n  }\n\n  function patch_innerHTML(\n    destination: Element,\n    baseDescriptor: PropertyDescriptor\n  ) {\n    Object.defineProperty(destination, 'innerHTML', {\n      enumerable: baseDescriptor.enumerable,\n      configurable: true,\n      get: baseDescriptor.get,\n      set: function (this: Element, htmlString) {\n        const isConnected = Utilities.isConnected(this);\n\n        // NOTE: In IE11, when using the native `innerHTML` setter, all nodes\n        // that were previously descendants of the context element have all of\n        // their children removed as part of the set - the entire subtree is\n        // 'disassembled'. This work around walks the subtree *before* using the\n        // native setter.\n        let removedElements: undefined | Array<Element> = undefined;\n        if (isConnected) {\n          removedElements = [];\n          internals.forEachElement(this, (element) => {\n            if (element !== this) {\n              removedElements!.push(element);\n            }\n          });\n        }\n\n        baseDescriptor.set!.call(this, htmlString);\n\n        if (removedElements) {\n          for (let i = 0; i < removedElements.length; i++) {\n            const element = removedElements[i];\n            if (element.__CE_state === CEState.custom) {\n              internals.disconnectedCallback(element);\n            }\n          }\n        }\n\n        // Only create custom elements if this element's owner document is\n        // associated with the registry.\n        if (!this.ownerDocument!.__CE_registry) {\n          internals.patchTree(this);\n        } else {\n          internals.patchAndUpgradeTree(this);\n        }\n        return htmlString;\n      },\n    });\n  }\n\n  if (Native.Element_innerHTML && Native.Element_innerHTML.get) {\n    patch_innerHTML(Element.prototype, Native.Element_innerHTML);\n  } else if (Native.HTMLElement_innerHTML && Native.HTMLElement_innerHTML.get) {\n    patch_innerHTML(HTMLElement.prototype, Native.HTMLElement_innerHTML);\n  } else {\n    internals.addElementPatch(function (element) {\n      patch_innerHTML(element, {\n        enumerable: true,\n        configurable: true,\n        // Implements getting `innerHTML` by performing an unpatched `cloneNode`\n        // of the element and returning the resulting element's `innerHTML`.\n        // TODO: Is this too expensive?\n        get: function (this: Element) {\n          return (Native.Node_cloneNode.call(this, true) as Element).innerHTML;\n        },\n        // Implements setting `innerHTML` by creating an unpatched element,\n        // setting `innerHTML` of that element and replacing the target\n        // element's children with those of the unpatched element.\n        set: function (this: Element, assignedValue) {\n          // NOTE: re-route to `content` for `template` elements.\n          // We need to do this because `template.appendChild` does not\n          // route into `template.content`.\n          const isTemplate = this.localName === 'template';\n          const content = isTemplate\n            ? (this as HTMLTemplateElement).content\n            : this;\n          const rawElement = Native.Document_createElementNS.call(\n            document,\n            this.namespaceURI,\n            this.localName\n          );\n          rawElement.innerHTML = assignedValue;\n\n          while (content.childNodes.length > 0) {\n            Native.Node_removeChild.call(content, content.childNodes[0]);\n          }\n          const container = isTemplate\n            ? (rawElement as HTMLTemplateElement).content\n            : rawElement;\n          while (container.childNodes.length > 0) {\n            Native.Node_appendChild.call(content, container.childNodes[0]);\n          }\n        },\n      });\n    });\n  }\n\n  Element.prototype.setAttribute = function (this: Element, name, newValue) {\n    // Fast path for non-custom elements.\n    if (this.__CE_state !== CEState.custom) {\n      return Native.Element_setAttribute.call(this, name, newValue);\n    }\n\n    const oldValue = Native.Element_getAttribute.call(this, name);\n    Native.Element_setAttribute.call(this, name, newValue);\n    newValue = Native.Element_getAttribute.call(this, name)!;\n    internals.attributeChangedCallback(this, name, oldValue, newValue, null);\n  };\n\n  Element.prototype.setAttributeNS = function (\n    this: Element,\n    namespace,\n    name,\n    newValue\n  ) {\n    // Fast path for non-custom elements.\n    if (this.__CE_state !== CEState.custom) {\n      return Native.Element_setAttributeNS.call(\n        this,\n        namespace,\n        name,\n        newValue\n      );\n    }\n\n    const oldValue = Native.Element_getAttributeNS.call(this, namespace, name);\n    Native.Element_setAttributeNS.call(this, namespace, name, newValue);\n    newValue = Native.Element_getAttributeNS.call(this, namespace, name)!;\n    internals.attributeChangedCallback(\n      this,\n      name,\n      oldValue,\n      newValue,\n      namespace\n    );\n  };\n\n  Element.prototype.removeAttribute = function (this: Element, name) {\n    // Fast path for non-custom elements.\n    if (this.__CE_state !== CEState.custom) {\n      return Native.Element_removeAttribute.call(this, name);\n    }\n\n    const oldValue = Native.Element_getAttribute.call(this, name);\n    Native.Element_removeAttribute.call(this, name);\n    if (oldValue !== null) {\n      internals.attributeChangedCallback(this, name, oldValue, null, null);\n    }\n  };\n\n  if (Native.Element_toggleAttribute) {\n    Element.prototype.toggleAttribute = function (\n      this: Element,\n      name,\n      force?: boolean | undefined\n    ) {\n      // Fast path for non-custom elements.\n      if (this.__CE_state !== CEState.custom) {\n        return Native.Element_toggleAttribute.call(this, name, force);\n      }\n\n      const oldValue = Native.Element_getAttribute.call(this, name);\n      const hadAttribute = oldValue !== null;\n      const hasAttribute = Native.Element_toggleAttribute.call(\n        this,\n        name,\n        force\n      );\n      if (hadAttribute !== hasAttribute) {\n        internals.attributeChangedCallback(\n          this,\n          name,\n          oldValue,\n          hasAttribute ? '' : null,\n          null\n        );\n      }\n      return hasAttribute;\n    };\n  }\n\n  Element.prototype.removeAttributeNS = function (\n    this: Element,\n    namespace,\n    name\n  ) {\n    // Fast path for non-custom elements.\n    if (this.__CE_state !== CEState.custom) {\n      return Native.Element_removeAttributeNS.call(this, namespace, name);\n    }\n\n    const oldValue = Native.Element_getAttributeNS.call(this, namespace, name);\n    Native.Element_removeAttributeNS.call(this, namespace, name);\n    // In older browsers, `Element#getAttributeNS` may return the empty string\n    // instead of null if the attribute does not exist. For details, see;\n    // https://developer.mozilla.org/en-US/docs/Web/API/Element/getAttributeNS#Notes\n    const newValue = Native.Element_getAttributeNS.call(this, namespace, name);\n    if (oldValue !== newValue) {\n      internals.attributeChangedCallback(\n        this,\n        name,\n        oldValue,\n        newValue,\n        namespace\n      );\n    }\n  };\n\n  function patch_insertAdjacentElement(\n    destination: Element,\n    baseMethod: Element['insertAdjacentElement']\n  ) {\n    destination.insertAdjacentElement = function (\n      this: Element,\n      position,\n      element\n    ) {\n      const wasConnected = Utilities.isConnected(element);\n      const insertedElement = baseMethod.call(this, position, element)!;\n\n      if (wasConnected) {\n        internals.disconnectTree(element);\n      }\n\n      if (Utilities.isConnected(insertedElement)) {\n        internals.connectTree(element);\n      }\n      return insertedElement;\n    };\n  }\n\n  if (Native.HTMLElement_insertAdjacentElement) {\n    patch_insertAdjacentElement(\n      HTMLElement.prototype,\n      Native.HTMLElement_insertAdjacentElement\n    );\n  } else if (Native.Element_insertAdjacentElement) {\n    patch_insertAdjacentElement(\n      Element.prototype,\n      Native.Element_insertAdjacentElement\n    );\n  }\n\n  function patch_insertAdjacentHTML(\n    destination: Element,\n    baseMethod: Element['insertAdjacentHTML']\n  ) {\n    /**\n     * Patches and upgrades all nodes which are siblings between `start`\n     * (inclusive) and `end` (exclusive). If `end` is `null`, then all siblings\n     * following `start` will be patched and upgraded.\n     */\n    function upgradeNodesInRange(start: Node, end: Node | null) {\n      const nodes = [];\n      for (let node: Node = start; node !== end; node = node.nextSibling!) {\n        nodes.push(node);\n      }\n      for (let i = 0; i < nodes.length; i++) {\n        internals.patchAndUpgradeTree(nodes[i]);\n      }\n    }\n\n    destination.insertAdjacentHTML = function (this: Element, position, text) {\n      const strPosition = position.toLowerCase();\n\n      if (strPosition === 'beforebegin') {\n        const marker = this.previousSibling;\n        baseMethod.call(this, strPosition, text);\n        upgradeNodesInRange(marker || this.parentNode!.firstChild!, this);\n      } else if (strPosition === 'afterbegin') {\n        const marker = this.firstChild;\n        baseMethod.call(this, strPosition, text);\n        upgradeNodesInRange(this.firstChild!, marker);\n      } else if (strPosition === 'beforeend') {\n        const marker = this.lastChild;\n        baseMethod.call(this, strPosition, text);\n        upgradeNodesInRange(marker || this.firstChild!, null);\n      } else if (strPosition === 'afterend') {\n        const marker = this.nextSibling;\n        baseMethod.call(this, strPosition, text);\n        upgradeNodesInRange(this.nextSibling!, marker);\n      } else {\n        throw new SyntaxError(\n          `The value provided (${String(strPosition)}) is ` +\n            \"not one of 'beforebegin', 'afterbegin', 'beforeend', or 'afterend'.\"\n        );\n      }\n    };\n  }\n\n  if (Native.HTMLElement_insertAdjacentHTML) {\n    patch_insertAdjacentHTML(\n      HTMLElement.prototype,\n      Native.HTMLElement_insertAdjacentHTML\n    );\n  } else if (Native.Element_insertAdjacentHTML) {\n    patch_insertAdjacentHTML(\n      Element.prototype,\n      Native.Element_insertAdjacentHTML\n    );\n  }\n\n  PatchParentNode(internals, Element.prototype, {\n    prepend: Native.Element_prepend,\n    append: Native.Element_append,\n  });\n\n  PatchChildNode(internals, Element.prototype, {\n    before: Native.Element_before,\n    after: Native.Element_after,\n    replaceWith: Native.Element_replaceWith,\n    remove: Native.Element_remove,\n  });\n}\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * Represents the 'already constructed marker' used in custom\n * element construction stacks.\n *\n * https://html.spec.whatwg.org/#concept-already-constructed-marker\n */\nconst alreadyConstructedMarker = {} as {_alreadyConstructedMarker: never};\n\nexport default alreadyConstructedMarker;\nexport type AlreadyConstructedMarkerType = typeof alreadyConstructedMarker;\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nimport AlreadyConstructedMarker from '../AlreadyConstructedMarker.js';\nimport CustomElementInternals from '../CustomElementInternals.js';\nimport CEState from '../CustomElementState.js';\nimport * as Native from './Native.js';\n\nexport default function (internals: CustomElementInternals) {\n  const PatchedHTMLElement = function HTMLElement(this: HTMLElement) {\n    // This should really be `new.target` but `new.target` can't be\n    // emulated in ES5. Assuming the user keeps the default value of the\n    // constructor's prototype's `constructor` property, this is\n    // equivalent.\n    const constructor = this.constructor as {new (): HTMLElement};\n\n    // Always look up the definition from the global registry.\n    const registry = document.__CE_registry!;\n    const definition = registry.internal_constructorToDefinition(constructor);\n    if (!definition) {\n      throw new Error(\n        'Failed to construct a custom element: ' +\n          'The constructor was not registered with `customElements`.'\n      );\n    }\n\n    const constructionStack = definition.constructionStack;\n\n    if (constructionStack.length === 0) {\n      const element = Native.Document_createElement.call(\n        document,\n        definition.localName\n      ) as HTMLElement;\n      Object.setPrototypeOf(element, constructor.prototype as typeof element);\n      element.__CE_state = CEState.custom;\n      element.__CE_definition = definition;\n      internals.patchElement(element);\n      return element;\n    }\n\n    const lastIndex = constructionStack.length - 1;\n    const element = constructionStack[lastIndex];\n    if (element === AlreadyConstructedMarker) {\n      const localName = definition.localName;\n      throw new Error(\n        `Failed to construct '${localName}': ` +\n          'This element was already constructed.'\n      );\n    }\n    const toConstructElement = element as HTMLElement;\n    constructionStack[lastIndex] = AlreadyConstructedMarker;\n\n    Object.setPrototypeOf(\n      toConstructElement,\n      constructor.prototype as typeof toConstructElement\n    );\n    internals.patchElement(toConstructElement);\n\n    return toConstructElement;\n  };\n\n  PatchedHTMLElement.prototype = Native.HTMLElement.prototype;\n  // Safari 9 has `writable: false` on the propertyDescriptor\n  // Make it writable so that TypeScript can patch up the\n  // constructor in the ES5 compiled code.\n  Object.defineProperty(HTMLElement.prototype, 'constructor', {\n    writable: true,\n    configurable: true,\n    enumerable: false,\n    value: PatchedHTMLElement,\n  });\n\n  window['HTMLElement'] = (PatchedHTMLElement as unknown) as typeof HTMLElement;\n}\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nimport CustomElementInternals from '../CustomElementInternals.js';\nimport * as Utilities from '../Utilities.js';\n\nimport * as Native from './Native.js';\n\nexport default function (internals: CustomElementInternals) {\n  // `Node#nodeValue` is implemented on `Attr`.\n  // `Node#textContent` is implemented on `Attr`, `Element`.\n\n  Node.prototype.insertBefore = function <T extends Node>(\n    this: Node,\n    node: T,\n    refNode: Node | null\n  ) {\n    if (node instanceof DocumentFragment) {\n      const insertedNodes = Utilities.childrenFromFragment(node);\n      const nativeResult = Native.Node_insertBefore.call(this, node, refNode);\n\n      // DocumentFragments can't be connected, so `disconnectTree` will never\n      // need to be called on a DocumentFragment's children after inserting it.\n\n      if (Utilities.isConnected(this)) {\n        for (let i = 0; i < insertedNodes.length; i++) {\n          internals.connectTree(insertedNodes[i]);\n        }\n      }\n\n      return nativeResult as T;\n    }\n\n    const nodeWasConnectedElement =\n      node instanceof Element && Utilities.isConnected(node);\n    const nativeResult = Native.Node_insertBefore.call(\n      this,\n      node,\n      refNode\n    ) as T;\n\n    if (nodeWasConnectedElement) {\n      internals.disconnectTree(node);\n    }\n\n    if (Utilities.isConnected(this)) {\n      internals.connectTree(node);\n    }\n\n    return nativeResult;\n  };\n\n  Node.prototype.appendChild = function <T extends Node>(this: Node, node: T) {\n    if (node instanceof DocumentFragment) {\n      const insertedNodes = Utilities.childrenFromFragment(node);\n      const nativeResult = Native.Node_appendChild.call(this, node) as T;\n\n      // DocumentFragments can't be connected, so `disconnectTree` will never\n      // need to be called on a DocumentFragment's children after inserting it.\n\n      if (Utilities.isConnected(this)) {\n        for (let i = 0; i < insertedNodes.length; i++) {\n          internals.connectTree(insertedNodes[i]);\n        }\n      }\n\n      return nativeResult;\n    }\n\n    const nodeWasConnectedElement =\n      node instanceof Element && Utilities.isConnected(node);\n    const nativeResult = Native.Node_appendChild.call(this, node) as T;\n\n    if (nodeWasConnectedElement) {\n      internals.disconnectTree(node);\n    }\n\n    if (Utilities.isConnected(this)) {\n      internals.connectTree(node);\n    }\n\n    return nativeResult;\n  };\n\n  Node.prototype.cloneNode = function (this: Node, deep) {\n    const clone = Native.Node_cloneNode.call(this, !!deep);\n    // Only create custom elements if this element's owner document is\n    // associated with the registry.\n    if (!this.ownerDocument!.__CE_registry) {\n      internals.patchTree(clone);\n    } else {\n      internals.patchAndUpgradeTree(clone);\n    }\n    return clone;\n  };\n\n  Node.prototype.removeChild = function <T extends Node>(this: Node, node: T) {\n    const nodeWasConnectedElement =\n      node instanceof Element && Utilities.isConnected(node);\n    const nativeResult = Native.Node_removeChild.call(this, node) as T;\n\n    if (nodeWasConnectedElement) {\n      internals.disconnectTree(node);\n    }\n\n    return nativeResult;\n  };\n\n  Node.prototype.replaceChild = function <T extends Node>(\n    this: Node,\n    nodeToInsert: Node,\n    nodeToRemove: T\n  ) {\n    if (nodeToInsert instanceof DocumentFragment) {\n      const insertedNodes = Utilities.childrenFromFragment(nodeToInsert);\n      const nativeResult = Native.Node_replaceChild.call(\n        this,\n        nodeToInsert,\n        nodeToRemove\n      ) as T;\n\n      // DocumentFragments can't be connected, so `disconnectTree` will never\n      // need to be called on a DocumentFragment's children after inserting it.\n\n      if (Utilities.isConnected(this)) {\n        internals.disconnectTree(nodeToRemove);\n        for (let i = 0; i < insertedNodes.length; i++) {\n          internals.connectTree(insertedNodes[i]);\n        }\n      }\n\n      return nativeResult;\n    }\n\n    const nodeToInsertWasConnectedElement =\n      nodeToInsert instanceof Element && Utilities.isConnected(nodeToInsert);\n    const nativeResult = Native.Node_replaceChild.call(\n      this,\n      nodeToInsert,\n      nodeToRemove\n    ) as T;\n    const thisIsConnected = Utilities.isConnected(this);\n\n    if (thisIsConnected) {\n      internals.disconnectTree(nodeToRemove);\n    }\n\n    if (nodeToInsertWasConnectedElement) {\n      internals.disconnectTree(nodeToInsert);\n    }\n\n    if (thisIsConnected) {\n      internals.connectTree(nodeToInsert);\n    }\n\n    return nativeResult;\n  };\n\n  function patch_textContent(\n    destination: Node,\n    baseDescriptor: PropertyDescriptor\n  ) {\n    Object.defineProperty(destination, 'textContent', {\n      enumerable: baseDescriptor.enumerable,\n      configurable: true,\n      get: baseDescriptor.get,\n      set: function (this: Node, assignedValue) {\n        // If this is a text node then there are no nodes to disconnect.\n        if (this.nodeType === Node.TEXT_NODE) {\n          baseDescriptor.set!.call(this, assignedValue);\n          return;\n        }\n\n        let removedNodes = undefined;\n        // Checking for `firstChild` is faster than reading `childNodes.length`\n        // to compare with 0.\n        if (this.firstChild) {\n          // Using `childNodes` is faster than `children`, even though we only\n          // care about elements.\n          const childNodes = this.childNodes;\n          const childNodesLength = childNodes.length;\n          if (childNodesLength > 0 && Utilities.isConnected(this)) {\n            // Copying an array by iterating is faster than using slice.\n            removedNodes = new Array(childNodesLength);\n            for (let i = 0; i < childNodesLength; i++) {\n              removedNodes[i] = childNodes[i];\n            }\n          }\n        }\n\n        baseDescriptor.set!.call(this, assignedValue);\n\n        if (removedNodes) {\n          for (let i = 0; i < removedNodes.length; i++) {\n            internals.disconnectTree(removedNodes[i]);\n          }\n        }\n      },\n    });\n  }\n\n  if (Native.Node_textContent && Native.Node_textContent.get) {\n    patch_textContent(Node.prototype, Native.Node_textContent);\n  } else {\n    internals.addNodePatch(function (element) {\n      patch_textContent(element, {\n        enumerable: true,\n        configurable: true,\n        // NOTE: This implementation of the `textContent` getter assumes that\n        // text nodes' `textContent` getter will not be patched.\n        get: function (this: Node) {\n          const parts: Array<string | null> = [];\n\n          for (let n = this.firstChild; n; n = n.nextSibling) {\n            if (n.nodeType === Node.COMMENT_NODE) {\n              continue;\n            }\n            parts.push(n.textContent);\n          }\n\n          return parts.join('');\n        },\n        set: function (this: Node, assignedValue) {\n          while (this.firstChild) {\n            Native.Node_removeChild.call(this, this.firstChild);\n          }\n          // `textContent = null | undefined | ''` does not result in\n          // a TextNode childNode\n          if (assignedValue != null && assignedValue !== '') {\n            Native.Node_appendChild.call(\n              this,\n              document.createTextNode(assignedValue)\n            );\n          }\n        },\n      });\n    });\n  }\n}\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nimport CustomElementInternals from '../CustomElementInternals.js';\n\nimport PatchParentNode from './Interface/ParentNode.js';\nimport * as Native from './Native.js';\n\nexport default function (internals: CustomElementInternals) {\n  PatchParentNode(internals, DocumentFragment.prototype, {\n    prepend: Native.DocumentFragment_prepend,\n    append: Native.DocumentFragment_append,\n  });\n}\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n// minimal template polyfill\n(function () {\n  'use strict';\n\n  var needsTemplate = typeof HTMLTemplateElement === 'undefined';\n  var brokenDocFragment = !(\n    document.createDocumentFragment().cloneNode() instanceof DocumentFragment\n  );\n  var needsDocFrag = false;\n\n  // NOTE: Replace DocumentFragment to work around IE11 bug that\n  // causes children of a document fragment modified while\n  // there is a mutation observer to not have a parentNode, or\n  // have a broken parentNode (!?!)\n  if (/Trident/.test(navigator.userAgent)) {\n    (function () {\n      needsDocFrag = true;\n\n      var origCloneNode = Node.prototype.cloneNode;\n      Node.prototype.cloneNode = function cloneNode(deep) {\n        var newDom = origCloneNode.call(this, deep);\n        if (this instanceof DocumentFragment) {\n          newDom.__proto__ = DocumentFragment.prototype;\n        }\n        return newDom;\n      };\n\n      // IE's DocumentFragment querySelector code doesn't work when\n      // called on an element instance\n      DocumentFragment.prototype.querySelectorAll =\n        HTMLElement.prototype.querySelectorAll;\n      DocumentFragment.prototype.querySelector =\n        HTMLElement.prototype.querySelector;\n\n      Object.defineProperties(DocumentFragment.prototype, {\n        'nodeType': {\n          get: function () {\n            return Node.DOCUMENT_FRAGMENT_NODE;\n          },\n          configurable: true,\n        },\n\n        'localName': {\n          get: function () {\n            return undefined;\n          },\n          configurable: true,\n        },\n\n        'nodeName': {\n          get: function () {\n            return '#document-fragment';\n          },\n          configurable: true,\n        },\n      });\n\n      var origInsertBefore = Node.prototype.insertBefore;\n      function insertBefore(newNode, refNode) {\n        if (newNode instanceof DocumentFragment) {\n          var child;\n          while ((child = newNode.firstChild)) {\n            origInsertBefore.call(this, child, refNode);\n          }\n        } else {\n          origInsertBefore.call(this, newNode, refNode);\n        }\n        return newNode;\n      }\n      Node.prototype.insertBefore = insertBefore;\n\n      var origAppendChild = Node.prototype.appendChild;\n      Node.prototype.appendChild = function appendChild(child) {\n        if (child instanceof DocumentFragment) {\n          insertBefore.call(this, child, null);\n        } else {\n          origAppendChild.call(this, child);\n        }\n        return child;\n      };\n\n      var origRemoveChild = Node.prototype.removeChild;\n      var origReplaceChild = Node.prototype.replaceChild;\n      Node.prototype.replaceChild = function replaceChild(newChild, oldChild) {\n        if (newChild instanceof DocumentFragment) {\n          insertBefore.call(this, newChild, oldChild);\n          origRemoveChild.call(this, oldChild);\n        } else {\n          origReplaceChild.call(this, newChild, oldChild);\n        }\n        return oldChild;\n      };\n\n      Document.prototype.createDocumentFragment = function createDocumentFragment() {\n        var frag = this.createElement('df');\n        frag.__proto__ = DocumentFragment.prototype;\n        return frag;\n      };\n\n      var origImportNode = Document.prototype.importNode;\n      Document.prototype.importNode = function importNode(impNode, deep) {\n        deep = deep || false;\n        var newNode = origImportNode.call(this, impNode, deep);\n        if (impNode instanceof DocumentFragment) {\n          newNode.__proto__ = DocumentFragment.prototype;\n        }\n        return newNode;\n      };\n    })();\n  }\n\n  // NOTE: we rely on this cloneNode not causing element upgrade.\n  // This means this polyfill must load before the CE polyfill and\n  // this would need to be re-worked if a browser supports native CE\n  // but not <template>.\n  var capturedCloneNode = Node.prototype.cloneNode;\n  var capturedCreateElement = Document.prototype.createElement;\n  var capturedImportNode = Document.prototype.importNode;\n  var capturedRemoveChild = Node.prototype.removeChild;\n  var capturedAppendChild = Node.prototype.appendChild;\n  var capturedReplaceChild = Node.prototype.replaceChild;\n  var capturedParseFromString = DOMParser.prototype.parseFromString;\n  var capturedHTMLElementInnerHTML = Object.getOwnPropertyDescriptor(\n    window.HTMLElement.prototype,\n    'innerHTML'\n  ) || {\n    /**\n     * @this {!HTMLElement}\n     * @return {string}\n     */\n    get: function () {\n      return this.innerHTML;\n    },\n    /**\n     * @this {!HTMLElement}\n     * @param {string}\n     */\n    set: function (text) {\n      this.innerHTML = text;\n    },\n  };\n  var capturedChildNodes = Object.getOwnPropertyDescriptor(\n    window.Node.prototype,\n    'childNodes'\n  ) || {\n    /**\n     * @this {!Node}\n     * @return {!NodeList}\n     */\n    get: function () {\n      return this.childNodes;\n    },\n  };\n\n  var elementQuerySelectorAll = Element.prototype.querySelectorAll;\n  var docQuerySelectorAll = Document.prototype.querySelectorAll;\n  var fragQuerySelectorAll = DocumentFragment.prototype.querySelectorAll;\n\n  var scriptSelector =\n    'script:not([type]),script[type=\"application/javascript\"],script[type=\"text/javascript\"]';\n\n  function QSA(node, selector) {\n    // IE 11 throws a SyntaxError with `scriptSelector` if the node has no children due to the `:not([type])` syntax\n    if (!node.childNodes.length) {\n      return [];\n    }\n    switch (node.nodeType) {\n      case Node.DOCUMENT_NODE:\n        return docQuerySelectorAll.call(node, selector);\n      case Node.DOCUMENT_FRAGMENT_NODE:\n        return fragQuerySelectorAll.call(node, selector);\n      default:\n        return elementQuerySelectorAll.call(node, selector);\n    }\n  }\n\n  // returns true if nested templates cannot be cloned (they cannot be on\n  // some impl's like Safari 8 and Edge)\n  // OR if cloning a document fragment does not result in a document fragment\n  var needsCloning = (function () {\n    if (!needsTemplate) {\n      var t = document.createElement('template');\n      var t2 = document.createElement('template');\n      t2.content.appendChild(document.createElement('div'));\n      t.content.appendChild(t2);\n      var clone = t.cloneNode(true);\n      return (\n        clone.content.childNodes.length === 0 ||\n        clone.content.firstChild.content.childNodes.length === 0 ||\n        brokenDocFragment\n      );\n    }\n  })();\n\n  var TEMPLATE_TAG = 'template';\n  var PolyfilledHTMLTemplateElement = function () {};\n\n  if (needsTemplate) {\n    var contentDoc = document.implementation.createHTMLDocument('template');\n    var canDecorate = true;\n\n    var templateStyle = document.createElement('style');\n    templateStyle.textContent = TEMPLATE_TAG + '{display:none;}';\n\n    var head = document.head;\n    head.insertBefore(templateStyle, head.firstElementChild);\n\n    /**\n      Provides a minimal shim for the <template> element.\n    */\n    PolyfilledHTMLTemplateElement.prototype = Object.create(\n      HTMLElement.prototype\n    );\n\n    // if elements do not have `innerHTML` on instances, then\n    // templates can be patched by swizzling their prototypes.\n    var canProtoPatch = !document\n      .createElement('div')\n      .hasOwnProperty('innerHTML');\n\n    /**\n      The `decorate` method moves element children to the template's `content`.\n      NOTE: there is no support for dynamically adding elements to templates.\n    */\n    PolyfilledHTMLTemplateElement.decorate = function (template) {\n      // if the template is decorated or not in HTML namespace, return fast\n      if (\n        template.content ||\n        template.namespaceURI !== document.documentElement.namespaceURI\n      ) {\n        return;\n      }\n      template.content = contentDoc.createDocumentFragment();\n      var child;\n      while ((child = template.firstChild)) {\n        capturedAppendChild.call(template.content, child);\n      }\n      // NOTE: prefer prototype patching for performance and\n      // because on some browsers (IE11), re-defining `innerHTML`\n      // can result in intermittent errors.\n      if (canProtoPatch) {\n        template.__proto__ = PolyfilledHTMLTemplateElement.prototype;\n      } else {\n        template.cloneNode = function (deep) {\n          return PolyfilledHTMLTemplateElement._cloneNode(this, deep);\n        };\n        // add innerHTML to template, if possible\n        // Note: this throws on Safari 7\n        if (canDecorate) {\n          try {\n            defineInnerHTML(template);\n            defineOuterHTML(template);\n          } catch (err) {\n            canDecorate = false;\n          }\n        }\n      }\n      // bootstrap recursively\n      PolyfilledHTMLTemplateElement.bootstrap(template.content);\n    };\n\n    // Taken from https://github.com/jquery/jquery/blob/73d7e6259c63ac45f42c6593da8c2796c6ce9281/src/manipulation/wrapMap.js\n    var topLevelWrappingMap = {\n      'option': ['select'],\n      'thead': ['table'],\n      'col': ['colgroup', 'table'],\n      'tr': ['tbody', 'table'],\n      'th': ['tr', 'tbody', 'table'],\n      'td': ['tr', 'tbody', 'table'],\n    };\n\n    var getTagName = function (text) {\n      // Taken from https://github.com/jquery/jquery/blob/73d7e6259c63ac45f42c6593da8c2796c6ce9281/src/manipulation/var/rtagName.js\n      return (/<([a-z][^/\\0>\\x20\\t\\r\\n\\f]+)/i.exec(text) || [\n        '',\n        '',\n      ])[1].toLowerCase();\n    };\n\n    var defineInnerHTML = function defineInnerHTML(obj) {\n      Object.defineProperty(obj, 'innerHTML', {\n        get: function () {\n          return getInnerHTML(this);\n        },\n        set: function (text) {\n          // For IE11, wrap the text in the correct (table) context\n          var wrap = topLevelWrappingMap[getTagName(text)];\n          if (wrap) {\n            for (var i = 0; i < wrap.length; i++) {\n              text = '<' + wrap[i] + '>' + text + '</' + wrap[i] + '>';\n            }\n          }\n          contentDoc.body.innerHTML = text;\n          PolyfilledHTMLTemplateElement.bootstrap(contentDoc);\n          while (this.content.firstChild) {\n            capturedRemoveChild.call(this.content, this.content.firstChild);\n          }\n          var body = contentDoc.body;\n          // If we had wrapped, get back to the original node\n          if (wrap) {\n            for (var j = 0; j < wrap.length; j++) {\n              body = body.lastChild;\n            }\n          }\n          while (body.firstChild) {\n            capturedAppendChild.call(this.content, body.firstChild);\n          }\n        },\n        configurable: true,\n      });\n    };\n\n    var defineOuterHTML = function defineOuterHTML(obj) {\n      Object.defineProperty(obj, 'outerHTML', {\n        get: function () {\n          return `<${TEMPLATE_TAG}>${this.innerHTML}</${TEMPLATE_TAG}>`;\n        },\n        set: function (innerHTML) {\n          if (this.parentNode) {\n            contentDoc.body.innerHTML = innerHTML;\n            var docFrag = this.ownerDocument.createDocumentFragment();\n            while (contentDoc.body.firstChild) {\n              capturedAppendChild.call(docFrag, contentDoc.body.firstChild);\n            }\n            capturedReplaceChild.call(this.parentNode, docFrag, this);\n          } else {\n            throw new Error(\n              \"Failed to set the 'outerHTML' property on 'Element': This element has no parent node.\"\n            );\n          }\n        },\n        configurable: true,\n      });\n    };\n\n    defineInnerHTML(PolyfilledHTMLTemplateElement.prototype);\n    defineOuterHTML(PolyfilledHTMLTemplateElement.prototype);\n\n    /**\n      The `bootstrap` method is called automatically and \"fixes\" all\n      <template> elements in the document referenced by the `doc` argument.\n    */\n    PolyfilledHTMLTemplateElement.bootstrap = function bootstrap(doc) {\n      var templates = QSA(doc, TEMPLATE_TAG);\n      for (\n        var i = 0, l = templates.length, t;\n        i < l && (t = templates[i]);\n        i++\n      ) {\n        PolyfilledHTMLTemplateElement.decorate(t);\n      }\n    };\n\n    // auto-bootstrapping for main document\n    document.addEventListener('DOMContentLoaded', function () {\n      PolyfilledHTMLTemplateElement.bootstrap(document);\n    });\n\n    // Patch document.createElement to ensure newly created templates have content\n    Document.prototype.createElement = function createElement() {\n      var el = capturedCreateElement.apply(this, arguments);\n      if (el.localName === 'template') {\n        PolyfilledHTMLTemplateElement.decorate(el);\n      }\n      return el;\n    };\n\n    DOMParser.prototype.parseFromString = function () {\n      var el = capturedParseFromString.apply(this, arguments);\n      PolyfilledHTMLTemplateElement.bootstrap(el);\n      return el;\n    };\n\n    Object.defineProperty(HTMLElement.prototype, 'innerHTML', {\n      get: function () {\n        return getInnerHTML(this);\n      },\n      set: function (text) {\n        capturedHTMLElementInnerHTML.set.call(this, text);\n        PolyfilledHTMLTemplateElement.bootstrap(this);\n      },\n      configurable: true,\n      enumerable: true,\n    });\n\n    // http://www.whatwg.org/specs/web-apps/current-work/multipage/the-end.html#escapingString\n    var escapeAttrRegExp = /[&\\u00A0\"]/g;\n    var escapeDataRegExp = /[&\\u00A0<>]/g;\n\n    var escapeReplace = function (c) {\n      switch (c) {\n        case '&':\n          return '&amp;';\n        case '<':\n          return '&lt;';\n        case '>':\n          return '&gt;';\n        case '\"':\n          return '&quot;';\n        case '\\u00A0':\n          return '&nbsp;';\n      }\n    };\n\n    var escapeAttr = function (s) {\n      return s.replace(escapeAttrRegExp, escapeReplace);\n    };\n\n    var escapeData = function (s) {\n      return s.replace(escapeDataRegExp, escapeReplace);\n    };\n\n    var makeSet = function (arr) {\n      var set = {};\n      for (var i = 0; i < arr.length; i++) {\n        set[arr[i]] = true;\n      }\n      return set;\n    };\n\n    // http://www.whatwg.org/specs/web-apps/current-work/#void-elements\n    var voidElements = makeSet([\n      'area',\n      'base',\n      'br',\n      'col',\n      'command',\n      'embed',\n      'hr',\n      'img',\n      'input',\n      'keygen',\n      'link',\n      'meta',\n      'param',\n      'source',\n      'track',\n      'wbr',\n    ]);\n\n    var plaintextParents = makeSet([\n      'style',\n      'script',\n      'xmp',\n      'iframe',\n      'noembed',\n      'noframes',\n      'plaintext',\n      'noscript',\n    ]);\n\n    /**\n     * @param {Node} node\n     * @param {Node} parentNode\n     * @param {Function=} callback\n     */\n    var getOuterHTML = function (node, parentNode, callback) {\n      switch (node.nodeType) {\n        case Node.ELEMENT_NODE: {\n          var tagName = node.localName;\n          var s = '<' + tagName;\n          var attrs = node.attributes;\n          for (var i = 0, attr; (attr = attrs[i]); i++) {\n            s += ' ' + attr.name + '=\"' + escapeAttr(attr.value) + '\"';\n          }\n          s += '>';\n          if (voidElements[tagName]) {\n            return s;\n          }\n          return s + getInnerHTML(node, callback) + '</' + tagName + '>';\n        }\n        case Node.TEXT_NODE: {\n          var data = /** @type {Text} */ (node).data;\n          if (parentNode && plaintextParents[parentNode.localName]) {\n            return data;\n          }\n          return escapeData(data);\n        }\n        case Node.COMMENT_NODE: {\n          return '<!--' + /** @type {Comment} */ (node).data + '-->';\n        }\n        default: {\n          window.console.error(node);\n          throw new Error('not implemented');\n        }\n      }\n    };\n\n    /**\n     * @param {Node} node\n     * @param {Function=} callback\n     */\n    var getInnerHTML = function (node, callback) {\n      if (node.localName === 'template') {\n        node = /** @type {HTMLTemplateElement} */ (node).content;\n      }\n      var s = '';\n      var c$ = callback ? callback(node) : capturedChildNodes.get.call(node);\n      for (var i = 0, l = c$.length, child; i < l && (child = c$[i]); i++) {\n        s += getOuterHTML(child, node, callback);\n      }\n      return s;\n    };\n  }\n\n  // make cloning/importing work!\n  if (needsTemplate || needsCloning) {\n    PolyfilledHTMLTemplateElement._cloneNode = function _cloneNode(\n      template,\n      deep\n    ) {\n      var clone = capturedCloneNode.call(template, false);\n      // NOTE: decorate doesn't auto-fix children because they are already\n      // decorated so they need special clone fixup.\n      if (this.decorate) {\n        this.decorate(clone);\n      }\n      if (deep) {\n        // NOTE: use native clone node to make sure CE's wrapped\n        // cloneNode does not cause elements to upgrade.\n        capturedAppendChild.call(\n          clone.content,\n          capturedCloneNode.call(template.content, true)\n        );\n        // now ensure nested templates are cloned correctly.\n        fixClonedDom(clone.content, template.content);\n      }\n      return clone;\n    };\n\n    // Given a source and cloned subtree, find <template>'s in the cloned\n    // subtree and replace them with cloned <template>'s from source.\n    // We must do this because only the source templates have proper .content.\n    var fixClonedDom = function fixClonedDom(clone, source) {\n      // do nothing if cloned node is not an element\n      if (!source.querySelectorAll) {\n        return;\n      }\n      // these two lists should be coincident\n      var s$ = QSA(source, TEMPLATE_TAG);\n      if (s$.length === 0) {\n        return;\n      }\n      var t$ = QSA(clone, TEMPLATE_TAG);\n      for (var i = 0, l = t$.length, t, s; i < l; i++) {\n        s = s$[i];\n        t = t$[i];\n        if (\n          PolyfilledHTMLTemplateElement &&\n          PolyfilledHTMLTemplateElement.decorate\n        ) {\n          PolyfilledHTMLTemplateElement.decorate(s);\n        }\n        capturedReplaceChild.call(t.parentNode, cloneNode.call(s, true), t);\n      }\n    };\n\n    // make sure scripts inside of a cloned template are executable\n    var fixClonedScripts = function fixClonedScripts(fragment) {\n      var scripts = QSA(fragment, scriptSelector);\n      for (var ns, s, i = 0; i < scripts.length; i++) {\n        s = scripts[i];\n        ns = capturedCreateElement.call(document, 'script');\n        ns.textContent = s.textContent;\n        var attrs = s.attributes;\n        for (var ai = 0, a; ai < attrs.length; ai++) {\n          a = attrs[ai];\n          ns.setAttribute(a.name, a.value);\n        }\n        capturedReplaceChild.call(s.parentNode, ns, s);\n      }\n    };\n\n    // override all cloning to fix the cloned subtree to contain properly\n    // cloned templates.\n    var cloneNode = (Node.prototype.cloneNode = function cloneNode(deep) {\n      var dom;\n      // workaround for Edge bug cloning documentFragments\n      // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/8619646/\n      if (\n        !needsDocFrag &&\n        brokenDocFragment &&\n        this instanceof DocumentFragment\n      ) {\n        if (!deep) {\n          return this.ownerDocument.createDocumentFragment();\n        } else {\n          dom = importNode.call(this.ownerDocument, this, true);\n        }\n      } else if (\n        this.nodeType === Node.ELEMENT_NODE &&\n        this.localName === TEMPLATE_TAG &&\n        this.namespaceURI == document.documentElement.namespaceURI\n      ) {\n        dom = PolyfilledHTMLTemplateElement._cloneNode(this, deep);\n      } else {\n        dom = capturedCloneNode.call(this, deep);\n      }\n      // template.content is cloned iff `deep`.\n      if (deep) {\n        fixClonedDom(dom, this);\n      }\n      return dom;\n    });\n\n    // NOTE: we are cloning instead of importing <template>'s.\n    // However, the ownerDocument of the cloned template will be correct!\n    // This is because the native import node creates the right document owned\n    // subtree and `fixClonedDom` inserts cloned templates into this subtree,\n    // thus updating the owner doc.\n    var importNode = (Document.prototype.importNode = function importNode(\n      element,\n      deep\n    ) {\n      deep = deep || false;\n      if (element.localName === TEMPLATE_TAG) {\n        return PolyfilledHTMLTemplateElement._cloneNode(element, deep);\n      } else {\n        var dom = capturedImportNode.call(this, element, deep);\n        if (deep) {\n          fixClonedDom(dom, element);\n          fixClonedScripts(dom);\n        }\n        return dom;\n      }\n    });\n  }\n\n  if (needsTemplate) {\n    window.HTMLTemplateElement = PolyfilledHTMLTemplateElement;\n  }\n})();\n","/* Any copyright is dedicated to the Public Domain.\n * http://creativecommons.org/publicdomain/zero/1.0/ */\n\n/** @type {boolean|undefined} */\nWindow.prototype.forceJURL = false;\n\n(function (scope) {\n  'use strict';\n\n  // feature detect for URL constructor\n  var hasWorkingUrl = false;\n  if (!scope.forceJURL) {\n    try {\n      var u = new URL('b', 'http://a');\n      u.pathname = 'c%20d';\n      hasWorkingUrl = u.href === 'http://a/c%20d';\n    } catch (e) {} // eslint-disable-line no-empty\n  }\n\n  if (hasWorkingUrl) {\n    return;\n  }\n\n  var relative = Object.create(null);\n  relative['ftp'] = 21;\n  relative['file'] = 0;\n  relative['gopher'] = 70;\n  relative['http'] = 80;\n  relative['https'] = 443;\n  relative['ws'] = 80;\n  relative['wss'] = 443;\n\n  var relativePathDotMapping = Object.create(null);\n  relativePathDotMapping['%2e'] = '.';\n  relativePathDotMapping['.%2e'] = '..';\n  relativePathDotMapping['%2e.'] = '..';\n  relativePathDotMapping['%2e%2e'] = '..';\n\n  function isRelativeScheme(scheme) {\n    return relative[scheme] !== undefined;\n  }\n\n  function invalid() {\n    clear.call(this);\n    this._isInvalid = true;\n  }\n\n  function IDNAToASCII(h) {\n    if ('' == h) {\n      invalid.call(this);\n    }\n    // XXX\n    return h.toLowerCase();\n  }\n\n  function percentEscape(c) {\n    var unicode = c.charCodeAt(0);\n    if (\n      unicode > 0x20 &&\n      unicode < 0x7f &&\n      // \" # < > ? `\n      [0x22, 0x23, 0x3c, 0x3e, 0x3f, 0x60].indexOf(unicode) == -1\n    ) {\n      return c;\n    }\n    return encodeURIComponent(c);\n  }\n\n  function percentEscapeQuery(c) {\n    // XXX This actually needs to encode c using encoding and then\n    // convert the bytes one-by-one.\n\n    var unicode = c.charCodeAt(0);\n    if (\n      unicode > 0x20 &&\n      unicode < 0x7f &&\n      // \" # < > ` (do not escape '?')\n      [0x22, 0x23, 0x3c, 0x3e, 0x60].indexOf(unicode) == -1\n    ) {\n      return c;\n    }\n    return encodeURIComponent(c);\n  }\n\n  var EOF = undefined,\n    ALPHA = /[a-zA-Z]/,\n    ALPHANUMERIC = /[a-zA-Z0-9+\\-.]/;\n\n  /**\n   * @param {!string} input\n   * @param {?string=} stateOverride\n   * @param {(URL|string)=} base\n   */\n  function parse(input, stateOverride, base) {\n    function err(message) {\n      errors.push(message);\n    }\n\n    var state = stateOverride || 'scheme start',\n      cursor = 0,\n      buffer = '',\n      seenAt = false,\n      seenBracket = false,\n      errors = [];\n\n    loop: while (\n      (input[cursor - 1] != EOF || cursor == 0) &&\n      !this._isInvalid\n    ) {\n      var c = input[cursor];\n      switch (state) {\n        case 'scheme start':\n          if (c && ALPHA.test(c)) {\n            buffer += c.toLowerCase(); // ASCII-safe\n            state = 'scheme';\n          } else if (!stateOverride) {\n            buffer = '';\n            state = 'no scheme';\n            continue;\n          } else {\n            err('Invalid scheme.');\n            break loop;\n          }\n          break;\n\n        case 'scheme':\n          if (c && ALPHANUMERIC.test(c)) {\n            buffer += c.toLowerCase(); // ASCII-safe\n          } else if (':' == c) {\n            this._scheme = buffer;\n            buffer = '';\n            if (stateOverride) {\n              break loop;\n            }\n            if (isRelativeScheme(this._scheme)) {\n              this._isRelative = true;\n            }\n            if ('file' == this._scheme) {\n              state = 'relative';\n            } else if (\n              this._isRelative &&\n              base &&\n              base._scheme == this._scheme\n            ) {\n              state = 'relative or authority';\n            } else if (this._isRelative) {\n              state = 'authority first slash';\n            } else {\n              state = 'scheme data';\n            }\n          } else if (!stateOverride) {\n            buffer = '';\n            cursor = 0;\n            state = 'no scheme';\n            continue;\n          } else if (EOF == c) {\n            break loop;\n          } else {\n            err('Code point not allowed in scheme: ' + c);\n            break loop;\n          }\n          break;\n\n        case 'scheme data':\n          if ('?' == c) {\n            this._query = '?';\n            state = 'query';\n          } else if ('#' == c) {\n            this._fragment = '#';\n            state = 'fragment';\n          } else {\n            // XXX error handling\n            if (EOF != c && '\\t' != c && '\\n' != c && '\\r' != c) {\n              this._schemeData += percentEscape(c);\n            }\n          }\n          break;\n\n        case 'no scheme':\n          if (!base || !isRelativeScheme(base._scheme)) {\n            err('Missing scheme.');\n            invalid.call(this);\n          } else {\n            state = 'relative';\n            continue;\n          }\n          break;\n\n        case 'relative or authority':\n          if ('/' == c && '/' == input[cursor + 1]) {\n            state = 'authority ignore slashes';\n          } else {\n            err('Expected /, got: ' + c);\n            state = 'relative';\n            continue;\n          }\n          break;\n\n        case 'relative':\n          this._isRelative = true;\n          if ('file' != this._scheme) {\n            this._scheme = base._scheme;\n          }\n          if (EOF == c) {\n            this._host = base._host;\n            this._port = base._port;\n            this._path = base._path.slice();\n            this._query = base._query;\n            this._username = base._username;\n            this._password = base._password;\n            break loop;\n          } else if ('/' == c || '\\\\' == c) {\n            if ('\\\\' == c) {\n              err('\\\\ is an invalid code point.');\n            }\n            state = 'relative slash';\n          } else if ('?' == c) {\n            this._host = base._host;\n            this._port = base._port;\n            this._path = base._path.slice();\n            this._query = '?';\n            this._username = base._username;\n            this._password = base._password;\n            state = 'query';\n          } else if ('#' == c) {\n            this._host = base._host;\n            this._port = base._port;\n            this._path = base._path.slice();\n            this._query = base._query;\n            this._fragment = '#';\n            this._username = base._username;\n            this._password = base._password;\n            state = 'fragment';\n          } else {\n            var nextC = input[cursor + 1];\n            var nextNextC = input[cursor + 2];\n            if (\n              'file' != this._scheme ||\n              !ALPHA.test(c) ||\n              (nextC != ':' && nextC != '|') ||\n              (EOF != nextNextC &&\n                '/' != nextNextC &&\n                '\\\\' != nextNextC &&\n                '?' != nextNextC &&\n                '#' != nextNextC)\n            ) {\n              this._host = base._host;\n              this._port = base._port;\n              this._username = base._username;\n              this._password = base._password;\n              this._path = base._path.slice();\n              this._path.pop();\n            }\n            state = 'relative path';\n            continue;\n          }\n          break;\n\n        case 'relative slash':\n          if ('/' == c || '\\\\' == c) {\n            if ('\\\\' == c) {\n              err('\\\\ is an invalid code point.');\n            }\n            if ('file' == this._scheme) {\n              state = 'file host';\n            } else {\n              state = 'authority ignore slashes';\n            }\n          } else {\n            if ('file' != this._scheme) {\n              this._host = base._host;\n              this._port = base._port;\n              this._username = base._username;\n              this._password = base._password;\n            }\n            state = 'relative path';\n            continue;\n          }\n          break;\n\n        case 'authority first slash':\n          if ('/' == c) {\n            state = 'authority second slash';\n          } else {\n            err(\"Expected '/', got: \" + c);\n            state = 'authority ignore slashes';\n            continue;\n          }\n          break;\n\n        case 'authority second slash':\n          state = 'authority ignore slashes';\n          if ('/' != c) {\n            err(\"Expected '/', got: \" + c);\n            continue;\n          }\n          break;\n\n        case 'authority ignore slashes':\n          if ('/' != c && '\\\\' != c) {\n            state = 'authority';\n            continue;\n          } else {\n            err('Expected authority, got: ' + c);\n          }\n          break;\n\n        case 'authority':\n          if ('@' == c) {\n            if (seenAt) {\n              err('@ already seen.');\n              buffer += '%40';\n            }\n            seenAt = true;\n            for (var i = 0; i < buffer.length; i++) {\n              var cp = buffer[i];\n              if ('\\t' == cp || '\\n' == cp || '\\r' == cp) {\n                err('Invalid whitespace in authority.');\n                continue;\n              }\n              // XXX check URL code points\n              if (':' == cp && null === this._password) {\n                this._password = '';\n                continue;\n              }\n              var tempC = percentEscape(cp);\n              null !== this._password\n                ? (this._password += tempC)\n                : (this._username += tempC);\n            }\n            buffer = '';\n          } else if (\n            EOF == c ||\n            '/' == c ||\n            '\\\\' == c ||\n            '?' == c ||\n            '#' == c\n          ) {\n            cursor -= buffer.length;\n            buffer = '';\n            state = 'host';\n            continue;\n          } else {\n            buffer += c;\n          }\n          break;\n\n        case 'file host':\n          if (EOF == c || '/' == c || '\\\\' == c || '?' == c || '#' == c) {\n            if (\n              buffer.length == 2 &&\n              ALPHA.test(buffer[0]) &&\n              (buffer[1] == ':' || buffer[1] == '|')\n            ) {\n              state = 'relative path';\n            } else if (buffer.length == 0) {\n              state = 'relative path start';\n            } else {\n              this._host = IDNAToASCII.call(this, buffer);\n              buffer = '';\n              state = 'relative path start';\n            }\n            continue;\n          } else if ('\\t' == c || '\\n' == c || '\\r' == c) {\n            err('Invalid whitespace in file host.');\n          } else {\n            buffer += c;\n          }\n          break;\n\n        case 'host':\n        case 'hostname':\n          if (':' == c && !seenBracket) {\n            // XXX host parsing\n            this._host = IDNAToASCII.call(this, buffer);\n            buffer = '';\n            state = 'port';\n            if ('hostname' == stateOverride) {\n              break loop;\n            }\n          } else if (\n            EOF == c ||\n            '/' == c ||\n            '\\\\' == c ||\n            '?' == c ||\n            '#' == c\n          ) {\n            this._host = IDNAToASCII.call(this, buffer);\n            buffer = '';\n            state = 'relative path start';\n            if (stateOverride) {\n              break loop;\n            }\n            continue;\n          } else if ('\\t' != c && '\\n' != c && '\\r' != c) {\n            if ('[' == c) {\n              seenBracket = true;\n            } else if (']' == c) {\n              seenBracket = false;\n            }\n            buffer += c;\n          } else {\n            err('Invalid code point in host/hostname: ' + c);\n          }\n          break;\n\n        case 'port':\n          if (/[0-9]/.test(c)) {\n            buffer += c;\n          } else if (\n            EOF == c ||\n            '/' == c ||\n            '\\\\' == c ||\n            '?' == c ||\n            '#' == c ||\n            stateOverride\n          ) {\n            if ('' != buffer) {\n              var temp = parseInt(buffer, 10);\n              if (temp != relative[this._scheme]) {\n                this._port = temp + '';\n              }\n              buffer = '';\n            }\n            if (stateOverride) {\n              break loop;\n            }\n            state = 'relative path start';\n            continue;\n          } else if ('\\t' == c || '\\n' == c || '\\r' == c) {\n            err('Invalid code point in port: ' + c);\n          } else {\n            invalid.call(this);\n          }\n          break;\n\n        case 'relative path start':\n          if ('\\\\' == c) {\n            err(\"'\\\\' not allowed in path.\");\n          }\n          state = 'relative path';\n          if ('/' != c && '\\\\' != c) {\n            continue;\n          }\n          break;\n\n        case 'relative path':\n          if (\n            EOF == c ||\n            '/' == c ||\n            '\\\\' == c ||\n            (!stateOverride && ('?' == c || '#' == c))\n          ) {\n            if ('\\\\' == c) {\n              err('\\\\ not allowed in relative path.');\n            }\n            var tmp;\n            // eslint-disable-next-line no-cond-assign\n            if ((tmp = relativePathDotMapping[buffer.toLowerCase()])) {\n              buffer = tmp;\n            }\n            if ('..' == buffer) {\n              this._path.pop();\n              if ('/' != c && '\\\\' != c) {\n                this._path.push('');\n              }\n            } else if ('.' == buffer && '/' != c && '\\\\' != c) {\n              this._path.push('');\n            } else if ('.' != buffer) {\n              if (\n                'file' == this._scheme &&\n                this._path.length == 0 &&\n                buffer.length == 2 &&\n                ALPHA.test(buffer[0]) &&\n                buffer[1] == '|'\n              ) {\n                buffer = buffer[0] + ':';\n              }\n              this._path.push(buffer);\n            }\n            buffer = '';\n            if ('?' == c) {\n              this._query = '?';\n              state = 'query';\n            } else if ('#' == c) {\n              this._fragment = '#';\n              state = 'fragment';\n            }\n          } else if ('\\t' != c && '\\n' != c && '\\r' != c) {\n            buffer += percentEscape(c);\n          }\n          break;\n\n        case 'query':\n          if (!stateOverride && '#' == c) {\n            this._fragment = '#';\n            state = 'fragment';\n          } else if (EOF != c && '\\t' != c && '\\n' != c && '\\r' != c) {\n            this._query += percentEscapeQuery(c);\n          }\n          break;\n\n        case 'fragment':\n          if (EOF != c && '\\t' != c && '\\n' != c && '\\r' != c) {\n            this._fragment += c;\n          }\n          break;\n      }\n\n      cursor++;\n    }\n  }\n\n  function clear() {\n    this._scheme = '';\n    this._schemeData = '';\n    this._username = '';\n    this._password = null;\n    this._host = '';\n    this._port = '';\n    this._path = [];\n    this._query = '';\n    this._fragment = '';\n    this._isInvalid = false;\n    this._isRelative = false;\n  }\n\n  // Does not process domain names or IP addresses.\n  // Does not handle encoding for the query parameter.\n  /**\n   * @constructor\n   * @extends {URL}\n   * @param {!string} url\n   * @param {(URL|string)=} base\n   */\n  function jURL(url, base /* , encoding */) {\n    if (base !== undefined && !(base instanceof jURL)) {\n      base = new jURL(String(base));\n    }\n\n    this._url = '' + url;\n    clear.call(this);\n\n    var input = this._url.replace(/^[ \\t\\r\\n\\f]+|[ \\t\\r\\n\\f]+$/g, '');\n    // encoding = encoding || 'utf-8'\n\n    parse.call(this, input, null, base);\n  }\n\n  jURL.prototype = {\n    toString: function () {\n      return this.href;\n    },\n    get href() {\n      if (this._isInvalid) {\n        return this._url;\n      }\n\n      var authority = '';\n      if ('' != this._username || null != this._password) {\n        authority =\n          this._username +\n          (null != this._password ? ':' + this._password : '') +\n          '@';\n      }\n\n      return (\n        this.protocol +\n        (this._isRelative ? '//' + authority + this.host : '') +\n        this.pathname +\n        this._query +\n        this._fragment\n      );\n    },\n    set href(href) {\n      clear.call(this);\n      parse.call(this, href);\n    },\n\n    get protocol() {\n      return this._scheme + ':';\n    },\n    set protocol(protocol) {\n      if (this._isInvalid) {\n        return;\n      }\n      parse.call(this, protocol + ':', 'scheme start');\n    },\n\n    get host() {\n      return this._isInvalid\n        ? ''\n        : this._port\n        ? this._host + ':' + this._port\n        : this._host;\n    },\n    set host(host) {\n      if (this._isInvalid || !this._isRelative) {\n        return;\n      }\n      parse.call(this, host, 'host');\n    },\n\n    get hostname() {\n      return this._host;\n    },\n    set hostname(hostname) {\n      if (this._isInvalid || !this._isRelative) {\n        return;\n      }\n      parse.call(this, hostname, 'hostname');\n    },\n\n    get port() {\n      return this._port;\n    },\n    set port(port) {\n      if (this._isInvalid || !this._isRelative) {\n        return;\n      }\n      parse.call(this, port, 'port');\n    },\n\n    get pathname() {\n      return this._isInvalid\n        ? ''\n        : this._isRelative\n        ? '/' + this._path.join('/')\n        : this._schemeData;\n    },\n    set pathname(pathname) {\n      if (this._isInvalid || !this._isRelative) {\n        return;\n      }\n      this._path = [];\n      parse.call(this, pathname, 'relative path start');\n    },\n\n    get search() {\n      return this._isInvalid || !this._query || '?' == this._query\n        ? ''\n        : this._query;\n    },\n    set search(search) {\n      if (this._isInvalid || !this._isRelative) {\n        return;\n      }\n      this._query = '?';\n      if ('?' == search[0]) {\n        search = search.slice(1);\n      }\n      parse.call(this, search, 'query');\n    },\n\n    get hash() {\n      return this._isInvalid || !this._fragment || '#' == this._fragment\n        ? ''\n        : this._fragment;\n    },\n    set hash(hash) {\n      if (this._isInvalid) {\n        return;\n      }\n      if (!hash) {\n        this._fragment = '';\n        return;\n      }\n      this._fragment = '#';\n      if ('#' == hash[0]) {\n        hash = hash.slice(1);\n      }\n      parse.call(this, hash, 'fragment');\n    },\n\n    get origin() {\n      var host;\n      if (this._isInvalid || !this._scheme) {\n        return '';\n      }\n      // javascript: Gecko returns String(\"\"), WebKit/Blink String(\"null\")\n      // Gecko throws error for \"data://\"\n      // data: Gecko returns \"\", Blink returns \"data://\", WebKit returns \"null\"\n      // Gecko returns String(\"\") for file: mailto:\n      // WebKit/Blink returns String(\"SCHEME://\") for file: mailto:\n      switch (this._scheme) {\n        case 'data':\n        case 'file':\n        case 'javascript':\n        case 'mailto':\n          return 'null';\n      }\n      host = this.host;\n      if (!host) {\n        return '';\n      }\n      return this._scheme + '://' + host;\n    },\n  };\n\n  // Copy over the static methods\n  var OriginalURL = scope.URL;\n  if (OriginalURL) {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    jURL['createObjectURL'] = function (blob) {\n      // IE extension allows a second optional options argument.\n      // http://msdn.microsoft.com/en-us/library/ie/hh772302(v=vs.85).aspx\n      return OriginalURL.createObjectURL.apply(OriginalURL, arguments);\n    };\n    jURL['revokeObjectURL'] = function (url) {\n      OriginalURL.revokeObjectURL(url);\n    };\n  }\n\n  scope.URL = jURL;\n})(window);\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n(function() {\n\n  'use strict';\n\n  // defaultPrevented is broken in IE.\n  // https://connect.microsoft.com/IE/feedback/details/790389/event-defaultprevented-returns-false-after-preventdefault-was-called\n  var workingDefaultPrevented = (function() {\n    var e = document.createEvent('Event');\n    e.initEvent('foo', true, true);\n    e.preventDefault();\n    return e.defaultPrevented;\n  })();\n\n  if (!workingDefaultPrevented) {\n    var origPreventDefault = Event.prototype.preventDefault;\n    Event.prototype.preventDefault = function() {\n      if (!this.cancelable) {\n        return;\n      }\n\n      origPreventDefault.call(this);\n\n      Object.defineProperty(this, 'defaultPrevented', {\n        get: function() {\n          return true;\n        },\n        configurable: true\n      });\n    };\n  }\n\n  var isIE = /Trident/.test(navigator.userAgent);\n\n  // Event constructor shim\n  if (!window.Event || isIE && (typeof window.Event !== 'function')) {\n    var origEvent = window.Event;\n    /**\n     * @param {!string} inType\n     * @param {?(EventInit)=} params\n     */\n    window.Event = function(inType, params) {\n      params = params || {};\n      var e = document.createEvent('Event');\n      e.initEvent(inType, Boolean(params.bubbles), Boolean(params.cancelable));\n      return e;\n    };\n    if (origEvent) {\n      for (var i in origEvent) {\n        window.Event[i] = origEvent[i];\n      }\n      window.Event.prototype = origEvent.prototype;\n    }\n  }\n\n  // CustomEvent constructor shim\n  if (!window.CustomEvent || isIE && (typeof window.CustomEvent !== 'function')) {\n    /**\n     * @template T\n     * @param {!string} inType\n     * @param {?(CustomEventInit<T>)=} params\n     */\n    window.CustomEvent = function(inType, params) {\n      params = params || {};\n      var e = /** @type {!CustomEvent} */ (document.createEvent('CustomEvent'));\n      e.initCustomEvent(inType, Boolean(params.bubbles), Boolean(params.cancelable), params.detail);\n      return e;\n    };\n    window.CustomEvent.prototype = window.Event.prototype;\n  }\n\n  if (!window.MouseEvent || isIE && (typeof window.MouseEvent !== 'function')) {\n    var origMouseEvent = window.MouseEvent;\n    /**\n     *\n     * @param {!string} inType\n     * @param {?(MouseEventInit)=} params\n     */\n    window.MouseEvent = function(inType, params) {\n      params = params || {};\n      var e = document.createEvent('MouseEvent');\n      e.initMouseEvent(inType,\n        Boolean(params.bubbles), Boolean(params.cancelable),\n        params.view || window, params.detail,\n        params.screenX, params.screenY, params.clientX, params.clientY,\n        params.ctrlKey, params.altKey, params.shiftKey, params.metaKey,\n        params.button, params.relatedTarget);\n      return e;\n    };\n    if (origMouseEvent) {\n      for (var i in origMouseEvent) {\n        window.MouseEvent[i] = origMouseEvent[i];\n      }\n    }\n    window.MouseEvent.prototype = origMouseEvent.prototype;\n  }\n\n  // ES6 stuff\n  if (!Array.from) {\n    Array.from = function (object) {\n      return [].slice.call(/** @type {IArrayLike} */(object));\n    };\n  }\n\n  if (!Object.assign) {\n    var assign = function(target, source) {\n      var n$ = Object.getOwnPropertyNames(source);\n      for (var i=0, p; i < n$.length; i++) {\n        p = n$[i];\n        target[p] = source[p];\n      }\n    }\n\n    Object.assign = function(target, sources) {\n      var args = [].slice.call(arguments, 1);\n      for (var i=0, s; i < args.length; i++) {\n        s = args[i];\n        if (s) {\n          assign(target, s);\n        }\n      }\n      return target;\n    }\n  }\n\n})();\n"],"names":["n","window","Document","prototype","createElement","p","createElementNS","aa","importNode","ba","prepend","ca","append","da","DocumentFragment","ea","q","Node","cloneNode","r","appendChild","t","insertBefore","u","removeChild","v","replaceChild","w","Object","getOwnPropertyDescriptor","y","Element","attachShadow","z","A","getAttribute","B","setAttribute","C","removeAttribute","D","toggleAttribute","E","getAttributeNS","F","setAttributeNS","G","removeAttributeNS","H","insertAdjacentElement","fa","insertAdjacentHTML","ha","ia","ja","before","ka","after","la","replaceWith","ma","remove","na","HTMLElement","I","oa","pa","qa","Set","split","forEach","a","add","ra","isValidCustomElementName","b","has","test","sa","document","contains","bind","documentElement","J","isConnected","__CE_isImportDocument","parentNode","ShadowRoot","host","K","childrenFromFragment","children","Array","slice","call","firstChild","nextSibling","nodeType","ELEMENT_NODE","push","L","nextSiblingOrAncestorSibling","M","walkDeepDescendantElements","d","f","c","e","localName","import","__CE_shadowRoot","N","CustomElementInternals","O","noDocumentConstructionObserver","shadyDomFastWalk","m","g","j","P","ShadyDOM","inUse","querySelectorAll","nativeMethods","length","ta","ua","Q","R","__CE_patched","S","__CE_state","connectedCallback","T","U","disconnectedCallback","V","upgrade","h","__CE_registry","readyState","__CE_documentLoadHandled","addEventListener","k","l","delete","ownerDocument","defaultView","W","constructionStack","constructorFunction","Error","pop","__CE_definition","attributeChangedCallback","hasAttributes","observedAttributes","X","indexOf","va","namespaceURI","setPrototypeOf","HTMLUnknownElement","message","sourceURL","fileName","line","lineNumber","column","columnNumber","String","ErrorEvent","initErrorEvent","cancelable","filename","lineno","colno","error","createEvent","preventDefault","defineProperty","configurable","get","enumerable","dispatchEvent","defaultPrevented","console","wa","Deferred","Promise","resolve","xa","DocumentConstructionObserver","MutationObserver","observe","childList","subtree","ya","disconnect","addedNodes","Y","CustomElementRegistry","s","Map","o","i","Function","TypeError","za","set","Aa","define","Ba","SyntaxError","x","adoptedCallback","whenDefined","reject","polyfillWrapFlushCallback","polyfillDefineLazy","Z","appendPrependPatch","arguments","apply","Ca","Da","beforeAfterPatch","Ea","patch_innerHTML","patch_insertAdjacentElement","patch_insertAdjacentHTML","upgradeNodesInRange","toLowerCase","previousSibling","lastChild","innerHTML","content","childNodes","Fa","Ga","constructor","writable","value","Ha","patch_textContent","TEXT_NODE","COMMENT_NODE","textContent","join","createTextNode","customElements","Ia","installPolyfill","forcePolyfill","__CE_installPolyfill","needsTemplate","HTMLTemplateElement","brokenDocFragment","createDocumentFragment","needsDocFrag","navigator","userAgent","origCloneNode","deep","newDom","__proto__","querySelector","defineProperties","DOCUMENT_FRAGMENT_NODE","undefined","origInsertBefore","newNode","refNode","child","origAppendChild","origRemoveChild","origReplaceChild","newChild","oldChild","frag","origImportNode","impNode","capturedCloneNode","capturedCreateElement","capturedImportNode","capturedRemoveChild","capturedAppendChild","capturedReplaceChild","capturedParseFromString","DOMParser","parseFromString","capturedHTMLElementInnerHTML","text","capturedChildNodes","elementQuerySelectorAll","docQuerySelectorAll","fragQuerySelectorAll","scriptSelector","QSA","node","selector","DOCUMENT_NODE","needsCloning","t2","clone","TEMPLATE_TAG","PolyfilledHTMLTemplateElement","contentDoc","implementation","createHTMLDocument","canDecorate","templateStyle","head","firstElementChild","create","canProtoPatch","hasOwnProperty","decorate","template","_cloneNode","defineInnerHTML","defineOuterHTML","err","bootstrap","topLevelWrappingMap","getTagName","exec","obj","getInnerHTML","wrap","body","concat","docFrag","doc","templates","el","escapeAttrRegExp","escapeDataRegExp","escapeReplace","escapeAttr","replace","escapeData","makeSet","arr","voidElements","plaintextParents","getOuterHTML","callback","tagName","attrs","attributes","attr","name","data","c$","fixClonedDom","source","s$","t$","fixClonedScripts","fragment","scripts","ns","ai","dom","element","Window","forceJURL","scope","hasWorkingUrl","URL","pathname","href","relative","relativePathDotMapping","isRelativeScheme","scheme","invalid","clear","_isInvalid","IDNAToASCII","percentEscape","unicode","charCodeAt","encodeURIComponent","percentEscapeQuery","EOF","ALPHA","ALPHANUMERIC","parse","input","stateOverride","base","errors","state","cursor","buffer","seenAt","seenBracket","loop","_scheme","_isRelative","_query","_fragment","_schemeData","_host","_port","_path","_username","_password","nextC","nextNextC","cp","tempC","temp","parseInt","tmp","jURL","url","_url","toString","authority","protocol","hostname","port","search","hash","origin","OriginalURL","blob","createObjectURL","revokeObjectURL","workingDefaultPrevented","initEvent","origPreventDefault","Event","isIE","origEvent","inType","params","Boolean","bubbles","CustomEvent","initCustomEvent","detail","MouseEvent","origMouseEvent","initMouseEvent","view","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","from","object","assign","target","n$","getOwnPropertyNames","sources","args"],"sourceRoot":""}